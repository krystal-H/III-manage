(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1417:function(e,t,n){"use strict";n(48),n(49),n(19),n(38),n(22),n(39),n(30),n(31),n(32);var a=n(0),r=n.n(a);n(1418);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,n,a,o=u(s);function s(){return l(this,s),o.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title;return r.a.createElement("div",{className:"title-tab"},r.a.createElement("div",{className:"title-tab-option"},r.a.createElement("span",{className:"title-tab-title"},n)),r.a.createElement("div",{className:"title-tab-option"},t))}}])&&i(t.prototype,n),a&&i(t,a),s}(r.a.Component);m.Option=function(e){var t=e.children,n=e.label,a=e.align,o=void 0===a?"left":a;return r.a.createElement("div",{className:"".concat("left"===o?"title-tab-item":"title-tab-item-right")},r.a.createElement("span",{className:n?"title-table-label":"title-table-label-non"},n?n+":":""),t)},t.a=m},1418:function(e,t,n){},1424:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return i}));var a=n(3),r=function(e){return a.b.request({url:"/manage-open/panel/template/getTemplateListByPage",data:e,method:"post",headers:{}})},o=function(e){return a.b.request({url:"/manage-open/panel/template/saveStandardPanel",method:"post",data:e,headers:{}})},l=function(e){return a.b.request({url:"/manage-open/physicalModel/list/deviceTypeId/".concat(e),method:"get"})},i=function(e){return a.b.request({url:"/manage-open/physicalModel/func/list",method:"post",data:e,headers:{}})}},1429:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"i",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return y}));var a=n(3),r="/manage-open",o=function(e){return a.b.request({url:r+"/module/search",method:"post",data:e,headers:{"Content-Type":"application/json"}})},l=function(e){return a.b.request({url:r+"/module/type/getAllModuleBrandList",method:"get"})},i=function(){return a.b.request({url:r+"/module/type/getList",method:"post",data:[],headers:{"Content-Type":"application/json"}})},c=function(){return a.b.request({url:r+"/module/type/getMenu",method:"get"})},u=function(e){return a.b.request({url:r+"/module/type/bindSceneType/list",params:{moduleId:e},method:"get"})},s=function(){return a.b.request({url:r+"/module/type/getMenu",method:"get"})},d=function(e){return a.b.request({url:r+"/module/create",method:"post",data:e,headers:{"Content-Type":"application/json"}})},m=function(e){return a.b.request({url:r+"/module/update",method:"post",data:e,headers:{"Content-Type":"application/json"}})},p=function(e,t){return a.b.request({url:r+"/module/type/release",params:{moduleId:e,releaseStatus:t},method:"get"})},f=function(e){return a.b.request({url:"".concat(r,"/module/delete/").concat(e),method:"get"})},y=function(e){return a.b.request({url:"".concat(r,"/module/detail/").concat(e)})}},1476:function(e,t,n){},1477:function(e,t,n){},1478:function(e,t,n){},1479:function(e,t,n){},1500:function(e,t,n){"use strict";n.r(t);n(97),n(256);var a=n(0),r=n.n(a),o=n(58),l=(n(19),n(38),n(39),n(30),n(31),n(32),n(220),n(255),n(297),n(34),n(43),n(33),n(44),n(98),n(37)),i=(n(155),n(40)),c=(n(196),n(76)),u=(n(296),n(156)),s=(n(221),n(83)),d=(n(75),n(20)),m=(n(254),n(128)),p=n(1387),f=n.n(p),y=(n(67),n(22),n(72),n(817),n(197),n(36),n(1417)),b=n(106),h=(n(820),n(366)),v=(n(298),n(116)),g=(n(465),n(169)),E=c.a.Option,O={display:"block",height:"30px",lineHeight:"30px"};function w(e,t){var n=e.form,o=e.setStepCur,l=e.thirdCategoryList,u=e.editData,s=void 0===u?{}:u;e.opeType;Object(a.useImperativeHandle)(t,(function(){return{onFinish:d}}));var d=function(){n.validateFields((function(e,t){e||(console.log("Received values of form: ",t),o(1,t))}))},m=n.getFieldDecorator;return r.a.createElement(i.a,{labelCol:{span:10},wrapperCol:{span:14},onSubmit:function(){return d()}},r.a.createElement(i.a.Item,{label:"产品三级分类"},m("deviceTypeId",{initialValue:s.deviceTypeId,rules:[{required:!0,message:"请选择产品三级分类"}]})(r.a.createElement(c.a,{placeholder:"请选择产品三级分类",style:{width:220},showSearch:!0,optionFilterProp:"children",onChange:function(e){return function(e){sessionStorage.setItem("categoryId",e)}(e)}},l&&l.length>0&&l.map((function(e){return r.a.createElement(E,{key:e.deviceTypeId,value:e.deviceTypeId},e.deviceTypeName)}))))),r.a.createElement(i.a.Item,{label:"品类可支持方案"},m("type",{initialValue:s.type,rules:[{required:!0,message:"请选择品类可支持方案"}]})(r.a.createElement(g.a.Group,{onChange:function(e){return function(e){console.log("radio checked",e.target.value)}(e)}},r.a.createElement(g.a,{style:O,value:1},"免开发方案"),r.a.createElement(g.a,{style:O,value:2},"独立MCU方案"),r.a.createElement(g.a,{style:O,value:3},"Soc方案")))))}var I=i.a.create()(Object(a.forwardRef)(w)),j=(n(1381),n(1382)),S=(n(167),n(7)),T=(n(137),n(68)),C=n(29);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var q=c.a.Option,A=T.a.TextArea;function N(e,t){var n=e.setStepCur,o=e.form,l=e.communicationMethodsList,s=e.editData,p=void 0===s?{}:s,f=e.opeType,y=x(Object(a.useState)([]),2),b=y[0],h=y[1],v=x(Object(a.useState)(!1),2),g=v[0],E=v[1];Object(a.useEffect)((function(){"edit"===f&&p.picture&&h([{url:p.picture,name:"简介图",uid:1}])}),[p]);var O=function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||u.a.error("只能上传JPG或者PNG格式");var n=e.name.length<=50;return n||u.a.error("文件名称长度不超过50个字符"),t&&n},w=function(){o.validateFields((function(e,t){e||(t.picture=b[0].url||"",console.log("Received values of form: ",t),n(2,t))}))};Object(a.useImperativeHandle)(t,(function(){return{onFinish:w}}),[b]);var I={action:C.j,className:"upload-list-inline",data:function(e){return{appId:31438,domainType:4}}},P=o.getFieldDecorator;o.getFieldValue;return r.a.createElement(i.a,{labelCol:{span:4},wrapperCol:{span:18}},r.a.createElement(i.a.Item,{label:"方案名称"},P("name",{initialValue:p.name,rules:[{required:!0,message:"请输入方案名称",whitespace:!0}]})(r.a.createElement(T.a,{placeholder:"请输入方案名称",maxLength:50}))),r.a.createElement(i.a.Item,{label:"通信协议",hasFeedback:!0},P("protocol",{initialValue:p.protocol,rules:[{required:!0,message:"请选择通信协议"}]})(r.a.createElement(c.a,{placeholder:"请选择通信协议",showSearch:!0,optionFilterProp:"children",onChange:function(e){return sessionStorage.setItem("communicationType",e)}},l&&l.map((function(e,t){return r.a.createElement(q,{value:e.moduleType,key:e.moduleType},e.moduleTypeName)}))))),r.a.createElement(i.a.Item,{label:"概况",hasFeedback:!0},P("summarize",{initialValue:p.summarize,rules:[{required:!0,message:"请输入概况"}]})(r.a.createElement(A,{rows:3,autoSize:{minRows:3,maxRows:3}}))),r.a.createElement(i.a.Item,{label:"特点",hasFeedback:!0},P("feature",{initialValue:p.feature,rules:[{required:!0,message:"请输入特点"}]})(r.a.createElement(A,{rows:3,autoSize:{minRows:3,maxRows:3}}))),r.a.createElement(i.a.Item,{label:"适合场景",hasFeedback:!0},P("illustrate",{initialValue:p.illustrate,rules:[{required:!0,message:"请输入适合场景"}]})(r.a.createElement(A,{rows:3,autoSize:{minRows:3,maxRows:3}}))),r.a.createElement(i.a.Item,{label:"简介图",extra:"支持格式：png、jpg 建议尺寸：134 * 188px",wrapperCol:{span:10}},P("picture",{initialValue:p.picture,rules:[{required:!0,message:"请上传简介图"}]})(r.a.createElement("div",null,r.a.createElement(j.a,k({},I,{listType:"picture",defaultFileList:"edit"===f?[{url:p.picture,name:"简介图",uid:1}]:[],onPreview:function(){return E(!0)},beforeUpload:function(){return O},accept:"image/png,image/jpeg",onChange:function(e){console.log("上传的info",e);var t=e.file;e.fileList;"done"===t.status?(h([{status:"done",name:t.name,url:t.response.data.url}]),o.setFieldsValue({picture:t.response.data.url})):"error"===t.status?(u.a.error("".concat(e.file.name," 上传失败")),h(""),o.setFieldsValue({picture:""})):(h(""),o.setFieldsValue({picture:""}))}}),b&&b.length>=1?null:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"上传文档";return r.a.createElement(d.a,null,r.a.createElement(S.a,{type:"upload"}),e)}("上传图片"))))),r.a.createElement(m.a,{visible:g,footer:null,onCancel:function(){return E(!1)}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:b&&b.length&&b[0].url})))}N=Object(a.forwardRef)(N);var R=i.a.create()(N),F=(n(362),n(198)),M=(n(361),n(257),n(301),n(1476),n(3)),L="/manage-open",D=function(e){return M.b.request({url:L+"/physicalModel/list/deviceTypeId/"+e,method:"get"})},V=function(e){return M.b.request({url:L+"/module/listModuleByModuleType",method:"post",data:e,headers:{"Content-Type":"application/json"}})},z=n(1424);function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var B={r:"可上报",w:"可下发",rw:"可下发可上报"};function $(e,t){var n=e.form,o=e.commitAll,l=e.editData,u=void 0===l?{}:l,s=e.opeType,d=U(Object(a.useState)([]),2),m=d[0],p=d[1],f=U(Object(a.useState)([]),2),y=f[0],b=f[1],h=U(Object(a.useState)([]),2),v=h[0],g=h[1],E=U(Object(a.useState)([]),2),O=E[0],w=E[1],I=[{title:"功能名称",dataIndex:"funcName",key:"funcName"},{title:"标识符",dataIndex:"funcIdentifier",key:"funcIdentifier"},{title:"数据传输类型",dataIndex:"funcParamList",key:"funcParamList",render:function(e){return r.a.createElement("span",null,B[e[0].accessMode])}}];Object(a.useImperativeHandle)(t,(function(){return{onFinish:j}}));var j=function(){n.validateFields((function(e,t){e||(console.log("Received values of form: ",t),t.moduleIds=t.moduleIds.join("#"),t.panelId=-1,o(t))}))},S=function(e){var t;(t={id:e},M.b.request({url:L+"/physicalModel/func/list",method:"post",data:t,headers:{"Content-Type":"application/json"}})).then((function(e){e.data.data&&b(e.data.data)}))};Object(a.useEffect)((function(){var e,t,n,a;e="edit"===s?u.deviceTypeId:sessionStorage.getItem("categoryId"),D(e).then((function(e){e.data.data&&p(e.data.data)})),t=sessionStorage.getItem("communicationType"),n="edit"===s?u.protocol.toString().split(""):t.split(""),V(n).then((function(e){e.data.data&&g(e.data.data)})),a={deviceTypeId:sessionStorage.getItem("categoryId")||u.deviceTypeId||"",templateName:"",pageIndex:1,pageRows:5},Object(z.a)(a).then((function(e){e.data.data&&w(e.data.data.list)})),"edit"===s&&S(u.physicalModelId)}),[]);var T,C,k,x=n.getFieldDecorator;n.validateFields;return r.a.createElement("div",{className:"config-scheme-detail"},r.a.createElement(i.a,{labelCol:{span:3},wrapperCol:{span:19},onSubmit:function(){return j()}},r.a.createElement(i.a.Item,{label:"方案功能点"},x("physicalModelId",{initialValue:u.physicalModelId?u.physicalModelId:"",rules:[{required:!0,message:"请选择此三级品类关联的物模型"}]})(r.a.createElement(c.a,{placeholder:"请选择此三级品类关联的物模型",style:{width:250,marginBottom:10},showSearch:!0,optionFilterProp:"children",onChange:function(e){return function(e){S(e)}(e)}},m&&m.map((function(e){return r.a.createElement(c.a.Option,{value:e.id,key:e.id},e.name)})))),r.a.createElement(F.a,(T={className:"config-table",dataSource:y.standard,rowKey:"funcIdentifier",columns:I,pagination:!1,scroll:{y:140}},k=!1,(C="pagination")in T?Object.defineProperty(T,C,{value:k,enumerable:!0,configurable:!0,writable:!0}):T[C]=k,T))),r.a.createElement(i.a.Item,{label:"方案控制面板"},"此三级品类关联的控制面板如下",r.a.createElement("div",{className:"control-panel-box"},O&&O.map((function(e){return r.a.createElement("div",{className:"panel-item",key:e.templateId},r.a.createElement("div",{className:"panel-item-pic"},r.a.createElement("img",{src:e.page1,alt:"pic"})),r.a.createElement("div",{className:"panel-item-tip"},e.templateName))})))),r.a.createElement(i.a.Item,{label:"对应模组"},x("moduleIds",{initialValue:u.moduleIds?u.moduleIds.split("#").map((function(e){return e-0})):[],rules:[{required:!0,message:"请选择对应模组"}]})(r.a.createElement(c.a,{placeholder:"请选择对应支持模组",mode:"multiple",showSearch:!0,optionFilterProp:"children"},v&&v.map((function(e){return r.a.createElement(c.a.Option,{value:e.moduleId,key:e.moduleId},e.moduleName)})))))))}var H=i.a.create()(Object(a.forwardRef)($));n(1477);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var X=v.a.TabPane,Y=h.a.Step,Z=["选择品类方案","配置方案简介","配置方案详情"];var ee=i.a.create()((function(e){var t=e.visible,n=e.handleOk,o=e.handleCancel,l=e.thirdCategoryList,i=e.communicationMethodsList,c=e.getTableData,s=e.opeType,p=e.editData,y=Q(Object(a.useState)(0),2),b=y[0],g=y[1],E=Object(a.useRef)(),O=Object(a.useRef)(),w=Object(a.useRef)(),j=Q(Object(a.useState)({one:{},two:{},three:{}}),2),S=j[0],T=j[1],C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;0===b?T((function(e){var n=f()(e);return n.one=f()(t),n})):1===b&&T((function(e){var n=f()(e);return n.two=f()(t),n})),g(e)};return r.a.createElement(m.a,{title:"edit"===s?"编辑":"新增",width:900,visible:t,onOk:n,onCancel:o,maskClosable:!1,wrapClassName:"add-scheme",footer:[0!==b&&r.a.createElement(d.a,{key:"previous",onClick:function(){g(b-1)}},"上一步"),r.a.createElement(d.a,{type:"primary",key:"next",onClick:function(){0===b?(console.log(E,"refScheme"),E.current.onFinish()):1===b?O.current.onFinish():2===b&&w.current.onFinish()}},2===b?"提交":"下一步")]},r.a.createElement("div",{className:"add-scheme-modal"},r.a.createElement("div",{className:"step-box"},r.a.createElement(h.a,{current:b},Z.map((function(e,t){return r.a.createElement(Y,{key:e,title:e})})))),r.a.createElement("div",{className:"formbox"},r.a.createElement(v.a,{activeKey:b+"",animated:!1},r.a.createElement(X,{tab:"选择品类方案",key:"0"},r.a.createElement(I,{thirdCategoryList:l,wrappedComponentRef:E,setStepCur:C,editData:p,opeType:s})),r.a.createElement(X,{tab:"配置方案简介",key:"1"},r.a.createElement(R,{communicationMethodsList:i,wrappedComponentRef:O,setStepCur:C,editData:p,opeType:s})),r.a.createElement(X,{tab:"配置方案详情",key:"2"},r.a.createElement(H,{wrappedComponentRef:w,setStepCur:C,commitAll:function(e){var t=G(G(G({},S.one),S.two),e);console.log(t),"edit"===s?(t.id=p.id,console.log(t),function(e){return M.b.request({url:L+"/scheme/update",method:"post",data:e,headers:{"Content-Type":"application/json"}})}(t).then((function(e){0===e.data.code&&(u.a.success("提交成功"),o(),c())}))):function(e){return M.b.request({url:L+"/scheme/create",method:"post",data:e,headers:{"Content-Type":"application/json"}})}(t).then((function(e){0===e.data.code&&(u.a.success("提交成功"),o(),c())}))},editData:p,opeType:s}))))))})),te=n(1429),ne=(n(302),n(64));n(1478);function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var oe={1:"免开发方案",2:"独立MCU方案",3:"Soc方案"};var le=function(e){var t=e.visible,n=e.handleOk,o=e.handleCancel,l=e.editData,i=void 0===l?{}:l,c=e.thirdCategoryList,u=e.communicationMethodsList,s=ae(Object(a.useState)(""),2),d=s[0],p=s[1],f=ae(Object(a.useState)([]),2),y=f[0],b=f[1],h=ae(Object(a.useState)([]),2),v=h[0],g=h[1],E=ae(Object(a.useState)([]),2),O=E[0],w=E[1];Object(a.useEffect)((function(){I(),j();var e=c.filter((function(e){return e.deviceTypeId==i.deviceTypeId}));p(e[0].deviceTypeName),u&&u.map((function(e){i.protocol==e.moduleType&&w(e.moduleTypeName)}))}),[i]);var I=function(){D(i.deviceTypeId).then((function(e){if(e.data.data){var t=e.data.data.filter((function(e){return e.id===i.physicalModelId}));b(t[0].name)}}))},j=function(){var e=i.protocol.toString().split("")||"";V(e).then((function(e){if(e.data.data){var t=[];i.moduleIds.split("#").forEach((function(n){e.data.data.forEach((function(e){n==e.moduleId&&t.push(e.moduleName)}))})),g(t.join(" , "))}}))};return r.a.createElement(m.a,{width:800,title:"查看方案",visible:t,onOk:n,onCancel:o,maskClosable:!1,wrapClassName:"view-scheme-modal"},r.a.createElement(ne.a,{title:"品类方案",size:"small",column:4},r.a.createElement(ne.a.Item,{label:"产品三级品类",span:2},d),r.a.createElement(ne.a.Item,{label:"品类支持方案",span:2},oe[i.type]||"-")),r.a.createElement("br",null),r.a.createElement(ne.a,{title:"方案简介",size:"small",column:1},r.a.createElement(ne.a.Item,{label:"方案名称",span:2},i.name),r.a.createElement(ne.a.Item,{label:"通信协议",span:2},O),r.a.createElement(ne.a.Item,{label:"概述",span:2},i.summarize),r.a.createElement(ne.a.Item,{label:"特点",span:2},i.feature),r.a.createElement(ne.a.Item,{label:"适合场景",span:2},i.illustrate),r.a.createElement(ne.a.Item,{label:"简介图"},r.a.createElement("div",{className:"desc-pic"},r.a.createElement("img",{src:i.picture,alt:"pic"})))),r.a.createElement("br",null),r.a.createElement(ne.a,{title:"方案详情",size:"small",column:1},r.a.createElement(ne.a.Item,{label:"方案物模型",span:2},y),r.a.createElement("br",null),r.a.createElement(ne.a.Item,{label:"对应模组",span:2},v)))};n(1479);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var de=m.a.confirm,me={1:"草稿",2:"已发布"},pe={1:"免开发",2:"MCU方案",3:"Soc方案"};var fe=i.a.create()((function(e){var t=e.form,n=ue(Object(a.useState)({pageIndex:1,pageRows:10}),2),o=n[0],m=n[1],p=ue(Object(a.useState)(0),2),h=p[0],v=p[1],g=ue(Object(a.useState)([]),2),E=g[0],O=g[1],w=ue(Object(a.useState)(!1),2),I=w[0],j=w[1],S=ue(Object(a.useState)(!1),2),T=S[0],C=S[1],k=ue(Object(a.useState)([]),2),x=k[0],P=k[1],q=t.getFieldDecorator,A=t.getFieldsValue,N=ue(Object(a.useState)({}),2),R=N[0],F=N[1],D=ue(Object(a.useState)(!1),2),V=D[0],z=D[1],U=ue(Object(a.useState)(!1),2),_=U[0],B=U[1],$=ue(Object(a.useState)(!1),2),H=$[0],J=$[1],G=[{title:"修改账号",dataIndex:"account",key:"account",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"品类",dataIndex:"deviceType",key:"deviceType",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"方案类型",dataIndex:"type",key:"type",render:function(e){return r.a.createElement("span",null,pe[e]||"")}},{title:"方案名称",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"状态",dataIndex:"status",key:"status",render:function(e){return r.a.createElement("span",{style:{color:"".concat(["","green","gray"][e])}},me[e])}},{title:"更新时间",dataIndex:"updateTime",key:"updateTime",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"操作",dataIndex:"productId",key:"operation",width:180,render:function(e,t){return r.a.createElement("div",null,K(t))}}],K=function(e){return(2===e.status?[{title:"查看",icon:"info",key:"view"}]:[{title:"发布",icon:"cloud-upload",key:"release"},{title:"编辑",icon:"edit",key:"edit"}]).map((function(t,n){return Q(t,e)}))},Q=function(e,t){return r.a.createElement(s.a,{key:e.key,placement:"top",title:e.title},r.a.createElement(d.a,{style:{marginLeft:"10px"},shape:"circle",size:"small",icon:e.icon,key:e.templateId,onClick:function(){return X(e,t)}}))},W=function(e,t){var n;(n={id:e},M.b.request({url:L+"/scheme/detail",method:"post",data:n,headers:{"Content-Type":"application/json"}})).then((function(e){e.data.data?(J(e.data.data),"view"===t?z(!0):B(!0)):u.a.warning("返回数据不存在")}))},X=function(e,t){switch(console.log(e.key),e.key){case"release":de({title:"发布方案",content:"确认发布后，方案信息将会同步到开放平台,确定要这样做吗？",okText:"确定",cancelText:"取消",onOk:function(){Y(t)},onCancel:function(){}});break;case"view":W(t.id,"view");break;case"edit":W(t.id,"edit")}},Y=function(e){var t;(t={id:e.id},M.b.request({url:L+"/scheme/publish",method:"post",data:t,headers:{"Content-Type":"application/json"}})).then((function(e){0===e.data.code&&(u.a.success("发布成功"),ne())}))},Z=function(){1===o.pageIndex?ne():m({pageIndex:1,pageRows:10})},ne=function(){j(!0);var e=A(),t=e.deviceTypeId,n=e.status;(function(e){return M.b.request({url:L+"/scheme/search",method:"post",data:e,headers:{"Content-Type":"application/json"}})})(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({deviceTypeId:t||"",status:n||""},o)).then((function(e){0===e.data.code&&(O(e.data.data.list),v(e.data.data.pager.totalRows))})).finally((function(){j(!1)}))};Object(a.useEffect)((function(){ne()}),[o.pageRows,o.pageIndex]);var ae=function(){var e;(e={},M.b.request({url:L+"/deviceCategory/deviceType/all",params:e,method:"get"})).then((function(e){P(e.data.data)}))};return Object(a.useEffect)((function(){ae(),Object(te.h)().then((function(e){F(e.data.data)}))}),[]),r.a.createElement("div",{className:"schemeList"},r.a.createElement(y.a,{title:"方案信息导入"},r.a.createElement(i.a,{layout:"inline",className:"schemeList-form"},r.a.createElement("div",null,r.a.createElement(i.a.Item,{label:"三级品类"},q("deviceTypeId")(r.a.createElement(c.a,{allowClear:!0,style:{width:240},placeholder:"搜索产品品类",showSearch:!0,optionFilterProp:"children"},x&&x.length>0&&x.map((function(e){return r.a.createElement(c.a.Option,{key:e.deviceTypeId,value:e.deviceTypeId},e.deviceTypeName)}))))),r.a.createElement(i.a.Item,{label:"状态"},q("status")(r.a.createElement(c.a,{style:{width:160},placeholder:"请选择状态"},Object.keys(me).map((function(e,t){return r.a.createElement(c.a.Option,{key:t,value:+e},me[e])}))))),r.a.createElement(i.a.Item,null,r.a.createElement(d.a,{type:"primary",onClick:function(){return Z()}},"查询")),r.a.createElement(i.a.Item,null,r.a.createElement(d.a,{onClick:function(){return t.resetFields(),void Z()}},"重置"))),r.a.createElement("div",null,r.a.createElement(i.a.Item,null,r.a.createElement(d.a,{type:"primary",onClick:function(){return C(!0)}},"新增"))))),r.a.createElement(l.a,null,r.a.createElement(b.a,{rowKey:"id",columns:G,dataSource:E,pager:o,loading:I,pagination:{defaultCurrent:1,current:o.pageIndex,onChange:function(e,t){m((function(n){var a=f()(n);return Object.assign(a,{pageIndex:t===o.pageRows?e:1,pageRows:t})}))},pageSize:o.pageRows,total:h,showQuickJumper:!1,showTotal:function(){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,h)," 条")}}})),T&&r.a.createElement(ee,{opeType:"add",visible:T,thirdCategoryList:x,communicationMethodsList:R.moduleTypeList,getTableData:ne,handleOk:function(){return C(!1)},handleCancel:function(){return C(!1)}}),_&&r.a.createElement(ee,{opeType:"edit",editData:H,visible:_,thirdCategoryList:x,communicationMethodsList:R.moduleTypeList,getTableData:ne,handleOk:function(){return B(!1)},handleCancel:function(){return B(!1)}}),V&&r.a.createElement(le,{visible:V,editData:H,thirdCategoryList:x,communicationMethodsList:R.moduleTypeList,handleOk:function(){return z(!1)},handleCancel:function(){return z(!1)}}))}));t.default=function(e){var t=e.match;return r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"".concat(t.url,"/list"),component:fe}),r.a.createElement(o.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}}}]);