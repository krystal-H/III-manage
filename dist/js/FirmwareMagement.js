(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1423:function(e,t,a){"use strict";a(48),a(49),a(19),a(37),a(22),a(38),a(28),a(30),a(31);var n=a(0),r=a.n(n);a(1424);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=d(e);if(t){var r=d(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return s(this,a)}}function s(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,e);var t,a,n,l=u(s);function s(){return i(this,s),l.apply(this,arguments)}return t=s,(a=[{key:"render",value:function(){var e=this.props,t=e.children,a=e.title;return r.a.createElement("div",{className:"title-tab"},r.a.createElement("div",{className:"title-tab-option"},r.a.createElement("span",{className:"title-tab-title"},a)),r.a.createElement("div",{className:"title-tab-option"},t))}}])&&c(t.prototype,a),n&&c(t,n),s}(r.a.Component);f.Option=function(e){var t=e.children,a=e.label,n=e.align,l=void 0===n?"left":n;return r.a.createElement("div",{className:"".concat("left"===l?"title-tab-item":"title-tab-item-right")},r.a.createElement("span",{className:a?"title-table-label":"title-table-label-non"},a?a+":":""),t)},t.a=f},1424:function(e,t,a){},1434:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return c}));var n=a(3),r=function(e){return n.c.request({url:"/manage-open/panel/template/getTemplateListByPage",data:e,method:"post",headers:{}})},l=function(e){return n.c.request({url:"/manage-open/panel/template/saveStandardPanel",method:"post",data:e,headers:{}})},i=function(e){return n.c.request({url:"/manage-open/physicalModel/list/deviceTypeId/".concat(e),method:"get"})},c=function(e){return n.c.request({url:"/manage-open/physicalModel/func/list",method:"post",data:e,headers:{}})}},1442:function(e,t,a){},1443:function(e,t,a){},1444:function(e,t,a){},1488:function(e,t,a){},1494:function(e,t,a){},1527:function(e,t,a){"use strict";a.r(t);a(19),a(37),a(38),a(28),a(30),a(31),a(199),a(256),a(35),a(34),a(43),a(33),a(44),a(98);var n=a(39),r=(a(75),a(20)),l=(a(137),a(69)),i=(a(198),a(76)),c=(a(297),a(156)),o=(a(255),a(128)),u=(a(155),a(40)),s=(a(221),a(823),a(22),a(66),a(467),a(168),a(65),a(0)),d=a.n(s),f=a(1423),p=a(106),m=(a(1387),a(1388)),y=(a(169),a(7)),b=(a(468),a(171)),g=(a(298),a(107)),v=(a(97),a(258),a(363),a(299),a(157)),h=(a(117),a(367),function(e,t,a,n,r){if(!Array.isArray(e))return 1;for(var l=e.map((function(e){return e[r]})),i=e.map((function(e){return e[t]})),c=l[0],o=[[c]],u=0,s=1;s<l.length;s++)l[s]===c?o[u].push(l[s]):(o[u+=1]=[],o[u].push(l[s]),c=l[s]);var d=[];o.forEach((function(e,t){d[t]=[],d[t]=i.splice(0,e.length)}));var f=[];d.forEach((function(e,t){var a=d[t][0],n=0;f[t]=[],f[t][n]=[],e.forEach((function(e,r){a===e?f[t][n].push(e):(n+=1,f[t][n]=[],f[t][n].push(e),a=e)}))}));var p=[];f.forEach((function(e){e.forEach((function(e){p.push(e)}))}));var m=[];p.forEach((function(e){for(var t=e.length,a=0;a<t;a++)m.push(0===a?t:0)}));var y={children:n,props:{}};return y.props.rowSpan=m[a],y});function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function w(e){var t=e.dataSource,a=O(Object(s.useState)({pageIndex:1,totalRows:0,pageRows:10}),2),n=a[0],r=a[1],l=function(){var e=(n.pageIndex-1)*n.pageRows;return t.slice(e,e+10)},i=[{title:"功能类型",dataIndex:"funcTypeCN",render:function(e,t,a){return h(l(),"funcIdentifier",a,e,"funcTypeCN")}},{title:"功能点名称",dataIndex:"funcName",render:function(e,t,a){return h(l(),"funcIdentifier",a,e,"funcName")}},{title:"标识符",dataIndex:"funcIdentifier",render:function(e,t,a){return h(l(),"funcIdentifier",a,e,"funcIdentifier")}},{title:"DP ID",dataIndex:"dataPointId"},{title:"参数名称",dataIndex:"name",render:function(e,t){return e}},{title:"参数标识",dataIndex:"identifier"},{title:"数据传输类型",dataIndex:"accessMode",render:function(e,t){return"rw"==e?"可下发可上报":"w"==e?"可下发":"r"==e?"可上报":""}},{title:"数据类型",dataIndex:"dataType",render:function(e,t){return d.a.createElement("span",null,t.dataTypCN)}},{title:"数据属性",dataIndex:"propertyMap",render:function(e,t){return d.a.createElement("span",null,function(e){var t=null;switch(e.dataTypeEN){case"float":case"int":t="数值范围：".concat(e.propertyMap.min,"-").concat(e.propertyMap.max,",间距：").concat(e.propertyMap.interval,",倍数：").concat(e.propertyMap.multiple,",单位：").concat(e.propertyMap.unit);break;case"bool":t="0：".concat(e.propertyMap[0],",1：").concat(e.propertyMap[1]);break;case"enum":var a="";for(var n in e.propertyMap)a+=e.propertyMap[n]+"，";t="枚举值：".concat(a);break;default:return""}return t}(t))}}],c=Object(s.useMemo)((function(){var e=[];return t.forEach((function(t){e.indexOf(t.funcIdentifier)<0&&e.push(t.funcIdentifier)})),e}),[t]);return d.a.createElement("div",null,d.a.createElement(v.a,{rowKey:"key",columns:i,dataSource:t,scroll:{y:400},pagination:{defaultCurrent:1,current:n.pageIndex,onChange:function(e,t){t===n.pageRows?r((function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})})):r((function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})}))},pageSize:n.pageRows,total:n.totalRows,showQuickJumper:!1,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,c.length)," 条")}}}))}var j=a(479);a(1444);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){T(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var N=u.a.Item,P=l.a.TextArea,C=g.a.TabPane;function D(e){var t=[];return e.forEach((function(e){e.funcParamList&&e.funcParamList.length&&e.funcParamList.forEach((function(a){var n=JSON.parse(JSON.stringify(e));t.push(x(x({},n),a))}))})),t.forEach((function(e,t){e.key=t})),t}function F(e){var t=e.form,a=e.addVis,n=e.handleCancel,f=e.handleOk,p=e.optionList,v=e.editId,h=t.getFieldDecorator,O=t.validateFields,E=t.setFieldsValue,S=t.getFieldValue,k=(t.getFieldsValue,I(Object(s.useState)([]),2)),T=(k[0],k[1],I(Object(s.useState)("1"),2)),F=T[0],A=T[1],R=I(Object(s.useState)([]),2),V=R[0],M=R[1],J=I(Object(s.useState)([]),2),q=J[0],L=J[1],U=I(Object(s.useState)([]),2),z=U[0],$=U[1];Object(s.useEffect)((function(){v&&H()}),[]);var H=function(){Object(j.b)({id:v}).then((function(e){0==e.data.code&&E({name:e.data.data.name,deviceTypeId:e.data.data.deviceTypeId,status:e.data.data.status,remark:e.data.data.remark})})),Object(j.c)({id:v}).then((function(e){if(0==e.data.code){var t=D(e.data.data.standard||[]);M(t),Y("1",t)}}))},K={labelCol:{span:2},wrapperCol:{span:22}},Y=function(e,t){t=t||V,A(e);var a=["properties","events","services"],n=t.filter((function(t){if(t.funcType==a[e-1])return t}));L(n)};return d.a.createElement("div",null,d.a.createElement(o.a,{title:v?"编辑物模型":"新增物模型",visible:a,onOk:function(){v?O().then((function(e){var t=x(x({},e),{},{file:z.length?z[0].originFileObj:"",id:v});Object(j.a)(t).then((function(e){0==e.data.code&&(c.a.success("编辑成功"),f())}))})):O().then((function(e){var t=x(x({},e),{},{file:z.length?z[0].originFileObj:""});Object(j.f)(t).then((function(e){0==e.data.code&&(c.a.success("新增成功"),f())}))}))},onCancel:n,width:"1200px"},d.a.createElement("div",null,d.a.createElement(u.a,K,d.a.createElement(N,{label:"模型名称"},h("name",{rules:[{required:!0,message:"请输入模型名称"}]})(d.a.createElement(l.a,{style:{width:"100%"}}))),d.a.createElement(N,{label:"所属分类"},h("deviceTypeId",{rules:[{required:!0,message:"请选择所属分类"}]})(d.a.createElement(i.a,{style:{width:"100%"},placeholder:"请选择所属分类",allowClear:!0},p.map((function(e,t){return d.a.createElement(i.a.Option,{key:e.deviceTypeId,value:e.deviceTypeId,label:e.deviceTypeName},e.deviceTypeName)}))))),d.a.createElement(u.a.Item,{label:"状态"},h("status",{rules:[{required:!0,message:"请选择状态"}]})(d.a.createElement(b.a.Group,null,d.a.createElement(b.a,{value:2}," 正式"),d.a.createElement(b.a,{value:1},"草稿")))),d.a.createElement(N,{label:"模板设置",extra:"支持格式：json"},h("file",{rules:[{required:!v,message:"请上传文件"}],getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList}})(d.a.createElement(m.a,{customRequest:function(e){z.length?c.a.info("只能上传一个文件"):Object(j.h)({file:e.file}).then((function(e){if(0==e.data.code){var a=D(e.data.data.standard||[]);M(a),Y("1",a)}else $([]),t.setFieldsValue({file:""})}))},listType:"picture",accept:".json",beforeUpload:function(e,t){return function(e,t,a){return new Promise((function(t,n){return a.indexOf(e.name.split(".").slice(-1)[0])>-1?S("file")&&S("file").length?(c.a.error("请删除原文件再上传"),n(!1)):t(!0):(c.a.error("只能上传".concat(a.join(","),"格式")),n(!1))}))}(e,0,["json"])},onChange:function(e){e.file;var t=e.fileList;$(t)},fileList:z},d.a.createElement(r.a,null,d.a.createElement(y.a,{type:"upload"})," 选择模板")))),d.a.createElement(N,{label:"备注"},h("remark",{rules:[{required:!0,message:"请输入备注"}]})(d.a.createElement(P,{style:{width:"100%"}}))),d.a.createElement(N,{label:"物模型详情"},d.a.createElement("div",null,d.a.createElement(g.a,{activeKey:F,onChange:Y},d.a.createElement(C,{tab:"属性",key:"1"}),d.a.createElement(C,{tab:"事件",key:"2"}),d.a.createElement(C,{tab:"服务",key:"3"})),d.a.createElement("div",null,d.a.createElement(w,{dataSource:q,pagination:!1}))))))))}var A=F=u.a.create()(F),R=a(32);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var U=u.a.Item;t.default=u.a.create()((function(e){var t=e.form,a=t.getFieldDecorator,m=(t.validateFields,t.getFieldsValue),y=q(Object(s.useState)({pageIndex:1,pageRows:10}),2),b=y[0],g=y[1],v=q(Object(s.useState)([]),2),h=v[0],O=v[1],E=q(Object(s.useState)([]),2),w=E[0],I=E[1],S=q(Object(s.useState)(!1),2),k=S[0],x=S[1],T=q(Object(s.useState)(0),2),N=T[0],P=T[1],C=q(Object(s.useState)(!1),2),D=C[0],F=C[1],V=q(Object(s.useState)(0),2),J=V[0],L=V[1],z=[{title:"物模型ID",dataIndex:"id",key:"id",width:"100px"},{title:"物模型名称",dataIndex:"name",key:"name"},{title:"语言版本",dataIndex:"",key:"",render:function(){return d.a.createElement("span",null,"中文")}},{title:"所属分类",dataIndex:"deviceType",key:"deviceType"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return d.a.createElement("span",null,1==e?"草稿":"正式")}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e){return e&&R.b.utcToDev(e)}},{title:"修改时间",dataIndex:"updateTime",key:"updateTime",render:function(e){return e&&R.b.utcToDev(e)}},{title:"操作",key:"action",width:100,render:function(e,t){return d.a.createElement("span",null,1==t.status?d.a.createElement("span",null,d.a.createElement("a",{style:{marginRight:"10px"},onClick:function(){$(t.id)}},"发布"),d.a.createElement("a",{onClick:function(){Y(t.id)}},"编辑")):d.a.createElement("a",{onClick:function(){Y(t.id)}},"更新"))}}],$=function(e){o.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:"点击确定将发布数据，点击取消可取消发布。",onOk:function(){Object(j.g)({id:e}).then((function(e){c.a.success("发布成功"),H()}))}})};Object(s.useEffect)((function(){K()}),[]),Object(s.useEffect)((function(){H()}),[b.pageRows,b.pageIndex]);var H=function(){var e={};m().name&&m().name.trim()&&(e.name=m().name.trim()),m().deviceTypeId&&(e.deviceTypeId=m().deviceTypeId),e=M(M({},e),b),F(!0),Object(j.d)(e).then((function(e){O(e.data.data.list),L(e.data.data.pager.totalRows)})).finally((function(){F(!1)}))},K=function(){Object(j.e)().then((function(e){I(e.data.data)}))},Y=function(e){P(e),x(!0)};return d.a.createElement("div",{className:"PhysicalModel-page"},d.a.createElement(f.a,{title:"平台物模型管理"},d.a.createElement("div",{className:"title-space"},d.a.createElement(u.a,{layout:"inline"},d.a.createElement(U,{label:"所属分类"},a("deviceTypeId",{})(d.a.createElement(i.a,{style:{width:160},placeholder:"请选择所属分类",allowClear:!0},w.map((function(e,t){return d.a.createElement(i.a.Option,{key:e.deviceTypeId,value:e.deviceTypeId,label:e.deviceTypeName},e.deviceTypeName)}))))),d.a.createElement(U,{label:"物模型名称"},a("name",{})(d.a.createElement(l.a,{placeholder:"请输入物模型名称",style:{width:240},allowClear:!0}))),d.a.createElement(U,null,d.a.createElement(r.a,{type:"primary",onClick:function(){return H()}},"查询")),d.a.createElement(U,null,d.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),d.a.createElement(r.a,{type:"primary",onClick:function(){P(0),x(!0)}},"新增物模型"))),d.a.createElement(n.a,null,d.a.createElement(p.a,{rowKey:"id",columns:z,dataSource:h,loading:D,pagination:{defaultCurrent:1,current:b.pageIndex,onChange:function(e,t){t===b.pageRows?g((function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})})):g((function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})}))},pageSize:b.pageRows,total:J,showQuickJumper:!0,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,J)," 条")}}})),k&&d.a.createElement(A,{addVis:k,editId:N,handleCancel:function(){x(!1)},handleOk:function(){H(),x(!1)},optionList:w}))}))},1534:function(e,t,a){"use strict";a.r(t);a(19),a(37),a(38),a(28),a(30),a(31),a(199),a(221),a(256),a(35),a(34),a(43),a(33),a(44),a(98);var n=a(39),r=(a(75),a(20)),l=(a(198),a(76)),i=(a(137),a(69)),c=(a(155),a(40)),o=(a(168),a(823),a(22),a(66),a(467),a(97),a(170),a(65),a(0)),u=a.n(o),s=a(1423),d=a(3),f=function(e){return d.c.request({url:"/manage-open/firmware/check/",method:"post",data:e,headers:{}})},p=a(106),m=a(32),y=(a(255),a(128)),b=(a(468),a(171)),g=(a(297),a(156));a(117);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var O=c.a.Item,E=[{label:"MCU模块",value:2},{label:"模组插件",value:1}],w=0,j={labelCol:{span:6},wrapperCol:{span:16}};var I=c.a.create()((function(e){var t=e.form,a=e.handleOk,n=e.handleCancel,r=e.checkVisible,s=e.actionData,d=t.getFieldDecorator,p=t.validateFields,m=t.getFieldsValue,h=t.getFieldValue,I=v(Object(o.useState)(2),2),S=I[0],k=I[1];Object(o.useEffect)((function(){w=0}),[]);var x=function(e){var a=t.getFieldValue("keys");1!==a.length&&t.setFieldsValue({keys:a.filter((function(t){return t.unlkey!==e}))})};return u.a.createElement("div",null,u.a.createElement(y.a,{title:"固件审核",visible:r,onOk:function(){console.log(m()),p((function(e,t){if(!e){var n=t.names,r=t.status,l=t.keys;if(3===r){var i={status:r,id:s.id};return void f(i).then((function(e){0===e.data.code&&(g.a.success("审核成功"),a())}))}if(!n||!n.length)return void g.a.info("至少添加一个模组/固件");var c=[];n.filter((function(e){if(e)return e})).forEach((function(e,t){c.push({deviceVersionType:l[t].type,firmwareTypeNo:e.firmwareTypeNo||0,firmwareTypeName:e.firmwareTypeName,productId:s.productId,firmwareTypeMark:""})}));var o={status:r,id:s.id,productFirmwareTypeList:c};f(o).then((function(e){0===e.data.code&&(g.a.success("审核成功"),a())}))}}))},onCancel:n,width:"600px",maskClosable:!1},u.a.createElement("div",{className:"firm-model-wrap"},u.a.createElement(c.a,j,u.a.createElement(O,{label:"审核结果"},d("status",{initialValue:2})(u.a.createElement(b.a.Group,{buttonStyle:"solid",onChange:function(e){console.log(e.target.value),k(e.target.value)}},u.a.createElement(b.a.Button,{value:2},"通过"),u.a.createElement(b.a.Button,{value:3},"不通过")))),2===S&&u.a.createElement(O,{label:"选择模块"},d("mode",{rules:[{required:!0,message:"请选择模块"}],initialValue:1})(u.a.createElement(l.a,{style:{width:"100%"}},E.map((function(e,t){return u.a.createElement(l.a.Option,{key:e.value,value:e.value,label:e.label},e.label)}))))),2===S&&(d("keys",{initialValue:[]}),h("keys").map((function(e,t){return u.a.createElement("div",{key:e.unlkey,className:"firm-item"},u.a.createElement(c.a.Item,{label:1==e.type?"插件名称":"模块名称",required:!0},d("names[".concat(e.unlkey,"].firmwareTypeName"),{rules:[{required:!0,message:"请输入名称"}],initialValue:0==t?"".concat(1==e.type?"插件":"模块","名称1"):""})(u.a.createElement(i.a,null))),u.a.createElement(c.a.Item,{label:1==e.type?"插件编号":"模块编号",required:!0},0==t?u.a.createElement("span",null,"0"):d("names[".concat(e.unlkey,"].firmwareTypeNo"),{rules:[{required:!0,message:"请输入编号",validator:function(e,t){return!(!t||parseInt(t)!=t||t<1||t>100||h("names").filter((function(e,a){if(t==e.firmwareTypeNo)return e})).length>1)}}]})(u.a.createElement(i.a,{placeholder:"请输入1-100的整数字，模块唯一",type:"Number"}))),0!=t&&u.a.createElement("a",{onClick:function(){x(e.unlkey)}},"删除"))}))),2===S&&u.a.createElement("a",{onClick:function(){var e=t.getFieldValue("keys");if(e&&e.length>4)g.a.info("最多添加5个");else{w++;var a=e.concat({unlkey:w,type:t.getFieldValue("mode")});t.setFieldsValue({keys:a})}},className:"add-btn"},"新增")))))}));a(1488);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var P=c.a.Item,C=[{value:1,label:"待审核"},{value:2,label:"已通过"},{value:3,label:"不通过"}];t.default=c.a.create()((function(e){var t=e.form,a=t.getFieldDecorator,f=(t.validateFields,t.getFieldsValue),y=T(Object(o.useState)({pageIndex:1,pageRows:10}),2),b=y[0],g=y[1],v=T(Object(o.useState)(0),2),h=v[0],O=v[1],E=T(Object(o.useState)([]),2),w=E[0],j=E[1],S=T(Object(o.useState)(!1),2),x=S[0],N=S[1],D=T(Object(o.useState)(!1),2),F=D[0],A=D[1],R=T(Object(o.useState)({}),2),V=R[0],M=R[1],J=[{title:"提交账号",dataIndex:"developerId",key:"developerId",width:100},{title:"提交时间",dataIndex:"createTime",key:"createTime",render:function(e){return e&&m.b.utcToDev(e)}},{title:"归属产品",dataIndex:"productName",key:"productName",render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"方案",dataIndex:"schemeType",key:"schemeType",width:100,render:function(e){return u.a.createElement("span",null,"免开发")}},{title:"模组名称",dataIndex:"moduleName",key:"moduleName",render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"上传的固件名称",dataIndex:"burnFileName",key:"burnFileName"},{title:"固件标识",dataIndex:"firmwareId1",key:"firmwareId1"},{title:"固件版本",dataIndex:"burnFileVersion",key:"burnFileVersion"},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return 1===e?u.a.createElement("span",null,"待审核"):2===e?u.a.createElement("span",{style:{color:"#008000"}},"已通过"):3===e?u.a.createElement("span",null,"未通过"):""}},{title:"操作",width:200,key:"",render:function(e,t){return 1===t.status?u.a.createElement("a",{onClick:function(){L(t)}},"审核"):""}}];Object(o.useEffect)((function(){q()}),[b.pageRows,b.pageIndex]);var q=function(){var e={};f().productId&&f().productId.trim()&&(e.productId=f().productId.trim()),f().status&&(e.status=f().status),e=k(k({},e),b),A(!0),function(e){return d.c.request({url:"/manage-open/firmware/check/search",data:e,method:"post",headers:{}})}(e).then((function(e){0==e.data.code&&(j(e.data.data.records),O(e.data.data.totalRows))})).finally((function(){A(!1)}))},L=function(e){M(e),N(!0)};return u.a.createElement("div",{className:"panelMn-page",style:{minWidth:"1200px"}},u.a.createElement(s.a,{title:"用户免开发固件上传信息"},u.a.createElement(c.a,{layout:"inline"},u.a.createElement(P,{label:"产品ID"},a("productId",{getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(u.a.createElement(i.a,{placeholder:"请输入产品ID",style:{width:240},allowClear:!0}))),u.a.createElement(P,{label:"状态"},a("status")(u.a.createElement(l.a,{style:{width:160},placeholder:"请选择状态",allowClear:!0},C.map((function(e,t){return u.a.createElement(l.a.Option,{key:e.value,value:e.value,label:e.label},e.label)}))))),u.a.createElement(P,null,u.a.createElement(r.a,{type:"primary",onClick:function(){1==b.pageIndex?q():g({pageIndex:1,pageRows:10})}},"查询")),u.a.createElement(P,null,u.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置")))),u.a.createElement(n.a,null,u.a.createElement(p.a,{rowKey:"id",columns:J,dataSource:w,loading:F,pagination:{defaultCurrent:1,current:b.pageIndex,onChange:function(e,t){t===b.pageRows?g((function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})})):g((function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})}))},pageSize:b.pageRows,total:h,showQuickJumper:!0,showTotal:function(){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,h)," 条")}}})),x&&u.a.createElement(I,{checkVisible:x,handleOk:function(){N(!1),q()},handleCancel:function(){N(!1)},actionData:V}))}))},1535:function(e,t,a){"use strict";a.r(t);a(19),a(37),a(38),a(28),a(30),a(31),a(199),a(221),a(256),a(35),a(34),a(43),a(33),a(44),a(98);var n=a(39),r=(a(75),a(20)),l=(a(137),a(69)),i=(a(297),a(156)),c=(a(255),a(128)),o=(a(155),a(40)),u=(a(823),a(22),a(66),a(467),a(168),a(0)),s=a.n(u),d=a(1423),f=a(106),p=a(3),m=(a(1387),a(1388)),y=(a(169),a(7)),b=(a(1402),a(1400)),g=(a(97),a(258),a(363),a(32)),v=a(4),h=a.n(v);a(1442);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var j=o.a.Item,I=(d.a.Option,b.a.RangePicker,{action:g.j,data:function(e){return{appId:31438,domainType:4}}});var S=o.a.create()((function(e){var t=e.form,a=e.addVis,n=e.handleCancel,r=e.handleOk,u=t.getFieldDecorator,d=t.validateFields,f=t.getFieldValue,g={labelCol:{span:6},wrapperCol:{span:14}};return s.a.createElement("div",null,s.a.createElement(c.a,{title:"新建",visible:a,onOk:function(){d().then((function(e){var t,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e);a.showStartTime=h()(a.showStartTime).format("YYYY-MM-DD HH:mm:ss"),a.showEndTime=h()(a.showEndTime).format("YYYY-MM-DD HH:mm:ss"),(t=a,p.c.request({url:"/manage-open/banner/add",method:"post",data:t,headers:{}})).then((function(e){0==e.data.code&&(i.a.success("新增成功"),r())}))}))},onCancel:n,width:"700px"},s.a.createElement("div",{className:"banner-modal-add"},s.a.createElement(o.a,g,s.a.createElement(j,{label:"banner名称"},u("bannerName",{rules:[{required:!0,message:"请输入banner名称"}]})(s.a.createElement(l.a,{style:{width:"100%"}}))),s.a.createElement(j,{label:"计划展示开始时间"},u("showStartTime",{rules:[{required:!0,message:"请选择开始时间"}]})(s.a.createElement(b.a,{showTime:!0,style:{width:"100%"}}))),s.a.createElement(j,{label:"计划展示结束时间"},u("showEndTime",{rules:[{required:!0,message:"请选择结束时间"}]})(s.a.createElement(b.a,{showTime:!0,style:{width:"100%"}}))),s.a.createElement(j,{label:"上传图片",extra:"支持格式：png、jpg 尺寸：1440x * 1334px"},u("imageUrl",{rules:[{required:!0,message:"请上传图片"}],getValueFromEvent:function(e){}})(s.a.createElement("div",null,s.a.createElement(m.a,O({className:"avatar-uploader"},I,{accept:".png,.jpg",onChange:function(e){var a=e.file,n=e.fileList;if("done"===a.status){var r=n[0];r.url=r.response.data.url,t.setFieldsValue({imageUrl:r.response.data.url})}else"error"===a.status?i.a.error("上传失败"):"removed"===a.status&&t.setFieldsValue({imageUrl:""})},listType:"picture-card",beforeUpload:function(e){return function(e,t){return new Promise((function(a,n){return t.indexOf(e.name.split(".").slice(-1)[0])>-1?a(!0):(i.a.error("只能上传".concat(t.join(","),"格式")),n(!1))}))}(e,["png","jpg"])}}),f("imageUrl")?null:s.a.createElement("span",null,s.a.createElement(y.a,{type:"upload"})," 上传图片"))))),s.a.createElement(j,{label:"跳转URL"},u("url",{rules:[{required:!0,message:"请输入跳转URL"}]})(s.a.createElement(l.a,{style:{width:"100%"}})))))))}));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){T(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var C=o.a.Item;t.default=o.a.create()((function(e){var t=e.form,a=N(Object(u.useState)({pageIndex:1,pageRows:10}),2),m=a[0],y=a[1],b=t.getFieldDecorator,v=(t.validateFields,t.getFieldsValue),h=N(Object(u.useState)(0),2),O=h[0],E=h[1],w=N(Object(u.useState)([]),2),j=w[0],I=w[1],k=N(Object(u.useState)(!1),2),T=k[0],P=k[1],D=N(Object(u.useState)(!1),2),F=D[0],A=D[1],R=N(Object(u.useState)({}),2),V=R[0],M=R[1],J=N(Object(u.useState)(!1),2),q=J[0],L=J[1];Object(u.useEffect)((function(){U()}),[m.pageRows,m.pageIndex]);var U=function(){var e={};v().bannerName&&v().bannerName.trim()&&(e.bannerName=v().bannerName.trim()),e=x(x({},e),m),L(!0),function(e){return p.c.request({url:"/manage-open/banner/getBannerList",data:e,method:"post",headers:{}})}(e).then((function(e){0==e.data.code&&(I(e.data.data.list),E(e.data.data.pager.totalRows))})).finally((function(){L(!1)}))},z=function(e,t){var a=1==t?"是否上线":"是否下线";c.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:a,onOk:function(){var a;(a={id:e,status:t},p.c.request({url:"/manage-open/banner/updateStatus",method:"post",data:a,headers:{}})).then((function(e){var a=1==t?"上线成功":"下线成功";0==e.data.code&&(i.a.success(a),U())}))}})},$=function(e){c.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:"是否删除此banner",onOk:function(){var t;(t={id:e},p.c.request({url:"/manage-open/banner/delete",method:"post",data:t,headers:{}})).then((function(e){0==e.data.code&&(i.a.success("删除成功"),U())}))}})},H=[{title:"banner名称",dataIndex:"bannerName",key:"bannerName"},{title:"上传时间",dataIndex:"uploadTime",key:"uploadTime",render:function(e){return e&&g.b.utcToDev(e)}},{title:"计划展示开始时间",dataIndex:"showStartTime",key:"showStartTime",render:function(e){return e&&g.b.utcToDev(e)}},{title:"计划展示结束时间",dataIndex:"showEndTime",key:"showEndTime",render:function(e){return e&&g.b.utcToDev(e)}},{title:"状态",dataIndex:"status",key:"status",render:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=["待发布","已上线","已下线"];return t[e]}(e)}},{title:"操作",key:"action",width:200,render:function(e,t){return 1==t.status?s.a.createElement("span",{className:"comman-table-margin"},s.a.createElement("a",{onClick:function(){K(t)}},"查看图片"),s.a.createElement("a",{onClick:function(){z(t.id,2)}},"下线")):0==t.status||2==t.status?s.a.createElement("span",{className:"comman-table-margin"},s.a.createElement("a",{onClick:function(){K(t)}},"查看图片"),s.a.createElement("a",{onClick:function(){z(t.id,1)}},"上线"),s.a.createElement("a",{onClick:function(){$(t.id)}},"删除")):void 0}}],K=function(e){M(e),A(!0)};return s.a.createElement("div",{className:"banner-page"},s.a.createElement(d.a,{title:"平台banner管理"},s.a.createElement("div",{className:"title-space"},s.a.createElement(o.a,{layout:"inline"},s.a.createElement(C,{label:""},b("bannerName")(s.a.createElement(l.a,{placeholder:"输入名称查询",style:{width:240}}))),s.a.createElement(C,null,s.a.createElement(r.a,{type:"primary",onClick:function(){1==m.pageIndex?U():y({pageIndex:1,pageRows:10})}},"查询")),s.a.createElement(C,null,s.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),s.a.createElement(r.a,{type:"primary",onClick:function(){P(!0)}},"新建"))),s.a.createElement(n.a,null,s.a.createElement(f.a,{rowKey:"id",columns:H,dataSource:j,loading:q,pagination:{defaultCurrent:1,current:m.pageIndex,onChange:function(e,t){t===m.pageRows?y((function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})})):y((function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})}))},pageSize:m.pageRows,total:O,showQuickJumper:!0,showTotal:function(){return s.a.createElement("span",null,"共 ",s.a.createElement("a",null,O)," 条")}}})),T&&s.a.createElement(S,{addVis:T,handleOk:function(){U(),P(!1)},handleCancel:function(){P(!1)}}),F&&s.a.createElement(c.a,{title:"查看图片",visible:F,width:1200,footer:null,onCancel:function(){A(!1)}},s.a.createElement("div",{className:"banner-img-wrap"},s.a.createElement("img",{src:V.imageUrl}))))}))},1545:function(e,t,a){"use strict";a.r(t);a(19),a(37),a(22),a(38),a(28),a(30),a(31),a(199),a(221),a(256),a(35),a(34),a(43),a(33),a(44),a(255);var n=a(128),r=(a(98),a(39)),l=(a(75),a(20)),i=(a(198),a(76)),c=(a(826),a(477)),o=(a(297),a(156)),u=(a(137),a(69)),s=(a(155),a(40)),d=(a(168),a(823),a(65),a(97),a(258),a(0)),f=a.n(d),p=a(1423),m=a(106),y=a(3),b=a(32);a(1494);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}s.a.Item,p.a.Option;var w=u.a.TextArea;t.default=s.a.create()((function(e){var t=e.form,a=O(Object(d.useState)({pageIndex:1,pageRows:10}),2),u=a[0],g=a[1],h=O(Object(d.useState)(0),2),E=h[0],j=h[1],I=O(Object(d.useState)([]),2),S=I[0],k=I[1],x=O(Object(d.useState)(!1),2),T=x[0],N=x[1],P=O(Object(d.useState)({}),2),C=P[0],D=P[1],F=[{title:"工单ID",dataIndex:"workOrderId"},{title:"提交账号",dataIndex:"creator"},{title:"提交时间",dataIndex:"createTime",render:function(e){return e&&b.b.utcToDev(e)}},{title:"问题内容",dataIndex:"problemDesc",render:function(e){return f.a.createElement("span",{title:e},e)}},{title:"问题图片/视频",dataIndex:"image",render:function(e,t){return f.a.createElement("span",{onClick:function(){W(t)}},"查看")}},{title:"状态",dataIndex:"status",render:function(e){return f.a.createElement("span",null,e?"已回复":"未回复")}},{title:"操作",render:function(e,t){return f.a.createElement("span",null,f.a.createElement("a",{onClick:function(){ee(t,!0)},style:{marginRight:"10px"}},"详情"),!t.status&&f.a.createElement("a",{onClick:function(){ee(t,!1)}},"回复"))}}];Object(d.useEffect)((function(){G()}),[]),Object(d.useEffect)((function(){te()}),[u.pageRows,u.pageIndex]);var A=O(Object(d.useState)([]),2),R=A[0],V=A[1],M=O(Object(d.useState)(!1),2),J=M[0],q=M[1],L=O(Object(d.useState)(!1),2),U=L[0],z=L[1],$=O(Object(d.useState)(!1),2),H=$[0],K=$[1],Y=O(Object(d.useState)(""),2),_=Y[0],B=Y[1],Q=function(e){B(e),K(!0)},W=function(e){D(e),e.image?q(!0):alert("无图片")},G=function(){y.c.request({url:"/manage-open/workOrder/getWorkOrderDictionary",method:"post",data:{}}).then((function(e){if(0==e.data.code){var t=[];for(var a in e.data.data.problemTypeOneLevel){var n={value:a,label:e.data.data.problemTypeOneLevel[a],children:[]};for(var r in e.data.data.problemTypeTwoLevel[a])n.children.push({value:r,label:e.data.data.problemTypeTwoLevel[a][r]});t.push(n)}V(t)}}))},X=t.getFieldDecorator,Z=(t.validateFields,t.getFieldsValue),ee=function(e,t){z(t),D(e),N(!0)},te=function(){var e={};Z().status&&(e.status=Z().status);var t=Z().userType;t&&(e.problemTypeOneLevel=t[0],e.problemTypeTwoLevel=t[1]),function(e){return y.c.request({url:"/manage-open/workOrder/getWorkOrderList",data:e,method:"post",headers:{}})}(e=v(v({},e),u)).then((function(e){0==e.data.code&&(k(e.data.data.list),j(e.data.data.pager.totalRows))}))},ae=O(Object(d.useState)(""),2),ne=ae[0],re=ae[1];return f.a.createElement("div",{className:"PhysicalModel-page"},f.a.createElement(p.a,{title:"工单管理"},f.a.createElement(s.a,{layout:"inline"},f.a.createElement(s.a.Item,{label:"问题分类"},X("userType",{})(f.a.createElement(c.a,{options:R,placeholder:"请选择",style:{width:"412px"},popupClassName:"order-Cascader"}))),f.a.createElement(s.a.Item,{label:"状态"},X("status",{})(f.a.createElement(i.a,{style:{width:160},placeholder:"请选择",allowClear:!0},f.a.createElement(i.a.Option,{value:"1"},"已回复"),f.a.createElement(i.a.Option,{value:"0"},"未回复")))),f.a.createElement(s.a.Item,null,f.a.createElement(l.a,{type:"primary",onClick:function(){te()}},"查询")),f.a.createElement(s.a.Item,null,f.a.createElement(l.a,{onClick:function(){t.resetFields()}},"重置")))),f.a.createElement(r.a,null,f.a.createElement(m.a,{rowKey:"workOrderId",bordered:!0,columns:F,dataSource:S,pagination:{defaultCurrent:1,current:u.pageIndex,onChange:function(e,t){t===u.pageRows?g((function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})})):g((function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})}))},pageSize:u.pageRows,total:E,showQuickJumper:!0,showTotal:function(){return f.a.createElement("span",null,"共 ",f.a.createElement("a",null,E)," 条")}}})),T&&f.a.createElement(n.a,{title:U?"详情":"回复",visible:T,onCancel:function(){N(!1)},width:"700px",footer:U?f.a.createElement("div",{className:"repair-model-footer"},f.a.createElement(l.a,{type:"primary",block:!0,onClick:function(){N(!1)}},"确认")):f.a.createElement("div",{className:"repair-model-footer"},f.a.createElement(l.a,{type:"primary",block:!0,onClick:function(){if(ne||ne.trim()){var e,t={workOrderId:C.workOrderId,replyContent:ne};(e=t,y.c.request({url:"/manage-open/workOrder/replyWorkOrder",method:"post",data:e,headers:{}})).then((function(e){0==e.data.code&&(N(!1),o.a.success("回复成功"),te())}))}else o.a.info("请输入回复内容")}},"确认回复"))},f.a.createElement("div",{className:"my-order-detail"},f.a.createElement("div",{className:"order-item"},f.a.createElement("div",{className:"order-item-label"},"提交账号："),f.a.createElement("div",{className:"order-item-text"},C.creator," ")),f.a.createElement("div",{className:"order-item"},f.a.createElement("div",{className:"order-item-label"},"内容分类："),f.a.createElement("div",{className:"order-item-text"},C.problemTypeOneName,"-",C.problemTypeTwoName,"  ")),f.a.createElement("div",{className:"order-item"},f.a.createElement("div",{className:"order-item-label"},"问题描述："),f.a.createElement("div",{className:"order-item-text"},C.problemDesc)),f.a.createElement("div",{className:"order-item"},f.a.createElement("div",{className:"order-item-label"},"上传问题图片/视频："),f.a.createElement("div",{className:"order-item-text"},C.image&&C.image.split(",").map((function(e,t){return f.a.createElement("img",{key:t,src:e,width:100,onClick:function(){Q(e)}})})))),f.a.createElement("div",{className:"order-item"},f.a.createElement("div",{className:"order-item-label"},"联系方式："),f.a.createElement("div",{className:"order-item-text"},C.phone)),1==C.status&&U?f.a.createElement("div",{className:"order-feedback"},f.a.createElement("div",{style:{margin:"0 -24px"}}),f.a.createElement("div",{className:"order-item"},f.a.createElement("div",{className:"feedback-title"},"回复内容："),f.a.createElement("div",{className:"feedback-dec"},C.replyContent))):null,!U&&f.a.createElement("div",{className:"reply-footer"},f.a.createElement("div",{className:"label"},"回复内容："),f.a.createElement(w,{rows:4,onChange:function(e){e.persist(),re(e.target.value)}})))),J&&f.a.createElement(n.a,{title:"图片信息",visible:J,onCancel:function(){q(!1)},width:"700px",footer:!1},f.a.createElement("div",{style:{textAlign:"center"}},C.image&&C.image.split(",").map((function(e,t){return f.a.createElement("img",{key:t,src:e,width:100,style:{marginRight:"10px"},onClick:function(){Q(e)}})})))),H&&f.a.createElement(n.a,{title:"图片预览",visible:H,onCancel:function(){K(!1)},width:"1000px",footer:!1},f.a.createElement("div",{style:{textAlign:"center"}},f.a.createElement("img",{src:_,style:{maxWidth:850}}))))}))},1546:function(e,t,a){"use strict";a.r(t);a(19),a(37),a(38),a(28),a(30),a(31),a(199),a(221),a(256),a(35),a(34),a(43),a(33),a(44),a(98);var n=a(39),r=(a(75),a(20)),l=(a(137),a(69)),i=(a(198),a(76)),c=(a(297),a(156)),o=(a(255),a(128)),u=(a(155),a(40)),s=(a(168),a(823),a(22),a(66),a(467),a(65),a(0)),d=a.n(s),f=a(1423),p=a(1434),m=a(479),y=a(106),b=a(32),g=(a(1387),a(1388)),v=(a(169),a(7));a(367),a(97),a(258),a(363),a(1443);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var S={action:b.j,data:function(e){return{appId:31438,domainType:4}}},k=u.a.Item;var x=u.a.create()((function(e){var t=e.form,a=e.addVis,n=e.handleCancel,f=e.handleOk,m=e.optionList,b=e.modelType,O=e.actionData,w=t.getFieldDecorator,I=t.validateFields,x=t.setFieldsValue,T=t.getFieldValue,N=j(Object(s.useState)([]),2),P=N[0],C=N[1],D=j(Object(s.useState)([]),2),F=D[0],A=D[1],R=j(Object(s.useState)([]),2),V=R[0],M=R[1],J=j(Object(s.useState)([]),2),q=J[0],L=J[1],U=j(Object(s.useState)([]),2);U[0],U[1],Object(s.useEffect)((function(){"edit"==b&&z()}),[]);var z=function(){t.setFieldsValue({filePath:O.htmlPath,deviceTypeId:O.deviceTypeId,templateName:O.templateName,page1:O.page1,htmlPath:O.htmlPath,physicalModelId:O.physicalModelId}),M([{url:O.page1,uid:1,name:"id"}]),L([{url:O.htmlPath,uid:2,name:"H5包"}]),Object(p.c)(O.deviceTypeId).then((function(e){0==e.data.code&&A(e.data.data)})),O.physicalModelId&&H(O.physicalModelId)},$={labelCol:{span:6},wrapperCol:{span:14}},H=function(e){Object(p.b)({id:e}).then((function(e){0==e.data.code&&C(e.data.data.standard)}))},K=function(e,t){return new Promise((function(a,n){return t.indexOf(e.name.split(".").slice(-1)[0])>-1?a(!0):(c.a.error("只能上传".concat(t.join(","),"格式")),n(!1))}))},Y=function(e){};return d.a.createElement("div",null,d.a.createElement(o.a,{title:"edit"==b?"编辑":"新增",visible:a,onOk:function(){I().then((function(e){var t=E(E({},e),{},{isFree:1});"edit"==b&&(t.status=O.status,t.templateId=O.templateId),delete t.filePath,t.deviceSubtypeId=0,Object(p.d)(t).then((function(e){0==e.data.code&&(c.a.success("新增成功"),f())}))}))},onCancel:n,width:"700px"},d.a.createElement("div",null,d.a.createElement(u.a,$,d.a.createElement(k,{label:"所属分类"},w("deviceTypeId")(d.a.createElement(i.a,{placeholder:"请选择所属分类",onChange:function(e){x({physicalModelId:""}),C([]),Object(p.c)(e).then((function(e){0==e.data.code&&A(e.data.data)}))}},m.map((function(e,t){return d.a.createElement(i.a.Option,{key:e.deviceTypeId,value:e.deviceTypeId,label:e.deviceTypeName},e.deviceTypeName)}))))),d.a.createElement(k,{label:"面板名称"},w("templateName",{rules:[{required:!0,message:"请输入面板名称"}]})(d.a.createElement(l.a,{style:{width:"100%"},onPressEnter:function(){return searchList()}}))),d.a.createElement(k,{label:"物模型选择"},w("physicalModelId")(d.a.createElement(i.a,{placeholder:"请选择",onChange:H},F.map((function(e,t){return d.a.createElement(i.a.Option,{key:e.id,value:e.id,label:e.name},e.name)}))))),d.a.createElement("div",{style:{paddingLeft:"162px",marginBottom:"20px"}},d.a.createElement(y.a,{rowKey:"funcIdentifier",columns:[{title:"功能类型",dataIndex:"funcTypeCN",key:"funcTypeCN",width:120},{title:"功能点名称",dataIndex:"funcName",key:"funcName",width:180},{title:"标识符",dataIndex:"funcIdentifier",key:"funcIdentifier"}],dataSource:P,scroll:{y:340},pager:!1})),d.a.createElement(k,{label:"封面",extra:"支持格式：png、jpg 尺寸：247px * 439px,170*302px"},w("page1",{rules:[{required:!0,message:"请上传封面"}],getValueFromEvent:Y})(d.a.createElement("div",null,d.a.createElement(g.a,h({className:"avatar-uploader"},S,{accept:".png,.jpg",onChange:function(e){var a=e.file,n=e.fileList;if("done"===a.status)if(0==a.response.code){var r=n[0];r.url=r.response.data.url,t.setFieldsValue({page1:r.response.data.url})}else c.a.error("上传失败"),n.splice(0);else"error"===a.status?c.a.error("上传失败"):"removed"===a.status?t.setFieldsValue({page1:""}):a.status||n.splice(0)},listType:"picture-card",beforeUpload:function(e){return K(e,["png","jpg"])},defaultFileList:V}),T("page1")?null:d.a.createElement("span",null,d.a.createElement(v.a,{type:"upload"})," 上传图片"))))),d.a.createElement(k,{label:"上传H5包",extra:"支持格式：zix"},w("htmlPath",{rules:[{required:!0,message:"请上传H5包"}],getValueFromEvent:Y})(d.a.createElement("div",null,d.a.createElement(g.a,h({className:"avatar-uploader"},S,{accept:".zix",onChange:function(e){var a=e.file,n=e.fileList;if("done"===a.status)if(0==a.response.code){var r=n[0];r.url=r.response.data.url,t.setFieldsValue({htmlPath:r.response.data.url,filePath:r.response.data.url})}else c.a.error("上传失败"),n.splice(0),t.setFieldsValue({filePath:"",htmlPath:""});else"error"===a.status?c.a.error("上传失败"):"removed"===a.status&&(t.setFieldsValue({htmlPath:""}),t.setFieldsValue({filePath:""}))},beforeUpload:function(e){return K(e,["zix"])},defaultFileList:q}),T("htmlPath")?null:d.a.createElement(r.a,null,d.a.createElement(v.a,{type:"upload"})," 上传H5包"))))),d.a.createElement(k,{label:"工程文件地址"},w("filePath",{})(d.a.createElement(l.a,{readOnly:!0,style:{width:"100%"}})))))))}));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){P(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var F=u.a.Item;t.default=u.a.create()((function(e){var t=e.form,a=t.getFieldDecorator,g=(t.validateFields,t.getFieldsValue),v=C(Object(s.useState)({pageIndex:1,pageRows:10}),2),h=v[0],O=v[1],E=C(Object(s.useState)(0),2),w=E[0],j=E[1],I=C(Object(s.useState)([]),2),S=I[0],k=I[1],T=C(Object(s.useState)([]),2),P=T[0],D=T[1],A=C(Object(s.useState)(!1),2),R=A[0],V=A[1],M=C(Object(s.useState)(!1),2),J=(M[0],M[1],C(Object(s.useState)({}),2)),q=J[0],L=J[1],U=C(Object(s.useState)(""),2),z=U[0],$=U[1],H=C(Object(s.useState)(!1),2),K=H[0],Y=H[1],_=[{title:"面板ID",dataIndex:"templateId",key:"templateId",width:100},{title:"标准面板名称",dataIndex:"templateName",key:"templateName"},{title:"所属分类",dataIndex:"allCategoryName",key:"allCategoryName"},{title:"状态",dataIndex:"status",key:"status",width:100,render:function(e){return d.a.createElement("span",null,e?"正式":"草稿")}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e){return e&&b.b.utcToDev(e)}},{title:"修改时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return e&&b.b.utcToDev(e)}},{title:"操作",key:"action",width:180,render:function(e,t){return d.a.createElement("span",null,1==t.status?d.a.createElement("a",{onClick:function(){G(t)}},"更新"):d.a.createElement("span",null,d.a.createElement("a",{onClick:function(){G(t)},style:{marginRight:"10px"}},"编辑"),d.a.createElement("a",{onClick:function(){B(t)}},"发布")))}}],B=function(e){o.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:"点击确定将发布数据，点击取消可取消发布。",onOk:function(){var t=N(N({},e),{},{status:1});delete t.createTime,delete t.modifyTime,Object(p.d)(t).then((function(e){c.a.success("发布成功"),Q()}))}})};Object(s.useEffect)((function(){Object(m.e)().then((function(e){D(e.data.data)}))}),[]),Object(s.useEffect)((function(){Q()}),[h.pageRows,h.pageIndex]);var Q=function(){var e={};g().templateName&&g().templateName.trim()&&(e.templateName=g().templateName.trim()),g().deviceTypeId&&(e.deviceTypeId=g().deviceTypeId),e=N(N({},e),h),Y(!0),Object(p.a)(e).then((function(e){0==e.data.code&&(k(e.data.data.list),j(e.data.data.pager.totalRows))})).finally((function(){Y(!1)}))},W=function(){1==h.pageIndex?Q():O({pageIndex:1,pageRows:10})},G=function(e){$("edit"),L(e),V(!0)};return d.a.createElement("div",{className:"panelMn-page"},d.a.createElement(f.a,{title:"平台标准面板管理"},d.a.createElement("div",{className:"title-space"},d.a.createElement(u.a,{layout:"inline"},d.a.createElement(F,{label:"所属分类"},a("deviceTypeId")(d.a.createElement(i.a,{style:{width:160},placeholder:"请选择所属分类"},P.map((function(e,t){return d.a.createElement(i.a.Option,{key:e.deviceTypeId,value:e.deviceTypeId,label:e.deviceTypeName},e.deviceTypeName)}))))),d.a.createElement(F,{label:"面板名称"},a("templateName",{})(d.a.createElement(l.a,{placeholder:"请输入面板名称",style:{width:240}}))),d.a.createElement(F,null,d.a.createElement(r.a,{type:"primary",onClick:function(){return W()}},"查询")),d.a.createElement(F,null,d.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),d.a.createElement(r.a,{type:"primary",onClick:function(){$("add"),V(!0)}},"新增标准面板"))),d.a.createElement(n.a,null,d.a.createElement(y.a,{rowKey:"templateId",columns:_,dataSource:S,loading:K,pagination:{defaultCurrent:1,current:h.pageIndex,onChange:function(e,t){t===h.pageRows?O((function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})})):O((function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})}))},pageSize:h.pageRows,total:w,showQuickJumper:!0,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,w)," 条")}}})),R&&d.a.createElement(x,{addVis:R,handleCancel:function(){V(!1)},handleOk:function(){W(),V(!1)},optionList:P,modelType:z,actionData:q}))}))}}]);