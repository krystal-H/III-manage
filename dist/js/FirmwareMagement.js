(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1378:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"d",function(){return l}),a.d(t,"c",function(){return c}),a.d(t,"b",function(){return i});var n=a(4),r=function(e){return n.c.request({url:"/manage-open/panel/template/getTemplateListByPage",data:e,method:"post",headers:{}})},l=function(e){return n.c.request({url:"/manage-open/panel/template/saveStandardPanel",method:"post",data:e,headers:{}})},c=function(e){return n.c.request({url:"/manage-open/physicalModel/list/deviceTypeId/".concat(e),method:"get"})},i=function(e){return n.c.request({url:"/manage-open/physicalModel/func/list",method:"post",data:e,headers:{}})}},1391:function(e,t,a){},1392:function(e,t,a){},1393:function(e,t,a){},1449:function(e,t,a){},1455:function(e,t,a){},1497:function(e,t,a){"use strict";a.r(t);a(94);var n=a(38),r=(a(72),a(22)),l=(a(189),a(75)),c=(a(122),a(58)),i=(a(143),a(33)),o=(a(166),a(793),a(23),a(63),a(441),a(99),a(168),a(66),a(36),a(26),a(28),a(29),a(19),a(35),a(37),a(34),a(39),a(32),a(40),a(0)),u=a.n(o),s=a(440),d=a(4),m=function(e){return d.c.request({url:"/manage-open/firmware/check/search",data:e,method:"post",headers:{}})},p=function(e){return d.c.request({url:"/manage-open/firmware/check/",method:"post",data:e,headers:{}})},f=function(e){return d.c.request({url:"/manage-open/product/show/firmware/config",method:"post",data:e,headers:{}})},y=function(e){return d.c.request({url:"/manage-open/firmware/check/details",method:"post",data:e,headers:{}})},b=a(92),v=a(31),g=(a(212),a(91)),h=(a(244),a(134));a(111);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var O=i.a.Item,w=[{label:"MCU模块",value:2},{label:"模组插件",value:1}],j=0,I={labelCol:{span:6},wrapperCol:{span:16}};var k=i.a.create()(function(e){var t=e.form,a=e.handleOk,n=e.handleCancel,r=e.checkVisible,s=e.actionData,d=t.getFieldDecorator,m=t.validateFields,f=t.getFieldsValue,y=t.getFieldValue,b=E(Object(o.useState)(2),2),v=b[0];b[1],Object(o.useEffect)(function(){j=0},[]);var k=function(e){var a=t.getFieldValue("keys");1!==a.length&&t.setFieldsValue({keys:a.filter(function(t){return t.unlkey!==e})})};return u.a.createElement("div",null,u.a.createElement(g.a,{title:"固件审核",visible:r,onOk:function(){console.log(f()),m(function(e,t){if(!e){var n=t.names,r=t.keys;if(!n||!n.length)return void h.a.info("至少添加一个模组/固件");var l=[];n.filter(function(e){if(e)return e}).forEach(function(e,t){l.push({deviceVersionType:r[t].type,firmwareTypeNo:e.firmwareTypeNo||0,firmwareTypeName:e.firmwareTypeName,productId:s.productId,firmwareTypeMark:""})});var c={status:2,id:s.id,productFirmwareTypeList:l};p(c).then(function(e){0===e.data.code&&(h.a.success("审核成功"),a())})}})},onCancel:n,width:"600px",maskClosable:!1},u.a.createElement("div",{className:"firm-model-wrap"},u.a.createElement(i.a,I,2===v&&u.a.createElement(O,{label:"选择模块"},d("mode",{rules:[{required:!0,message:"请选择模块"}],initialValue:1})(u.a.createElement(l.a,{style:{width:"100%"}},w.map(function(e,t){return u.a.createElement(l.a.Option,{key:e.value,value:e.value,label:e.label},e.label)})))),2===v&&(d("keys",{initialValue:[{unlkey:0,type:1}]}),y("keys").map(function(e,t){return u.a.createElement("div",{key:e.unlkey,className:"firm-item"},u.a.createElement(i.a.Item,{label:1==e.type?"插件名称":"模块名称",required:!0},d("names[".concat(e.unlkey,"].firmwareTypeName"),{rules:[{required:!0,message:"请输入名称"}],initialValue:0==t?"".concat(1==e.type?"插件":"模块","名称1"):""})(u.a.createElement(c.a,{maxLength:30}))),u.a.createElement(i.a.Item,{label:1==e.type?"插件编号":"模块编号",required:!0},0==t&&1==e.type?u.a.createElement("span",null,"0"):d("names[".concat(e.unlkey,"].firmwareTypeNo"),{rules:[{required:!0,message:"请输入编号",validator:function(e,t){return!(!t||parseInt(t)!=t||t<1||t>100||y("names").filter(function(e,a){if(t==e.firmwareTypeNo)return e}).length>1)}}]})(u.a.createElement(c.a,{placeholder:"请输入1-100的整数字，模块唯一",type:"Number"}))),0!=t&&u.a.createElement("a",{onClick:function(){k(e.unlkey)}},"删除"))})),2===v&&u.a.createElement("a",{onClick:function(){var e=t.getFieldValue("keys");if(e&&e.length>4)h.a.info("最多添加5个");else{j++;var a=e.concat({unlkey:j,type:t.getFieldValue("mode")});t.setFieldsValue({keys:a})}},className:"add-btn"},"新增")))))});a(285);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}i.a.Item;var T={labelCol:{span:8},wrapperCol:{span:16}};var N=i.a.create()(function(e){var t=e.form,a=e.handleCancel,n=e.infoVisible,r=e.actionData,l=(t.getFieldDecorator,t.validateFields,t.getFieldsValue,t.getFieldValue,x(Object(o.useState)({}),2)),c=l[0],s=l[1];return Object(o.useEffect)(function(){f({productId:r.productId}).then(function(e){s(e.data.data)})},[]),u.a.createElement("div",null,u.a.createElement(g.a,{title:"固件信息",visible:n,onCancel:a,width:"800px",maskClosable:!1,footer:!1},u.a.createElement("div",{className:"firm-model-wrap"},u.a.createElement(i.a,T,u.a.createElement(i.a.Item,{label:"固件名称/固件Key",className:"txt-color"},c.burnFileName||"-"),u.a.createElement(i.a.Item,{label:"固件版本",className:"txt-color"},c.burnFileVersion||"-"),c.firmwareModuleList&&c.firmwareModuleList.map(function(e){return e.firmwareFuncList&&e.firmwareFuncList.map(function(e,t){return u.a.createElement(u.a.Fragment,null,"int"===e.dataType.type&&u.a.createElement(i.a.Item,{key:e.funcName,label:e.funcName,className:"txt-color"},e.dataType.specs.value),"enum"===e.dataType.type&&u.a.createElement("div",{key:e.funcName},u.a.createElement(i.a.Item,{label:e.funcName,className:"txt-color"},(a=e.dataType.specs.value,n=e.dataType.specs.def.concat(e.dataType.specs.defaultValue),(r=(r=n.find(function(e){if(e.k==a)return e}))||{}).k+" - "+r.v))));var a,n,r})})))))});function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var C=i.a.Item,P={labelCol:{span:8},wrapperCol:{span:16}};var F=i.a.create()(function(e){e.form;var t=e.handleCancel,a=e.infoVisible,n=e.actionData,r=S(Object(o.useState)([]),2),l=r[0],c=r[1];return Object(o.useEffect)(function(){console.log(.11+.1),y({id:n.id,productId:n.productId}).then(function(e){0==e.data.code&&c(e.data.data.productFirmwareTypeList)})},[]),u.a.createElement("div",null,u.a.createElement(g.a,{title:"审核信息",visible:a,onCancel:t,width:"600px",maskClosable:!1,footer:!1},u.a.createElement("div",{className:"firm-model-wrap"},u.a.createElement(i.a,P,l.map(function(e,t){return u.a.createElement("div",{key:t,className:"firm-item"}," ",u.a.createElement(C,{label:"".concat(1==e.deviceVersionType?"插件":"模块","名称")},u.a.createElement("span",null,e.firmwareTypeName)),u.a.createElement(C,{label:"".concat(1==e.deviceVersionType?"插件":"模块","编号")},u.a.createElement("span",null,e.firmwareTypeNo)))})))))});a(1449);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach(function(t){R(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var q=i.a.Item,J=[{value:1,label:"待审核"},{value:2,label:"已通过"}];t.default=i.a.create()(function(e){var t=e.form,a=t.getFieldDecorator,d=(t.validateFields,t.getFieldsValue),p=L(Object(o.useState)({pageIndex:1,pageRows:10}),2),f=p[0],y=p[1],g=L(Object(o.useState)(0),2),h=g[0],E=g[1],O=L(Object(o.useState)([]),2),w=O[0],j=O[1],I=L(Object(o.useState)(!1),2),x=I[0],T=I[1],S=L(Object(o.useState)(!1),2),C=S[0],P=S[1],D=L(Object(o.useState)(!1),2),R=D[0],M=D[1],A=L(Object(o.useState)(!1),2),U=A[0],z=A[1],K=L(Object(o.useState)({}),2),H=K[0],Y=K[1],Q=[{title:"提交账号",dataIndex:"account",key:"account",width:100,render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"提交时间",dataIndex:"createTime",key:"createTime",render:function(e){var t=e&&v.b.utcToDev(e);return u.a.createElement("span",{title:t},t)}},{title:"归属产品",dataIndex:"productName",key:"productName",render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"方案",dataIndex:"schemeType",key:"schemeType",width:100,render:function(e){return u.a.createElement("span",null,"免开发")}},{title:"模组名称",dataIndex:"moduleName",key:"moduleName",render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"上传的固件名称",dataIndex:"burnFileName",key:"burnFileName",width:"180px",render:function(e,t){return u.a.createElement("span",null,e&&u.a.createElement("div",{className:"firmware-text-wrap"},u.a.createElement("span",{className:"firmware-text",title:e},e," "),u.a.createElement("a",{style:{marginLeft:"3px"},onClick:function(){B(t)}},"查看")))}},{title:"固件标识",dataIndex:"firmwareId1",key:"firmwareId1"},{title:"固件版本",dataIndex:"burnFileVersion",key:"burnFileVersion"},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return 1===e?u.a.createElement("span",null,"待审核"):2===e?u.a.createElement("span",{style:{color:"#008000"}},"已通过"):3===e?u.a.createElement("span",null,"未通过"):""}},{title:"操作",width:100,key:"",render:function(e,t){var a=t.status;return 1==a?u.a.createElement("a",{onClick:function(){X(t)}},"审核"):2==a?u.a.createElement("a",{onClick:function(){W(t)}},"查看"):""}}],W=function(e){Y(e),M(!0)},B=function(e){Y(e),P(!0)};Object(o.useEffect)(function(){G()},[f.pageRows,f.pageIndex]);var G=function(){var e={};d().productId&&d().productId.trim()&&(e.productId=d().productId.trim()),d().status&&(e.status=d().status),e=V(V({},e),f),z(!0),m(e).then(function(e){0==e.data.code&&(j(e.data.data.list),E(e.data.data.pager.totalRows))}).finally(function(){z(!1)})},X=function(e){Y(e),T(!0)};return u.a.createElement("div",{className:"panelMn-page",style:{minWidth:"1200px"}},u.a.createElement(s.a,{title:"用户免开发固件上传信息"},u.a.createElement(i.a,{layout:"inline"},u.a.createElement(q,{label:"产品ID"},a("productId",{getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(u.a.createElement(c.a,{placeholder:"请输入产品ID",style:{width:240},allowClear:!0}))),u.a.createElement(q,{label:"状态"},a("status")(u.a.createElement(l.a,{style:{width:160},placeholder:"请选择状态",allowClear:!0},J.map(function(e,t){return u.a.createElement(l.a.Option,{key:e.value,value:e.value,label:e.label},e.label)})))),u.a.createElement(q,null,u.a.createElement(r.a,{type:"primary",onClick:function(){1==f.pageIndex?G():y({pageIndex:1,pageRows:10})}},"查询")),u.a.createElement(q,null,u.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置")))),u.a.createElement(n.a,null,u.a.createElement(b.a,{rowKey:"id",columns:Q,dataSource:w,loading:U,pagination:{defaultCurrent:1,current:f.pageIndex,onChange:function(e,t){t===f.pageRows?y(function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})}):y(function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})})},pageSize:f.pageRows,total:h,showQuickJumper:!0,showTotal:function(){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,h)," 条")}}})),x&&u.a.createElement(k,{checkVisible:x,handleOk:function(){T(!1),G()},handleCancel:function(){T(!1)},actionData:H}),C&&u.a.createElement(N,{infoVisible:C,handleCancel:function(){P(!1)},actionData:H}),R&&u.a.createElement(F,{infoVisible:R,handleCancel:function(){M(!1)},actionData:H}))})},1504:function(e,t,a){"use strict";a.r(t);a(94);var n=a(38),r=(a(72),a(22)),l=(a(122),a(58)),c=(a(189),a(75)),i=(a(244),a(134)),o=(a(212),a(91)),u=(a(143),a(33)),s=(a(439),a(793),a(23),a(63),a(441),a(166),a(66),a(36),a(26),a(28),a(29),a(19),a(35),a(37),a(34),a(39),a(32),a(40),a(0)),d=a.n(s),m=a(440),p=a(92),f=(a(1335),a(1334)),y=(a(167),a(10)),b=(a(442),a(169)),v=(a(281),a(100)),g=(a(247),a(99),a(245),a(340),a(282),a(155)),h=(a(111),a(343),function(e,t,a,n,r){if(!Array.isArray(e))return 1;for(var l=e.map(function(e){return e[r]}),c=e.map(function(e){return e[t]}),i=l[0],o=[[i]],u=0,s=1;s<l.length;s++)l[s]===i?o[u].push(l[s]):(o[u+=1]=[],o[u].push(l[s]),i=l[s]);var d=[];o.forEach(function(e,t){d[t]=[],d[t]=c.splice(0,e.length)});var m=[];d.forEach(function(e,t){var a=d[t][0],n=0;m[t]=[],m[t][n]=[],e.forEach(function(e,r){a===e?m[t][n].push(e):(n+=1,m[t][n]=[],m[t][n].push(e),a=e)})});var p=[];m.forEach(function(e){e.forEach(function(e){p.push(e)})});var f=[];p.forEach(function(e){for(var t=e.length,a=0;a<t;a++)f.push(0===a?t:0)});var y={children:n,props:{}};return y.props.rowSpan=f[a],y});function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(e){var t=e.dataSource,a=E(Object(s.useState)({pageIndex:1,totalRows:0,pageRows:10}),2),n=a[0],r=a[1],l=function(){var e=(n.pageIndex-1)*n.pageRows;return t.slice(e,e+10)},c=[{title:"功能类型",dataIndex:"funcTypeCN",render:function(e,t,a){return h(l(),"funcIdentifier",a,e,"funcTypeCN")}},{title:"功能点名称",dataIndex:"funcName",render:function(e,t,a){return h(l(),"funcIdentifier",a,e,"funcName")}},{title:"标识符",dataIndex:"funcIdentifier",render:function(e,t,a){return h(l(),"funcIdentifier",a,e,"funcIdentifier")}},{title:"DP ID",dataIndex:"dataPointId"},{title:"参数名称",dataIndex:"name",render:function(e,t){return e}},{title:"参数标识",dataIndex:"identifier"},{title:"数据传输类型",dataIndex:"accessMode",render:function(e,t){return"rw"==e?"可下发可上报":"w"==e?"可下发":"r"==e?"可上报":""}},{title:"数据类型",dataIndex:"dataType",render:function(e,t){return d.a.createElement("span",null,t.dataTypCN)}},{title:"数据属性",dataIndex:"propertyMap",render:function(e,t){return d.a.createElement("span",null,function(e){var t=null;switch(e.dataTypeEN){case"float":case"int":t="数值范围：".concat(e.propertyMap.min,"-").concat(e.propertyMap.max,",间距：").concat(e.propertyMap.interval,",倍数：").concat(e.propertyMap.multiple,",单位：").concat(e.propertyMap.unit);break;case"bool":t="0：".concat(e.propertyMap[0],",1：").concat(e.propertyMap[1]);break;case"enum":var a="";for(var n in e.propertyMap)a+=e.propertyMap[n]+"，";t="枚举值：".concat(a);break;default:return""}return t}(t))}}],i=Object(s.useMemo)(function(){var e=[];return t.forEach(function(t){e.indexOf(t.funcIdentifier)<0&&e.push(t.funcIdentifier)}),e},[t]);return d.a.createElement("div",null,d.a.createElement(g.a,{rowKey:"key",columns:c,dataSource:t,scroll:{y:400},pagination:{defaultCurrent:1,current:n.pageIndex,onChange:function(e,t){t===n.pageRows?r(function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})}):r(function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})})},pageSize:n.pageRows,total:n.totalRows,showQuickJumper:!1,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,i.length)," 条")}}}))}var w=a(456);a(1393);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(a,!0).forEach(function(t){x(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var T=u.a.Item,N=l.a.TextArea,S=v.a.TabPane;function C(e){var t=[];return e.forEach(function(e){e.funcParamList&&e.funcParamList.length&&e.funcParamList.forEach(function(a){var n=JSON.parse(JSON.stringify(e));t.push(k(k({},n),a))})}),t.forEach(function(e,t){e.key=t}),t}function P(e){var t=e.form,a=e.addVis,n=e.handleCancel,m=e.handleOk,p=e.optionList,g=e.editId,h=t.getFieldDecorator,E=t.validateFields,I=t.setFieldsValue,x=t.getFieldValue,P=(t.getFieldsValue,j(Object(s.useState)([]),2)),F=(P[0],P[1],j(Object(s.useState)("1"),2)),D=F[0],V=F[1],R=j(Object(s.useState)([]),2),L=R[0],q=R[1],J=j(Object(s.useState)([]),2),M=J[0],A=J[1],U=j(Object(s.useState)([]),2),z=U[0],K=U[1];Object(s.useEffect)(function(){g&&H()},[]);var H=function(){Object(w.b)({id:g}).then(function(e){0==e.data.code&&I({name:e.data.data.name,deviceTypeId:e.data.data.deviceTypeId,status:e.data.data.status,remark:e.data.data.remark})}),Object(w.c)({productId:g}).then(function(e){if(0==e.data.code){var t=C(e.data.data.standard||[]);q(t),Y("1",t)}})},Y=function(e,t){t=t||L,V(e);var a=["properties","events","services"],n=t.filter(function(t){if(t.funcType==a[e-1])return t});A(n)};return d.a.createElement("div",null,d.a.createElement(o.a,{title:g?"编辑物模型":"新增物模型",visible:a,onOk:function(){g?E().then(function(e){var t=k(k({},e),{},{file:z.length?z[0].originFileObj:"",id:g});Object(w.a)(t).then(function(e){0==e.data.code&&(i.a.success("编辑成功"),m())})}):E().then(function(e){var t=k(k({},e),{},{file:z.length?z[0].originFileObj:""});Object(w.f)(t).then(function(e){0==e.data.code&&(i.a.success("新增成功"),m())})})},onCancel:n,width:"1200px"},d.a.createElement("div",null,d.a.createElement(u.a,{labelCol:{span:2},wrapperCol:{span:22}},d.a.createElement(T,{label:"模型名称"},h("name",{rules:[{required:!0,message:"请输入模型名称"}]})(d.a.createElement(l.a,{style:{width:"100%"}}))),d.a.createElement(T,{label:"所属分类"},h("deviceTypeId",{rules:[{required:!0,message:"请选择所属分类"}]})(d.a.createElement(c.a,{style:{width:"100%"},placeholder:"请选择所属分类",allowClear:!0},p.map(function(e,t){return d.a.createElement(c.a.Option,{key:e.deviceTypeId,value:e.deviceTypeId,label:e.deviceTypeName},e.deviceTypeName)})))),d.a.createElement(u.a.Item,{label:"状态"},h("status",{rules:[{required:!0,message:"请选择状态"}]})(d.a.createElement(b.a.Group,null,d.a.createElement(b.a,{value:2}," 正式"),d.a.createElement(b.a,{value:1},"草稿")))),d.a.createElement(T,{label:"模板设置",extra:"支持格式：json"},h("file",{rules:[{required:!g,message:"请上传文件"}],getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList}})(d.a.createElement(f.a,{customRequest:function(e){z.length?i.a.info("只能上传一个文件"):Object(w.h)({file:e.file}).then(function(e){if(0==e.data.code){var a=C(e.data.data.standard||[]);q(a),Y("1",a)}else K([]),t.setFieldsValue({file:""})})},listType:"picture",accept:".json",beforeUpload:function(e,t){return function(e,t,a){return new Promise(function(t,n){return a.indexOf(e.name.split(".").slice(-1)[0])>-1?x("file")&&x("file").length?(i.a.error("请删除原文件再上传"),n(!1)):t(!0):(i.a.error("只能上传".concat(a.join(","),"格式")),n(!1))})}(e,0,["json"])},onChange:function(e){e.file;var t=e.fileList;K(t)},fileList:z},d.a.createElement(r.a,null,d.a.createElement(y.a,{type:"upload"})," 选择模板")))),d.a.createElement(T,{label:"备注"},h("remark",{rules:[{required:!0,message:"请输入备注"}]})(d.a.createElement(N,{style:{width:"100%"}}))),d.a.createElement(T,{label:"物模型详情"},d.a.createElement("div",null,d.a.createElement(v.a,{activeKey:D,onChange:Y},d.a.createElement(S,{tab:"属性",key:"1"}),d.a.createElement(S,{tab:"事件",key:"2"}),d.a.createElement(S,{tab:"服务",key:"3"})),d.a.createElement("div",null,d.a.createElement(O,{dataSource:M,pagination:!1}))))))))}var F=P=u.a.create()(P),D=a(31);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach(function(t){L(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var J=u.a.Item;t.default=u.a.create()(function(e){var t=e.form,a=t.getFieldDecorator,f=(t.validateFields,t.getFieldsValue),y=q(Object(s.useState)({pageIndex:1,pageRows:10}),2),b=y[0],v=y[1],g=q(Object(s.useState)([]),2),h=g[0],E=g[1],O=q(Object(s.useState)([]),2),j=O[0],I=O[1],k=q(Object(s.useState)(!1),2),x=k[0],T=k[1],N=q(Object(s.useState)(0),2),S=N[0],C=N[1],P=q(Object(s.useState)(!1),2),V=P[0],L=P[1],M=q(Object(s.useState)(0),2),A=M[0],U=M[1],z=[{title:"物模型ID",dataIndex:"id",key:"id",width:"100px"},{title:"物模型名称",dataIndex:"name",key:"name"},{title:"语言版本",dataIndex:"",key:"",render:function(){return d.a.createElement("span",null,"中文")}},{title:"所属分类",dataIndex:"deviceType",key:"deviceType"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return d.a.createElement("span",null,1==e?"草稿":"正式")}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e){return e&&D.b.utcToDev(e)}},{title:"修改时间",dataIndex:"updateTime",key:"updateTime",render:function(e){return e&&D.b.utcToDev(e)}},{title:"操作",key:"action",width:100,render:function(e,t){return d.a.createElement("span",null,1==t.status?d.a.createElement("span",null,d.a.createElement("a",{style:{marginRight:"10px"},onClick:function(){K(t.id)}},"发布"),d.a.createElement("a",{onClick:function(){Q(t.id)}},"编辑")):d.a.createElement("a",{onClick:function(){Q(t.id)}},"更新"))}}],K=function(e){o.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:"点击确定将发布数据，点击取消可取消发布。",onOk:function(){Object(w.g)({id:e}).then(function(e){i.a.success("发布成功"),H()})}})};Object(s.useEffect)(function(){Y()},[]),Object(s.useEffect)(function(){H()},[b.pageRows,b.pageIndex]);var H=function(){var e={};f().name&&f().name.trim()&&(e.name=f().name.trim()),f().deviceTypeId&&(e.deviceTypeId=f().deviceTypeId),e=R(R({},e),b),L(!0),Object(w.d)(e).then(function(e){E(e.data.data.list),U(e.data.data.pager.totalRows)}).finally(function(){L(!1)})},Y=function(){Object(w.e)().then(function(e){I(e.data.data)})},Q=function(e){C(e),T(!0)};return d.a.createElement("div",{className:"PhysicalModel-page"},d.a.createElement(m.a,{title:"平台物模型管理"},d.a.createElement("div",{className:"title-space"},d.a.createElement(u.a,{layout:"inline"},d.a.createElement(J,{label:"所属分类"},a("deviceTypeId",{})(d.a.createElement(c.a,{style:{width:160},placeholder:"请选择所属分类",allowClear:!0},j.map(function(e,t){return d.a.createElement(c.a.Option,{key:e.deviceTypeId,value:e.deviceTypeId,label:e.deviceTypeName},e.deviceTypeName)})))),d.a.createElement(J,{label:"物模型名称"},a("name",{})(d.a.createElement(l.a,{placeholder:"请输入物模型名称",style:{width:240},allowClear:!0}))),d.a.createElement(J,null,d.a.createElement(r.a,{type:"primary",onClick:function(){return H()}},"查询")),d.a.createElement(J,null,d.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),d.a.createElement(r.a,{type:"primary",onClick:function(){C(0),T(!0)}},"新增物模型"))),d.a.createElement(n.a,null,d.a.createElement(p.a,{rowKey:"id",columns:z,dataSource:h,loading:V,pagination:{defaultCurrent:1,current:b.pageIndex,onChange:function(e,t){t===b.pageRows?v(function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})}):v(function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})})},pageSize:b.pageRows,total:A,showQuickJumper:!0,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,A)," 条")}}})),x&&d.a.createElement(F,{addVis:x,editId:S,handleCancel:function(){T(!1)},handleOk:function(){H(),T(!1)},optionList:j}))})},1510:function(e,t,a){"use strict";a.r(t);a(94);var n=a(38),r=(a(72),a(22)),l=(a(122),a(58)),c=(a(244),a(134)),i=(a(212),a(91)),o=(a(143),a(33)),u=(a(793),a(23),a(63),a(441),a(166),a(36),a(26),a(28),a(29),a(19),a(35),a(37),a(34),a(39),a(32),a(40),a(0)),s=a.n(u),d=a(440),m=a(92),p=a(4),f=function(e){return p.c.request({url:"/manage-open/banner/getBannerList",data:e,method:"post",headers:{}})},y=function(e){return p.c.request({url:"/manage-open/banner/updateStatus",method:"post",data:e,headers:{}})},b=function(e){return p.c.request({url:"/manage-open/banner/delete",method:"post",data:e,headers:{}})},v=function(e){return p.c.request({url:"/manage-open/banner/add",method:"post",data:e,headers:{}})},g=(a(1335),a(1334)),h=(a(167),a(10)),E=(a(1339),a(1341)),O=(a(247),a(99),a(245),a(439),a(340),a(31)),w=a(6),j=a.n(w);a(1391);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var T=o.a.Item,N=(d.a.Option,E.a.RangePicker,{action:O.j,data:function(e){return{appId:31438,domainType:4}}});var S=o.a.create()(function(e){var t=e.form,a=e.addVis,n=e.handleCancel,r=e.handleOk,u=t.getFieldDecorator,d=t.validateFields,m=t.getFieldValue;return s.a.createElement("div",null,s.a.createElement(i.a,{title:"新建",visible:a,onOk:function(){d().then(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach(function(t){x(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e);t.showStartTime=j()(t.showStartTime).format("YYYY-MM-DD HH:mm:ss"),t.showEndTime=j()(t.showEndTime).format("YYYY-MM-DD HH:mm:ss"),v(t).then(function(e){0==e.data.code&&(c.a.success("新增成功"),r())})})},onCancel:n,width:"700px"},s.a.createElement("div",{className:"banner-modal-add"},s.a.createElement(o.a,{labelCol:{span:6},wrapperCol:{span:14}},s.a.createElement(T,{label:"banner名称"},u("bannerName",{rules:[{required:!0,message:"请输入banner名称"}]})(s.a.createElement(l.a,{style:{width:"100%"}}))),s.a.createElement(T,{label:"计划展示开始时间"},u("showStartTime",{rules:[{required:!0,message:"请选择开始时间"}]})(s.a.createElement(E.a,{showTime:!0,style:{width:"100%"}}))),s.a.createElement(T,{label:"计划展示结束时间"},u("showEndTime",{rules:[{required:!0,message:"请选择结束时间"}]})(s.a.createElement(E.a,{showTime:!0,style:{width:"100%"}}))),s.a.createElement(T,{label:"上传图片",extra:"支持格式：png、jpg 尺寸：1440x * 1334px"},u("imageUrl",{rules:[{required:!0,message:"请上传图片"}],getValueFromEvent:function(e){}})(s.a.createElement("div",null,s.a.createElement(g.a,I({className:"avatar-uploader"},N,{accept:".png,.jpg",onChange:function(e){var a=e.file,n=e.fileList;if("done"===a.status){var r=n[0];r.url=r.response.data.url,t.setFieldsValue({imageUrl:r.response.data.url})}else"error"===a.status?c.a.error("上传失败"):"removed"===a.status&&t.setFieldsValue({imageUrl:""})},listType:"picture-card",beforeUpload:function(e){return function(e,t){return new Promise(function(a,n){return t.indexOf(e.name.split(".").slice(-1)[0])>-1?a(!0):(c.a.error("只能上传".concat(t.join(","),"格式")),n(!1))})}(e,["png","jpg"])}}),m("imageUrl")?null:s.a.createElement("span",null,s.a.createElement(h.a,{type:"upload"})," 上传图片"))))),s.a.createElement(T,{label:"跳转URL"},u("url",{rules:[{required:!0,message:"请输入跳转URL"}]})(s.a.createElement(l.a,{style:{width:"100%"}})))))))});function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach(function(t){F(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var V=o.a.Item;t.default=o.a.create()(function(e){var t=e.form,a=D(Object(u.useState)({pageIndex:1,pageRows:10}),2),p=a[0],v=a[1],g=t.getFieldDecorator,h=(t.validateFields,t.getFieldsValue),E=D(Object(u.useState)(0),2),w=E[0],j=E[1],I=D(Object(u.useState)([]),2),k=I[0],x=I[1],T=D(Object(u.useState)(!1),2),N=T[0],C=T[1],F=D(Object(u.useState)(!1),2),R=F[0],L=F[1],q=D(Object(u.useState)({}),2),J=q[0],M=q[1],A=D(Object(u.useState)(!1),2),U=A[0],z=A[1];Object(u.useEffect)(function(){K()},[p.pageRows,p.pageIndex]);var K=function(){var e={};h().bannerName&&h().bannerName.trim()&&(e.bannerName=h().bannerName.trim()),e=P(P({},e),p),z(!0),f(e).then(function(e){0==e.data.code&&(x(e.data.data.list),j(e.data.data.pager.totalRows))}).finally(function(){z(!1)})},H=function(e,t){var a=1==t?"是否上线":"是否下线";i.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:a,onOk:function(){y({id:e,status:t}).then(function(e){var a=1==t?"上线成功":"下线成功";0==e.data.code&&(c.a.success(a),K())})}})},Y=function(e){i.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:"是否删除此banner",onOk:function(){b({id:e}).then(function(e){0==e.data.code&&(c.a.success("删除成功"),K())})}})},Q=[{title:"banner名称",dataIndex:"bannerName",key:"bannerName"},{title:"上传时间",dataIndex:"uploadTime",key:"uploadTime",render:function(e){return e&&O.b.utcToDev(e)}},{title:"计划展示开始时间",dataIndex:"showStartTime",key:"showStartTime",render:function(e){return e&&O.b.utcToDev(e)}},{title:"计划展示结束时间",dataIndex:"showEndTime",key:"showEndTime",render:function(e){return e&&O.b.utcToDev(e)}},{title:"状态",dataIndex:"status",key:"status",render:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=["待发布","已上线","已下线"];return t[e]}(e)}},{title:"操作",key:"action",width:200,render:function(e,t){return 1==t.status?s.a.createElement("span",{className:"comman-table-margin"},s.a.createElement("a",{onClick:function(){W(t)}},"查看图片"),s.a.createElement("a",{onClick:function(){H(t.id,2)}},"下线")):0==t.status?s.a.createElement("span",{className:"comman-table-margin"},s.a.createElement("a",{onClick:function(){W(t)}},"查看图片"),s.a.createElement("a",{onClick:function(){H(t.id,1)}},"上线"),s.a.createElement("a",{onClick:function(){Y(t.id)}},"删除")):2==t.status?s.a.createElement("span",{className:"comman-table-margin"},s.a.createElement("a",{onClick:function(){W(t)}},"查看图片"),s.a.createElement("a",{onClick:function(){H(t.id,1)}},"上线"),s.a.createElement("a",{onClick:function(){Y(t.id)}},"删除")):void 0}}],W=function(e){M(e),L(!0)};return s.a.createElement("div",{className:"banner-page"},s.a.createElement(d.a,{title:"平台banner管理"},s.a.createElement("div",{className:"title-space"},s.a.createElement(o.a,{layout:"inline"},s.a.createElement(V,{label:""},g("bannerName")(s.a.createElement(l.a,{placeholder:"输入名称查询",style:{width:240}}))),s.a.createElement(V,null,s.a.createElement(r.a,{type:"primary",onClick:function(){1==p.pageIndex?K():v({pageIndex:1,pageRows:10})}},"查询")),s.a.createElement(V,null,s.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),s.a.createElement(r.a,{type:"primary",onClick:function(){C(!0)}},"新建"))),s.a.createElement(n.a,null,s.a.createElement(m.a,{rowKey:"id",columns:Q,dataSource:k,loading:U,pagination:{defaultCurrent:1,current:p.pageIndex,onChange:function(e,t){t===p.pageRows?v(function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})}):v(function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})})},pageSize:p.pageRows,total:w,showQuickJumper:!0,showTotal:function(){return s.a.createElement("span",null,"共 ",s.a.createElement("a",null,w)," 条")}}})),N&&s.a.createElement(S,{addVis:N,handleOk:function(){K(),C(!1)},handleCancel:function(){C(!1)}}),R&&s.a.createElement(i.a,{title:"查看图片",visible:R,width:1200,footer:null,onCancel:function(){L(!1)}},s.a.createElement("div",{className:"banner-img-wrap"},s.a.createElement("img",{src:J.imageUrl}))))})},1521:function(e,t,a){"use strict";a.r(t);a(212);var n=a(91),r=(a(94),a(38)),l=(a(72),a(22)),c=(a(189),a(75)),i=(a(813),a(454)),o=(a(244),a(134)),u=(a(122),a(58)),s=(a(143),a(33)),d=(a(166),a(793),a(66),a(99),a(245),a(36),a(26),a(23),a(28),a(29),a(19),a(35),a(37),a(34),a(39),a(32),a(40),a(0)),m=a.n(d),p=a(440),f=a(92),y=a(4),b=function(e){return y.c.request({url:"/manage-open/workOrder/getWorkOrderList",data:e,method:"post",headers:{}})},v=function(){return y.c.request({url:"/manage-open/workOrder/getWorkOrderDictionary",method:"post",data:{}})},g=function(e){return y.c.request({url:"/manage-open/workOrder/replyWorkOrder",method:"post",data:e,headers:{}})},h=a(31);a(1455);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach(function(t){w(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s.a.Item,p.a.Option;var I=u.a.TextArea;t.default=s.a.create()(function(e){var t=e.form,a=j(Object(d.useState)({pageIndex:1,pageRows:10}),2),u=a[0],y=a[1],E=j(Object(d.useState)(0),2),w=E[0],k=E[1],x=j(Object(d.useState)([]),2),T=x[0],N=x[1],S=j(Object(d.useState)(!1),2),C=S[0],P=S[1],F=j(Object(d.useState)({}),2),D=F[0],V=F[1],R=[{title:"工单ID",dataIndex:"workOrderId"},{title:"提交账号",dataIndex:"creator"},{title:"提交时间",dataIndex:"createTime",render:function(e){return e&&h.b.utcToDev(e)}},{title:"问题内容",dataIndex:"problemDesc",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"问题图片/视频",dataIndex:"image",render:function(e,t){return m.a.createElement("span",{onClick:function(){$(t)}},"查看")}},{title:"状态",dataIndex:"status",render:function(e){return m.a.createElement("span",null,e?"已回复":"未回复")}},{title:"操作",render:function(e,t){return m.a.createElement("span",null,m.a.createElement("a",{onClick:function(){ae(t,!0)},style:{marginRight:"10px"}},"详情"),!t.status&&m.a.createElement("a",{onClick:function(){ae(t,!1)}},"回复"))}}];Object(d.useEffect)(function(){_()},[]),Object(d.useEffect)(function(){ne()},[u.pageRows,u.pageIndex]);var L=j(Object(d.useState)([]),2),q=L[0],J=L[1],M=j(Object(d.useState)(!1),2),A=M[0],U=M[1],z=j(Object(d.useState)(!1),2),K=z[0],H=z[1],Y=j(Object(d.useState)(!1),2),Q=Y[0],W=Y[1],B=j(Object(d.useState)(""),2),G=B[0],X=B[1],Z=function(e){X(e),W(!0)},$=function(e){V(e),e.image?U(!0):alert("无图片")},_=function(){v().then(function(e){if(0==e.data.code){var t=[];for(var a in e.data.data.problemTypeOneLevel){var n={value:a,label:e.data.data.problemTypeOneLevel[a],children:[]};for(var r in e.data.data.problemTypeTwoLevel[a])n.children.push({value:r,label:e.data.data.problemTypeTwoLevel[a][r]});t.push(n)}J(t)}})},ee=t.getFieldDecorator,te=(t.validateFields,t.getFieldsValue),ae=function(e,t){H(t),V(e),P(!0)},ne=function(){var e={};te().status&&(e.status=te().status);var t=te().userType;t&&(e.problemTypeOneLevel=t[0],e.problemTypeTwoLevel=t[1]),e=O(O({},e),u),b(e).then(function(e){0==e.data.code&&(N(e.data.data.list),k(e.data.data.pager.totalRows))})},re=j(Object(d.useState)(""),2),le=re[0],ce=re[1];return m.a.createElement("div",{className:"PhysicalModel-page"},m.a.createElement(p.a,{title:"工单管理"},m.a.createElement(s.a,{layout:"inline"},m.a.createElement(s.a.Item,{label:"问题分类"},ee("userType",{})(m.a.createElement(i.a,{options:q,placeholder:"请选择",style:{width:"412px"},popupClassName:"order-Cascader"}))),m.a.createElement(s.a.Item,{label:"状态"},ee("status",{})(m.a.createElement(c.a,{style:{width:160},placeholder:"请选择",allowClear:!0},m.a.createElement(c.a.Option,{value:"1"},"已回复"),m.a.createElement(c.a.Option,{value:"0"},"未回复")))),m.a.createElement(s.a.Item,null,m.a.createElement(l.a,{type:"primary",onClick:function(){ne()}},"查询")),m.a.createElement(s.a.Item,null,m.a.createElement(l.a,{onClick:function(){t.resetFields()}},"重置")))),m.a.createElement(r.a,null,m.a.createElement(f.a,{rowKey:"workOrderId",bordered:!0,columns:R,dataSource:T,pagination:{defaultCurrent:1,current:u.pageIndex,onChange:function(e,t){t===u.pageRows?y(function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})}):y(function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})})},pageSize:u.pageRows,total:w,showQuickJumper:!0,showTotal:function(){return m.a.createElement("span",null,"共 ",m.a.createElement("a",null,w)," 条")}}})),C&&m.a.createElement(n.a,{title:K?"详情":"回复",visible:C,onCancel:function(){P(!1)},width:"700px",footer:K?m.a.createElement("div",{className:"repair-model-footer"},m.a.createElement(l.a,{type:"primary",block:!0,onClick:function(){P(!1)}},"确认")):m.a.createElement("div",{className:"repair-model-footer"},m.a.createElement(l.a,{type:"primary",block:!0,onClick:function(){if(le||le.trim()){var e={workOrderId:D.workOrderId,replyContent:le};g(e).then(function(e){0==e.data.code&&(P(!1),o.a.success("回复成功"),ne())})}else o.a.info("请输入回复内容")}},"确认回复"))},m.a.createElement("div",{className:"my-order-detail"},m.a.createElement("div",{className:"order-item"},m.a.createElement("div",{className:"order-item-label"},"提交账号："),m.a.createElement("div",{className:"order-item-text"},D.creator," ")),m.a.createElement("div",{className:"order-item"},m.a.createElement("div",{className:"order-item-label"},"内容分类："),m.a.createElement("div",{className:"order-item-text"},D.problemTypeOneName,"-",D.problemTypeTwoName,"  ")),m.a.createElement("div",{className:"order-item"},m.a.createElement("div",{className:"order-item-label"},"问题描述："),m.a.createElement("div",{className:"order-item-text"},D.problemDesc)),m.a.createElement("div",{className:"order-item"},m.a.createElement("div",{className:"order-item-label"},"上传问题图片/视频："),m.a.createElement("div",{className:"order-item-text"},D.image&&D.image.split(",").map(function(e,t){return m.a.createElement("img",{key:t,src:e,width:100,onClick:function(){Z(e)}})}))),m.a.createElement("div",{className:"order-item"},m.a.createElement("div",{className:"order-item-label"},"联系方式："),m.a.createElement("div",{className:"order-item-text"},D.phone)),1==D.status&&K?m.a.createElement("div",{className:"order-feedback"},m.a.createElement("div",{style:{margin:"0 -24px"}}),m.a.createElement("div",{className:"order-item"},m.a.createElement("div",{className:"feedback-title"},"回复内容："),m.a.createElement("div",{className:"feedback-dec"},D.replyContent))):null,!K&&m.a.createElement("div",{className:"reply-footer"},m.a.createElement("div",{className:"label"},"回复内容："),m.a.createElement(I,{rows:4,onChange:function(e){e.persist(),ce(e.target.value)}})))),A&&m.a.createElement(n.a,{title:"图片信息",visible:A,onCancel:function(){U(!1)},width:"700px",footer:!1},m.a.createElement("div",{style:{textAlign:"center"}},D.image&&D.image.split(",").map(function(e,t){return m.a.createElement("img",{key:t,src:e,width:100,style:{marginRight:"10px"},onClick:function(){Z(e)}})}))),Q&&m.a.createElement(n.a,{title:"图片预览",visible:Q,onCancel:function(){W(!1)},width:"1000px",footer:!1},m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement("img",{src:G,style:{maxWidth:850}}))))})},1522:function(e,t,a){"use strict";a.r(t);a(94);var n=a(38),r=(a(72),a(22)),l=(a(122),a(58)),c=(a(189),a(75)),i=(a(244),a(134)),o=(a(212),a(91)),u=(a(143),a(33)),s=(a(166),a(793),a(23),a(63),a(441),a(66),a(36),a(26),a(28),a(29),a(19),a(35),a(37),a(34),a(39),a(32),a(40),a(0)),d=a.n(s),m=a(440),p=a(1378),f=a(456),y=a(92),b=a(31),v=(a(1335),a(1334)),g=(a(167),a(10));a(343),a(247),a(99),a(245),a(439),a(340),a(1392);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach(function(t){w(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var I={action:b.j,data:function(e){return{appId:31438,domainType:4}}},k=u.a.Item;var x=u.a.create()(function(e){var t=e.form,a=e.addVis,n=e.handleCancel,m=e.handleOk,f=e.optionList,b=e.modelType,E=e.actionData,w=t.getFieldDecorator,x=t.validateFields,T=t.setFieldsValue,N=t.getFieldValue,S=j(Object(s.useState)([]),2),C=S[0],P=S[1],F=j(Object(s.useState)([]),2),D=F[0],V=F[1],R=j(Object(s.useState)([]),2),L=R[0],q=R[1],J=j(Object(s.useState)([]),2),M=J[0],A=J[1],U=j(Object(s.useState)([]),2);U[0],U[1],Object(s.useEffect)(function(){"edit"==b&&z()},[]);var z=function(){t.setFieldsValue({filePath:E.htmlPath,deviceTypeId:E.deviceTypeId,templateName:E.templateName,page1:E.page1,htmlPath:E.htmlPath,physicalModelId:E.physicalModelId}),q([{url:E.page1,uid:1,name:"id"}]),A([{url:E.htmlPath,uid:2,name:"H5包"}]),Object(p.c)(E.deviceTypeId).then(function(e){0==e.data.code&&V(e.data.data)}),E.physicalModelId&&K(E.physicalModelId)},K=function(e){Object(p.b)({id:e}).then(function(e){0==e.data.code&&P(e.data.data.standard)})},H=function(e,t){return new Promise(function(a,n){return t.indexOf(e.name.split(".").slice(-1)[0])>-1?a(!0):(i.a.error("只能上传".concat(t.join(","),"格式")),n(!1))})},Y=function(e){};return d.a.createElement("div",null,d.a.createElement(o.a,{title:"edit"==b?"编辑":"新增",visible:a,onOk:function(){x().then(function(e){var t=O(O({},e),{},{isFree:1});"edit"==b&&(t.status=E.status,t.templateId=E.templateId),delete t.filePath,t.deviceSubtypeId=0,Object(p.d)(t).then(function(e){0==e.data.code&&(i.a.success("新增成功"),m())})})},onCancel:n,width:"700px"},d.a.createElement("div",null,d.a.createElement(u.a,{labelCol:{span:6},wrapperCol:{span:14}},d.a.createElement(k,{label:"所属分类"},w("deviceTypeId")(d.a.createElement(c.a,{placeholder:"请选择所属分类",onChange:function(e){T({physicalModelId:""}),P([]),Object(p.c)(e).then(function(e){0==e.data.code&&V(e.data.data)})}},f.map(function(e,t){return d.a.createElement(c.a.Option,{key:e.deviceTypeId,value:e.deviceTypeId,label:e.deviceTypeName},e.deviceTypeName)})))),d.a.createElement(k,{label:"面板名称"},w("templateName",{rules:[{required:!0,message:"请输入面板名称"}]})(d.a.createElement(l.a,{style:{width:"100%"},onPressEnter:function(){return searchList()}}))),d.a.createElement(k,{label:"物模型选择"},w("physicalModelId")(d.a.createElement(c.a,{placeholder:"请选择",onChange:K},D.map(function(e,t){return d.a.createElement(c.a.Option,{key:e.id,value:e.id,label:e.name},e.name)})))),d.a.createElement("div",{style:{paddingLeft:"162px",marginBottom:"20px"}},d.a.createElement(y.a,{rowKey:"funcIdentifier",columns:[{title:"功能类型",dataIndex:"funcTypeCN",key:"funcTypeCN",width:120},{title:"功能点名称",dataIndex:"funcName",key:"funcName",width:180},{title:"标识符",dataIndex:"funcIdentifier",key:"funcIdentifier"}],dataSource:C,scroll:{y:340},pager:!1})),d.a.createElement(k,{label:"封面",extra:"支持格式：png、jpg 尺寸：247px * 439px,170*302px"},w("page1",{rules:[{required:!0,message:"请上传封面"}],getValueFromEvent:Y})(d.a.createElement("div",null,d.a.createElement(v.a,h({className:"avatar-uploader"},I,{accept:".png,.jpg",onChange:function(e){var a=e.file,n=e.fileList;if("done"===a.status)if(0==a.response.code){var r=n[0];r.url=r.response.data.url,t.setFieldsValue({page1:r.response.data.url})}else i.a.error("上传失败"),n.splice(0);else"error"===a.status?i.a.error("上传失败"):"removed"===a.status?t.setFieldsValue({page1:""}):a.status||n.splice(0)},listType:"picture-card",beforeUpload:function(e){return H(e,["png","jpg"])},defaultFileList:L}),N("page1")?null:d.a.createElement("span",null,d.a.createElement(g.a,{type:"upload"})," 上传图片"))))),d.a.createElement(k,{label:"上传H5包",extra:"支持格式：zix"},w("htmlPath",{rules:[{required:!0,message:"请上传H5包"}],getValueFromEvent:Y})(d.a.createElement("div",null,d.a.createElement(v.a,h({className:"avatar-uploader"},I,{accept:".zix",onChange:function(e){var a=e.file,n=e.fileList;if("done"===a.status)if(0==a.response.code){var r=n[0];r.url=r.response.data.url,t.setFieldsValue({htmlPath:r.response.data.url,filePath:r.response.data.url})}else i.a.error("上传失败"),n.splice(0),t.setFieldsValue({filePath:"",htmlPath:""});else"error"===a.status?i.a.error("上传失败"):"removed"===a.status&&(t.setFieldsValue({htmlPath:""}),t.setFieldsValue({filePath:""}))},beforeUpload:function(e){return H(e,["zix"])},defaultFileList:M}),N("htmlPath")?null:d.a.createElement(r.a,null,d.a.createElement(g.a,{type:"upload"})," 上传H5包"))))),d.a.createElement(k,{label:"工程文件地址"},w("filePath",{})(d.a.createElement(l.a,{readOnly:!0,style:{width:"100%"}})))))))});function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach(function(t){S(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P=u.a.Item;t.default=u.a.create()(function(e){var t=e.form,a=t.getFieldDecorator,v=(t.validateFields,t.getFieldsValue),g=C(Object(s.useState)({pageIndex:1,pageRows:10}),2),h=g[0],E=g[1],O=C(Object(s.useState)(0),2),w=O[0],j=O[1],I=C(Object(s.useState)([]),2),k=I[0],T=I[1],S=C(Object(s.useState)([]),2),F=S[0],D=S[1],V=C(Object(s.useState)(!1),2),R=V[0],L=V[1],q=C(Object(s.useState)(!1),2),J=(q[0],q[1],C(Object(s.useState)({}),2)),M=J[0],A=J[1],U=C(Object(s.useState)(""),2),z=U[0],K=U[1],H=C(Object(s.useState)(!1),2),Y=H[0],Q=H[1],W=[{title:"面板ID",dataIndex:"templateId",key:"templateId",width:100},{title:"标准面板名称",dataIndex:"templateName",key:"templateName"},{title:"所属分类",dataIndex:"allCategoryName",key:"allCategoryName"},{title:"状态",dataIndex:"status",key:"status",width:100,render:function(e){return d.a.createElement("span",null,e?"正式":"草稿")}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e){return e&&b.b.utcToDev(e)}},{title:"修改时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return e&&b.b.utcToDev(e)}},{title:"操作",key:"action",width:180,render:function(e,t){return d.a.createElement("span",null,1==t.status?d.a.createElement("a",{onClick:function(){Z(t)}},"更新"):d.a.createElement("span",null,d.a.createElement("a",{onClick:function(){Z(t)},style:{marginRight:"10px"}},"编辑"),d.a.createElement("a",{onClick:function(){B(t)}},"发布")))}}],B=function(e){o.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:"点击确定将发布数据，点击取消可取消发布。",onOk:function(){var t=N(N({},e),{},{status:1});delete t.createTime,delete t.modifyTime,Object(p.d)(t).then(function(e){i.a.success("发布成功"),G()})}})};Object(s.useEffect)(function(){Object(f.e)().then(function(e){D(e.data.data)})},[]),Object(s.useEffect)(function(){G()},[h.pageRows,h.pageIndex]);var G=function(){var e={};v().templateName&&v().templateName.trim()&&(e.templateName=v().templateName.trim()),v().deviceTypeId&&(e.deviceTypeId=v().deviceTypeId),e=N(N({},e),h),Q(!0),Object(p.a)(e).then(function(e){0==e.data.code&&(T(e.data.data.list),j(e.data.data.pager.totalRows))}).finally(function(){Q(!1)})},X=function(){1==h.pageIndex?G():E({pageIndex:1,pageRows:10})},Z=function(e){K("edit"),A(e),L(!0)};return d.a.createElement("div",{className:"panelMn-page"},d.a.createElement(m.a,{title:"平台标准面板管理"},d.a.createElement("div",{className:"title-space"},d.a.createElement(u.a,{layout:"inline"},d.a.createElement(P,{label:"所属分类"},a("deviceTypeId")(d.a.createElement(c.a,{style:{width:160},placeholder:"请选择所属分类"},F.map(function(e,t){return d.a.createElement(c.a.Option,{key:e.deviceTypeId,value:e.deviceTypeId,label:e.deviceTypeName},e.deviceTypeName)})))),d.a.createElement(P,{label:"面板名称"},a("templateName",{})(d.a.createElement(l.a,{placeholder:"请输入面板名称",style:{width:240}}))),d.a.createElement(P,null,d.a.createElement(r.a,{type:"primary",onClick:function(){return X()}},"查询")),d.a.createElement(P,null,d.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),d.a.createElement(r.a,{type:"primary",onClick:function(){K("add"),L(!0)}},"新增标准面板"))),d.a.createElement(n.a,null,d.a.createElement(y.a,{rowKey:"templateId",columns:W,dataSource:k,loading:Y,pagination:{defaultCurrent:1,current:h.pageIndex,onChange:function(e,t){t===h.pageRows?E(function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})}):E(function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})})},pageSize:h.pageRows,total:w,showQuickJumper:!0,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,w)," 条")}}})),R&&d.a.createElement(x,{addVis:R,handleCancel:function(){L(!1)},handleOk:function(){X(),L(!1)},optionList:F,modelType:z,actionData:M}))})}}]);