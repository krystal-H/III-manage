(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1339:function(e,t,n){"use strict";n(20),n(35),n(36),n(28),n(45),n(46),n(22),n(31),n(32);var r=n(0),o=n.n(r);n(1342);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,i(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title;return o.a.createElement("div",{className:"title-tab"},o.a.createElement("div",{className:"title-tab-option"},o.a.createElement("span",{className:"title-tab-title"},n)),o.a.createElement("div",{className:"title-tab-option"},t))}}])&&l(n.prototype,r),a&&l(n,a),t}();s.Option=function(e){var t=e.children,n=e.label,r=e.align,a=void 0===r?"left":r;return o.a.createElement("div",{className:"".concat("left"===a?"title-tab-item":"title-tab-item-right")},o.a.createElement("span",{className:n?"title-table-label":"title-table-label-non"},n?n+":":""),t)},t.a=s},1342:function(e,t,n){},1344:function(e,t,n){"use strict";n(20),n(35),n(36),n(117),n(29),n(333),n(335),n(281),n(28),n(65),n(435),n(164),n(45),n(37),n(46),n(22),n(207),n(773),n(336),n(31),n(243),n(774),n(775),n(776),n(777),n(778),n(779),n(780),n(781),n(782),n(783),n(784),n(785),n(786),n(787),n(788),n(789),n(30),n(32),n(284);var r=n(209),o=(n(339),n(176)),a=n(0);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=o.a.TreeNode;var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,s(t).call(this,e))).handleCheck=function(e,t){"function"==typeof n.props.onChange&&n.props.onChange(e,t)},n.handleSelect=function(e,t){var r=n.state.expandedKeys,o=t.node.props.eventKey;r.includes(o)?n.setState({expandedKeys:r.filter(function(e){return e!==o})}):n.setState({expandedKeys:[].concat(c(r),[o])})},n.handleExpand=function(e){n.setState({expandedKeys:e})},n.state={expandedKeys:[],selectedKeys:[]},n}var n,l,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["Component"]),n=t,(l=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isExpand,n=e.dataSource,r=[];t&&function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;t&&t.forEach(function(t){t.children&&t.children.length&&r.push(n+t.id),e(t.children,n+t.id+"-",r)})}(n,"",r),this.setState({expandedKeys:r})}},{key:"render",value:function(){var e=this.props,t=e.dataSource,n=e.target,l=e.isCheck,c=void 0===l||l,i=e.checkStrictly,u=void 0!==i&&i,s=e.searchStr,p=void 0===s?"":s,h=this.state,b=h.expandedKeys,y=h.selectedKeys,g=c&&!u?n:Array.from(new Set(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.map(function(e){var n=e.split("-"),r="";n.map(function(e){e&&(r+=e,t.push(r),r+="-")})}),t}(n)));return c||g.length?a.createElement(o.a,{blockNode:!0,checkable:c,defaultExpandParent:!0,multiple:!0,showLine:!c,checkStrictly:u,selectedKeys:y,checkedKeys:g,expandedKeys:b,onCheck:this.handleCheck,onSelect:this.handleSelect,onExpand:this.handleExpand},c?function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t&&t.map(function(t){var o=t.children,l=m(t,["children"]),c=l.name.toLowerCase(),i=r.toLowerCase(),u=c.indexOf(i),s=l.name.substr(0,u),p=l.name.substring(u,u+r.length),h=l.name.substr(u+r.length),b=u>-1?a.createElement("span",null,s,a.createElement("span",{style:{color:"#f50"}},p),h):a.createElement("span",null,l.name);return a.createElement(d,f({},l,{key:n+l.id,title:b}),e(o,n+l.id+"-",r))})}(t,"",p):function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t&&t.map(function(t){var o=t.children,l=m(t,["children"]);return n.includes(r+l.id)?a.createElement(d,f({},l,{disableCheckbox:!0,key:r+l.id,title:l.name}),e(o,n,r+l.id+"-")):null}).filter(function(e){return e})}(t,g)):a.createElement(r.a,null)}}])&&i(n.prototype,l),h&&i(n,h),t}();t.a=h},1389:function(e,t,n){},1390:function(e,t,n){},1408:function(e,t,n){"use strict";n.r(t);n(242);var r,o=n(0),a=n.n(o),l=n(104),c=(n(20),n(35),n(36),n(117),n(29),n(28),n(65),n(40),n(41),n(45),n(37),n(46),n(22),n(31),n(30),n(32),n(138),n(79)),i=(n(206),n(80)),u=(n(71),n(21)),s=(n(241),n(118)),p=n(39),f=n(1339),m=n(96),d=n(452),h=(n(163),n(50)),b=(n(435),n(282),n(105)),y=n(1344),g=b.a.TabPane,v=function(e){var t=e.dataSource,n=e.target;return a.a.createElement("div",{className:"account-auth"},a.a.createElement("h3",null,"权限设置："),a.a.createElement("div",{className:"account-auth-wrapper"},a.a.createElement(b.a,null,t.map(function(e,t){return a.a.createElement(g,{tab:e.name,key:e.id},a.a.createElement(y.a,{dataSource:[e],target:n[t],isCheck:!1,isExpand:!0}))}))))};function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I,P=function(e){var t=e.label,n=e.value;return a.a.createElement("div",{className:"account-info-item"},a.a.createElement("div",{className:"label"},"".concat(t,"：")),a.a.createElement("div",{className:"account-info-input"},n))},k=h.a.create()(r=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=E(this,(e=S(t)).call.apply(e,[this].concat(o)))).state={account:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){var t=e.account;t&&t.roleId&&t.roleId!==this.props.account.roleId&&this.props.getRoleAuth(t.roleId)}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.account,r=e.authList,o=e.target,l=n||{},c=l.userName,i=l.nickName,u=l.roleName,p=l.remark,f=function e(t){return t&&t.map(function(t){return{id:t.resourceId,name:t.resourceName,children:e(t.resourcesVoList)}})}(r);return a.a.createElement(s.a,{visible:t,width:800,title:"查看用户",wrapClassName:"sub-account-modal",onOk:this.props.closeView,onCancel:this.props.closeView},a.a.createElement(h.a,{className:"account-info"},a.a.createElement(P,{label:"用户名",value:c}),a.a.createElement(P,{label:"使用人",value:i}),a.a.createElement(P,{label:"角色",value:u}),a.a.createElement(P,{label:"备注",value:p})),a.a.createElement(v,{dataSource:f,target:o}))}}])&&w(n.prototype,r),o&&w(n,o),t}())||r,C=Object(p.b)(function(e){return{roleList:e.getIn(["subAccount","roleList"]).toJS(),visible:e.getIn(["subAccount","viewVisible"]),account:e.getIn(["subAccount","viewAccountItem"]).toJS(),authList:e.getIn(["subAccount","authList"]).toJS(),target:e.getIn(["subAccount","target"]).toJS()}},function(e){return{getRoleAuth:function(t){return e(d.a.getRoleAuth(t))},closeView:function(){return e(d.a.closeView())}}})(k);n(164),n(166);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M,D=h.a.Item,T=h.a.create()(I=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=R(this,(e=x(t)).call.apply(e,[this].concat(o)))).handleCheck=function(e,t,r){n.props.form.getFieldValue("password")!==t&&r("两次密码输入不一致"),r()},n.handleOk=function(){n.props.form.validateFields(function(e,t){e||n.props.onOk(t)})},n.handleCancel=function(){var e=n.props,t=e.form,r=e.onCancel;t.resetFields(),r()},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.form,n=e.visible,r=t.getFieldDecorator,o={labelCol:{span:6},wrapperCol:{span:14}};return a.a.createElement(s.a,{width:600,visible:n,title:"重置密码",onCancel:this.handleCancel,onOk:this.handleOk},a.a.createElement(h.a,null,a.a.createElement(D,N({label:"新密码"},o),r("password",{rules:[{min:6,max:18,required:!0,message:"请输入6-18位，支持字母、数字、符号"}],getValueFromEvent:function(e){return e.target.value.replace(/[^\w~!@#$%^&*]/,"")}})(a.a.createElement(c.a,{type:"password",maxLength:18,placeholder:"请输入密码，6~18位，支持字母、数字、符号输入"}))),a.a.createElement(D,N({label:"确认密码"},o),r("confirmPw",{rules:[{required:!0,message:"请确认新密码"},{validator:this.handleCheck}],getValueFromEvent:function(e){return e.target.value.replace(/[^\w~!@#$%^&*]/,"")}})(a.a.createElement(c.a,{type:"password",maxLength:18,placeholder:"请确认新密码"})))))}}])&&_(n.prototype,r),o&&_(n,o),t}())||I,F=n(27),J=(n(186),n(72));function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=h.a.Item,H=J.a.Option,Q=h.a.create()(M=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=W(this,(e=Z(t)).call.apply(e,[this].concat(o)))).handleCheck=function(e,t,r){n.props.form.getFieldValue("password")!==t&&r("两次密码输入不一致"),r()},n.handleCancel=function(){var e=n.props,t=e.form,r=e.closeModal;t.resetFields(),r()},n.handleOk=function(){var e=n.props,t=e.form,r=e.accountItem;t.validateFields(function(e,t){if(!e){if(console.log("----",t,r),r.userId){var o=r.userName,a=r.roleId,l=r.nickName,c=r.remark;if(JSON.stringify({userName:o,roleId:a,nickName:l,remark:c})===JSON.stringify(t))return void n.props.closeModal();n.props.modifySubAccount(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach(function(t){z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{userId:r.userId}))}else n.props.saveSubAccount(t);n.props.closeModal()}})},n.hanldeChange=function(e){n.props.getRoleAuth(e)},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){var t=e.visible,n=e.form,r=e.accountItem;if(t&&t!==this.props.visible)if(r.userId){var o=r.userName,a=r.roleId,l=r.nickName,c=r.remark;n.setFieldsValue({userName:o,roleId:a,nickName:l,remark:c}),this.props.accountItem.roleId!==r.roleId&&this.props.getRoleAuth(a)}else n.resetFields()}},{key:"render",value:function(){var e=this.props,t=e.form,n=e.visible,r=e.roleList,o=e.authList,l=e.target,i=e.accountItem,u=t.getFieldDecorator,p={labelCol:{span:6},wrapperCol:{span:14}},f=function e(t){return t&&t.map(function(t){return{id:t.resourceId,name:t.resourceName,children:e(t.resourcesVoList)}})}(o);return a.a.createElement(s.a,{width:600,title:i.userId?"编辑用户":"添加用户",visible:n,onOk:this.handleOk,onCancel:this.handleCancel,wrapClassName:"sub-account-modal"},a.a.createElement(h.a,null,a.a.createElement(G,q({label:"用户名"},p),u("userName",{rules:[{required:!0,message:"4~16位，支持字母、数字输入"},{validator:function(e,t,n){/^[a-zA-Z0-9]{4,16}$/.test(t)||n("4~16位，支持字母、数字输入"),n()}}]})(a.a.createElement(c.a,{placeholder:"4~16位，支持字母、数字输入",maxLength:16,disabled:!!i.userId}))),i.userId?null:a.a.createElement("div",null,a.a.createElement(G,q({label:"密码"},p),u("password",{rules:[{required:!0,message:"6~18位，支持字母、数字、符号输入"},{validator:function(e,t,n){/^[\w~!@#$%^&*]{6,18}$/.test(t)||n("6~18位，支持字母、数字、符号输入"),n()}}]})(a.a.createElement(c.a,{placeholder:"6~18位，支持字母、数字、符号输入",maxLength:18,type:"password"}))),a.a.createElement(G,q({label:"确认密码"},p),u("confirmPw",{rules:[{required:!0,message:"6~18位，支持字母、数字、符号输入"},{validator:this.handleCheck}]})(a.a.createElement(c.a,{placeholder:"6~18位，支持字母、数字、符号输入",maxLength:18,type:"password"})))),a.a.createElement(G,q({label:"角色"},p),u("roleId",{rules:[{required:!0,message:"请选择用户角色"}]})(a.a.createElement(J.a,{placeholder:"请选择角色",onChange:this.hanldeChange},r.map(function(e){return a.a.createElement(H,{value:e.roleId,key:e.roleId+""},e.roleName)})))),a.a.createElement(G,q({label:"使用者"},p),u("nickName")(a.a.createElement(c.a,{placeholder:"请输入使用者",maxLength:10}))),a.a.createElement(G,q({label:"备注"},p),u("remark")(a.a.createElement(c.a,{placeholder:"请输入备注",maxLength:20}))),o.length?a.a.createElement(v,{dataSource:f,target:l}):null))}}])&&$(n.prototype,r),o&&$(n,o),t}())||M,U=Object(p.b)(function(e){return{visible:e.getIn(["subAccount","visible"]),roleList:e.getIn(["subAccount","roleList"]).toJS(),authList:e.getIn(["subAccount","authList"]).toJS(),target:e.getIn(["subAccount","target"]).toJS(),accountItem:e.getIn(["subAccount","accountItem"]).toJS()}},function(e){return{closeModal:function(){return e(d.a.closeModal())},getRoleAuth:function(t){return e(d.a.getRoleAuth(t))},modifySubAccount:function(t){return e(d.a.modifySubAccount(t))},saveSubAccount:function(t){return e(d.a.saveSubAccount(t))}}})(Q);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach(function(t){te(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=f.a.Option,ce=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return r=this,o=(e=re(t)).call.apply(e,[this].concat(l)),(n=!o||"object"!==X(o)&&"function"!=typeof o?oe(r):o).state={loading:!1,accountName:"",query:{},editVisible:!1,resetVisible:!1,userId:null,accountItem:null},n.handleChange=function(e){n.setState({accountName:e.target.value})},n.handleFilter=function(){var e=n.state.accountName;n.setState({query:{accountName:e}},n.onChange)},n.handleReset=function(){n.setState({accountName:"",query:{}},function(){n.refInpt.setState({value:""})})},n.onChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.setState({loading:!0}),n.props.getList(ee({pageIndex:e},n.state.query)).then(function(){n.setState({loading:!1})})},n.handleResetPwd=function(e){n.setState({resetVisible:!0,userId:e})},n.handleResetCancel=function(){n.setState({resetVisible:!1,userId:null})},n.handleResetSave=function(e){var t=e.password;n.props.resetPwd({password:t,subId:n.state.userId}),n.handleResetCancel()},n.handleDel=function(e){var t=oe(n);s.a.confirm({title:"提示",content:"删除账户后，将会同清除所有用户信息，是否确认删除？",onOk:function(){t.props.delSubAccount(e)}})},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.onChange(),this.props.getRoleList()}},{key:"render",value:function(){var e=this,t=this.props,n=t.subAccountList,r=t.pager,o=this.state,l=o.loading,s=o.resetVisible,p=[{title:"用户名",dataIndex:"userName",width:"10%",render:function(e){return a.a.createElement("span",{title:e},e)}},{title:"使用人",dataIndex:"nickName",width:"10%",render:function(e){return a.a.createElement("span",{title:e},e)}},{title:"角色",dataIndex:"roleName",width:"15%",render:function(e){return a.a.createElement("span",{title:e},e)}},{title:"备注",dataIndex:"remark",width:"15%",render:function(e){return a.a.createElement("span",{title:e},e)}},{title:"更新时间",dataIndex:"modifyTime",width:"15%",render:function(e){var t=F.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return a.a.createElement("span",{title:t},t)}},{title:"操作",width:"200px",render:function(t){return a.a.createElement("div",{className:"action"},a.a.createElement(i.a,{placement:"top",title:"编辑"},a.a.createElement(u.a,{icon:"edit",shape:"circle",size:"small",onClick:e.props.openModal.bind(e,t)})),"  |  ",a.a.createElement(i.a,{placement:"top",title:"查看"},a.a.createElement(u.a,{icon:"info",shape:"circle",size:"small",onClick:e.props.openView.bind(e,t)})),"  |  ",a.a.createElement(i.a,{placement:"top",title:"密码重置"},a.a.createElement(u.a,{icon:"retweet",shape:"circle",size:"small",onClick:e.handleResetPwd.bind(e,t.userId)})),"  |  ",a.a.createElement(i.a,{placement:"top",title:"删除"},a.a.createElement(u.a,{icon:"delete",shape:"circle",size:"small",onClick:e.handleDel.bind(e,t.userId)})))}}];return a.a.createElement("div",{className:"sub-account"},a.a.createElement(f.a,{title:"子帐号管理"},a.a.createElement(le,{label:"账号名称"},a.a.createElement(c.a,{style:{width:240},maxLength:20,name:"accountName",onPressEnter:this.handleFilter,ref:function(t){return e.refInpt=t},placeholder:"请输入账号名称",onChange:this.handleChange})),a.a.createElement(le,null,a.a.createElement(u.a,{type:"primary",onClick:this.handleFilter},"查询")),a.a.createElement(le,null,a.a.createElement(u.a,{type:"primary",onClick:this.handleReset.bind(this)},"重置")),a.a.createElement(le,{align:"right"},a.a.createElement(u.a,{type:"primary",onClick:this.props.openModal.bind(this,{})},"新建"))),a.a.createElement("div",{className:"sub-account-content"},a.a.createElement(m.a,{rowKey:"userId",columns:p,dataSource:n,pager:r,loading:l,onPageChange:this.onChange})),a.a.createElement(C,null),a.a.createElement(T,{visible:s,onCancel:this.handleResetCancel,onOk:this.handleResetSave}),a.a.createElement(U,null))}}])&&ne(n.prototype,r),o&&ne(n,o),t}(),ie=Object(p.b)(function(e){return{subAccountList:e.getIn(["subAccount","list"]).toJS(),pager:e.getIn(["subAccount","pager"]).toJS(),roleList:e.getIn(["subAccount","roleList"]).toJS(),authList:e.getIn(["subAccount","authList"]).toJS(),target:e.getIn(["subAccount","target"]).toJS()}},function(e){return{getList:function(t){return e(d.a.getList(t))},getRoleList:function(){return e(d.a.getRoleList())},setAccount:function(t){return e(d.a.setAccount(t))},resetPwd:function(t){return e(d.a.resetPwd(t))},delSubAccount:function(t){return e(d.a.delSubAccount(t))},getRoleAuth:function(t){return e(d.a.getRoleAuth(t))},openModal:function(t){return e(d.a.openModal(t))},openView:function(t){return e(d.a.openView(t))}}})(ce);n(1389),t.default=function(e){var t=e.match;return a.a.createElement(l.d,null,a.a.createElement(l.b,{exact:!0,path:"".concat(t.url,"/list"),component:ie}),a.a.createElement(l.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1419:function(e,t,n){"use strict";n.r(t);n(242);var r=n(0),o=n.n(r),a=n(104),l=(n(20),n(35),n(36),n(29),n(28),n(40),n(41),n(45),n(37),n(46),n(22),n(31),n(30),n(32),n(138),n(79)),c=(n(206),n(80)),i=(n(71),n(21)),u=(n(241),n(118)),s=n(39),p=n(140),f=n(1339),m=n(96),d=n(461),h=(n(117),n(333),n(334),n(65),n(280),n(164),n(207),n(243),n(282),n(105)),b=(n(163),n(50)),y=n(1344);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=b.a.Item,A=h.a.TabPane,N=function e(t){return t&&t.map(function(t){return{id:t.resourceId,name:t.resourceName,children:e(t.resourcesVoList)}})},_=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=I(this,(e=P(t)).call.apply(e,[this].concat(o)))).handleOk=function(){var e=n.props,t=e.form,r=e.target,o=e.roleItem;t.validateFields(function(e,t){e||(o.roleId&&(t=E({},t,{roleId:o.roleId})),n.props.saveRole(E({},t,{roleAccess:r.reduce(function(e,t){return e.concat(t.map(function(e){return e.split("-").pop()}))},[]).join(",")})),n.props.closeModal())})},n.handleChange=function(e,t){var r=n.props.target;n.props.setRoleAuthTarget([].concat(O(r.slice(0,e)),[t],O(r.slice(e+1))))},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){var t=e.visible,n=e.roleItem;t&&t!==this.props.visible&&this.props.getRoleAuth(n.roleId)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.form,a=t.authList,c=t.target,i=t.roleItem,s=r.getFieldDecorator,p={labelCol:{span:6},wrapperCol:{span:14}};return o.a.createElement(u.a,{visible:n,width:700,title:i?"查看角色":"添加角色",onCancel:this.props.closeModal,onOk:this.handleOk,wrapClassName:"role-manage-modal"},o.a.createElement(b.a,null,o.a.createElement("h3",null,"基本信息"),o.a.createElement(C,v({label:"角色名称"},p),s("roleName",{rules:[{required:!0,message:"请输入角色名称"}]})(o.a.createElement(l.a,{maxLength:18,placeholder:"请输入角色名称"}))),o.a.createElement(C,v({label:"角色描述"},p),s("roleDesc",{rules:[{required:!0,message:"请输入角色描述"}]})(o.a.createElement(l.a,{maxLength:20,placeholder:"请输入角色描述"}))),o.a.createElement("div",{className:"account-auth"},o.a.createElement("h3",null,"编辑权限："),o.a.createElement("div",{className:"account-auth-tab"},o.a.createElement(h.a,null,a.map(function(t,n){return o.a.createElement(A,{tab:t.resourceName,key:t.resourceName},o.a.createElement(y.a,{dataSource:N([t]),target:c[n],onChange:e.handleChange.bind(e,n),isExpand:!0}))}))))))}}])&&j(n.prototype,r),a&&j(n,a),t}(),R=Object(s.b)(function(e){return{visible:e.getIn(["roleManage","visible"]),roleItem:e.getIn(["roleManage","roleItem"]).toJS(),authList:e.getIn(["roleManage","authList"]).toJS(),defaultAuth:e.getIn(["roleManage","defaultAuth"]).toJS(),target:e.getIn(["roleManage","target"]).toJS()}},function(e){return Object(p.b)({closeModal:d.a.closeModal,getRoleAuth:d.a.getRoleAuth,setRoleAuthTarget:d.a.setRoleAuthTarget,saveRole:d.a.saveRole,setRoleAuth:d.a.setRoleAuth,modifyRole:d.a.modifyRole},e)})(b.a.create({mapPropsToFields:function(e){return e.roleItem?{roleName:b.a.createFormField({value:e.roleItem.roleName}),roleDesc:b.a.createFormField({value:e.roleItem.remark})}:null},onFieldsChange:function(e,t){for(var n in console.log("---",t),t)"roleDesc"!==n?e.modifyRole(S({},n,t[n].value)):e.modifyRole({remark:t[n].value})}})(_)),x=n(27);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach(function(t){T(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=f.a.Option,z=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=J(t).call(this,e),(n=!o||"object"!==L(o)&&"function"!=typeof o?V(r):o).refInpt=void 0,n.handleChange=function(e){n.setState({roleName:e.target.value})},n.handleFilter=function(){var e=n.state.roleName;n.setState({query:{roleName:e}},n.onChange)},n.handleReset=function(){n.setState({roleName:"",query:{}},function(){n.refInpt.setState({value:""})})},n.onChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.props.getList(D({pageIndex:e},n.state.query))},n.handleDel=function(e){var t=V(n);u.a.confirm({title:"提示",content:"是否确认删除？",onOk:function(){console.log("确认删除"),t.props.delRole(e)}})},n.handleCancel=function(){n.setState({visible:!1})},n.state={roleName:"",query:{},visible:!1,roleItem:void 0},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.onChange()}},{key:"render",value:function(){var e=this,t=this.props,n=t.roleList,o=t.pager,a=t.loading,u=[{title:"角色名称",dataIndex:"roleName",width:"30%",render:function(e){return r.createElement("span",{title:e},e)}},{title:"角色描述",dataIndex:"remark",width:"30%",render:function(e){return r.createElement("span",{title:e},e)}},{title:"更新时间",dataIndex:"createTime",width:"20%",render:function(e){var t=x.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return r.createElement("span",{title:t},t)}},{title:"操作",width:"150px",render:function(t){return r.createElement("div",{className:"action"},r.createElement(c.a,{placement:"top",title:"编辑"},r.createElement(i.a,{icon:"edit",shape:"circle",size:"small",onClick:e.props.openModal.bind(e,t)})),"  |  ",r.createElement(c.a,{placement:"top",title:"删除"},r.createElement(i.a,{icon:"delete",shape:"circle",size:"small",onClick:e.handleDel.bind(e,t.roleId)})))}}];return r.createElement("div",{className:"role-manage"},r.createElement(f.a,{title:"角色管理"},r.createElement(K,{label:"角色名称"},r.createElement(l.a,{style:{width:240},maxLength:20,name:"roleName",onChange:this.handleChange,onPressEnter:this.handleFilter,ref:function(t){return e.refInpt=t},placeholder:"请输入角色名称"})),r.createElement(K,null,r.createElement(i.a,{type:"primary",onClick:this.handleFilter},"查询")),r.createElement(K,null,r.createElement(i.a,{type:"primary",onClick:this.handleReset},"重置")),r.createElement(K,{align:"right"},r.createElement(i.a,{type:"primary",onClick:this.props.openModal.bind(this,{})},"新建"))),r.createElement("div",{className:"role-content"},r.createElement(m.a,{rowKey:"roleId",columns:u,dataSource:n,pager:o,loading:a,onPageChange:this.onChange})),r.createElement(R,null))}}])&&F(n.prototype,o),a&&F(n,a),t}(),$=Object(s.b)(function(e){return{loading:e.getIn(["roleManage","loading"]),roleList:e.getIn(["roleManage","roleList"]).toJS(),pager:e.getIn(["roleManage","pager"]).toJS(),authList:e.getIn(["roleManage","authList"]).toJS(),defaultAuth:e.getIn(["roleManage","defaultAuth"]).toJS(),target:e.getIn(["roleManage","target"]).toJS()}},function(e){return Object(p.b)({getList:d.a.getList,getRoleAuth:d.a.getRoleAuth,saveRole:d.a.saveRole,delRole:d.a.delRole,setRoleAuthTarget:d.a.setRoleAuthTarget,openModal:d.a.openModal},e)})(z);n(1390),t.default=function(e){var t=e.match;return o.a.createElement(a.d,null,o.a.createElement(a.b,{exact:!0,path:"".concat(t.url,"/list"),component:$}),o.a.createElement(a.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}}}]);