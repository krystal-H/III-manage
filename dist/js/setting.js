(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1391:function(e,t,n){"use strict";n(296);var r=n(225),a=(n(255),n(122)),o=(n(55),n(366),n(38),n(369),n(370),n(32),n(79),n(160),n(105),n(368),n(27),n(26),n(22),n(817),n(818),n(819),n(820),n(821),n(822),n(823),n(824),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(28),n(47),n(48),n(35),n(19),n(34),n(39),n(141),n(0)),c=["children"],l=["children"];function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var y=a.a.TreeNode;var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(g,o["Component"]);var t,n,i,b=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var n,r=d(e);if(t()){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=b.call(this,e)).handleCheck=function(e,n){"function"==typeof t.props.onChange&&t.props.onChange(e,n)},t.handleSelect=function(e,n){var r=t.state.expandedKeys,a=n.node.props.eventKey;r.includes(a)?t.setState({expandedKeys:r.filter(function(e){return e!==a})}):t.setState({expandedKeys:[].concat(u(r),[a])})},t.handleExpand=function(e){t.setState({expandedKeys:e})},t.state={expandedKeys:[],selectedKeys:[]},t}return t=g,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isExpand,n=e.dataSource,r=[];t&&function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;t&&t.forEach(function(t){t.children&&t.children.length&&r.push(n+t.id),e(t.children,n+t.id+"-",r)})}(n,"",r),this.setState({expandedKeys:r})}},{key:"render",value:function(){var e=this.props,t=e.dataSource,n=e.target,i=e.isCheck,u=void 0===i||i,s=e.checkStrictly,f=void 0!==s&&s,p=e.searchStr,d=void 0===p?"":p,b=this.state,g=b.expandedKeys,v=b.selectedKeys,O=u&&!f?n:Array.from(new Set(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.map(function(e){var n=e.split("-"),r="";n.map(function(e){e&&(r+=e,t.push(r),r+="-")})}),t}(n)));return u||O.length?o.createElement(a.a,{blockNode:!0,checkable:u,defaultExpandParent:!0,multiple:!0,showLine:!u,checkStrictly:f,selectedKeys:v,checkedKeys:O,expandedKeys:g,onCheck:this.handleCheck,onSelect:this.handleSelect,onExpand:this.handleExpand},u?function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t&&t.map(function(t){var a=t.children,l=h(t,c),i=l.name.toLowerCase(),u=r.toLowerCase(),s=i.indexOf(u),f=l.name.substr(0,s),p=l.name.substring(s,s+r.length),d=l.name.substr(s+r.length),b=s>-1?o.createElement("span",null,f,o.createElement("span",{style:{color:"#f50"}},p),d):o.createElement("span",null,l.name);return o.createElement(y,m({},l,{key:n+l.id,title:b}),e(a,n+l.id+"-",r))})}(t,"",d):function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t&&t.map(function(t){var a=t.children,c=h(t,l);return n.includes(r+c.id)?o.createElement(y,m({},c,{disableCheckbox:!0,key:r+c.id,title:c.name}),e(a,n,r+c.id+"-")):null}).filter(function(e){return e})}(t,O)):o.createElement(r.a,null)}}])&&s(t.prototype,n),i&&s(t,i),g}();t.a=b},1451:function(e,t,n){},1452:function(e,t,n){},1453:function(e,t,n){},1498:function(e,t,n){"use strict";n.r(t);n(79),n(221);var r,a=n(0),o=n.n(a),c=n(116),l=(n(99),n(45)),i=(n(222),n(86)),u=(n(67),n(20)),s=(n(196),n(85)),f=(n(55),n(105),n(47),n(48),n(22),n(39),n(19),n(38),n(40),n(32),n(41),n(34),n(35),n(26),n(27),n(28),n(42)),p=n(463),d=n(97),m=n(484),h=(n(129),n(24)),y=(n(175),n(71)),b=(n(366),n(1391)),g=y.a.TabPane,v=function(e){var t=e.dataSource,n=e.target;return o.a.createElement("div",{className:"account-auth"},o.a.createElement("h3",null,"权限设置："),o.a.createElement("div",{className:"account-auth-wrapper"},o.a.createElement(y.a,null,t.map(function(e,t){return o.a.createElement(g,{tab:e.name,key:e.id},o.a.createElement(b.a,{dataSource:[e],target:n[t],isCheck:!1,isExpand:!0}))}))))};function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I,k=function(e){var t=e.label,n=e.value;return o.a.createElement("div",{className:"account-info-item"},o.a.createElement("div",{className:"label"},"".concat(t,"：")),o.a.createElement("div",{className:"account-info-input"},n))},P=h.a.create()(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(c,o.a.Component);var t,n,r,a=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var n,r=j(e);if(t()){var a=j(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S(this,n)}}(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={account:null},e}return t=c,(n=[{key:"componentWillReceiveProps",value:function(e){var t=e.account;t&&t.roleId&&t.roleId!==this.props.account.roleId&&this.props.getRoleAuth(t.roleId)}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.account,r=e.authList,a=e.target,c=n||{},l=c.userName,i=c.nickName,u=c.roleName,f=c.remark,p=function e(t){return t&&t.map(function(t){return{id:t.resourceId,name:t.resourceName,children:e(t.resourcesVoList)}})}(r);return o.a.createElement(s.a,{visible:t,width:800,title:"查看用户",wrapClassName:"sub-account-modal",onOk:this.props.closeView,onCancel:this.props.closeView},o.a.createElement(h.a,{className:"account-info"},o.a.createElement(k,{label:"用户名",value:l}),o.a.createElement(k,{label:"使用人",value:i}),o.a.createElement(k,{label:"角色",value:u}),o.a.createElement(k,{label:"备注",value:f})),o.a.createElement(v,{dataSource:p,target:a}))}}])&&E(t.prototype,n),r&&E(t,r),c}())||r,C=Object(f.b)(function(e){return{roleList:e.getIn(["subAccount","roleList"]).toJS(),visible:e.getIn(["subAccount","viewVisible"]),account:e.getIn(["subAccount","viewAccountItem"]).toJS(),authList:e.getIn(["subAccount","authList"]).toJS(),target:e.getIn(["subAccount","target"]).toJS()}},function(e){return{getRoleAuth:function(t){return e(m.a.getRoleAuth(t))},closeView:function(){return e(m.a.closeView())}}})(P),R=(n(161),n(141),n(33));function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F,M=h.a.Item,T=h.a.create()(I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(c,o.a.Component);var t,n,r,a=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var n,r=_(e);if(t()){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D(this,n)}}(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleCheck=function(t,n,r){e.props.form.getFieldValue("password")!==n&&r("两次密码输入不一致"),r()},e.handleOk=function(){e.props.form.validateFields(function(t,n){t||e.props.onOk(n)})},e.handleCancel=function(){var t=e.props,n=t.form,r=t.onCancel;n.resetFields(),r()},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.form,n=e.visible,r=t.getFieldDecorator,a={labelCol:{span:6},wrapperCol:{span:14}};return o.a.createElement(s.a,{width:600,visible:n,title:"重置密码",onCancel:this.handleCancel,onOk:this.handleOk},o.a.createElement(h.a,null,o.a.createElement(M,x({label:"新密码"},a),r("password",{rules:[{min:8,max:18,required:!0,pattern:R.l,message:"请输入8-18位包含字母、数字、符号3种字符"}],getValueFromEvent:function(e){return e.target.value.replace(/[^\w~!@#$%^&*]/,"")}})(o.a.createElement(l.a,{type:"password",maxLength:18,placeholder:"请输入8-18位包含字母、数字、符号3种字符"}))),o.a.createElement(M,x({label:"确认密码"},a),r("confirmPw",{rules:[{required:!0,message:"请确认新密码"},{validator:this.handleCheck}],getValueFromEvent:function(e){return e.target.value.replace(/[^\w~!@#$%^&*]/,"")}})(o.a.createElement(l.a,{type:"password",maxLength:18,placeholder:"请确认新密码"})))))}}])&&A(t.prototype,n),r&&A(t,r),c}())||I,J=(n(159),n(36));function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach(function(t){$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=h.a.Item,Z=J.a.Option,U=h.a.create()(F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(c,o.a.Component);var t,n,r,a=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var n,r=G(e);if(t()){var a=G(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return B(this,n)}}(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleCheck=function(t,n,r){e.props.form.getFieldValue("password")!==n&&r("两次密码输入不一致"),r()},e.handleCancel=function(){var t=e.props,n=t.form,r=t.closeModal;n.resetFields(),r()},e.handleOk=function(){var t=e.props,n=t.form,r=t.accountItem;n.validateFields(function(t,n){if(!t){if(console.log("----",n,r),r.userId){var a=r.userName,o=r.roleId,c=r.nickName,l=r.remark;if(JSON.stringify({userName:a,roleId:o,nickName:c,remark:l})===JSON.stringify(n))return void e.props.closeModal();e.props.modifySubAccount(z(z({},n),{},{userId:r.userId}))}else e.props.saveSubAccount(n);e.props.closeModal()}})},e.hanldeChange=function(t){e.props.getRoleAuth(t)},e}return t=c,(n=[{key:"componentWillReceiveProps",value:function(e){var t=e.visible,n=e.form,r=e.accountItem;if(t&&t!==this.props.visible)if(r.userId){var a=r.userName,o=r.roleId,c=r.nickName,l=r.remark;n.setFieldsValue({userName:a,roleId:o,nickName:c,remark:l}),this.props.accountItem.roleId!==r.roleId&&this.props.getRoleAuth(o)}else n.resetFields()}},{key:"render",value:function(){var e=this.props,t=e.form,n=e.visible,r=e.roleList,a=e.authList,c=e.target,i=e.accountItem,u=t.getFieldDecorator,f={labelCol:{span:6},wrapperCol:{span:14}},p=function e(t){return t&&t.map(function(t){return{id:t.resourceId,name:t.resourceName,children:e(t.resourcesVoList)}})}(a);return o.a.createElement(s.a,{width:600,title:i.userId?"编辑用户":"添加用户",visible:n,onOk:this.handleOk,onCancel:this.handleCancel,wrapClassName:"sub-account-modal"},o.a.createElement(h.a,null,o.a.createElement(Q,q({label:"用户名"},f),u("userName",{rules:[{required:!0,message:"4~16位，支持字母、数字输入"},{validator:function(e,t,n){/^[a-zA-Z0-9]{4,16}$/.test(t)||n("4~16位，支持字母、数字输入"),n()}}]})(o.a.createElement(l.a,{placeholder:"4~16位，支持字母、数字输入",maxLength:16,disabled:!!i.userId}))),i.userId?null:o.a.createElement("div",null,o.a.createElement(Q,q({label:"密码"},f),u("password",{rules:[{required:!0,message:"6~18位，支持字母、数字、符号输入"},{validator:function(e,t,n){/^[\w~!@#$%^&*]{6,18}$/.test(t)||n("6~18位，支持字母、数字、符号输入"),n()}}]})(o.a.createElement(l.a,{placeholder:"6~18位，支持字母、数字、符号输入",maxLength:18,type:"password"}))),o.a.createElement(Q,q({label:"确认密码"},f),u("confirmPw",{rules:[{required:!0,message:"6~18位，支持字母、数字、符号输入"},{validator:this.handleCheck}]})(o.a.createElement(l.a,{placeholder:"6~18位，支持字母、数字、符号输入",maxLength:18,type:"password"})))),o.a.createElement(Q,q({label:"角色"},f),u("roleId",{rules:[{required:!0,message:"请选择用户角色"}]})(o.a.createElement(J.a,{placeholder:"请选择角色",onChange:this.hanldeChange},r.map(function(e){return o.a.createElement(Z,{value:e.roleId,key:e.roleId+""},e.roleName)})))),o.a.createElement(Q,q({label:"使用者"},f),u("nickName")(o.a.createElement(l.a,{placeholder:"请输入使用者",maxLength:10}))),o.a.createElement(Q,q({label:"备注"},f),u("remark")(o.a.createElement(l.a,{placeholder:"请输入备注",maxLength:20}))),a.length?o.a.createElement(v,{dataSource:p,target:c}):null))}}])&&H(t.prototype,n),r&&H(t,r),c}())||F,X=Object(f.b)(function(e){return{visible:e.getIn(["subAccount","visible"]),roleList:e.getIn(["subAccount","roleList"]).toJS(),authList:e.getIn(["subAccount","authList"]).toJS(),target:e.getIn(["subAccount","target"]).toJS(),accountItem:e.getIn(["subAccount","accountItem"]).toJS()}},function(e){return{closeModal:function(){return e(m.a.closeModal())},getRoleAuth:function(t){return e(m.a.getRoleAuth(t))},modifySubAccount:function(t){return e(m.a.modifySubAccount(t))},saveSubAccount:function(t){return e(m.a.saveSubAccount(t))}}})(U);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach(function(t){ne(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?ce(e):t}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=p.a.Option,ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(c,o.a.Component);var t,n,r,a=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var n,r=le(e);if(t()){var a=le(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return oe(this,n)}}(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={loading:!1,accountName:"",query:{},editVisible:!1,resetVisible:!1,userId:null,accountItem:null},e.handleChange=function(t){e.setState({accountName:t.target.value})},e.handleFilter=function(){var t=e.state.accountName;e.setState({query:{accountName:t}},e.onChange)},e.handleReset=function(){e.setState({accountName:"",query:{}},function(){e.refInpt.setState({value:""})})},e.onChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e.setState({loading:!0}),e.props.getList(te({pageIndex:t},e.state.query)).then(function(){e.setState({loading:!1})})},e.handleResetPwd=function(t){e.setState({resetVisible:!0,userId:t})},e.handleResetCancel=function(){e.setState({resetVisible:!1,userId:null})},e.handleResetSave=function(t){var n=t.password;e.props.resetPwd({password:n,subId:e.state.userId}),e.handleResetCancel()},e.handleDel=function(t){var n=ce(e);s.a.confirm({title:"提示",content:"删除账户后，将会同清除所有用户信息，是否确认删除？",onOk:function(){n.props.delSubAccount(t)}})},e}return t=c,(n=[{key:"componentDidMount",value:function(){this.onChange(),this.props.getRoleList()}},{key:"render",value:function(){var e=this,t=this.props,n=t.subAccountList,r=t.pager,a=this.state,c=a.loading,s=a.resetVisible,f=[{title:"用户名",dataIndex:"userName",width:"10%",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"使用人",dataIndex:"nickName",width:"10%",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"角色",dataIndex:"roleName",width:"15%",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"备注",dataIndex:"remark",width:"15%",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"更新时间",dataIndex:"modifyTime",width:"15%",render:function(e){var t=R.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return o.a.createElement("span",{title:t},t)}},{title:"操作",width:"200px",render:function(t){return o.a.createElement("div",{className:"action"},o.a.createElement(i.a,{placement:"top",title:"编辑"},o.a.createElement(u.a,{icon:"edit",shape:"circle",size:"small",onClick:e.props.openModal.bind(e,t)})),"  |  ",o.a.createElement(i.a,{placement:"top",title:"查看"},o.a.createElement(u.a,{icon:"info",shape:"circle",size:"small",onClick:e.props.openView.bind(e,t)})),"  |  ",o.a.createElement(i.a,{placement:"top",title:"密码重置"},o.a.createElement(u.a,{icon:"retweet",shape:"circle",size:"small",onClick:e.handleResetPwd.bind(e,t.userId)})),"  |  ",o.a.createElement(i.a,{placement:"top",title:"删除"},o.a.createElement(u.a,{icon:"delete",shape:"circle",size:"small",onClick:e.handleDel.bind(e,t.userId)})))}}];return o.a.createElement("div",{className:"sub-account"},o.a.createElement(p.a,{title:"子帐号管理"},o.a.createElement(ie,{label:"账号名称"},o.a.createElement(l.a,{style:{width:240},maxLength:20,name:"accountName",onPressEnter:this.handleFilter,ref:function(t){return e.refInpt=t},placeholder:"请输入账号名称",onChange:this.handleChange})),o.a.createElement(ie,null,o.a.createElement(u.a,{type:"primary",onClick:this.handleFilter},"查询")),o.a.createElement(ie,null,o.a.createElement(u.a,{type:"primary",onClick:this.handleReset.bind(this)},"重置")),o.a.createElement(ie,{align:"right"},o.a.createElement(u.a,{type:"primary",onClick:this.props.openModal.bind(this,{})},"新建"))),o.a.createElement("div",{className:"sub-account-content"},o.a.createElement(d.a,{rowKey:"userId",columns:f,dataSource:n,pager:r,loading:c,onPageChange:this.onChange})),o.a.createElement(C,null),o.a.createElement(T,{visible:s,onCancel:this.handleResetCancel,onOk:this.handleResetSave}),o.a.createElement(X,null))}}])&&re(t.prototype,n),r&&re(t,r),c}(),se=Object(f.b)(function(e){return{subAccountList:e.getIn(["subAccount","list"]).toJS(),pager:e.getIn(["subAccount","pager"]).toJS(),roleList:e.getIn(["subAccount","roleList"]).toJS(),authList:e.getIn(["subAccount","authList"]).toJS(),target:e.getIn(["subAccount","target"]).toJS()}},function(e){return{getList:function(t){return e(m.a.getList(t))},getRoleList:function(){return e(m.a.getRoleList())},setAccount:function(t){return e(m.a.setAccount(t))},resetPwd:function(t){return e(m.a.resetPwd(t))},delSubAccount:function(t){return e(m.a.delSubAccount(t))},getRoleAuth:function(t){return e(m.a.getRoleAuth(t))},openModal:function(t){return e(m.a.openModal(t))},openView:function(t){return e(m.a.openView(t))}}})(ue);n(1451),t.default=function(e){var t=e.match;return o.a.createElement(c.d,null,o.a.createElement(c.b,{exact:!0,path:"".concat(t.url,"/list"),component:se}),o.a.createElement(c.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1507:function(e,t,n){"use strict";n.r(t);n(79),n(221);var r=n(0),a=n.n(r),o=n(116),c=(n(99),n(45)),l=(n(222),n(86)),i=(n(67),n(20)),u=(n(196),n(85)),s=(n(47),n(48),n(22),n(39),n(19),n(38),n(40),n(32),n(41),n(34),n(35),n(26),n(27),n(28),n(42)),f=n(149),p=n(463),d=n(97),m=n(493),h=(n(254),n(112)),y=(n(175),n(71)),b=(n(129),n(24)),g=(n(55),n(223),n(105),n(160),n(174),n(1355),n(197),n(465),n(368),n(141),n(1391)),v=n(4),O=function(e){return v.c.request({url:"/manage/auth/data/role/getAppInfo",params:e,method:"get"})},E=function(e){return v.c.request({url:"/manage-open/role/getRoleInfo",params:e,method:"get"})},w=function(e){return v.c.request({url:"/manage/auth/role/updateRole",method:"post",needFormData:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=c.a.Search,D=b.a.Item,_=y.a.TabPane,F=function e(t){return t&&t.map(function(t){return{id:t.resourceId,name:t.resourceName,children:e(t.resourcesVoList)}})},M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(l,a.a.Component);var t,n,r,o=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var n,r=A(e);if(t()){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x(this,n)}}(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).handleOk=function(){var e=t.props,n=e.form,r=e.target,a=e.roleItem,o=t.state.checkedList;n.validateFields(function(e,n){if(!e){if(a.roleId){var c={roleName:(n=P(P({},n),{},{roleId:a.roleId})).roleName,remark:n.roleDesc,roleId:n.roleId,dataJson:JSON.stringify({appInfoList:o.map(function(e){return{appId:e}})})};w(c).then(function(e){})}var l=P(P({},n),{},{roleAccess:r.reduce(function(e,t){return e.concat(t.map(function(e){return e.split("-").pop()}))},[]).join(","),detailListStr:JSON.stringify([{columna:"app_id",columnb:o.join(",")}])});t.props.saveRole(l),t.props.closeModal()}})},t.handleChange=function(e,n){var r=t.props.target;t.props.setRoleAuthTarget([].concat(I(r.slice(0,e)),[n],I(r.slice(e+1))))},t.getApplist=function(){O().then(function(e){if(0===e.data.code){var n=e.data.data.map(function(e){return{label:e.appName,value:e.appId}});t.setState({applist:n,showAppList:n})}})},t.getAppInfo=function(e){E({roleId:e}).then(function(e){if(0===e.data.code){var n=e.data.data.appIds.split(",").map(function(e){return Number(e)});t.setState({checkedList:n})}})},t.oncheckChange=function(e){var n=t.state,r=n.applist,a=n.checkedList,o=n.showAppList;if(r.length===o.length)t.setState({checkedList:e});else{var c=[],l=r.filter(function(e){return o.find(function(t){return t.value===e.value})});a.forEach(function(e){l.find(function(t){return t.value===e})||c.push(e)}),t.setState({checkedList:c.concat(e)})}},t.goFilter=function(e){var n=JSON.parse(JSON.stringify(t.state.applist)),r=[];e&&e.trim()?(n.forEach(function(t){console.log(t,99),(t.label.indexOf(e)>-1||t.value==e)&&r.push(t)}),t.setState({showAppList:r})):t.setState({showAppList:n})},t.state={applist:[],checkedList:[],showAppList:[]},t}return t=l,(n=[{key:"componentDidMount",value:function(){this.getApplist()}},{key:"componentWillReceiveProps",value:function(e){var t=e.visible,n=e.roleItem,r=this.state.applist;t||this.setState({checkedList:[],showAppList:r}),t&&t!==this.props.visible&&(this.props.getRoleAuth(n.roleId),n.roleId&&this.getAppInfo(n.roleId))}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.form,o=t.authList,l=t.target,i=t.roleItem,s=this.state,f=(s.applist,s.checkedList),p=s.showAppList,d=r.getFieldDecorator,m={labelCol:{span:6},wrapperCol:{span:14}};return a.a.createElement(u.a,{visible:n,width:700,title:i?"查看角色":"添加角色",onCancel:this.props.closeModal,onOk:this.handleOk,wrapClassName:"role-manage-modal"},a.a.createElement(b.a,null,a.a.createElement("h3",null,"基本信息"),a.a.createElement(D,j({label:"角色名称"},m),d("roleName",{rules:[{required:!0,message:"请输入角色名称"}]})(a.a.createElement(c.a,{maxLength:18,placeholder:"请输入角色名称"}))),a.a.createElement(D,j({label:"角色描述"},m),d("roleDesc",{rules:[{required:!0,message:"请输入角色描述"}]})(a.a.createElement(c.a,{maxLength:20,placeholder:"请输入角色描述"}))),a.a.createElement("div",{className:"account-auth"},a.a.createElement("h3",null,"编辑权限："),a.a.createElement("div",{className:"account-auth-tab"},a.a.createElement(y.a,null,o.map(function(t,n){return a.a.createElement(_,{tab:t.resourceName,key:t.resourceName},a.a.createElement(g.a,{dataSource:F([t]),target:l[n],onChange:e.handleChange.bind(e,n),isExpand:!0}))})))),a.a.createElement("div",{className:"account-auth",style:{marginTop:"10px"}},a.a.createElement("div",{className:"account-app-wrap"},a.a.createElement("h3",null,"适配平台："),a.a.createElement(L,{placeholder:"输入app名称或id",onSearch:this.goFilter,enterButton:!0,style:{width:"300px"}})),a.a.createElement("div",{className:"account-auth-tab app-list-tab"},a.a.createElement(h.a.Group,{options:p,value:f,onChange:this.oncheckChange.bind(this)})))))}}])&&R(t.prototype,n),r&&R(t,r),l}(),T=Object(s.b)(function(e){return{visible:e.getIn(["roleManage","visible"]),roleItem:e.getIn(["roleManage","roleItem"]).toJS(),authList:e.getIn(["roleManage","authList"]).toJS(),defaultAuth:e.getIn(["roleManage","defaultAuth"]).toJS(),target:e.getIn(["roleManage","target"]).toJS()}},function(e){return Object(f.b)({closeModal:m.a.closeModal,getRoleAuth:m.a.getRoleAuth,setRoleAuthTarget:m.a.setRoleAuthTarget,saveRole:m.a.saveRole,setRoleAuth:m.a.setRoleAuth,modifyRole:m.a.modifyRole},e)})(b.a.create({mapPropsToFields:function(e){return e.roleItem?{roleName:b.a.createFormField({value:e.roleItem.roleName}),roleDesc:b.a.createFormField({value:e.roleItem.remark})}:null},onFieldsChange:function(e,t){for(var n in console.log("---",t),t)"roleDesc"!==n?e.modifyRole(C({},n,t[n].value)):e.modifyRole({remark:t[n].value})}})(M)),J=n(33);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach(function(t){z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=p.a.Option,Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(s,r["Component"]);var t,n,a,o=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var n,r=G(e);if(t()){var a=G(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W(this,n)}}(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).handleChange=function(e){t.setState({roleName:e.target.value})},t.handleFilter=function(){var e=t.state.roleName;t.setState({query:{roleName:e}},t.onChange)},t.handleReset=function(){t.setState({roleName:"",query:{}},function(){t.refInpt.setState({value:""})})},t.onChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.props.getList(K({pageIndex:e},t.state.query))},t.handleDel=function(e){var n=B(t);u.a.confirm({title:"提示",content:"是否确认删除？",onOk:function(){console.log("确认删除"),n.props.delRole(e)}})},t.handleCancel=function(){t.setState({visible:!1})},t.state={roleName:"",query:{},visible:!1,roleItem:void 0},t}return t=s,(n=[{key:"componentDidMount",value:function(){this.onChange()}},{key:"render",value:function(){var e=this,t=this.props,n=t.roleList,a=t.pager,o=t.loading,u=[{title:"角色名称",dataIndex:"roleName",width:"30%",render:function(e){return r.createElement("span",{title:e},e)}},{title:"角色描述",dataIndex:"remark",width:"30%",render:function(e){return r.createElement("span",{title:e},e)}},{title:"更新时间",dataIndex:"createTime",width:"20%",render:function(e){var t=J.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return r.createElement("span",{title:t},t)}},{title:"操作",width:"150px",render:function(t){return r.createElement("div",{className:"action"},r.createElement(l.a,{placement:"top",title:"编辑"},r.createElement(i.a,{icon:"edit",shape:"circle",size:"small",onClick:e.props.openModal.bind(e,t)})),"  |  ",r.createElement(l.a,{placement:"top",title:"删除"},r.createElement(i.a,{icon:"delete",shape:"circle",size:"small",onClick:e.handleDel.bind(e,t.roleId)})))}}];return r.createElement("div",{className:"role-manage"},r.createElement(p.a,{title:"角色管理"},r.createElement(Q,{label:"角色名称"},r.createElement(c.a,{style:{width:240},maxLength:20,name:"roleName",onChange:this.handleChange,onPressEnter:this.handleFilter,ref:function(t){return e.refInpt=t},placeholder:"请输入角色名称"})),r.createElement(Q,null,r.createElement(i.a,{type:"primary",onClick:this.handleFilter},"查询")),r.createElement(Q,null,r.createElement(i.a,{type:"primary",onClick:this.handleReset},"重置")),r.createElement(Q,{align:"right"},r.createElement(i.a,{type:"primary",onClick:this.props.openModal.bind(this,{})},"新建"))),r.createElement("div",{className:"role-content"},r.createElement(d.a,{rowKey:"roleId",columns:u,dataSource:n,pager:a,loading:o,onPageChange:this.onChange})),r.createElement(T,null))}}])&&$(t.prototype,n),a&&$(t,a),s}(),U=Object(s.b)(function(e){return{loading:e.getIn(["roleManage","loading"]),roleList:e.getIn(["roleManage","roleList"]).toJS(),pager:e.getIn(["roleManage","pager"]).toJS(),authList:e.getIn(["roleManage","authList"]).toJS(),defaultAuth:e.getIn(["roleManage","defaultAuth"]).toJS(),target:e.getIn(["roleManage","target"]).toJS()}},function(e){return Object(f.b)({getList:m.a.getList,getRoleAuth:m.a.getRoleAuth,saveRole:m.a.saveRole,delRole:m.a.delRole,setRoleAuthTarget:m.a.setRoleAuthTarget,openModal:m.a.openModal},e)})(Z);n(1452),t.default=function(e){var t=e.match;return a.a.createElement(o.d,null,a.a.createElement(o.b,{exact:!0,path:"".concat(t.url,"/list"),component:U}),a.a.createElement(o.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1508:function(e,t,n){"use strict";n.r(t);n(100);var r=n(43),a=(n(67),n(20)),o=(n(99),n(45)),c=(n(129),n(24)),l=(n(465),n(22),n(62),n(367),n(141),n(35),n(26),n(27),n(28),n(19),n(34),n(39),n(38),n(40),n(32),n(41),n(0)),i=n.n(l),u=n(463),s=n(97),f=n(4),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.c.request({url:"/manage-open/manufacturer/getManufacturerList",data:e,method:"post",headers:{}})},d=function(e){return f.c.request({url:"/manage-open/manufacturer/createManufacturerAccount",method:"post",data:e,headers:{}})},m=function(e){return f.c.request({url:"/manage-open/manufacturer/resetPassword",method:"post",data:e,headers:{}})},h=function(e){return f.c.request({url:"/manage-open/manufacturer/sendPassword",method:"post",data:e,headers:{}})},y=(n(196),n(85)),b=(n(220),n(117));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=c.a.Item;o.a.TextArea;var w=c.a.create()(function(e){var t=e.form,n=e.addVis,r=e.handleCancel,a=e.handleOk,l=t.getFieldDecorator,u=t.validateFields;return i.a.createElement("div",null,i.a.createElement(y.a,{title:"新建",visible:n,onOk:function(){u().then(function(e){var t=v(v({},e),{},{accountName:e.accountName+"@clife.cn"});d(t).then(function(e){0==e.data.code&&(b.a.success("新增成功"),a())})})},onCancel:r,width:"700px"},i.a.createElement("div",{className:"banner-modal-add"},i.a.createElement(c.a,{labelCol:{span:6},wrapperCol:{span:14}},i.a.createElement(E,{label:"账户名"},l("accountName",{rules:[{required:!0,message:"请输入账户名称"},{max:30,message:"不能超过30个字符"}]})(i.a.createElement("div",null,i.a.createElement(o.a,{style:{width:"220px"}}),i.a.createElement("span",{style:{marginLeft:"10px"}},"@clife.cn")))),i.a.createElement(E,{label:"厂商名称"},l("manufacturerName",{rules:[{required:!0,message:"请输入厂商名称"},{max:30,message:"不能超过30个字符"}]})(i.a.createElement(o.a,{style:{width:"220px"}}))),i.a.createElement(E,{label:"初始密码"},i.a.createElement("span",null,"Het@2&")),i.a.createElement(E,{label:"密码发送手机号"},l("phoneNumber",{rules:[{required:!0,message:"请输入手机号"},{pattern:/^(((\d{3,4}-)?\d{7,8})|(1\d{10}))$/,message:"请输入正确的联系人手机号码"}]})(i.a.createElement(o.a,{style:{width:"100%"}})))))))}),S=c.a.Item;var j=c.a.create()(function(e){var t=e.form,n=e.editVis,r=e.handleCancel,u=e.handleOk,s=e.type,f=e.actionData,p=t.getFieldDecorator,d=t.validateFields,g=(t.getFieldValue,t.setFieldsValue);return Object(l.useEffect)(function(){"info"!==s&&g({phone:f.phone})},[]),i.a.createElement("div",null,i.a.createElement(y.a,{title:"info"===s?"查看":"重置密码",visible:n,onCancel:r,width:"700px",footer:"info"===s?null:i.a.createElement(a.a,{type:"primary",onClick:function(){d().then(function(e){h({accountName:f.userName,phone:e.phone}).then(function(e){0===e.data.code&&(b.a.success("提交成功"),u())})})}},"发送")},i.a.createElement("div",{className:"system-modal-edit"},i.a.createElement(c.a,{labelCol:{span:6},wrapperCol:{span:14}},i.a.createElement(S,{label:"账户名"},i.a.createElement("span",{className:"item-text"},f.userName)),i.a.createElement(S,{label:"厂商名称"},i.a.createElement("span",null,f.nickName)),i.a.createElement(S,{label:"初始密码"},i.a.createElement("span",{className:"item-text"},"info"!==s?"H****@2&":"Het@2&"," "),"info"!==s?i.a.createElement(a.a,{type:"primary",ghost:!0,onClick:function(){m({id:f.userId}).then(function(e){0===e.data.code&&b.a.success("重置成功")})}},"重置密码"):""),i.a.createElement(S,{label:"密码发送手机号"},"info"===s?i.a.createElement("span",null,f.phone):p("phone",{rules:[{required:!0,message:"请输入手机号码"},{pattern:/^(((\d{3,4}-)?\d{7,8})|(1\d{10}))$/,message:"请输入正确的联系人手机号码"}]})(i.a.createElement(o.a,{style:{width:"100%"}})))))))}),I=(n(1453),n(33));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var N=c.a.Item;t.default=c.a.create()(function(e){var t=e.form,n=R(Object(l.useState)({pageIndex:1,pageRows:10}),2),f=n[0],d=n[1],m=t.getFieldDecorator,h=(t.validateFields,t.getFieldsValue),y=R(Object(l.useState)(0),2),b=y[0],g=y[1],v=R(Object(l.useState)([]),2),O=v[0],E=v[1],S=R(Object(l.useState)(!1),2),k=S[0],C=S[1],x=R(Object(l.useState)(!1),2),A=x[0],L=x[1],D=R(Object(l.useState)(""),2),_=D[0],F=D[1],M=R(Object(l.useState)({}),2),T=M[0],J=M[1],V=R(Object(l.useState)(!1),2),q=V[0],K=V[1];Object(l.useEffect)(function(){z()},[f.pageRows,f.pageIndex]);var z=function(){var e={accountName:""};h().accountName&&h().accountName.trim()&&(e.accountName=h().accountName.trim()),e=P(P({},e),f),K(!0),p(e).then(function(e){0==e.data.code&&(E(e.data.data.list),g(e.data.data.pager.totalRows))}).finally(function(){K(!1)})},$=[{title:"账户名",dataIndex:"userName",key:"userName"},{title:"厂商名称",dataIndex:"nickName",key:"nickName"},{title:"创建时间",dataIndex:"regTime",key:"regTime",render:function(e){return e&&I.b.utcToDev(e)}},{title:"更新时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return e&&I.b.utcToDev(e)}},{title:"备注",dataIndex:"remark",key:"remark"},{title:"操作",key:"action",width:200,render:function(e,t){return i.a.createElement("div",null,i.a.createElement("a",{style:{marginRight:"10px"},onClick:function(){H(t,"info")}},"查看"),i.a.createElement("a",{onClick:function(){H(t,"reset")}},"重置密码"))}}],H=function(e,t){J(e),F(t),L(!0)};return i.a.createElement("div",{className:"account-page"},i.a.createElement(u.a,{title:"厂商账号管理"},i.a.createElement("div",{className:"title-space"},i.a.createElement(c.a,{layout:"inline"},i.a.createElement(N,{label:"账号名称"},m("accountName")(i.a.createElement(o.a,{placeholder:"输入账号名称",style:{width:240}}))),i.a.createElement(N,null,i.a.createElement(a.a,{type:"primary",onClick:function(){1==f.pageIndex?z():d({pageIndex:1,pageRows:10})}},"查询")),i.a.createElement(N,null,i.a.createElement(a.a,{onClick:function(){t.resetFields()}},"重置"))),i.a.createElement(a.a,{type:"primary",onClick:function(){C(!0)}},"新建"))),i.a.createElement(r.a,null,i.a.createElement(s.a,{rowKey:"id",columns:$,dataSource:O,loading:q,pagination:{defaultCurrent:1,current:f.pageIndex,onChange:function(e,t){t===f.pageRows?d(function(n){var r=JSON.parse(JSON.stringify(n));return Object.assign(r,{pageIndex:e,pageRows:t})}):d(function(e){var n=JSON.parse(JSON.stringify(e));return Object.assign(n,{pageIndex:1,pageRows:t})})},pageSize:f.pageRows,total:b,showQuickJumper:!0,showTotal:function(){return i.a.createElement("span",null,"共 ",i.a.createElement("a",null,b)," 条")}}})),k&&i.a.createElement(w,{addVis:k,handleOk:function(){z(),C(!1)},handleCancel:function(){C(!1)}}),A&&i.a.createElement(j,{editVis:A,handleOk:function(){L(!1),z()},handleCancel:function(){L(!1)},type:_,actionData:T}))})}}]);