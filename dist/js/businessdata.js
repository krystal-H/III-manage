(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1422:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(198),n(97),n(169),n(258);var r=function(e){var t=(e+"").split(".");return t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")+(t[1]?"."+t[1]:"")}},1426:function(e,t,n){"use strict";n(75);var r=n(20),a=(n(116),n(48),n(49),n(35),n(19),n(34),n(43),n(33),n(44),n(37),n(22),n(38),n(29),n(31),n(32),n(42)),o=n(0),c=n.n(o),i=(n(72),n(818),n(458)),l=n(3),u=!1,s=!1,f=function(){return function(e){u||s||(s=!0,l.b.Post("env/provincialCascade/province",{parentId:1}).then((function(t){var n,r=t.data.data;u=!0,e((n=r,{type:i.b,list:n}))})).finally((function(){s=!1})))}},p=function(e,t){return function(n){var r;t&&void 0!==t[e]||(r={provinceId:e},l.b.Post("env/provincialCascade/city",r)).then((function(t){var r=t.data.data;n(function(e){var t=e.provinceId,n=e.list;return{type:i.a,provinceId:t,list:n}}({provinceId:e,list:r}))}))}},y=(n(167),n(197),n(76));n(65);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=["normalOptionText","list","onlyList","noTitle","showSearch","notFoundContent","optionFilterProp","dropdownMatchSelectWidth","disabled","width","style","onChange","value"];function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var a=I(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,n,r,a=S(o);function o(){var e;O(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).normalOption=[{id:"",value:"全部"+(e.props.normalOptionText||"")}],e.getPopupContainer=function(e){return e.parentNode},e.handleChange=function(t,n){var r,a,o=e.props.onChange;try{r=n.props.children,a=n.props["data-data"]}catch(e){r=n}o&&o(t,r,a)},e}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=(e.normalOptionText,e.list),n=e.onlyList,r=e.noTitle,a=e.showSearch,o=e.notFoundContent,i=e.optionFilterProp,l=e.dropdownMatchSelectWidth,u=e.disabled,s=e.width,f=e.style,p=(e.onChange,e.value),m=E(e,d),h=t&&t.length>0?t:[],g={width:"100%"},O=0===h.length;return h=n?h:this.normalOption.concat(h),s&&(g=v(v({},g),{width:s+"px"})),f&&(g=v(v({},g),f)),c.a.createElement(y.a,b({disabled:u||!1,showSearch:!1!==a,getPopupContainer:this.getPopupContainer,dropdownMatchSelectWidth:l||!1,style:g,notFoundContent:o||"未找到相应记录",optionFilterProp:i||"children",loading:O,onChange:this.handleChange,value:p},m),h.map((function(e){var t=e.id,n=e.value;return c.a.createElement(y.a.Option,{value:t,key:t,"data-data":e,title:r?void 0:n},n)})))}}])&&w(t.prototype,n),r&&w(t,r),o}(o.PureComponent);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var a=F(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(i,e);var t,n,r,a=L(i);function i(){var e;R(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).sty1={width:"130px",marginRight:"6px"},e.normalOption=[{id:"",value:"全国"}],e.normalOption2=[{id:"",value:"全部"}],e.state={province:"",provinceName:"",city:"",cityName:""},e.setValue=function(t){e.setState(t)},e.getValue=function(){return T({},e.state)},e.setProvince=function(t,n){var r=e.props,a=r.getCityList,o=r.cityMap;e.setState({province:t,provinceName:""===t?"":n,city:"",cityName:""},e.onChange),"number"==typeof t&&a(t,o)},e.setCity=function(t,n){e.setState({city:t,cityName:""===t?"":n},e.onChange)},e.onChange=function(){var t=e.props.onChange;t&&t(T({},e.state))},e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.getProvinceList,n=e.setValue,r=e.getValue;t(),n&&n()(this.setValue),r&&r()(this.getValue)}},{key:"render",value:function(){var e=this.state,t=e.province,n=e.city,r=this.props,a=r.provinceList,i=r.cityMap,l=r.disabled,u=r.width,s=r.style,f=void 0===s?{}:s,p=this.normalOption.concat(a),y=t&&i[t]?this.normalOption2.concat(i[t]):this.normalOption2,m=u?T(T(T({},this.sty1),{width:u+"px"}),f):this.sty1;return c.a.createElement(o.Fragment,null,c.a.createElement(k,{list:p,loading:1===p.length,placeholder:"选择省份",notFoundContent:"未找到符合的省份",style:m,onlyList:!0,onChange:this.setProvince,value:t,disabled:l}),t?c.a.createElement(k,{list:y,loading:1===y.length,placeholder:"选择城市",notFoundContent:"未找到符合的城市",style:m,onlyList:!0,onChange:this.setCity,value:n,disabled:l}):null)}}])&&x(t.prototype,n),r&&x(t,r),i}(o.Component),M=Object(a.b)((function(e){var t=e.get("visualization");return{provinceList:t.provinceList,cityMap:t.cityMap}}),(function(e){return{getProvinceList:function(){return e(f())},getCityList:function(t,n){return e(p(t,n))}}}))(B);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(l,e);var t,n,a,i=W(l);function l(){var e;J(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).state={timeType:e.props.timeList[0].id},e.changeTimeType=function(t){e.setState({timeType:t})},e.getRegionValue=function(){return{province:"",city:""}},e._getRegionValue=function(){return function(t){e.getRegionValue=t}},e.setRegionValue=function(){},e._setRegionValue=function(){return function(t){e.setRegionValue=t}},e.onSearch=function(){var t=e.props,n=t.noRegion,r=void 0!==n&&n,a=t.onSearch,o=U({},e.state);if(r)a(o);else{var c=e.getRegionValue(),i=c.province,l=c.city;a(U(U({},o),{},{provinceId:i,cityId:l}))}},e.clear=function(){var t=e.props.noRegion;void 0!==t&&t||e.setRegionValue({province:"",provinceName:"",city:"",cityName:""}),e.setState({timeType:"1"})},e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.noRegion,n=void 0!==t&&t,a=e.timeList,i=e.loading,l=void 0!==i&&i,u=this.state.timeType,s=l;return c.a.createElement("div",null,c.a.createElement("span",null,"时间："),c.a.createElement(k,{width:130,onlyList:!0,list:a,showSearch:!1,onChange:this.changeTimeType,value:u}),n?null:c.a.createElement(o.Fragment,null,c.a.createElement("span",{className:"page-ml"},"地域："),c.a.createElement(M,{setValue:this._setRegionValue,getValue:this._getRegionValue})),c.a.createElement(r.a,{className:"page-ml",type:"primary",icon:"search",onClick:this.onSearch,loading:s},"搜索"),c.a.createElement(r.a,{className:"page-ml",onClick:this.clear},"重置"))}}])&&z(t.prototype,n),a&&z(t,a),l}(o.Component);t.a=Object(a.b)((function(e){return{timeList:e.get("visualization").timeList}}))($)},1428:function(e,t,n){"use strict";n(29),n(22),n(72),n(31),n(32);var r=n(26),a=Object(r.a)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,1487))}));t.a=a},1429:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(65),n(221);var r=["#1890FF","#4da7fd","#ef7b0a","#ffb637","#8ed824","#3ab752","#21dfeb","#2493f1","#4a59f1","#c167ef","#ee53a7","#d82b2b","#bcddff"];function a(e){if(!e||0===e.length)return null;var t=e.length,n=t-1,a=Math.min(10,t),o=Math.min(9,n);return{tooltip:{trigger:"axis",axisPointer:{type:"cross"}},color:r,grid:{top:40,bottom:60,right:20},legend:{show:!1},toolbox:{show:!1},xAxis:[{type:"category",boundaryGap:!0,data:e.map((function(e){return e.name}))}],yAxis:{type:"value",scale:!0,min:0},dataZoom:[{type:"slider",show:!0,bottom:0,minSpan:a,maxSpan:a,zoomLock:!0,startValue:0,endValue:o},{type:"inside",minSpan:a,maxSpan:a,zoomOnMouseWheel:!1,startValue:0,endValue:o}],series:[{name:"",type:"bar",barMaxWidth:24,data:e.map((function(e){return e.count}))}]}}},1437:function(e,t,n){},1453:function(e,t,n){},1454:function(e,t,n){},1455:function(e,t,n){},1456:function(e,t,n){},1457:function(e,t,n){},1458:function(e,t,n){},1459:function(e,t,n){},1460:function(e,t,n){},1461:function(e,t,n){},1462:function(e,t,n){},1463:function(e,t,n){},1464:function(e,t,n){},1465:function(e,t,n){},1466:function(e,t,n){},1467:function(e,t,n){},1492:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return at}));n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32);var r=n(0),a=n.n(r),o=n(42),c=(n(33),n(35),n(34),n(43),n(44),n(126)),i=n(3);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={user:{timeType:"1"},application:{timeType:"1"},device:{timeType:"1"}},p=function(){return{type:c.h}},y=function(){return{type:c.k}},m=function(e){return{type:c.j,tabData:e}},d=function(){return{type:c.b}},b=function(){return{type:c.e}},h=function(e,t){var n,r;n=f[t],r=e,Object.keys(r).forEach((function(e){var t,a=r[e],o=!(null==(t=a)||""===t);!o&&e in n?delete n[e]:o&&(n[e]=a)}))},v=function(){return function(e){e({type:c.i}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.b.Post("collection/statsUser/getCollect",e)}().then((function(t){var n,r=t.data,a=r.data,o=r.code;e(0===o?(n=a,{type:c.g,headData:n}):p())})).catch((function(t){e(p())}))}},g=function(){return function(e){e({type:c.l});var t,n=+new Date;(t=u({},f.user),i.b.Post("collection/statsUser/getStatsUserWeb",t)).then((function(t){var r=t.data,a=r.data;if(0===r.code){var o=+new Date-n;o<1500?setTimeout((function(){e(m(a))}),3e3-o):e(m(a))}else e(y())})).catch((function(){e(y())}))}},E=function(){return function(e){var t;e({type:c.c}),(t=u({},f.application),i.b.Post("collection/statsUser/getStatsUserApp",t)).then((function(t){var n,r=t.data,a=r.data,o=r.code;e(0===o?(n=a,{type:c.a,tabData:n}):d())})).catch((function(t){e(d())}))}},O=function(){return function(e){var t;e({type:c.f}),(t=u({},f.device),i.b.Post("collection/statsUser/getStatsDevice",t)).then((function(t){var n,r=t.data,a=r.data,o=r.code;e(0===o?(n=a,{type:c.d,tabData:n}):b())})).catch((function(t){e(b())}))}},w=(n(98),n(39)),j=(n(116),n(467),n(173)),S=(n(468),n(110)),P=(n(1398),n(1399)),I=(n(841),n(18)),k=(n(75),n(20)),C=(n(168),n(7)),_=n(1422);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(i,e);var t,n,o,c=N(i);function i(){var e;D(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=c.call.apply(c,[this].concat(n))).smallSty={padding:0},e.loadingSty={fontSize:"16px",color:"#1890ff"},e.title=a.a.createElement(r.Fragment,null,a.a.createElement(C.a,{type:"clock-circle",theme:"twoTone"}),a.a.createElement("span",{className:"page-ml"},"昨日")),e.title2=a.a.createElement(r.Fragment,null,a.a.createElement(C.a,{type:"database",theme:"twoTone"}),a.a.createElement("span",{className:"page-ml"},"前七天")),e.loadingCom=a.a.createElement(C.a,{type:"sync",spin:!0,style:e.loadingSty}),e.getValueNode=function(t,n,r){return r?a.a.createElement(I.b,{autoInsertSpaceInButton:!1},a.a.createElement(k.a,{type:"link",onClick:e.tryAgain,size:"small",style:e.smallSty},"重试")):n?null:Object(_.a)(t)},e.tryAgain=function(){e.props.tryAgain()},e}return t=i,(n=[{key:"render",value:function(){var e=this.title,t=this.title2,n=this.loadingCom,r=this.getValueNode,o=this.props,c=o.isLoading,i=o.isError,l=o.data,u=l.day1Count,s=l.day7Count;return a.a.createElement(j.a,{gutter:16},a.a.createElement(S.a,{span:12},a.a.createElement(P.a,{title:e,prefix:c?n:null,value:u,formatter:function(e){return r(e,c,i)}})),a.a.createElement(S.a,{span:12},a.a.createElement(P.a,{title:t,value:s,prefix:c?n:null,formatter:function(e){return r(e,c,i)}})))}}])&&R(t.prototype,n),o&&R(t,o),i}(r.Component);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var a=J(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(c,e);var t,n,r,o=U(c);function c(){var e;M(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).tryAgain=function(){e.props.getHeadData()},e}return t=c,(n=[{key:"render",value:function(){var e=this.tryAgain,t=this.props.headData,n=t.isLoading,r=t.isError,o=t.data,c=o.addDeviceCollect,i=o.activeDeviceCollect,l=o.errorDeviceCollect;return a.a.createElement("div",{className:"page-analysis-head"},a.a.createElement(w.a,{className:"page-analysis-col",title:"新增设备数（汇总）"},a.a.createElement(F,{isLoading:n,isError:r,data:c,tryAgain:e}),a.a.createElement("span",{className:"page-analysis-col-msg"},"备注：产品下新创建的设备统计")),a.a.createElement(w.a,{className:"page-analysis-col",title:"激活设备数（汇总）"},a.a.createElement(F,{isLoading:n,isError:r,data:i,tryAgain:e}),a.a.createElement("span",{className:"page-analysis-col-msg"},"备注：联网绑定的设备统计")),a.a.createElement(w.a,{className:"page-analysis-col",title:"故障设备数（汇总）"},a.a.createElement(F,{isLoading:n,isError:r,data:l,tryAgain:e})))}}])&&V(t.prototype,n),r&&V(t,r),c}(r.Component),H=Object(o.b)((function(e){return{headData:e.get("visualization").applicationAnalysis.headData}}),(function(e){return{getHeadData:function(){return e(v())}}}))(z),W=(n(298),n(117)),G=(n(840),n(477)),Y=n(1426),$=(n(301),n(223)),Z=(n(299),n(172)),Q=(n(198),n(820),n(65),n(221),n(1428)),X=n(1429);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var a=ce(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(c,e);var t,n,r,o=ae(c);function c(){var e;te(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).tryAgain=function(){e.props.tryAgain()},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.title,r=e.isLoading,o=e.isError,c=t.slice(0,10),i=10-c.length;return i>0&&(c=c.concat(new Array(i).fill({name:"",count:""}))),o?a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement(Z.a,{className:"page-null-inner",status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:a.a.createElement(k.a,{type:"primary",onClick:this.tryAgain},"重 试")})):r||0!==t.length?a.a.createElement("div",{className:"page-analysis-con"},a.a.createElement("div",{className:"page-analysis-con-left"},a.a.createElement("div",{className:"page-analysis-list"},a.a.createElement("div",{className:"page-analysis-listItem"},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},"TOP10web站点名称"),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},n)),c.map((function(e,t){var n=e.name,o=e.count;return a.a.createElement("div",{className:"page-analysis-listItem",key:t},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},r?a.a.createElement("span",{className:"page-loading"}):n),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},r?a.a.createElement("span",{className:"page-loading"}):Object(_.a)(o)))})))),a.a.createElement("div",{className:"page-analysis-con-right"},a.a.createElement(Q.a,{className:"page-analysis-echarts",option:Object(X.a)(t)}))):a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement($.a,{className:"page-null-inner"}))}}])&&ne(t.prototype,n),r&&ne(t,r),c}(r.Component);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var a=me(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(c,e);var t,n,r,o=pe(c);function c(){var e;ue(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).onSearch=function(t){var n=e.props,r=n.changeSearchData,a=n.getTabDataForUser;r(t,"user"),a()},e.tryAgain=function(){e.props.getTabDataForUser()},e}return t=c,(n=[{key:"render",value:function(){var e=this.tryAgain,t=this.props.user,n=t.isLoading,r=t.isError,o=t.data,c=o.register,i=o.accessCount,l=o.userLogin,u=o.userAccess,s=0===c.length&&0===i.length&&0===l.length&&0===u.length,f=a.a.createElement(G.a,{className:"page-visualization-alert",message:"备注：访问用户数是通过访问IP去重统计的。",type:"info",showIcon:!0}),p=a.a.createElement(G.a,{className:"page-visualization-alert",message:"备注：访问次数是通过页面接口请求统计（剔除图片请求，JS，CSS请求）。",type:"info",showIcon:!0});return a.a.createElement(w.a,null,a.a.createElement("h2",{className:"page-title"},"站点数据"),a.a.createElement(Y.a,{onSearch:this.onSearch,loading:n}),a.a.createElement("div",{className:"page-interval"}),a.a.createElement(W.a,{tabBarGutter:10,animated:!r&&!s},a.a.createElement(W.a.TabPane,{tab:"注册用户数",key:"1"},a.a.createElement(ie,{title:"注册用户数",isLoading:n,isError:r,list:c,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"登录用户数",key:"2"},a.a.createElement(ie,{title:"登录用户数",isLoading:n,isError:r,list:l,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"访问用户数",key:"3"},f,a.a.createElement(ie,{title:"访问用户数",isLoading:n,isError:r,list:u,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"访问次数",key:"4"},p,a.a.createElement(ie,{title:"访问次数",isLoading:n,isError:r,list:i,tryAgain:e}))))}}])&&se(t.prototype,n),r&&se(t,r),c}(r.Component),be=Object(o.b)((function(e){return{user:e.get("visualization").applicationAnalysis.user}}),(function(e){return{getTabDataForUser:function(){return e(g())},changeSearchData:h}}))(de);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=je(e);if(t){var a=je(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(c,e);var t,n,r,o=Oe(c);function c(){var e;ve(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).tryAgain=function(){e.props.tryAgain()},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.title,r=e.isLoading,o=e.isError,c=t.slice(0,10),i=10-c.length;return i>0&&(c=c.concat(new Array(i).fill({name:"",count:""}))),o?a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement(Z.a,{className:"page-null-inner",status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:a.a.createElement(k.a,{type:"primary",onClick:this.tryAgain},"重 试")})):r||0!==t.length?a.a.createElement("div",{className:"page-analysis-con"},a.a.createElement("div",{className:"page-analysis-con-left"},a.a.createElement("div",{className:"page-analysis-list"},a.a.createElement("div",{className:"page-analysis-listItem"},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},"TOP10应用"),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},n)),c.map((function(e,t){var n=e.name,o=e.count;return a.a.createElement("div",{className:"page-analysis-listItem",key:t},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},r?a.a.createElement("span",{className:"page-loading"}):n),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},r?a.a.createElement("span",{className:"page-loading"}):Object(_.a)(o)))})))),a.a.createElement("div",{className:"page-analysis-con-right"},a.a.createElement(Q.a,{className:"page-analysis-echarts",option:Object(X.a)(t)}))):a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement($.a,{className:"page-null-inner"}))}}])&&ge(t.prototype,n),r&&ge(t,r),c}(r.Component);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var a=De(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Te(this,n)}}function Te(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(c,e);var t,n,r,o=_e(c);function c(){var e;Ie(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).onSearch=function(t){var n=e.props,r=n.changeSearchData,a=n.getTabDataForApplication;r(t,"application"),a()},e.tryAgain=function(){e.props.getTabDataForApplication()},e}return t=c,(n=[{key:"render",value:function(){var e=this.tryAgain,t=this.props.application,n=t.isLoading,r=t.isError,o=t.data,c=o.userRegister,i=o.userLogin,l=o.userStart,u=o.userActive,s=0===c.length&&0===i.length&&0===l.length&&0===u.length;return a.a.createElement(w.a,null,a.a.createElement("h2",{className:"page-title"},"应用数据"),a.a.createElement(Y.a,{onSearch:this.onSearch,loading:n}),a.a.createElement("div",{className:"page-interval"}),a.a.createElement(W.a,{tabBarGutter:10,animated:!r&&!s},a.a.createElement(W.a.TabPane,{tab:"启动次数",key:"1"},a.a.createElement(Se,{title:"启动次数",isLoading:n,isError:r,list:l,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"登录用户数",key:"2"},a.a.createElement(Se,{title:"登录用户数",isLoading:n,isError:r,list:i,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"注册用户数",key:"3"},a.a.createElement(Se,{title:"注册用户数",isLoading:n,isError:r,list:c,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"活跃用户数",key:"4"},a.a.createElement(Se,{title:"活跃用户数",isLoading:n,isError:r,list:u,tryAgain:e}))))}}])&&ke(t.prototype,n),r&&ke(t,r),c}(r.Component),xe=Object(o.b)((function(e){return{application:e.get("visualization").applicationAnalysis.application}}),(function(e){return{getTabDataForApplication:function(){return e(E())},changeSearchData:h}}))(Re);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve(e);if(t){var a=Ve(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(c,e);var t,n,r,o=Be(c);function c(){var e;Le(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).loadingSty={fontSize:"16px",color:"#1890ff"},e.loadingCom=a.a.createElement(C.a,{type:"sync",spin:!0,style:e.loadingSty}),e.tryAgain=function(){e.props.tryAgain()},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.title,r=e.isLoading,o=e.isError,c=t.slice(0,10),i=10-c.length;return i>0&&(c=c.concat(new Array(i).fill({name:"",count:""}))),o?a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement(Z.a,{className:"page-null-inner",status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:a.a.createElement(k.a,{type:"primary",onClick:this.tryAgain},"重 试")})):"创建产品数"===n?a.a.createElement("div",{className:"page-analysis-con"},a.a.createElement("div",{className:"page-analysis-con-left"},a.a.createElement(w.a,{className:"page-analysis-col"},a.a.createElement(P.a,{title:n,prefix:r?this.loadingCom:null,value:c[0]&&c[0].count||0,formatter:function(e){return r?null:e}}))),a.a.createElement("div",{className:"page-analysis-con-right"})):r||0!==t.length?a.a.createElement("div",{className:"page-analysis-con"},a.a.createElement("div",{className:"page-analysis-con-left"},a.a.createElement("div",{className:"page-analysis-list"},a.a.createElement("div",{className:"page-analysis-listItem"},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},"TOP10产品名称"),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},n)),c.map((function(e,t){var n=e.name,o=e.count;return a.a.createElement("div",{className:"page-analysis-listItem",key:t},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},r?a.a.createElement("span",{className:"page-loading"}):n),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},r?a.a.createElement("span",{className:"page-loading"}):Object(_.a)(o)))})))),a.a.createElement("div",{className:"page-analysis-con-right"},a.a.createElement(Q.a,{className:"page-analysis-echarts",option:Object(X.a)(t)}))):a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement($.a,{className:"page-null-inner"}))}}])&&Ae(t.prototype,n),r&&Ae(t,r),c}(r.Component);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return We(this,n)}}function We(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(c,e);var t,n,r,o=He(c);function c(){var e;Ke(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).onSearch=function(t){var n=e.props,r=n.changeSearchData,a=n.getTabDataForDevice;r(t,"device"),a()},e.tryAgain=function(){e.props.getTabDataForDevice()},e}return t=c,(n=[{key:"render",value:function(){var e=this.tryAgain,t=this.props.device,n=t.isLoading,r=t.isError,o=t.data,c=o.product,i=o.addDevice,l=o.activeDevice,u=o.onlineDevice,s=o.errorDevice,f=0===c.length&&0===i.length&&0===l.length&&0===u.length&&0===s.length,p=a.a.createElement(G.a,{className:"page-visualization-alert",message:"备注：此数据暂不支持查看地域维度。",type:"info",showIcon:!0});return a.a.createElement(w.a,null,a.a.createElement("h2",{className:"page-title"},"产品/设备数据"),a.a.createElement(Y.a,{onSearch:this.onSearch,loading:n}),a.a.createElement("div",{className:"page-interval"}),a.a.createElement(W.a,{tabBarGutter:10,animated:!r&&!f},a.a.createElement(W.a.TabPane,{tab:"创建产品数",key:"1"},p,a.a.createElement(qe,{title:"创建产品数",isLoading:n,isError:r,list:c,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"新增设备数",key:"2"},p,a.a.createElement(qe,{title:"新增设备数",isLoading:n,isError:r,list:i,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"激活设备数",key:"3"},p,a.a.createElement(qe,{title:"激活设备数",isLoading:n,isError:r,list:l,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"在线数据数(仅WIFI)",key:"4"},a.a.createElement(qe,{title:"在线数据数(仅WIFI)",isLoading:n,isError:r,list:u,tryAgain:e})),a.a.createElement(W.a.TabPane,{tab:"故障设备数",key:"5"},a.a.createElement(qe,{title:"故障设备数",isLoading:n,isError:r,list:s,tryAgain:e}))))}}])&&Je(t.prototype,n),r&&Je(t,r),c}(r.Component),$e=Object(o.b)((function(e){return{device:e.get("visualization").applicationAnalysis.device}}),(function(e){return{getTabDataForDevice:function(){return e(O())},changeSearchData:h}}))(Ye);n(1466);function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var a=nt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){if(t&&("object"===Ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(i,e);var t,n,o,c=et(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=c.call(this,e)).hSty={height:"36px"},e.init(),t}return t=i,(n=[{key:"render",value:function(){return a.a.createElement(r.Fragment,null,a.a.createElement(H,null),a.a.createElement("div",{className:"page-interval",style:this.hSty}),a.a.createElement(be,null),a.a.createElement("div",{className:"page-interval"}),a.a.createElement(xe,null),a.a.createElement("div",{className:"page-interval"}),a.a.createElement($e,null),a.a.createElement("div",{className:"page-interval"}))}}])&&Qe(t.prototype,n),o&&Qe(t,o),i}(r.Component),at=Object(o.b)(void 0,(function(e){return{init:function(){return e((f={user:{timeType:"1"},application:{timeType:"1"},device:{timeType:"1"}},function(e){e(v()),e(g()),e(E()),e(O())}))}}}))(rt)},1493:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ue}));n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32);var r=n(0),a=n.n(r),o=n(42),c=(n(33),n(35),n(34),n(43),n(44),n(153)),i=n(3);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={server:{timeType:"1"},message:{timeType:"1"}},p=function(){return{type:c.b}},y=function(){return{type:c.h}},m=function(e){return{type:c.g,tabData:e}},d=function(){return{type:c.e}},b=function(e,t){var n,r;n=f[t],r=e,Object.keys(r).forEach((function(e){var t,a=r[e],o=!(null==(t=a)||""===t);!o&&e in n?delete n[e]:o&&(n[e]=a)}))},h=function(){return function(e){e({type:c.c}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.b.Post("collection/messageData/getCollect",e)}().then((function(t){var n,r=t.data,a=r.data,o=r.code;e(0===o?(n=a,{type:c.a,headData:n}):p())})).catch((function(t){e(p())}))}},v=function(){return function(e){e({type:c.i});var t,n=+new Date;(t=u({},f.server),i.b.Post("collection/messageData/getStatsRequest",t)).then((function(t){var r=t.data,a=r.data;if(0===r.code){var o=+new Date-n;o<1500?setTimeout((function(){e(m(a))}),1500-o):e(m(a))}else e(y())})).catch((function(){e(y())}))}},g=function(){return function(e){var t;e({type:c.f}),(t=u({},f.message),i.b.Post("collection/messageData/getStatsDevicelink",t)).then((function(t){var n,r=t.data,a=r.data,o=r.code;e(0===o?(n=a,{type:c.d,tabData:n}):d())})).catch((function(t){e(d())}))}},E=(n(98),n(39)),O=(n(116),n(467),n(173)),w=(n(468),n(110)),j=(n(1398),n(1399)),S=(n(841),n(18)),P=(n(75),n(20)),I=(n(168),n(7)),k=n(1422);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var a=N(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(i,e);var t,n,o,c=R(i);function i(){var e;_(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=c.call.apply(c,[this].concat(n))).smallSty={padding:0},e.loadingSty={fontSize:"16px",color:"#1890ff"},e.title=a.a.createElement(r.Fragment,null,a.a.createElement(I.a,{type:"clock-circle",theme:"twoTone"}),a.a.createElement("span",{className:"page-ml"},"昨日")),e.title2=a.a.createElement(r.Fragment,null,a.a.createElement(I.a,{type:"database",theme:"twoTone"}),a.a.createElement("span",{className:"page-ml"},"前七天")),e.loadingCom=a.a.createElement(I.a,{type:"sync",spin:!0,style:e.loadingSty}),e.getValueNode=function(t,n,r){return r?a.a.createElement(S.b,{autoInsertSpaceInButton:!1},a.a.createElement(P.a,{type:"link",onClick:e.tryAgain,size:"small",style:e.smallSty},"重试")):n?null:Object(k.a)(t)},e.tryAgain=function(){e.props.tryAgain()},e}return t=i,(n=[{key:"render",value:function(){var e=this.title,t=this.title2,n=this.loadingCom,r=this.getValueNode,o=this.props,c=o.isLoading,i=o.isError,l=o.suffix,u=o.data,s=u.day1Count,f=u.day7Count;return a.a.createElement(O.a,{gutter:16},a.a.createElement(w.a,{span:12},a.a.createElement(j.a,{title:e,prefix:c?n:null,value:s,formatter:function(e){return r(e,c,i)},suffix:c||i?null:l})),a.a.createElement(w.a,{span:12},a.a.createElement(j.a,{title:t,value:f,prefix:c?n:null,formatter:function(e){return r(e,c,i)},suffix:c||i?null:l})))}}])&&T(t.prototype,n),o&&T(t,o),i}(r.Component);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var a=U(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return q(this,n)}}function q(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(c,e);var t,n,r,o=V(c);function c(){var e;F(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).tryAgain=function(){e.props.getHeadData()},e}return t=c,(n=[{key:"render",value:function(){var e=this.tryAgain,t=this.props.headData,n=t.isLoading,r=t.isError,o=t.data,c=o.requertCollect,i=o.uplinkCollect,l=o.downlinkCollect;return a.a.createElement("div",{className:"page-analysis-head"},a.a.createElement(E.a,{className:"page-analysis-col",title:"请求次数（接口服务汇总）"},a.a.createElement(L,{isLoading:n,isError:r,data:c,suffix:"次",tryAgain:e})),a.a.createElement(E.a,{className:"page-analysis-col",title:"消息上行量（汇总）"},a.a.createElement(L,{isLoading:n,isError:r,data:i,suffix:"次",tryAgain:e})),a.a.createElement(E.a,{className:"page-analysis-col",title:"消息下行量（汇总）"},a.a.createElement(L,{isLoading:n,isError:r,data:l,suffix:"次",tryAgain:e})))}}])&&B(t.prototype,n),r&&B(t,r),c}(r.Component),J=Object(o.b)((function(e){return{headData:e.get("visualization").serverAnalysis.headData}}),(function(e){return{getHeadData:function(){return e(h())}}}))(K),z=(n(840),n(477)),H=(n(298),n(117)),W=n(1426),G=(n(301),n(223)),Y=(n(299),n(172));n(1403),n(198),n(820),n(65),n(221);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var a=oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(c,e);var t,n,r,o=re(c);function c(){var e;ee(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).tryAgain=function(){e.props.tryAgain()},e.toMb=function(e){return Math.max(+(e/1024/1024).toFixed(4),1e-4)},e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=n.app,o=n.service,c=t.isUseMB,i=t.title,l=t.isLoading,u=t.isError,s=r.slice(0,10),f=o.slice(0,10),p=10-s.length,y=10-f.length;return p>0&&(s=s.concat(new Array(p).fill({name:"",count:""}))),y>0&&(f=f.concat(new Array(y).fill({name:"",count:""}))),c&&(s=s.map((function(t){return Q(Q({},t),{},{count:t.count?e.toMb(+t.count):t.count})})),f=f.map((function(t){return Q(Q({},t),{},{count:t.count?e.toMb(+t.count):t.count})}))),u?a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement(Y.a,{className:"page-null-inner",status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:a.a.createElement(P.a,{type:"primary",onClick:this.tryAgain},"重 试")})):l||0!==r.length||0!==o.length?a.a.createElement("div",{className:"page-analysis-con"},a.a.createElement("div",{className:"page-analysis-con-mid"},a.a.createElement("div",{className:"page-analysis-list"},a.a.createElement("div",{className:"page-analysis-listItem"},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},"TOP10appid"),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},i)),s.map((function(e,t){var n=e.name,r=e.count;return a.a.createElement("div",{className:"page-analysis-listItem",key:t},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},l?a.a.createElement("span",{className:"page-loading"}):n),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},l?a.a.createElement("span",{className:"page-loading"}):Object(k.a)(r)))})))),a.a.createElement("div",{className:"page-analysis-con-mid"},a.a.createElement("div",{className:"page-analysis-list"},a.a.createElement("div",{className:"page-analysis-listItem"},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},"TOP10服务名称"),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},i)),f.map((function(e,t){var n=e.name,r=e.count;return a.a.createElement("div",{className:"page-analysis-listItem",key:t},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},l?a.a.createElement("span",{className:"page-loading"}):n),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},l?a.a.createElement("span",{className:"page-loading"}):Object(k.a)(r)))}))))):a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement(G.a,{className:"page-null-inner"}))}}])&&te(t.prototype,n),r&&te(t,r),c}(r.Component);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var a=ye(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(c,e);var t,n,r,o=fe(c);function c(){var e;le(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).onSearch=function(t){var n=e.props,r=n.changeSearchData,a=n.getTabDataForServer;r(t,"server"),a()},e.tryAgain=function(){e.props.getTabDataForServer()},e}return t=c,(n=[{key:"render",value:function(){var e=this.tryAgain,t=this.props.server,n=t.isLoading,r=t.isError,o=t.data,c=o.appResponse,i=o.appFlow,l=o.appSucess,u=o.appRequest,s=0===c.app.length&&0===c.service.length&&0===i.app.length&&0===i.service.length&&0===l.app.length&&0===l.service.length&&0===u.app.length&&0===u.service.length;return a.a.createElement(E.a,null,a.a.createElement("h2",{className:"page-title"},"接口服务数据"),a.a.createElement(W.a,{noRegion:!0,onSearch:this.onSearch,loading:n}),a.a.createElement("div",{className:"page-interval"}),a.a.createElement(H.a,{tabBarGutter:10,animated:!r&&!s},a.a.createElement(H.a.TabPane,{tab:"请求次数(次)",key:"1"},a.a.createElement(ce,{title:"请求次数(次)",isLoading:n,isError:r,list:u,tryAgain:e})),a.a.createElement(H.a.TabPane,{tab:"流量大小(MB)",key:"2"},a.a.createElement(ce,{title:"流量大小(MB)",isLoading:n,isError:r,list:i,isUseMB:!0,tryAgain:e})),a.a.createElement(H.a.TabPane,{tab:"成功率",key:"3"},a.a.createElement(z.a,{className:"page-visualization-alert",message:"备注：接口调用200成功占总调用的次数*100%。",type:"info",showIcon:!0}),a.a.createElement(ce,{title:"成功率(%)",isLoading:n,isError:r,list:l,tryAgain:e})),a.a.createElement(H.a.TabPane,{tab:"平均响应时间(ms)",key:"4"},a.a.createElement(z.a,{className:"page-visualization-alert",message:"备注：接口服务响应次数的响应时间总和/响应次数。",type:"info",showIcon:!0}),a.a.createElement(ce,{title:"平均响应时间(ms)",isLoading:n,isError:r,list:c,tryAgain:e}))))}}])&&ue(t.prototype,n),r&&ue(t,r),c}(r.Component),de=Object(o.b)((function(e){return{server:e.get("visualization").serverAnalysis.server}}),(function(e){return{getTabDataForServer:function(){return e(v())},changeSearchData:b}}))(me),be=n(1428),he=n(1429);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Se(e);if(t){var a=Se(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return je(this,n)}}function je(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(c,e);var t,n,r,o=we(c);function c(){var e;ge(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).tryAgain=function(){e.props.tryAgain()},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.title,r=e.isLoading,o=e.isError,c=t.slice(0,10),i=10-c.length;return i>0&&(c=c.concat(new Array(i).fill({name:"",count:""}))),o?a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement(Y.a,{className:"page-null-inner",status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:a.a.createElement(P.a,{type:"primary",onClick:this.tryAgain},"重 试")})):r||0!==t.length?a.a.createElement("div",{className:"page-analysis-con"},a.a.createElement("div",{className:"page-analysis-con-left"},a.a.createElement("div",{className:"page-analysis-list"},a.a.createElement("div",{className:"page-analysis-listItem"},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},"top10设备名称"),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},n)),c.map((function(e,t){var n=e.name,o=e.count;return a.a.createElement("div",{className:"page-analysis-listItem",key:t},a.a.createElement("div",{className:"page-analysis-listItem-kbd"},r?a.a.createElement("span",{className:"page-loading"}):n),a.a.createElement("div",{className:"page-analysis-listItem-kbd"},r?a.a.createElement("span",{className:"page-loading"}):Object(k.a)(o)))})))),a.a.createElement("div",{className:"page-analysis-con-right"},a.a.createElement(be.a,{className:"page-analysis-echarts",option:Object(he.a)(t)}))):a.a.createElement("div",{className:"page-null-wrap"},a.a.createElement(G.a,{className:"page-null-inner"}))}}])&&Ee(t.prototype,n),r&&Ee(t,r),c}(r.Component);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var a=Re(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(c,e);var t,n,r,o=Te(c);function c(){var e;ke(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).onSearch=function(t){var n=e.props,r=n.changeSearchData,a=n.getTabDataForMessage;r(t,"message"),a()},e.tryAgain=function(){e.props.getTabDataForMessage()},e}return t=c,(n=[{key:"render",value:function(){var e=this.tryAgain,t=this.props.message,n=t.isLoading,r=t.isError,o=t.data,c=o.uplink,i=o.downlink,l=0===c.length&&0===i.length;return a.a.createElement(E.a,null,a.a.createElement("h2",{className:"page-title"},"消息数据"),a.a.createElement(W.a,{noRegion:!0,onSearch:this.onSearch,loading:n}),a.a.createElement("div",{className:"page-interval"}),a.a.createElement(H.a,{tabBarGutter:10,animated:!r&&!l},a.a.createElement(H.a.TabPane,{tab:"消息上行量",key:"1"},a.a.createElement(z.a,{className:"page-visualization-alert",message:"备注：设备TCP连接的运行数据等上行请求量。",type:"info",showIcon:!0}),a.a.createElement(Pe,{title:"请求次数(次)",isLoading:n,isError:r,list:c,tryAgain:e})),a.a.createElement(H.a.TabPane,{tab:"消息下行量",key:"2"},a.a.createElement(z.a,{className:"page-visualization-alert",message:"备注：云端对设备进行控制的下行数据。",type:"info",showIcon:!0}),a.a.createElement(Pe,{title:"请求次数(次)",isLoading:n,isError:r,list:i,tryAgain:e}))))}}])&&Ce(t.prototype,n),r&&Ce(t,r),c}(r.Component),Ne=Object(o.b)((function(e){return{message:e.get("visualization").serverAnalysis.message}}),(function(e){return{getTabDataForMessage:function(){return e(g())},changeSearchData:b}}))(xe);n(1467);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve(e);if(t){var a=Ve(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(e,t){if(t&&("object"===Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(i,e);var t,n,o,c=Be(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=c.call(this,e),e.init(),t}return t=i,(n=[{key:"render",value:function(){return a.a.createElement(r.Fragment,null,a.a.createElement(J,null),a.a.createElement("div",{className:"page-interval"}),a.a.createElement(de,null),a.a.createElement("div",{className:"page-interval"}),a.a.createElement(Ne,null),a.a.createElement("div",{className:"page-interval"}))}}])&&Ae(t.prototype,n),o&&Ae(t,o),i}(r.Component),Ue=Object(o.b)(void 0,(function(e){return{init:function(){return e((f={server:{timeType:"1"},message:{timeType:"1"}},function(e){e(h()),e(g()),e(v())}))}}}))(qe)},1498:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Oe}));n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32);var r=n(0),a=n.n(r),o=n(42),c=(n(98),n(39)),i=(n(33),n(35),n(97),n(169),n(34),n(43),n(44),n(353)),l=n(3),u=n(4),s=n.n(u);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y="YYYY-MM-DD HH:mm:ss",m=s()("00:00:00","HH:mm:ss"),d=s()("12:00:00","HH:mm:ss"),b={},h=function(){return{type:i.a}},v=function(){return function(e){var t;e({type:i.c}),(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},b),l.b.Post("manage-open/device/file/upload/pathList",t)).then((function(t){var n=t.data,r=n.code,a=n.data,o=a.list,c=a.pager;e(0===r?function(e,t){return{type:i.b,list:e,pager:t}}(o,c):h())})).catch((function(t){e(h())}))}},g=function(e){var t,n;t=b,n=e,Object.keys(n).forEach((function(e){var r,a=n[e],o=!(null==(r=a)||""===r);!o&&e in t?delete t[e]:o&&(t[e]=a)})),t.startTime&&"string"!=typeof t.startTime&&(t.startTime=t.startTime.format(y)),t.endTime&&"string"!=typeof t.endTime&&(t.endTime=t.endTime.format(y))},E=function(){var e="";Object.keys(b).forEach((function(t){e+=t+"="+b[t]+"&"})),function(e){var t=window.location.origin+l.a+"/manage-open/device/file/upload/excelExport?"+e;try{window.open(t)}catch(e){message.warn("下载失败")}}(e.replace(/&$/,""))},O=(n(75),n(20)),w=(n(1397),n(1394)),j=(n(155),n(40)),S=(n(137),n(68)),P=(n(297),n(156));n(116);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var a=L(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=s()("00:00:00","HH:mm:ss"),F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(c,e);var t,n,r,o=x(c);function c(){var e;T(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).sty={width:"193px"},e.disabledDate=function(e){return e&&e>s()().endOf("day")},e.checkStart=function(t,n,r){var a=e.props.form.getFieldValue("endTime");if(n&&a){var o=a.valueOf();n>o&&r("开始时间必须小于结束时间"),o-n.valueOf()>432e5&&r("开始时间到结束时间不能大于12小时!")}r()},e.checkEnd=function(t,n,r){var a=e.props.form.getFieldValue("startTime");if(n&&a){var o=a.valueOf();n<o&&r("结束时间必须大于开始时间"),n.valueOf()-o>432e5&&r("开始时间到结束时间不能大于12小时!")}r()},e.searchFun=function(){var t=e.props,n=t.form,r=t.changeSearchData,a=t.getList;n.validateFields().then((function(e){var t=e.startTime,n=e.endTime;!!t==!!n?(r(C(C({},e),{},{startTime:t,endTime:n,pageIndex:1})),a()):P.a.warn("请完善发布"+(t?"结束时间":"开始时间"))})).catch((function(e){P.a.warn("请根据提示完成选项")}))},e.onSearch=function(t){t.preventDefault(),e.searchFun()},e.clear=function(){e.props.form.setFieldsValue({fileName:"",startTime:m,endTime:d},e.searchFun)},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.form.getFieldDecorator,r=!!t;return a.a.createElement(j.a,{layout:"inline",onSubmit:this.onSearch},a.a.createElement(j.a.Item,{label:"MAC"},n("fileName",{rules:[{pattern:/^[0-9A-Z]{12}$/,message:"必须为12位大写字母或数字组成"}]})(a.a.createElement(S.a,{placeholder:"请输入MAC地址",maxLength:12,allowClear:!0}))),a.a.createElement(j.a.Item,{label:"发布开始时间"},n("startTime",{initialValue:m,rules:[{validator:this.checkStart}]})(a.a.createElement(w.a,{showTime:{defaultValue:A},placeholder:"选择发布开始时间",disabledDate:this.disabledDate}))),a.a.createElement(j.a.Item,{label:"发布结束时间"},n("endTime",{initialValue:d,rules:[{validator:this.checkEnd}]})(a.a.createElement(w.a,{showTime:{defaultValue:A},placeholder:"选择结束时间",disabledDate:this.disabledDate}))),a.a.createElement(j.a.Item,null,a.a.createElement(O.a,{icon:"search",type:"primary",htmlType:"submit",loading:r},"查询")),a.a.createElement(j.a.Item,null,a.a.createElement(O.a,{onClick:this.clear},"重置")))}}])&&D(t.prototype,n),r&&D(t,r),c}(r.Component),B=j.a.create({name:"equipmentDataSearch"})(F),M=Object(o.b)((function(e,t){return{isLoading:e.get("equipmentData").isLoading}}),(function(e,t){return{changeSearchData:g,getList:function(){return e(v())}}}))(B);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var a=H(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(l,e);var t,n,o,i=J(l);function l(){return q(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return a.a.createElement(r.Fragment,null,a.a.createElement(c.a,null,a.a.createElement("h2",{className:"page-title"},"设备数据管理"),a.a.createElement(M,null)),a.a.createElement("div",{className:"page-interval"}))}}])&&U(t.prototype,n),o&&U(t,o),l}(r.Component),G=(n(299),n(172)),Y=n(106);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ne(e);if(t){var a=ne(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return te(this,n)}}function te(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=function(e){if(!e)return null;var t=s()(e),n=t.add(t.utcOffset()/60,"h").format("YYYY-MM-DD HH:mm:ss");return a.a.createElement(a.a.Fragment,null,n)},ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(c,e);var t,n,r,o=ee(c);function c(){var e;Z(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).columns=[{title:"文件名称",dataIndex:"fileName",key:"fileName"},{title:"文件路径",dataIndex:"filePath",key:"filePath"},{title:"上传时间",dataIndex:"uploadTime",key:"uploadTime",render:function(e){return re(e)}}],e.openModal=function(t){e.props.openModal(t)},e.setPage=function(t){var n=e.props,r=n.pager.totalPages,a=n.changeSearchData,o=n.getList;t>r?P.a.warning("输入页码超过总页数！"):(a({pageIndex:t}),o())},e.tryAgain=function(){e.props.getList()},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.pager,r=e.isLoading,o=void 0!==r&&r,c=e.isError,i=void 0!==c&&c,l=e.download;return i?a.a.createElement(G.a,{status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:a.a.createElement(O.a,{type:"primary",onClick:this.tryAgain},"重 试")}):a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{icon:"export",type:"primary",onClick:l},"导出Excel"),a.a.createElement("div",{className:"page-interval"}),a.a.createElement(Y.a,{bordered:!0,columns:this.columns,dataSource:t,rowKey:"fileId",onPageChange:this.setPage,pager:n,loading:o}))}}])&&Q(t.prototype,n),r&&Q(t,r),c}(r.Component),oe=Object(o.b)((function(e,t){var n=e.get("equipmentData");return{list:n.list,pager:n.pager,isLoading:n.isLoading,isError:n.isError}}),(function(e,t){return{changeSearchData:g,getList:function(){return e(v())},download:E}}))(ae);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pe(e);if(t){var a=pe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(i,e);var t,n,r,o=se(i);function i(){return ie(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return a.a.createElement(c.a,null,a.a.createElement(oe,null))}}])&&le(t.prototype,n),r&&le(t,r),i}(r.Component);n(1463);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var a=ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ve(this,n)}}function ve(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(c,e);var t,n,r,o=he(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=o.call(this,e),e.init(),t}return t=c,(n=[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(W,null),a.a.createElement(ye,null))}}])&&de(t.prototype,n),r&&de(t,r),c}(r.Component),Oe=Object(o.b)(void 0,(function(e,t){return{init:function(){return e((function(e){b={pageRows:10,pageIndex:1},v()(e)}))}}}))(Ee)},1501:function(e,t,n){"use strict";n.r(t);n(97),n(256);var r,a=n(0),o=n.n(a),c=n(58),i=(n(48),n(49),n(35),n(19),n(34),n(43),n(33),n(44),n(37),n(22),n(38),n(29),n(31),n(32),n(257),n(198),n(221),n(98),n(39)),l=(n(1384),n(1385)),u=(n(1386),n(1387)),s=(n(222),n(83)),f=(n(75),n(20)),p=(n(155),n(40)),y=(n(116),n(167),n(42)),m=n(106),d=n(30),b=n(487);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}p.a.Item;var T=p.a.create()(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(c,e);var t,n,r,a=I(c);function c(){var e;j(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1,stopID:"",query:"",pager:{totalRows:20,pageIndex:0}},e.columns=[{title:"订阅ID",dataIndex:"urlConfId",width:"100px"},{title:"订阅用户ID",dataIndex:"developerId",width:"110px"},{title:"订阅形式",dataIndex:"pushWay",render:function(t){var n=e.props.observerWay[t];return o.a.createElement("span",null,n)}},{title:"创建时间",dataIndex:"createTime",render:function(e){var t=d.b.utcToDev(e);return o.a.createElement("span",null,t)}},{title:"修改时间",dataIndex:"updateTime",render:function(e){return o.a.createElement("span",null,d.b.utcToDev(e))}},{title:"状态",dataIndex:"pushState",width:"90px",render:function(t){var n=e.props.observerPushState[t],r=1==t?{color:"#00ff00"}:{color:"#ff0000"};return o.a.createElement("span",{style:r},n)}},{title:"操作",width:"150px",render:function(t){return o.a.createElement("div",null,o.a.createElement(s.a,{placement:"top",title:"查看"},o.a.createElement(f.a,{shape:"circle",size:"small",icon:"info",key:0,onClick:e.handleDetail.bind(C(e),t.urlConfId)})),(1==t.pushState||2==t.pushState)&&o.a.createElement("span",null,o.a.createElement(u.a,{type:"vertical"}),o.a.createElement(l.a,{title:o.a.createElement("div",null,"即将停用订阅ID: ",t.urlConfId,o.a.createElement("p",null,"停用之后不可使用，确认要停用吗")),okText:"停用",okType:"danger",cancelText:"取消",placement:"topRight",onConfirm:function(){return e.handleStop(t.urlConfId)}},o.a.createElement(s.a,{placement:"top",title:"停用"},o.a.createElement(f.a,{shape:"circle",size:"small",icon:"stop",key:0})))),0==t.pushState&&o.a.createElement("span",null,o.a.createElement(u.a,{type:"vertical"}),o.a.createElement(l.a,{title:o.a.createElement("div",null,"即将启用订阅ID: ",t.urlConfId,o.a.createElement("p",null,"建议进入编辑确认是否是最新订阅内容和形式")),okText:"启用",cancelText:"取消",placement:"topRight",onConfirm:function(){return e.handleStart(t.urlConfId)}},o.a.createElement(s.a,{placement:"top",title:"启用"},o.a.createElement(f.a,{shape:"circle",size:"small",icon:"check"})))),o.a.createElement("span",null,o.a.createElement(u.a,{type:"vertical"}),o.a.createElement(s.a,{placement:"top",title:"编辑"},o.a.createElement(f.a,{shape:"circle",size:"small",icon:"edit",href:"#/businessdata/dataObserver/add/".concat(t.urlConfId)}))))}}],e.handleDetail=function(t){e.props.history.push("/businessdata/dataObserver/detail/".concat(t))},e.handlerSubmit=function(){e.props.form.validateFields((function(t,n){if(!t){var r=n.serachKey;e.setState({query:r}),console.log(r)}}))},e.handlerReset=function(){e.props.form.resetFields(),e.setState({query:""})},e.handleStop=function(t){e.props.stopObseverurlConfId(t,e.props.pager)},e.handleStart=function(t){e.props.startObseverurlConfId(t,e.props.pager)},e.pagerChange=function(t){var n=e.props.pager,r=Object.assign({},O({},n),{pageIndex:t});e.props.getList(r)},e}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.cleanAddStore(),this.props.getList({pageRows:20,pageIndex:0})}},{key:"render",value:function(){this.props.form.getFieldDecorator;var e=this.props.dataObserverList;return o.a.createElement("div",null,o.a.createElement(i.a,null,o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},o.a.createElement("div",null,o.a.createElement("h2",{className:"title"},"数据订阅")),o.a.createElement("div",null,o.a.createElement(f.a,{href:"#/businessdata/dataObserver/add/0",type:"primary"},"新建数据订阅")))),o.a.createElement(i.a,{style:{marginTop:"10px"}},o.a.createElement(m.a,{onPageChange:this.pagerChange,columns:this.columns,dataSource:v(e),pager:this.props.pager,rowKey:"urlConfId"})))}}])&&S(t.prototype,n),r&&S(t,r),c}(o.a.Component))||r,D=Object(y.b)((function(e){var t=e.getIn(["dataObserver","observerWay"]).toJS(),n=e.getIn(["dataObserver","observerProtocolType"]).toJS(),r=e.getIn(["dataObserver","observerPushState"]).toJS(),a=e.getIn(["dataObserver","dataObserverList"])||[];return{pager:e.getIn(["dataObserver","pager"]),observerWay:t,observerProtocolType:n,dataObserverList:a,observerPushState:r}}),(function(e){return{getList:function(t){e(b.a.getObserverList(t))},stopObseverurlConfId:function(t,n){e(b.a.stopObseverurlConfId(t,n))},startObseverurlConfId:function(t,n){e(b.a.startObseverurlConfId(t,n))},cleanAddStore:function(){e(b.a.cleanObserverAddData())}}}))(T),R=(n(168),n(7)),x=(n(297),n(156)),N=(n(821),n(367)),L=(n(361),n(65),n(5),n(488),n(341)),A=(n(467),n(173)),F=(n(468),n(110)),B=(n(365),n(144)),M=(n(137),n(68));function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(c,e);var t,n,r,a=W(c);function c(){var e;J(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={labelKey:"",labelValue:"",pageIndex:1},e.resetAction=function(){e.setState({labelKey:"",labelValue:"",pageIndex:1},e.props.filterLabelAction())},e.filterAction=function(){var t=e.state,n={labelKey:t.labelKey,labelValue:t.labelValue,pageIndex:1};e.props.filterLabelAction(n)},e.validataForm=function(t){e.props.form.validateFieldsAndScroll((function(n,r){n||(e.props.nextStepAction(),t&&t())}))},e.filterKeyAction=function(t){var n=t.target.value;e.setState({labelKey:n})},e.filterValueAction=function(t){var n=t.target.value;e.setState({labelValue:n})},e}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"changePage",value:function(e){var t=this;this.setState({pageIndex:e},(function(){var e=t.state,n=e.labelKey,r=e.labelValue,a=e.pageIndex;t.props.filterLabelAction({labelKey:n,labelValue:r,pageIndex:a})}))}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n={labelCol:{span:3},wrapperCol:{span:21}},r=this.props.labelOptions,a=r.pager,c=void 0===a?{}:a,i=r.list,l=void 0===i?[]:i,u=this.state,s=u.labelKey,y=u.labelValue;return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-arround"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginBottom:"30px"}},o.a.createElement(M.a,{placeholder:"请输入标签Key",style:{width:"150px",margin:"0px 20px"},value:s,onChange:this.filterKeyAction}),o.a.createElement(M.a,{placeholder:"请输入标签Value",style:{width:"150px",margin:"0px 20px"},value:y,onChange:this.filterValueAction}),o.a.createElement(f.a,{type:"primary",htmlType:"submit",style:{margin:"0px 20px"},onClick:this.filterAction},"过滤"),o.a.createElement(f.a,{type:"submit",onClick:this.resetAction},"重置")),o.a.createElement(p.a,n,o.a.createElement(p.a.Item,{label:"数据标签"},t("observerLabel",{rules:[{required:!0,message:"请选择标签"}],initialValue:[426]})(o.a.createElement(B.a.Group,{style:{width:"100%"}},o.a.createElement(A.a,null,l.map((function(e){return o.a.createElement(F.a,{xs:{span:8},key:e.labelId},o.a.createElement(B.a,{checked:!0,value:e.labelId},e.labelKey,"-",e.labelValue))}))))))),c&&c.totalRows>0&&o.a.createElement(L.a,{className:"self-pa",total:c.totalRows,current:c.pageIndex,defaultCurrent:1,defaultPageSize:50,onChange:function(t){return e.changePage(t)},showTotal:function(e){return o.a.createElement("span",null,"共 ",o.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}))}}])&&z(t.prototype,n),r&&z(t,r),c}(o.a.Component),Z=p.a.create({name:"ObserverEditStepOne",onFieldsChange:function(e,t,n){e.onChange(t)},mapPropsToFields:function(e){var t=e.observerLabel,n=e.filterKey,r=e.filterValue;return console.log("ToFieldsobserverLabel----",t),{observerLabel:p.a.createFormField(U({},t)),filterKey:p.a.createFormField(U({},n)),filterValue:p.a.createFormField(U({},r))}}})($);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var a=ie(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ce(this,n)}}function ce(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(c,e);var t,n,r,a=oe(c);function c(){var e;ne(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).validataForm=function(){e.props.form.validateFieldsAndScroll((function(t,n){t||e.props.nextStepAction()}))},e}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:8},wrapperCol:{span:16}},n=this.props,r=n.protocolType,a=n.productList;return o.a.createElement("div",null,o.a.createElement(p.a,t,o.a.createElement(p.a.Item,{label:"标签/设备关联产品"},e("protocolList",{})(o.a.createElement(A.a,null,a.map((function(e){return o.a.createElement(F.a,{span:6,key:e.productId},o.a.createElement("span",null,e.productName))}))))),o.a.createElement(p.a.Item,{required:!0,label:"数据类型"},e("observerDataType",{rules:[{required:!0,message:"请选择数据类型"}]})(o.a.createElement(B.a.Group,null,o.a.createElement(A.a,null,r.map((function(e){return o.a.createElement(F.a,{span:8,key:e.key},o.a.createElement(B.a,{value:e.key},e.value))}))))))))}}])&&re(t.prototype,n),r&&re(t,r),c}(o.a.Component),ue=p.a.create({name:"ObserverEditStepTwo",onFieldsChange:function(e,t,n){e.onChange(t)},mapPropsToFields:function(e){var t=e.observerDataType;return{observerDataType:p.a.createFormField(ee({},t))}}})(le),se=(n(466),n(170));function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ee(e);if(t){var a=Ee(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(c,e);var t,n,r,a=ve(c);function c(){var e;de(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).validataForm=function(){e.props.form.validateFieldsAndScroll((function(t,n){t||e.props.onSubmit()}))},e}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"getTypeFeild",value:function(e){var t=this.props.form.getFieldDecorator,n=o.a.createElement("div",null,o.a.createElement(p.a.Item,{required:!0,label:"数据订阅URL"},t("observerHttpURL",{rules:[{required:!0,message:"填写数据订阅服务器URL"}]})(o.a.createElement(M.a,{placeholder:"填写数据订阅服务器URL",style:{width:"80%"}})),o.a.createElement("p",null,"备注：供C-Life云推送服务给第三方云推送数据,仅支持http方式。")),o.a.createElement(p.a.Item,{required:!0,label:"Token"},t("observerHttpToken",{rules:[{required:!0,message:"填写验证token"}]})(o.a.createElement(M.a,{placeholder:"填写验证token",style:{width:"80%"}})),o.a.createElement("p",null,"备注：第三方云服务接口对接C-Life云推送服务的凭证,用来验证厂商服务接口的合法性。")));return"0"===e?n:o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("a",null,"查看帮助文档"))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.observerType.value,n={labelCol:{span:4},wrapperCol:{span:20}};return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(p.a,n,o.a.createElement(p.a.Item,{required:!0,label:"请选择订阅方式"},e("observerType",{rules:[{required:!0,message:"请选择订阅方式"}]})(o.a.createElement(se.a.Group,null,o.a.createElement(se.a,{value:"0"},"选择push数据订阅"),o.a.createElement(se.a,{value:"1"},"选择MQTT主题订阅")))),this.getTypeFeild(t))))}}])&&be(t.prototype,n),r&&be(t,r),c}(o.a.Component),we=p.a.create({name:"ObserverEditStepThree",onFieldsChange:function(e,t,n){e.onChange(t)},mapPropsToFields:function(e){var t=e.observerType,n=e.observerHttpURL,r=e.observerHttpToken;return{observerType:p.a.createFormField(ye({},t)),observerHttpToken:p.a.createFormField(ye({},r)),observerHttpURL:p.a.createFormField(ye({},n))}}})(Oe),je=n(194);n(1437);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Te(e);if(t){var a=Te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _e(this,n)}}function _e(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=N.a.Step,Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(c,e);var t,n,r,a=Ce(c);function c(){var e;Pe(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).ObserverEditStepOne=void 0,e.ObserverEditStepTwo=void 0,e.ObserverEditStepThree=void 0,e.onFeildChange=function(t){e.props.observerAddFieldChange(t)},e.filterLabelAction=function(t){e.props.getObserverLabelList(t)},e.onSubmit=function(){var t=e.props,n=t.observerLabel,r=t.observerDataType,a=t.observerType,o=t.observerHttpURL,c=t.observerHttpToken,i=n.value,l=a.value,u=r.value,s={deviceLabelIds:i.join(","),pushWay:l,devicePushDataConfList:[]};u.map((function(e){var t={dataType:e,dataTypeScope:1};s.devicePushDataConfList.push(t)})),"0"===l&&(s.url=o.value,s.pushToken=c.value);var f=e.props.match.params.id;f=parseInt(f);var p="新增成功";0!==f&&(s.urlConfId=f,p="修改成功"),Object(je.c)(s).then((function(t){0===t.data.code&&x.a.success(p,.1,(function(){e.props.cleanStore(),e.props.history.push("/businessdata/dataObserver/list")}))}))},e.nextStepAction=function(){e.props.changeCurrent(b.b.CurrentOperation.next)},e.preStepAction=function(){e.props.changeCurrent(b.b.CurrentOperation.pre)},e.stepOneAction=function(){e.ObserverEditStepOne.validataForm((function(){var t=e.props.observerLabel.value.join(",");e.props.getObserverLabelProductList(t)}))},e.backAction=function(){e.props.cleanStore(),e.props.history.goBack()},e.stepsContent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=e.props,r=n.dataLabel,a=n.protocolType,c=n.productList,i=n.observerType,l=n.observerHttpURL,u=n.observerHttpToken,s=n.observerDataType,f=n.observerLabel,p=n.filterKey,y=n.filterValue,m=(n.deviceLabelIds,o.a.createElement(Z,{onRef:function(t){return e.ObserverEditStepOne=t},nextStepAction:e.nextStepAction,labelOptions:r,observerLabel:f,filterKey:p,filterValue:y,onChange:e.onFeildChange,filterLabelAction:e.filterLabelAction})),d=o.a.createElement(ue,{onRef:function(t){return e.ObserverEditStepTwo=t},nextStepAction:e.nextStepAction,protocolType:a,productList:c,observerDataType:s,onChange:e.onFeildChange}),b=o.a.createElement(we,{onRef:function(t){return e.ObserverEditStepThree=t},nextStepAction:e.nextStepAction,onSubmit:e.onSubmit,observerType:i,observerHttpURL:l,observerHttpToken:u,onChange:e.onFeildChange});switch(t){case 0:return m;case 1:return d;case 2:return b;default:return m}},e.stepsButton=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;switch(t){case 0:return o.a.createElement(f.a,{type:"primary",onClick:e.stepOneAction},"下一步");case 1:return o.a.createElement("div",null,o.a.createElement(f.a,{type:"primary",onClick:e.preStepAction},"上一步"),"    ",o.a.createElement(f.a,{type:"primary",onClick:function(){e.ObserverEditStepTwo.validataForm()}},"下一步"));case 2:return o.a.createElement("div",null,o.a.createElement(f.a,{type:"primary",onClick:e.preStepAction},"上一步"),"    ",o.a.createElement(f.a,{type:"primary",onClick:function(){e.ObserverEditStepThree.validataForm()}},"提交"));default:return o.a.createElement(f.a,{type:"primary",onClick:function(){e.ObserverEditStepOne.validataForm()}},"下一步")}},e}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e=parseInt(e),this.props.getObserverLabelList(),0!=e&&this.props.getDetailData(e,!0)}},{key:"render",value:function(){var e=this.props.current,t="0"==this.props.match.params.id?"新增数据订阅":"修改数据订阅";return o.a.createElement("div",null,o.a.createElement(i.a,null,o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement("h2",{className:"title"},t),o.a.createElement("div",null,o.a.createElement(f.a,{onClick:this.backAction,style:{padding:"10px"},type:"link"},o.a.createElement(R.a,{type:"left"})," 返回")))),o.a.createElement(i.a,{style:{marginTop:"10px"}},o.a.createElement("div",{className:"steps-container"},o.a.createElement("div",{className:"steps-step"},o.a.createElement(N.a,{current:parseInt(e)},o.a.createElement(De,{title:"配置订阅对象"}),o.a.createElement(De,{title:"配置订阅内容"}),o.a.createElement(De,{title:"配置订阅方式"}))),o.a.createElement("div",{className:"steps-content"},this.stepsContent(parseInt(e))),o.a.createElement("div",{className:"steps-action"},this.stepsButton(parseInt(e))))))}}])&&Ie(t.prototype,n),r&&Ie(t,r),c}(o.a.Component),xe=Object(y.b)((function(e){var t=e.getIn(["dataObserver","observerProtocolType"]).toJS(),n=e.getIn(["dataObserver","dataObserverAdd"]).toJS(),r=e.getIn(["dataObserver","dataObserverDetail"]);return console.log("---dataObserData----",n),{current:n.current,dataLabel:n.dataLabel,productList:n.productList,protocolType:t,observerType:n.observerType,observerHttpURL:n.observerHttpURL,observerHttpToken:n.observerHttpToken,observerDataType:n.observerDataType,observerLabel:n.observerLabel,filterKey:n.filterKey,filterValue:n.filterValue,deviceLabelIds:r.deviceLabelIds||""}}),(function(e){return{changeCurrent:function(t){e(b.a.observerAddChangeCurrent(t))},observerAddFieldChange:function(t){e(b.a.observerAddFieldChange(t))},getObserverLabelList:function(t){e(b.a.getLabelList(t))},getObserverLabelProductList:function(t){e(b.a.getProductList(t))},cleanStore:function(){e(b.a.cleanObserverAddData())},getDetailData:function(t,n){e(b.a.getDataObseDetailById(t,n))}}}))(Re),Ne=n(77);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qe(e);if(t){var a=qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){if(t&&("object"===Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ue={2:"控制数据",3:"运行数据",4:"故障数据"},Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(c,e);var t,n,r,a=Me(c);function c(){return Ae(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.getDetailData(e)}},{key:"render",value:function(){var e=this.props,t=e.dataObserverDetail,n=e.observerWay,r=(e.observerProtocolType,e.observerPushState),a=1==t.pushState?{color:"#00ff00"}:{color:"#ff0000"},c=t.labelVoList||[],l=t.devicePushDataConfList||[];return o.a.createElement("div",null,o.a.createElement(i.a,null,o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement("h2",{className:"title"},"数据订阅详情"),o.a.createElement("div",null,o.a.createElement(Ne.b,{to:"/businessdata/dataObserver/list",style:{padding:"10px"}},o.a.createElement(R.a,{type:"left"})," 返回")))),o.a.createElement(i.a,{className:"observerDetail-card"},o.a.createElement("div",{className:"observerDetail-content"},o.a.createElement("div",{className:"observerDetail-border"},o.a.createElement(A.a,null,o.a.createElement(F.a,{span:3},o.a.createElement("p",{className:"title"},"订阅形式"),o.a.createElement("span",{className:"content"},n[t.pushWay])),o.a.createElement(F.a,{span:2},o.a.createElement("p",{className:"title"},"状态"),o.a.createElement("span",{className:"content",style:a},r[t.pushState])),o.a.createElement(F.a,{span:4},o.a.createElement("p",{className:"title"},"创建时间"),o.a.createElement("span",{className:"content"},d.b.utcToDev(t.createTime))),o.a.createElement(F.a,{span:4},o.a.createElement("p",{className:"title"},"更新时间"),o.a.createElement("span",{className:"content"},d.b.utcToDev(t.updateTime))),o.a.createElement(F.a,{span:2},o.a.createElement("p",{className:"title"},"用户ID"),o.a.createElement("span",{className:"content"},t.developerId)),0==t.pushWay&&o.a.createElement(F.a,{span:7},o.a.createElement("p",{className:"title"},"数据订阅URL"),o.a.createElement("span",{className:"content"},t.url)),0==t.pushWay&&o.a.createElement(F.a,{span:2},o.a.createElement("p",{className:"title"},"token"),o.a.createElement("span",{className:"content"},t.pushToken)))),o.a.createElement("div",{className:"observerDetail-border"},o.a.createElement("p",{className:"title"},"订阅对象"),o.a.createElement(A.a,null,c.map((function(e){return o.a.createElement(F.a,{span:8,key:e.labelId},o.a.createElement("span",null,e.labelValue,"-",e.labelKey))})))),o.a.createElement("div",{className:"observerDetail-border"},o.a.createElement("p",{className:"title"},"订阅内容"),o.a.createElement("div",{className:"observerContent"},o.a.createElement(A.a,null,l.map((function(e){return o.a.createElement(F.a,{span:8,key:e.dataConfId},o.a.createElement("div",{style:{overflowWrap:"break-word",padding:"5px"}},o.a.createElement("p",null,e.dataType?Ue[e.dataType]:""),o.a.createElement("p",null,e.protocolProperty)))})))))),2==t.pushState&&o.a.createElement("div",{style:{marginTop:"16px"}},o.a.createElement("i",null,"注：该数据订阅失败次数过多，订阅已锁定，请重新编辑或者直接停用此订阅。")),o.a.createElement("div",{style:{textAlign:"right",marginTop:"20px"}},o.a.createElement(f.a,{type:"primary",href:"#/businessdata/dataObserver/add/"+t.urlConfId},"编辑"))))}}])&&Fe(t.prototype,n),r&&Fe(t,r),c}(o.a.Component),Je=Object(y.b)((function(e){return{observerWay:e.getIn(["dataObserver","observerWay"]).toJS(),observerProtocolType:e.getIn(["dataObserver","observerProtocolType"]).toJS(),observerPushState:e.getIn(["dataObserver","observerPushState"]).toJS(),dataObserverDetail:e.getIn(["dataObserver","dataObserverDetail"])}}),(function(e){return{getDetailData:function(t){e(b.a.getDataObseDetailById(t))}}}))(Ke),ze=n(489);t.default=function(e){var t=e.match;return o.a.createElement(c.d,null,o.a.createElement(ze.a,{exact:!0,path:"".concat(t.url,"/list"),component:D}),o.a.createElement(ze.a,{exact:!0,path:"".concat(t.url,"/add/:id"),component:xe}),o.a.createElement(ze.a,{exact:!0,path:"".concat(t.url,"/detail/:id"),component:Je}),o.a.createElement(c.a,{from:"".concat(t.url),to:"".concat(t.url,"/list")}))}},1502:function(e,t,n){"use strict";n.r(t);n(97),n(256);var r=n(0),a=n.n(r),o=n(58),c=(n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32),n(75),n(20)),i=(n(137),n(68)),l=(n(222),n(83)),u=(n(168),n(7)),s=(n(155),n(40)),f=(n(197),n(76)),p=(n(116),n(169),n(42)),y=n(1418),m=n(106),d=n(30),b=n(473),h=n(1420);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=f.a.Option,I=s.a.Item,k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(p,e);var t,n,r,o=w(p);function p(){var e;g(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={param:"",type:1,query:{}},e.handleEdit=function(t){e.props.history.push("./".concat(t))},e}return t=p,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.accountList,r=t.pager,o=t.form,p=t.loading,b=[{title:"账号ID",dataIndex:"developerId",width:"15%"},{title:"手机号码",dataIndex:"phone",width:"20%"},{title:"邮箱",dataIndex:"email",width:"25%"},{title:"注册时间",dataIndex:"createTime",width:"20%",className:"th-break",render:function(e){var t=e?d.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss"):"--";return a.a.createElement("span",null,t)}},{title:"操作",render:function(t){return a.a.createElement("div",{className:"action"},a.a.createElement(l.a,{placement:"top",title:"查看"},a.a.createElement(u.a,{type:"info-circle",onClick:e.handleEdit.bind(e,t.developerId)})))}}],h=o.getFieldDecorator;return a.a.createElement("div",{className:"account-manage"},a.a.createElement(y.a,{title:"用户管理"},a.a.createElement(s.a,{layout:"inline"},a.a.createElement(I,null,h("type",{initialValue:1,getValueFromEvent:function(t){var n=e.props.form.getFieldValue("param");return n?(1===t||2===t?e.props.form.setFieldsValue({param:n.replace(/[^\d]/g,"")}):3===t&&e.props.form.setFieldsValue({param:n.replace(/[^\w@._]/g,"")}),t):t}})(a.a.createElement(f.a,{style:{width:160}},a.a.createElement(P,{value:1,key:"1"},"账号ID"),a.a.createElement(P,{value:2,key:"2"},"手机号码"),a.a.createElement(P,{value:3,key:"3"},"电子邮件")))),a.a.createElement(I,null,h("param",{getValueFromEvent:function(t){var n=e.props.form.getFieldValue("type");return 1===n||2===n?t.target.value.replace(/[^\d]/g,""):3===n?t.target.value.replace(/[^\w@._]/g,""):void 0}})(a.a.createElement(i.a,{style:{width:240},onPressEnter:this.props.onFilter}))),a.a.createElement(I,null,a.a.createElement(c.a,{className:"modelSearch",type:"primary",onClick:this.props.onFilter},"查询")),a.a.createElement(I,null,a.a.createElement(c.a,{className:"modelSearch",type:"primary",onClick:this.props.onReset},"重置")))),a.a.createElement("div",{className:"account-content"},a.a.createElement(m.a,{rowKey:"developerId",columns:b,dataSource:n,pager:r,loading:p,onPageChange:this.props.onChange})))}}])&&E(t.prototype,n),r&&E(t,r),p}(a.a.Component),C=Object(p.b)((function(e){return{accountList:e.getIn(["accountManage","accountList"]).toJS(),pager:e.getIn(["accountManage","pager"]).toJS(),loading:e.getIn(["accountManage","loading"])}}),(function(e){return{getList:function(t){return e(b.a.getList(t))}}}))(s.a.create()(Object(h.a)(k))),_=(n(298),n(117));n(303),n(221);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=[{name:"--",color:"#333"},{name:"正常",color:"#0099cc"},{name:"停用",color:"#ff0000"}],B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(c,e);var t,n,r,o=N(c);function c(){var e;D(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={loading:!1},e.onChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=e.props.match.params.id;e.setState({loading:!0}),e.props.getSubAccountList({pageIndex:t,id:n}).then((function(){e.setState({loading:!1})}))},e}return t=c,(n=[{key:"componentDidMount",value:function(){this.onChange()}},{key:"render",value:function(){var e=this.state.loading,t=this.props,n=t.list,r=t.pager,o=[{title:"用户名",dataIndex:"userName",width:"20%"},{title:"备注",dataIndex:"remark",width:"20%"},{title:"用户角色",dataIndex:"roleName",width:"20%"},{title:"用户状态",dataIndex:"status",width:"100px",render:function(e){var t=1===e?F[1]:F[2];return a.a.createElement("span",{style:{color:t.color}},t.name)}},{title:"最新修改时间",dataIndex:"modifyTime",width:"150px",render:function(e){var t=d.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return a.a.createElement("span",null,t)}}];return a.a.createElement(m.a,{rowKey:"userId",columns:o,dataSource:n,loading:e,onPageChange:this.onChange,pager:r})}}])&&R(t.prototype,n),r&&R(t,r),c}(a.a.Component),M=Object(p.b)((function(e){return{list:e.getIn(["accountManage","subAccountList"]).toJS(),pager:e.getIn(["accountManage","subAccountPager"]).toJS()}}),(function(e){return{getSubAccountList:function(t){return e(b.a.getSubAccountList(t))}}}))(Object(o.g)(B));function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var a=H(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W,G={0:"开发中",1:"已发布",2:"审核中"},Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(c,e);var t,n,r,o=J(c);function c(){var e;q(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={loading:!1},e.onChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=e.props.match.params.id;e.setState({loading:!0}),e.props.getProductList({pageIndex:t,id:n}).then((function(){e.setState({loading:!1})}))},e}return t=c,(n=[{key:"componentDidMount",value:function(){this.onChange()}},{key:"render",value:function(){var e=this.state.loading,t=this.props,n=t.list,r=t.pager,o=[{title:"产品ID",dataIndex:"productId",width:"200px"},{title:"产品名称",dataIndex:"productName",width:"20%"},{title:"所属分类",dataIndex:"productType",width:"30%"},{title:"状态",dataIndex:"mode",width:"10%",render:function(e){return a.a.createElement("span",null,G[e])}},{title:"创建时间",dataIndex:"createTime",width:"200px",render:function(e){var t=d.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return a.a.createElement("span",null,t)}}];return a.a.createElement(m.a,{rowKey:"productId",columns:o,dataSource:n,pager:r,loading:e,onPageChange:this.onChange})}}])&&U(t.prototype,n),r&&U(t,r),c}(a.a.Component),$=Object(p.b)((function(e){return{list:e.getIn(["accountManage","productList"]).toJS(),pager:e.getIn(["accountManage","productPager"]).toJS()}}),(function(e){return{getProductList:function(t){return e(b.a.getProductList(t))}}}))(Object(o.g)(Y)),Z=(n(167),n(255),n(128));function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var a=oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=s.a.Item,ie=s.a.create()(W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(c,e);var t,n,r,o=re(c);function c(){var e;ee(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleCheck=function(t,n,r){e.props.form.getFieldValue("password")!==n&&r("两次密码输入不一致"),r()},e.handleOk=function(){e.props.form.validateFields((function(t,n){t||e.props.onOk(n)}))},e.handleCancel=function(){var t=e.props,n=t.form,r=t.onCancel;n.resetFields(),r()},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.form,n=e.visible,r=t.getFieldDecorator,o={labelCol:{span:6},wrapperCol:{span:14}};return a.a.createElement(Z.a,{width:600,visible:n,title:"重置密码",onCancel:this.handleCancel,onOk:this.handleOk},a.a.createElement(s.a,null,a.a.createElement(ce,X({label:"新密码"},o),r("password",{rules:[{required:!0,message:"以字母开头的6到18个字母或数字或下划线"},{pattern:/^[a-zA-Z]\w{5,17}$/,message:"以字母开头的6到18个字母或数字或下划线"}]})(a.a.createElement(i.a.Password,{maxLength:18,placeholder:"以字母开头的6到18个字母或数字或下划线"}))),a.a.createElement(ce,X({label:"确认密码"},o),r("confirmPw",{rules:[{required:!0,message:"请确认新密码"},{validator:this.handleCheck}]})(a.a.createElement(i.a.Password,{maxLength:18,placeholder:"请确认新密码",onPressEnter:this.handleOk})))))}}])&&te(t.prototype,n),r&&te(t,r),c}(a.a.Component))||W;function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var a=me(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=_.a.TabPane,be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(i,e);var t,n,r,o=pe(i);function i(){var e;ue(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={isEdit:!1,visible:!1},e.handleTrigger=function(){var t=e.state.isEdit;e.setState({isEdit:!t})},e.handleEdit=function(){var t=e.props.match.params.id;e.props.history.push("./edit/".concat(t))},e.handleBack=function(){e.props.history.go(-1)},e.handleResetPwd=function(t){e.setState({visible:!0})},e.handleResetCancel=function(){e.setState({visible:!1},(function(){e.form.props.form.resetFields()}))},e.handleResetSave=function(t){var n=t.password,r=e.props.match.params.id;e.props.resetPwd({password:n,id:r}).then((function(t){t&&e.handleResetCancel()}))},e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.province.length||this.props.getProvince();var e=this.props.match.params.id;this.props.getAccountDetail(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isEdit,r=t.visible,o=this.props,i=o.accountDetail,l=o.province,s=i.id,f=i.email,p=i.mobilePhone,m=i.createTime,d=(i.contactAddr,i.contactPerson),b=i.contactPhone,h=l.find((function(e){return e.value===i.province}))||{},v=h.children?h.children.find((function(e){return e.value===+i.city})):{},g="".concat(h.label||i.province||"","-").concat(v&&v.label?v.label:i.city||"");return a.a.createElement("div",{className:"account-manage"},a.a.createElement(y.a,{title:"用户详情"},a.a.createElement(c.a,{type:"primary",className:"btn-back",onClick:this.handleBack},"返回")),a.a.createElement("div",{className:"account-info-wrap"},a.a.createElement("div",{className:"account-content info"},a.a.createElement("div",{className:"account-info ".concat(n?"active":"")},a.a.createElement("div",{className:"account-info-detail "},a.a.createElement("h2",null,"基本资料"),a.a.createElement("div",{className:"account-info-grid"},a.a.createElement("p",null,a.a.createElement("span",{className:"label"},"账号ID："),s),a.a.createElement("p",null,a.a.createElement("span",{className:"label"},"电子邮箱："),f),a.a.createElement("p",null,a.a.createElement("span",{className:"label"},"手机号码："),p),a.a.createElement("p",null,a.a.createElement("span",{className:"label"},"注册时间："),m),a.a.createElement("p",null,a.a.createElement("span",{className:"label"},"密码："),"******",a.a.createElement("span",{className:"reset",onClick:this.handleResetPwd},"重置"))),a.a.createElement("h2",null,"联系信息"),a.a.createElement("div",{className:"account-info-grid"},a.a.createElement("p",null,a.a.createElement("span",{className:"label"},"国家："),"中国"),a.a.createElement("p",null,a.a.createElement("span",{className:"label"},"所在地区："),g),a.a.createElement("p",null,a.a.createElement("span",{className:"label"},"联系人："),d),a.a.createElement("p",null,a.a.createElement("span",{className:"label"},"联系电话："),b||""))),a.a.createElement("span",{className:"slide-up",onClick:this.handleTrigger},a.a.createElement(u.a,{type:n?"up":"down"}),n?"收起":"展开"),a.a.createElement("span",{className:"edit",onClick:this.handleEdit},a.a.createElement(u.a,{type:"edit"}),"编辑"))),a.a.createElement("div",{className:"account-content sub"},a.a.createElement(_.a,{defaultActiveKey:"1"},a.a.createElement(de,{tab:"子账号",key:"1"},a.a.createElement(M,null)),a.a.createElement(de,{tab:"产品信息",key:"2"},a.a.createElement($,null))))),a.a.createElement(ie,{visible:r,onCancel:this.handleResetCancel,onOk:this.handleResetSave,wrappedComponentRef:function(t){return e.form=t}}))}}])&&se(t.prototype,n),r&&se(t,r),i}(a.a.Component),he=Object(p.b)((function(e){return{accountDetail:e.getIn(["accountManage","accountDetail"]).toJS(),province:e.getIn(["accountManage","province"]).toJS()}}),(function(e){return{getAccountDetail:function(t){return e(b.a.getAccountDetail(t))},resetPwd:function(t){return e(b.a.resetPwd(t))},getProvince:function(){return e(b.a.getProvince())}}}))(be),ve=(n(198),n(257),n(35),n(34),n(43),n(33),n(44),n(822),n(474));function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var a=De(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Te(this,n)}}function Te(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=s.a.Item,xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(l,e);var t,n,r,o=_e(l);function l(){var e;Ie(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleBack=function(){e.props.history.go(-1)},e.handleSave=function(){var t=e.props.form.getFieldsValue(),n=e.props.match.params.id,r=Se(t.provinceCity||[],2),a=r[0],o=r[1];delete t.provinceCity,e.props.updateAccount(we(we({developerId:n},t),{},{province:a,city:o})).then((function(t){t&&e.props.history.push("/businessdata/accountManage/".concat(n))}))},e.loadData=function(t){var n=t[t.length-1];e.props.getCityByProvinceId(n.value)},e}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.accountDetail,n=e.province,r=this.props.match.params.id;n.length||this.props.getProvince(),t.id||this.props.getAccountDetail(r)}},{key:"render",value:function(){var e={labelCol:{span:6},wrapperCol:{span:10,offset:1}},t=this.props,n=t.form,r=t.accountDetail,o=t.province,l=n.getFieldDecorator;return a.a.createElement("div",{className:"account-manage"},a.a.createElement(y.a,{title:"编辑用户详情"},a.a.createElement(c.a,{type:"primary",className:"btn-back",onClick:this.handleBack},"返回")),a.a.createElement("div",{className:"account-content"},a.a.createElement(s.a,{style:{width:800,paddingBottom:50}},a.a.createElement(Re,null,a.a.createElement("h2",null,"基本信息")),a.a.createElement(Re,Ee({label:"账号ID"},e),a.a.createElement("span",null,r.id||"")),a.a.createElement(Re,Ee({label:"手机号码"},e),l("mobilePhone")(a.a.createElement(i.a,{placeholder:"请输入手机号码",maxLength:11}))),a.a.createElement(Re,Ee({label:"电子邮箱"},e),l("email")(a.a.createElement(i.a,{placeholder:"请输入电子邮箱",maxLength:30}))),a.a.createElement(Re,Ee({label:"注册时间"},e),a.a.createElement("span",null,r.createTime||"")),a.a.createElement(Re,null,a.a.createElement("h2",null,"联系信息")),a.a.createElement(Re,Ee({label:"国家"},e),a.a.createElement(i.a,{disabled:!0,value:"中国"})),a.a.createElement(Re,Ee({label:"所在地区"},e),l("provinceCity")(a.a.createElement(ve.a,{options:o,placeholder:"请选择所在地区",loadData:this.loadData,onChange:this.handleChange,changeOnSelect:!0}))),a.a.createElement(Re,Ee({label:"联系地址"},e),l("contactAddr")(a.a.createElement(i.a,{placeholder:"请输入联系地址",maxLength:60}))),a.a.createElement(Re,Ee({label:"联系人"},e),l("contactPerson")(a.a.createElement(i.a,{placeholder:"请输入联系人",maxLength:20}))),a.a.createElement(Re,Ee({label:"联系电话"},e),l("contactPhone")(a.a.createElement(i.a,{placeholder:"请输入联系电话",maxLength:20}))),a.a.createElement(Re,{style:{textAlign:"center"}},a.a.createElement(c.a,{type:"primary",className:"btn-ok",onClick:this.handleSave},"确定"),a.a.createElement(c.a,{type:"default",className:"btn-cancel",onClick:this.handleBack},"取消")))))}}])&&ke(t.prototype,n),r&&ke(t,r),l}(a.a.Component),Ne=Object(p.b)((function(e){return{accountDetail:e.getIn(["accountManage","accountDetail"]).toJS(),province:e.getIn(["accountManage","province"]).toJS(),city:e.getIn(["accountManage","city"]).toJS()}}),(function(e){return{getAccountDetail:function(t){return e(b.a.getAccountDetail(t))},getProvince:function(){return e(b.a.getProvince())},getCityByProvinceId:function(t){return e(b.a.getCityByProvinceId(t))},updateAccount:function(t){return e(b.a.updateAccount(t))},modifyAccount:function(t){return e(b.a.modifyAccount(t))}}}))(s.a.create({mapPropsToFields:function(e){return e.accountDetail?{mobilePhone:s.a.createFormField({value:e.accountDetail.mobilePhone}),email:s.a.createFormField({value:e.accountDetail.email}),contactAddr:s.a.createFormField({value:e.accountDetail.contactAddr}),contactPerson:s.a.createFormField({value:e.accountDetail.contactPerson}),contactPhone:s.a.createFormField({value:e.accountDetail.contactPhone}),provinceCity:s.a.createFormField({value:[+e.accountDetail.province,+e.accountDetail.city]})}:{}},onFieldsChange:function(e,t,n){for(var r in t)if("provinceCity"!==r)e.modifyAccount(je({},r,t[r].value));else{var a=Se(t[r].value,2),o=a[0],c=a[1];e.modifyAccount({province:o,city:c})}}})(Object(o.g)(xe)));n(1456),t.default=function(e){var t=e.match;return a.a.createElement(o.d,null,a.a.createElement(o.b,{exact:!0,path:"".concat(t.url,"/list"),component:C}),a.a.createElement(o.b,{exact:!0,path:"".concat(t.url,"/edit/:id"),component:Ne}),a.a.createElement(o.b,{exact:!0,path:"".concat(t.url,"/:id"),component:he}),a.a.createElement(o.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1503:function(e,t,n){"use strict";n.r(t);n(97),n(256);var r=n(0),a=n.n(r),o=n(58),c=(n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32),n(98),n(39)),i=(n(137),n(68)),l=(n(197),n(76)),u=(n(255),n(128)),s=(n(143),n(47)),f=(n(222),n(83)),p=(n(75),n(20)),y=(n(155),n(40)),m=(n(116),n(65),n(42)),d=n(478),b=n(106),h=n(1418),v=n(1420);n(1457);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var a=I(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=[{id:1,text:"设备id"},{id:2,text:"物理地址"},{id:3,text:"设备分类"}],C=y.a.Item,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(m,e);var t,n,r,o=j(m);function m(){var e;E(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={type:null,param:null,labelKey:null,labelValue:null,loading:!1,query:{}},e.column=[{title:"设备ID",dataIndex:"deviceUniqueId",key:"deviceUniqueId",width:"140px"},{title:"物理地址",dataIndex:"deviceMac",key:"deviceMac",width:"140px"},{title:"产品",dataIndex:"productName",key:"productName",width:"20%"},{title:"所属分类",dataIndex:"productType",key:"productType",width:"30%"},{title:"类型",dataIndex:"productClass",key:"productClass",render:function(e){return a.a.createElement("span",null,0==e||1==e?"普通设备":"--")},width:"12%"},{title:"操作",dataIndex:"deviceId",key:"operation",width:"12%",render:function(t,n){return a.a.createElement("span",null,a.a.createElement(f.a,{placement:"top",title:"查看"},a.a.createElement(p.a,{shape:"circle",size:"small",icon:"info",key:0,onClick:e.handleDetail.bind(P(e),t)})),"  |  ",a.a.createElement(f.a,{placement:"top",title:"删除"},a.a.createElement(p.a,{shape:"circle",size:"small",icon:"delete",key:0,onClick:e.delete.bind(P(e),n.deviceUniqueId)})))}}],e.handleDetail=function(t){e.props.history.push("./".concat(t))},e.notification=function(e,t){s.a.open({message:e||"提示",description:t||""})},e.onFilter=function(t){t.preventDefault();var n=e.props.form;n.deviceVersionTypeList;(0,n.validateFieldsAndScroll)((function(t,n){var r=n.type,a=n.param,o=n.labelKey,c=n.labelValue;return!r&&a?(e.notification("","请选择查询条件！"),!1):!o&&c?(e.notification("","请输入key值！"),!1):void e.props.onFilter()}))},e.delete=function(t){var n=P(e),r=n.state.pageIndex||1;r=n.props.pager.totalRows%(10*(r-1))>1?r:r-1,u.a.confirm({title:"提示",content:"删除设备后，将会同步删除设备绑定信息是否确认删除？",onOk:function(){n.props.equipmentDelete({deviceUniqueId:t}).then((function(e){e&&0==e.code&&n.props.onFilter()}))}})},e}return t=m,(n=[{key:"render",value:function(){var e=this.state,t=(e.param,e.labelKey,e.labelValue,e.type,e.loading),n=this.props,r=n.equipmentList,o=n.pager,u=n.form.getFieldDecorator;return a.a.createElement("div",{className:"equipment_list"},a.a.createElement(h.a,{title:"设备管理"},a.a.createElement(y.a,{layout:"inline"},a.a.createElement(C,null,u("type")(a.a.createElement(l.a,{style:{width:160},placeholder:"请选择查询条件"},k.map((function(e,t){return a.a.createElement(l.a.Option,{key:e.text+t,value:e.id},e.text)}))))),a.a.createElement(C,null,u("param")(a.a.createElement(i.a,{style:{width:160},maxLength:20,placeholder:"请输入查询条件"}))),a.a.createElement(C,{label:"设备标签"},u("labelKey")(a.a.createElement(i.a,{style:{width:160},maxLength:20,placeholder:"请输入标签Key"}))),a.a.createElement(C,null,u("labelValue")(a.a.createElement(i.a,{style:{width:160},maxLength:20,placeholder:"请输入标签Value"}))),a.a.createElement(C,null,a.a.createElement(p.a,{className:"modelSearch",type:"primary",htmlType:"submit",onClick:this.onFilter},"查询")),a.a.createElement(C,null,a.a.createElement(p.a,{className:"modelSearch",type:"primary",onClick:this.props.onReset},"重置")))),a.a.createElement("div",{className:"account-content"},a.a.createElement(c.a,null,a.a.createElement(b.a,{rowKey:"equipmentId",columns:this.column,dataSource:r,pager:o,onPageChange:this.props.onChange,loading:t}))))}}])&&O(t.prototype,n),r&&O(t,r),m}(r.Component),T=Object(m.b)((function(e){return{equipmentList:e.getIn(["equipment","equipmentList"]).toJS(),pager:e.getIn(["equipment","pager"]).toJS()}}),(function(e){return{getList:function(t){return e(d.a.getEquipmentListFunc(t))},equipmentDelete:function(t){return e(d.a.equipmentDeleteFunc(t))}}}))(y.a.create()(Object(v.a)(_))),D=(n(298),n(117)),R=(n(1392),n(1393)),x=(n(169),n(168),n(7)),N=(n(361),n(258),n(30));n(1458);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var a=V(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(c,e);var t,n,r,o=B(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).portInfoEdit=function(){return t.props.portInfo.split(",").map((function(e,t){return e.split("-")[1]}))},t.dataBackfill=function(){t.setState({portList:t.portInfoEdit()})},t.portInput=function(e,n){var r=t.state.portList;r[e]=n.target.value,t.setState({portList:r})},t.state={portList:t.portInfoEdit()||[]},t}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"render",value:function(){for(var e=this.props.portNum,t=this.state.portList,n=[],r=0;r<e;r++)n.push(a.a.createElement("div",{className:"port-box",key:r},a.a.createElement("span",{className:"title"},"端口",r+1,":"),a.a.createElement(i.a,{value:t[r],className:"input",onChange:this.portInput.bind(this,r)})));return a.a.createElement("div",{className:"editport"},n.length>0?n:a.a.createElement("p",{style:{textAlign:"center"}},"暂无数据"))}}])&&A(t.prototype,n),r&&A(t,r),c}(r.Component),U=(n(1386),n(1387));n(221),n(1459);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W(this,n)}}function W(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=l.a.Option,Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(c,e);var t,n,r,o=H(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).siteInfoList=function(e){var n=t.props,r=n.editState,o=n.deviceSiteId,c=r?"":o&&o.split("-")||[];return e.map((function(e,n){var r=c.length>0?c[n]:"请选择";return a.a.createElement("div",{key:"标题"+n,className:"site-box"},a.a.createElement("span",{className:"title"},e.summary&&e.summary.summary||"",":"),a.a.createElement(l.a,{className:"select",defaultValue:r},e.elements.map((function(e,r){return a.a.createElement($,{key:"位置模型"+e.elementId,value:e.elementId,onClick:t.props.selectSite.bind(G(t),e.elementId,n)},e.elementName)}))))}))},t.state={},t}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"render",value:function(){var e=this.props,t=e.siteList,n=e.siteInfoList,r=e.siteModelId,o=r||"请选择",c=this.siteInfoList(n);return a.a.createElement("div",{className:"siteData"},a.a.createElement("div",{className:"site-box"},a.a.createElement("span",{className:"title"},"位置模型:"),a.a.createElement(l.a,{className:"select",value:o,onChange:this.props.getSite},t.map((function(e,t){return a.a.createElement($,{key:"位置模型"+e.id,value:e.id},e.name)})))),a.a.createElement(U.a,null),c)}}])&&J(t.prototype,n),r&&J(t,r),c}(r.Component);n(1460);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var a=ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return re(this,n)}}function re(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(c,e);var t,n,r,o=ne(c);function c(){var e;X(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={portVisible:!1,modelId:"",siteVisible:!1,siteInfoList:[],positionIds:[],editState:!1},e.copyText=function(e){Object(N.g)(e)},e.handleOk=function(){for(var t=e.editPort.state.portList,n=e.props.deviceInfoData,r=n.deviceId,a=n.productId,o=[],c=0;c<t.length;c++){var i={deviceId:r,productId:a,deviceName:t[c],devicePortId:"端口"+(c+1)};o.push(i)}e.props.setPort({json:JSON.stringify(o)}).then((function(t){0==t.code&&(e.setState({portVisible:!1}),e.props.getEquipmentInfo({deviceId:r}).then((function(){})))}))},e.handleCancel=function(){e.setState({portVisible:!1},(function(){e.editPort.dataBackfill()}))},e.editPortModal=function(){e.props.deviceInfoData.bindTime?e.setState({portVisible:!0}):e.notification("暂无绑定设备，无法修改！")},e.notification=function(e){s.a.open({message:e,duration:4,icon:a.a.createElement(x.a,{type:"smile",rotate:180,style:{color:"#ea4d2e"}})})},e.siteHandleOk=function(){var t=e.props.deviceInfoData.deviceId,n=e.state,r=n.positionIds,a=n.modelId;r=r.join("-"),a?r?e.props.setSite({deviceId:t,positionIds:r}).then((function(n){0==n.code&&(e.props.getEquipmentInfo({deviceId:t}).then((function(){})),e.setState({siteVisible:!1}))})):e.notification("请选择位置模型下的位置信息！"):e.notification("请选择位置模型！")},e.siteHandleCancel=function(){e.setState({siteVisible:!1,modelId:"",positionIds:[],editState:!1})},e.editSiteModal=function(){if(e.props.deviceInfoData.bindTime){var t=e.props.deviceInfoData.siteModelId;t&&e.getSite(t,!1,!0),e.setState({siteVisible:!0})}else e.notification("暂无绑定设备，无法修改！")},e.getSite=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;e.setState({modelId:t,siteInfoList:[],positionIds:[],editState:n},(function(){e.props.getSite({modelId:t}).then((function(t){if(0==t.code){var n=e.state.siteInfoList;n.push(t.data[0]),e.setState({siteInfoList:n},(function(){if(r){var t=e.props.deviceInfoData.deviceSiteId,n=t&&t.split("-")||[];if(n.length>0)for(var a=0;a<n.length;a++)e.selectSite(n[a],a)}}))}}))}))},e.selectSite=function(t,n){var r=e.state,a=r.siteInfoList,o=r.modelId,c=r.positionIds,i=e.props.deviceInfoData.siteModelId;c[n]=t,e.setState({positionIds:c},(function(){e.props.getSite({modelId:o||i,elementId:t}).then((function(t){0==t.code&&(t.data.length>0&&(a[a.length-1].elements.length<1?a[a.length-1]=t.data.length>0?t.data[0]:{summary:{},elements:[]}:a.push(t.data.length>0?t.data[0]:{summary:{},elements:[]})),e.setState({siteInfoList:a}))}))}))},e}return t=c,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.deviceInfoData,n=t.productName,r=t.productId,o=t.productType,c=(t.productClass,t.productCode),i=t.deviceKey,l=t.deviceUniqueId,s=t.deviceSecret,p=t.deviceMac,y=t.activeTime,m=t.moduleVersion,d=t.gateWay,b=t.deviceName,h=t.bindUser,v=t.pcbVersion,g=t.bindTime,E=t.appReal,O=t.portInfo,w=t.portNum,j=t.deviceSite,S=t.deviceSiteId,P=t.siteModelId,I=this.state,k=I.portVisible,C=I.siteVisible,_=I.siteInfoList,T=I.modelId,D=I.editState;return P=T||P,a.a.createElement("div",{className:"equipmentDetailInfo"},a.a.createElement("div",{className:"tableTitle"},"产品基础属性"),a.a.createElement("table",{className:"table",cellSpacing:"0"},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{width:"10%",className:"gray"},"产品名称"),a.a.createElement("td",{width:"15%"},n||"--"),a.a.createElement("td",{width:"10%",className:"gray"},"产品ID"),a.a.createElement("td",{width:"15%"},r||"--"),a.a.createElement("td",{width:"10%",className:"gray"},"所属分类"),a.a.createElement("td",{width:"15%"},a.a.createElement(f.a,{placement:"top",title:o},o||"--"))),a.a.createElement("tr",null,a.a.createElement("td",{className:"gray"},"类型"),a.a.createElement("td",null,"普通设备"),a.a.createElement("td",{className:"gray"},"产品编码"),a.a.createElement("td",null,c||"--"),a.a.createElement("td",{className:"gray"},"产品密钥"),a.a.createElement("td",null,a.a.createElement(f.a,{placement:"top",title:i},i||"--"))))),a.a.createElement("div",{className:"tableTitle"},"设备基础属性"),a.a.createElement("table",{className:"table",cellSpacing:"0"},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{width:"10%",className:"gray"},"设备编码"),a.a.createElement("td",{width:"15%"},l||"--"),a.a.createElement("td",{width:"10%",className:"gray"},"设备密钥"),a.a.createElement("td",{width:"15%"},a.a.createElement(f.a,{placement:"top",title:s},s||"--",a.a.createElement("span",{className:"copy",onClick:this.copyText.bind(this,s)},"复制"))),a.a.createElement("td",{width:"10%",className:"gray"},"物理地址"),a.a.createElement("td",{width:"15%"},p||"--")),a.a.createElement("tr",null,a.a.createElement("td",{className:"gray"},"入网时间"),a.a.createElement("td",null,N.b.utcToDev(y)||"--"),a.a.createElement("td",{className:"gray"},"模组固件版本"),a.a.createElement("td",null,m||"--"),a.a.createElement("td",{className:"gray"},"绑定网关"),a.a.createElement("td",null,d||"--")),a.a.createElement("tr",null,a.a.createElement("td",{className:"gray"},"MCU固件版本"),a.a.createElement("td",null,v||"--"),a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null)))),a.a.createElement("div",{className:"tableTitle"},"应用属性"),a.a.createElement("table",{className:"table",cellSpacing:"0"},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{width:"20%",className:"gray"},"绑定C端账户"),a.a.createElement("td",null,h||"--"),a.a.createElement("td",{width:"20%",className:"gray"},"绑定时间"),a.a.createElement("td",{width:"30%"},g&&N.b.utcToDev(g)||"--")),a.a.createElement("tr",null,a.a.createElement("td",{className:"gray"},"设备昵称"),a.a.createElement("td",{width:"30%"},b||"--"),a.a.createElement("td",{className:"gray"},"位置数据"),a.a.createElement("td",null,j||"--",a.a.createElement(f.a,{placement:"topRight",title:"编辑位置数据"},a.a.createElement("span",{className:"edit",onClick:this.editSiteModal},"...")))),a.a.createElement("tr",null,a.a.createElement("td",{className:"gray"},"关联应用"),a.a.createElement("td",null,a.a.createElement("span",{title:E||""},E||"--")),a.a.createElement("td",{className:"gray"},"端口信息"),a.a.createElement("td",null,O||"--",a.a.createElement(f.a,{placement:"topRight",title:"编辑端口信息"},a.a.createElement("span",{className:"edit",onClick:this.editPortModal},"...")))))),a.a.createElement(u.a,{title:"设备位置数据",visible:C,onOk:this.siteHandleOk,onCancel:this.siteHandleCancel},a.a.createElement(Z,{siteList:this.props.siteList,editState:D,siteInfoList:_,onRef:function(t){return e.editAffirm=t},getSite:this.getSite,selectSite:this.selectSite,siteModelId:P,deviceSiteId:S})),a.a.createElement(u.a,{title:"设备端口信息",visible:k,onOk:this.handleOk,onCancel:this.handleCancel},a.a.createElement(q,{portInfo:O,portNum:w,onRef:function(t){return e.editPort=t}})))}}])&&ee(t.prototype,n),r&&ee(t,r),c}(r.Component),ce=Object(m.b)((function(e){return{}}),(function(e){return{setPort:function(t){return e(d.a.setPortFunc(t))},getEquipmentInfo:function(t){return e(d.a.getEquipmentInfoFunc(t))},getSite:function(t){return e(d.a.getSiteFunc(t))},setSite:function(t){return e(d.a.setSiteFunc(t))}}}))(oe),ie=(n(257),n(198),n(362),n(199)),le=(n(1384),n(1385));n(366),n(1461);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ve(e);if(t){var a=ve(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return be(this,n)}}function be(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return he(e)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(l,e);var t,n,r,o=de(l);function l(){var e;pe(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={editKey:"",editValue:"",loading:!1},e.columns=[{title:"标签Key-描述",key:"labelKey",dataIndex:"labelKey",width:"30%",render:function(t,n,r){return n.edit?a.a.createElement(i.a,{placeholder:"请输入标签Key,20字符以内",maxLength:20,value:n.labelKey,onChange:e.changeTag.bind(he(e),2,r)}):a.a.createElement("span",null,n.labelKey)}},{title:"标签Value-描述",key:"labelValue",dataIndex:"labelValue",width:"30%",render:function(t,n,r){return n.edit?a.a.createElement(i.a,{placeholder:"请输入标签value,20字符以内",maxLength:20,value:n.labelValue,onChange:e.changeTag.bind(he(e),3,r)}):a.a.createElement("span",null,n.labelValue)}},{title:"标签类型",key:"labelCategory",dataIndex:"labelCategory",width:"30%",render:function(e){return a.a.createElement("span",null,0==e?"用户定义":1==e?"系统默认":2==e?"后台定义":"")}}],e.columns0=[].concat(se(e.columns),[{title:"",key:"action",width:"10%",render:function(){return a.a.createElement("span",null)}}]),e.columns1=[].concat(se(e.columns),[{title:"操作",key:"action",width:"10%",render:function(t,n,r){return 2==n.labelCategory?n.edit?a.a.createElement("span",null,a.a.createElement(f.a,{placement:"top",title:"保存"},n.add?a.a.createElement(x.a,{className:"icon",type:"check-circle",theme:"twoTone",onClick:e.changeTag.bind(he(e),8,r)}):a.a.createElement(x.a,{className:"icon",type:"check-circle",theme:"twoTone",onClick:e.changeTag.bind(he(e),6,r)})),a.a.createElement(le.a,{title:"你确定要取消编辑该标签吗？",onConfirm:e.changeTag.bind(he(e),n.add?7:4,r),okText:"是",cancelText:"否",placement:"topRight"},a.a.createElement(f.a,{placement:"top",title:"取消"},(n.add,a.a.createElement(x.a,{className:"icon",type:"close-circle",theme:"twoTone"}))))):a.a.createElement("span",null,a.a.createElement(f.a,{placement:"top",title:"编辑"},a.a.createElement(x.a,{className:"icon",type:"edit",theme:"twoTone",onClick:e.changeTag.bind(he(e),1,r)})),a.a.createElement(f.a,{placement:"top",title:"删除"},a.a.createElement(le.a,{title:"你确定要删除该标签吗？",onConfirm:e.changeTag.bind(he(e),5,r),okText:"是",cancelText:"否",placement:"topRight"},a.a.createElement(x.a,{className:"icon",type:"delete",theme:"twoTone"})))):null}}]),e.onChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n={deviceId:e.props.deviceId,pageRows:10,pageIndex:t};e.setState({loading:!0},(function(){e.props.getEquipmentLabelList(n).then((function(){e.setState({loading:!1})}))}))},e.addLable=function(){var t=e.props.labelList;t.push({edit:!0,labelCategory:2,add:!0}),e.props.setEquipmentLabelList(t)},e}return t=l,(n=[{key:"componentDidMount",value:function(){this.onChange();var e={deviceId:this.props.deviceId,pageRows:10,pageIndex:1,defaultLabel:1};this.props.getEquipmentDefaultLabel(e)}},{key:"changeTag",value:function(e,t,n){var r=this,a=this.props.deviceId,o=this.state,c=o.editKey,i=o.editValue,l=this.props.labelList,u=l[t];1==e?(u.edit=!0,this.setState({editKey:u.labelKey,editValue:u.labelValue})):2==e?(u.labelKey=n.target.value,this.props.setEquipmentLabelList(l)):3==e?(u.labelValue=n.target.value,this.props.setEquipmentLabelList(l)):4==e?(u.labelKey=c,u.labelValue=i,u.edit=!1,this.props.setEquipmentLabelList(l)):5==e?this.props.equipmentLabelDelete({labelId:u.id}).then((function(){var e=r.props.labelPager,t=e.totalRows,n=e.pageIndex;n=t%(10*(n-1))>1?n:n-1,r.onChange(n)})):6==e?this.props.equipmentLabelUpdate({labelId:u.id,labelKey:u.labelKey,labelValue:u.labelValue}).then((function(){r.onChange(r.props.labelPager.pageIndex)})):7==e?(l.splice(t,1),this.props.setEquipmentLabelList(l)):8==e&&this.props.equipmentLabelAdd({deviceId:a,labelKey:u.labelKey,labelValue:u.labelValue}).then((function(e){e&&r.onChange()}))}},{key:"render",value:function(){var e=this.state.loading,t=this.props,n=t.labelList,r=t.labelPager,o=t.defaultLabel;return a.a.createElement("div",{className:"equipmentDetailTag"},a.a.createElement(c.a,null,a.a.createElement("h3",null,"默认设备标签："),a.a.createElement(ie.a,{columns:this.columns0,dataSource:o,rowKey:"labelKey",bordered:!0,pagination:!1}),a.a.createElement("h3",{className:"table-com"},"自定义设备标签："),a.a.createElement(b.a,{columns:this.columns1,dataSource:n,rowKey:"id",pager:r,onPageChange:this.onChange,loading:e}),a.a.createElement(p.a,{className:"plusLable",type:"primary",icon:"plus",onClick:this.addLable},"添加标签")))}}])&&ye(t.prototype,n),r&&ye(t,r),l}(r.Component),Ee=Object(m.b)((function(e){return{defaultLabel:e.getIn(["equipment","defaultLabel"]).toJS(),labelList:e.getIn(["equipment","labelList"]).toJS(),labelPager:e.getIn(["equipment","labelPager"]).toJS()}}),(function(e){return{getEquipmentLabelList:function(t){return e(d.a.getEquipmentLabelListFunc(t))},setEquipmentLabelList:function(t){return e(d.a.setEquipmentLabelList(t))},equipmentLabelAdd:function(t){return e(d.a.equipmentLabelAddFunc(t))},equipmentLabelDelete:function(t){return e(d.a.equipmentLabelDeleteFunc(t))},equipmentLabelUpdate:function(t){return e(d.a.equipmentLabelUpdateFunc(t))},getEquipmentDefaultLabel:function(t){return e(d.a.getEquipmentDefaultLabel(t))}}}))(ge);n(1462);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke(e);if(t){var a=ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(i,e);var t,n,r,o=Pe(i);function i(){var e;we(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={steps:Object(N.k)("step")||"1",siteList:[]},e.callback=function(t){e.props.history.replace({search:"?step=".concat(t)}),e.setState({steps:t})},e.remove=function(){e.props.getSiteModel().then((function(t){0==t.code&&e.setState({siteList:t.data})}))},e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.deviceId;this.props.getEquipmentInfo({deviceId:t}).then((function(){e.props.getSiteModel().then((function(t){0==t.code&&e.setState({siteList:t.data})})),e.setState({loading:!1})}))}},{key:"copyText",value:function(e){Object(N.g)(e)}},{key:"render",value:function(){var e=this,t=this.props.match.params.deviceId,n=this.props.deviceInfoData;return a.a.createElement("div",{className:"equipmentDetail"},a.a.createElement(R.a,{title:"数据标签-详情"},a.a.createElement(p.a,{type:"primary",className:"btn-back",onClick:function(){return e.props.history.go(-1)}},"返回")),a.a.createElement(c.a,null,a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{width:"70px"},"设备ID："),a.a.createElement("td",{width:"120px"},n.deviceUniqueId),a.a.createElement("td",{width:"120px"},"物理地址："),a.a.createElement("td",{width:"250px"},n.deviceMac),a.a.createElement("td",{width:"90px"},"产品密钥："),a.a.createElement("td",{width:"300px"},n.deviceKey,a.a.createElement("span",{className:"copy",onClick:this.copyText.bind(this,n.deviceKey)},"复制"))),a.a.createElement("tr",null,a.a.createElement("td",null,"产品名："),a.a.createElement("td",{title:n.productName},n.productName),a.a.createElement("td",null,"所属分类："),a.a.createElement("td",{title:n.productType},n.productType),a.a.createElement("td",null,"产品编码："),a.a.createElement("td",null,n.productCode))))),a.a.createElement("br",null),a.a.createElement(c.a,null,a.a.createElement(D.a,{defaultActiveKey:this.state.steps,size:"large",onChange:function(t){return e.callback(t)}},a.a.createElement(D.a.TabPane,{tab:"基本信息",key:"1"},a.a.createElement(ce,{deviceInfoData:n,siteList:this.state.siteList,remove:this.remove})),a.a.createElement(D.a.TabPane,{tab:"设备标签",key:"2"},a.a.createElement(Ee,{deviceId:t})))))}}])&&je(t.prototype,n),r&&je(t,r),i}(r.Component),_e=Object(m.b)((function(e){return{deviceInfoData:e.getIn(["equipment","deviceInfoData"]).toJS()}}),(function(e){return{getEquipmentInfo:function(t){return e(d.a.getEquipmentInfoFunc(t))},getSiteModel:function(t){return e(d.a.getSiteModelFunc(t))}}}))(Ce);t.default=function(e){var t=e.match;return a.a.createElement(o.d,null,a.a.createElement(o.b,{path:"".concat(t.url,"/list"),component:T}),a.a.createElement(o.b,{path:"".concat(t.url,"/:deviceId"),component:_e}),a.a.createElement(o.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1509:function(e,t,n){"use strict";n.r(t);n(97),n(256);var r=n(0),a=n.n(r),o=n(58),c=(n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32),n(137),n(68)),i=(n(222),n(83)),l=(n(75),n(20)),u=(n(255),n(128)),s=(n(155),n(40)),f=(n(197),n(76)),p=(n(258),n(169),n(42)),y=n(1418),m=n(106),d=(n(257),n(198),n(221),n(167),n(168),n(7)),b=(n(143),n(47)),h=(n(116),n(65),n(34),n(475),n(300),n(171)),v=n(484);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var a=C(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=s.a.Item,T=f.a.Option,D=0,R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(i,e);var t,n,r,o=I(i);function i(){var e;j(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={keys:[0],type:1,isIpChecked:!1},e.handleOk=function(){var t=e.props,n=t.form,r=t.userDetail,a=t.developerInfo;n.validateFields((function(t,n){t||(n.userNameList&&(n.userNameList=n.userNameList.filter(Boolean).map((function(e){return e+"@"+a.developerId}))),n.userName&&(n.userName=n.userName+"@"+r.userName.split("@")[1]),n.isIpChecked||(n.ipWhiteList=null),delete n.isIpChecked,r.userId?(n.userId=r.userId,e.props.saveUser(n)):e.props.addUser(n))}))},e.handleClose=function(){e.props.triggerModal(!1)},e.handleAdd=function(){var t=e.state.keys;t.filter(Boolean).length>9?b.a.warning({duration:3,message:"一次最多添加十个用户"}):e.setState({keys:[].concat(O(t),[++D])})},e.handleDel=function(t){var n=e.state.keys;e.setState({keys:n.filter((function(e){return e!==t}))})},e.handleCheck=function(t){var n=e.props.form;t||n.setFieldsValue({ipWhiteList:[]})},e.checkIP=function(e,t,n){new RegExp(/^(?:(?:^|,)(?:[0-9]|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])(?:\.(?:[0-9]|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])){3})+$/).test(t)?t.split(",").length>10&&n("最多添加10个IP"):n('格式错误，多个IP地址以",(英文)"分割,最多10个IP');n()},e}return t=i,(n=[{key:"componentWillReceiveProps",value:function(e){e.visible&&!this.props.visible&&this.setState({keys:[0],type:1})}},{key:"componentDidMount",value:function(){this.props.getRoleList(),this.props.developerInfo.developerId||this.props.getDeveloperInfo()}},{key:"render",value:function(){var e=this,t=(this.state.type,this.props),n=t.visible,r=t.form,o=t.userDetail,i=t.roleList,l=t.developerInfo,p=r.getFieldDecorator,y={labelCol:{span:6},wrapperCol:{span:15}},m=r.getFieldValue("isIpChecked"),b=o.userId?a.a.createElement(_,E({label:"用户名"},y),p("userName",{rules:[{required:!0,message:"请输入用户名"},{pattern:/^\w{6,14}$/,message:"请输入6~14位大小写字母＋数字"}]})(a.a.createElement(c.a,{placeholder:"请输入6~14位大小写字母＋数字",maxLength:14,suffix:"@"+o.userName.split("@")[1]}))):a.a.createElement("div",null,this.state.keys.map((function(t,n){return a.a.createElement(_,{label:n<1?"用户名":"",labelCol:{span:6},wrapperCol:n<1?{span:15}:{offset:6,span:15},key:t},p("userNameList[".concat(t,"]"),{rules:[{required:!0,message:"请输入用户名"},{pattern:/^\w{6,14}$/,message:"请输入6~14位大小写字母＋数字"}]})(a.a.createElement(c.a,{maxLength:14,placeholder:"请输入6~14位大小写字母＋数字",suffix:"@"+l.developerId})),t?a.a.createElement(d.a,{type:"minus-circle",className:"btn-del",onClick:e.handleDel.bind(e,t)}):null)})),a.a.createElement(_,y,a.a.createElement("span",{className:"btn-add",onClick:this.handleAdd},"添加用户")));return a.a.createElement(u.a,{title:"创建用户",width:600,visible:n,onOk:this.handleOk,onCancel:this.handleClose,wrapClassName:"interface-modal"},a.a.createElement(s.a,null,b,a.a.createElement(_,E({label:"用户角色"},y),p("roleId",{rules:[{required:!0,message:"请选择而用户角色"}]})(a.a.createElement(f.a,{placeholder:"请选择用户角色",style:{width:240}},i.map((function(e){return a.a.createElement(T,{key:e.roleId,value:e.roleId},e.roleName)}))))),m?a.a.createElement(_,{wrapperCol:{offset:6,span:15}},p("ipWhiteList",{validateTrigger:"onChange",rules:[{validator:this.checkIP}]})(a.a.createElement(c.a.TextArea,{placeholder:'多个IP地址以",(英文)"分割,最多10个IP',style:{height:80}}))):null,a.a.createElement(_,E({label:"备注"},y),p("remark")(a.a.createElement(c.a.TextArea,{placeholder:"不超过100个字符",style:{height:100}})))))}}])&&S(t.prototype,n),r&&S(t,r),i}(a.a.Component),x=Object(p.b)((function(e){return{visible:e.getIn(["interfaceUser","visible"]),userDetail:e.getIn(["interfaceUser","userDetail"]).toJS(),roleList:e.getIn(["interfaceUser","roleList"]).toJS(),developerInfo:e.getIn(["interfaceUser","developerInfo"]).toJS()}}),(function(e){return Object(h.b)({getList:v.a.getList,triggerModal:v.a.triggerModal,getRoleList:v.a.getRoleList,addUser:v.a.addUser,saveUser:v.a.saveUser,getDeveloperInfo:v.a.getDeveloperInfo,setUserDetail:v.a.setUserDetail},e)}))(s.a.create({mapPropsToFields:function(e){return e.userDetail.userId?{userName:s.a.createFormField({value:e.userDetail.userName.split("@")[0]}),roleId:s.a.createFormField({value:e.userDetail.roleId}),ipWhiteList:s.a.createFormField({value:e.userDetail.ipWhiteList}),isIpChecked:s.a.createFormField({value:!!e.userDetail.ipWhiteList}),remark:s.a.createFormField({value:e.userDetail.remark})}:{}}})(R)),N=n(1420);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var a=q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=f.a.Option,K=s.a.Item,J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(p,e);var t,n,a,o=B(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=o.call(this,e)).handleDetail=function(e){t.props.history.push("./".concat(e))},t.handleDel=function(e){var n=V(t);u.a.confirm({title:"提示",content:"是否确认删除？",onOk:function(){n.props.delUser(e)}})},t}return t=p,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.userList,a=t.pager,o=t.form,u=t.loading,p=t.openModal,d=o.getFieldDecorator,b=[{title:"用户名",dataIndex:"userName",width:"12%",render:function(e){return r.createElement("span",null,e.split("@")[0])}},{title:"secretId",dataIndex:"secretId",width:"280px",render:function(e){return r.createElement("span",{title:e},e)}},{title:"所属客户ID",dataIndex:"parentId",width:"120px",render:function(e){return r.createElement("span",null,-1===e?"系统":e)}},{title:"账户角色",dataIndex:"roleName",width:"15%",render:function(e){return r.createElement("span",{title:e},e)}},{title:"账户备注",dataIndex:"remark",width:"18%",render:function(e){return r.createElement("span",{title:e},e)}},{title:"账户状态",dataIndex:"status",width:"100px",render:function(e){return r.createElement("span",null,1===e?"可用":"禁用")}},{title:"操作",width:"167px",render:function(t){return r.createElement("div",{className:"action"},-1===t.parentId?r.createElement("span",null,r.createElement(i.a,{placement:"top",title:"编辑"},r.createElement(l.a,{icon:"edit",shape:"circle",size:"small",onClick:p.bind(e,t)})),"  |  "):null,r.createElement(i.a,{placement:"top",title:"查看"},r.createElement(l.a,{icon:"info",shape:"circle",size:"small",onClick:e.handleDetail.bind(e,t.userId)})),-1===t.parentId?r.createElement("span",null,"  |  ",r.createElement(i.a,{placement:"top",title:"删除"},r.createElement(l.a,{icon:"delete",shape:"circle",size:"small",onClick:e.handleDel.bind(e,t.userId)}))):null)}}];return r.createElement("div",{className:"interface-user"},r.createElement(y.a,{title:"接口访问用户"},r.createElement(s.a,{layout:"inline"},r.createElement(K,{label:"用户名"},d("userName")(r.createElement(c.a,{placeholder:"请输入用户名",maxLength:20,style:{width:160},onPressEnter:this.props.onFilter}))),r.createElement(K,{label:"所属客户ID"},d("parentId",{getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(r.createElement(c.a,{placeholder:"请输入所属客户ID",maxLength:20,style:{width:160},onPressEnter:this.props.onFilter.bind(this)}))),r.createElement(K,{label:"账户状态"},d("status")(r.createElement(f.a,{style:{width:160},placeholder:"请选择状态"},r.createElement(U,{key:"undefined",value:""},"全部"),r.createElement(U,{key:"1",value:1},"可用"),r.createElement(U,{key:"0",value:0},"禁用")))),r.createElement(K,null,r.createElement(l.a,{type:"primary",onClick:this.props.onFilter},"查询")),r.createElement(K,null,r.createElement(l.a,{type:"primary",onClick:this.props.onReset},"重置")),r.createElement(K,{style:{float:"right"}},r.createElement(l.a,{type:"primary",onClick:p.bind(this,{})},"新建")))),r.createElement("div",{className:"interface-user-content"},r.createElement(m.a,{rowKey:"userId",columns:b,dataSource:n,pager:a,loading:u,onPageChange:this.props.onChange})),r.createElement(x,null))}}])&&A(t.prototype,n),a&&A(t,a),p}(r.Component),z=Object(p.b)((function(e){return{userList:e.getIn(["interfaceUser","userList"]).toJS(),pager:e.getIn(["interfaceUser","pager"]).toJS(),loading:e.getIn(["interfaceUser","loading"])}}),(function(e){return Object(h.b)({getList:v.a.getList,openModal:v.a.openModal,delUser:v.a.delUser},e)}))(s.a.create()(Object(N.a)(J))),H=(n(302),n(64)),W=(n(298),n(117)),G=(n(361),n(820),n(1425));function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var a=te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=W.a.TabPane,oe=function(e){var t=e.value,n=ne(Object(r.useState)(!1),2),o=n[0],c=n[1];return t?a.a.createElement("div",{className:"visible-string"},a.a.createElement("div",{style:{width:300}},o?t:t.slice(0,5)+Array(t.length-10).fill("*").join("")+t.slice(-5)),a.a.createElement("div",{onClick:function(){c(!o)},style:{cursor:"pointer",margin:"0 10px"}},o?a.a.createElement(d.a,{type:"eye",style:{color:"#1890ff"}}):a.a.createElement(d.a,{type:"eye-invisible"}))):a.a.createElement("div",null)},ce=function e(t){return t&&t.map((function(t){return{id:t.boxId,name:(t.boxName||t.groupName||"").split("#")[0],children:e(t.subBoxs)}}))},ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(i,e);var t,n,r,o=X(i);function i(){var e;$(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={loading:!1},e.handleBack=function(){e.props.history.go(-1)},e.handleEdit=function(){e.props.triggerModal(!0)},e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;this.props.getUserDetail(e),this.props.getRoleAuth(e)}},{key:"componentWillUnmount",value:function(){this.props.setUserDetail({})}},{key:"render",value:function(){var e=this.props,t=e.authList,n=e.target,r=e.userDetail,o=r.ipWhiteList,i=r.userName,u=r.roleName,s=r.remark,f=r.secretKey,p=r.secretId,m=r.regTime,d=r.modifyTime,b=t.filter((function(e){return"hideData"!==e.menuCode}));return a.a.createElement("div",{className:"interface-user"},a.a.createElement(y.a,{title:"用户详情"},a.a.createElement(l.a,{type:"primary",className:"interface-user-edit-btn",onClick:this.handleBack},"返回"),a.a.createElement(H.a,null,a.a.createElement(H.a.Item,{label:"用户名"},i),a.a.createElement(H.a.Item,{label:"账户类型"},"接口访问用户"),a.a.createElement(H.a.Item,{label:"用户角色"},u),a.a.createElement(H.a.Item,{label:"创建时间"},m),a.a.createElement(H.a.Item,{label:"修改时间"},d),a.a.createElement(H.a.Item,{label:"备注"},s))),a.a.createElement("div",{className:"interface-user-content"},a.a.createElement("h2",null,"用户SecretKey"),a.a.createElement("div",{className:"interface-user-secret"},a.a.createElement("div",{className:"secret-header"},"SecretId"),a.a.createElement("div",{className:"secret-header"},"SecretKey"),a.a.createElement("div",{className:"secret-header"},"创建时间"),a.a.createElement("div",null,p),a.a.createElement("div",null,a.a.createElement(oe,{value:f})),a.a.createElement("div",null,m))),a.a.createElement("div",{className:"interface-user-content"},a.a.createElement("h2",null,"IP白名单"),a.a.createElement(c.a.TextArea,{disabled:!0,value:o,style:{height:80}})),a.a.createElement("div",{className:"interface-user-content"},a.a.createElement("h2",null,"权限信息"),a.a.createElement("div",{className:"interface-user-auth"},b.length?a.a.createElement(W.a,null,b.map((function(e,t){return a.a.createElement(ae,{tab:e.menuName,key:e.menuCode},a.a.createElement(G.a,{dataSource:ce(e.checkBoxGroupList),target:n[t],isCheck:!1,isExpand:!0,key:t+""}))}))):null)))}}])&&Z(t.prototype,n),r&&Z(t,r),i}(a.a.Component),le=Object(p.b)((function(e){return{userDetail:e.getIn(["interfaceUser","userDetail"]).toJS(),authList:e.getIn(["interfaceUser","authList"]).toJS(),target:e.getIn(["interfaceUser","target"]).toJS()}}),(function(e){return Object(h.b)({getUserDetail:v.a.getUserDetail,getRoleAuth:v.a.getRoleAuth,openModal:v.a.openModal,triggerModal:v.a.triggerModal,setUserDetail:v.a.setUserDetail},e)}))(ie),ue=n(1421);n(1453),t.default=function(e){var t=e.match;return r.createElement(o.d,null,r.createElement(o.b,{exact:!0,path:"".concat(t.url,"/list"),component:z}),r.createElement(o.b,{exact:!0,path:"".concat(t.url,"/:userId"),component:Object(ue.a)(le)}),r.createElement(o.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1510:function(e,t,n){"use strict";n.r(t);n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32),n(75);var r=n(20),a=(n(1392),n(1393)),o=(n(467),n(173)),c=(n(468),n(110)),i=(n(143),n(47)),l=(n(821),n(367)),u=(n(65),n(0)),s=n.n(u),f=n(42),p=n(793),y=(n(5),n(167),n(34),n(43),n(33),n(44),n(155),n(40)),m=(n(137),n(68));n(35);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(o,e);var t,n,r,a=w(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).handleSubmit=function(e){e.preventDefault();var n=t.props.form.validateFieldsAndScroll,r=t.props.changeCurrent;n((function(e,t){e||r("next")}))},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return s.a.createElement("div",{className:"first-content"},s.a.createElement(y.a,g({},{labelCol:{span:3},wrapperCol:{span:21}},{className:"data-label-form"}),s.a.createElement(y.a.Item,{label:"标签类别名"},e("labelAlias",{rules:[{max:50,message:"最多可输入50个字符"}]})(s.a.createElement(m.a,{placeholder:"最多可输入50个字符",style:{width:"calc(35% - 24px)"}})),s.a.createElement("span",{className:"item"},"如：业务类")),s.a.createElement(y.a.Item,{label:"新增标签名称"},e("labelName",{rules:[{required:!0,message:"请输入新增标签名称"},{max:50,message:"最多可输入50个字符"}]})(s.a.createElement(m.a,{placeholder:"最多可输入50个字符",style:{width:"calc(35% - 24px)"}})),s.a.createElement("span",{className:"item"},"如：项目主体")),s.a.createElement(y.a.Item,{label:"对应value"},e("labelValue",{rules:[{required:!0,message:"请输入对对应value"},{max:30,message:"最多可输入30个字符"}]})(s.a.createElement(m.a,{placeholder:"最多30个字符",style:{width:"calc(35% - 24px)"}})),s.a.createElement("span",{className:"item"},"如：酒店名称，木棉花酒店"))))}}])&&E(t.prototype,n),r&&E(t,r),o}(u.Component),I=y.a.create({name:"dataLabel",onFieldsChange:function(e,t){"{}"!==JSON.stringify(t)&&e.changeFormData("labelForm",t)},mapPropsToFields:function(e){for(var t=e.labelForm,n={},r=0,a=Object.keys(t);r<a.length;r++){var o=a[r];n[o]=y.a.createFormField(h(h({},t[o]),{},{value:t[o].value}))}return n}})(P),k=(n(1382),n(1383)),C=(n(168),n(7));n(116),n(481);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var a=M(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(c,e);var t,n,a,o=F(c);function c(){var e;N(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleSubmit=function(t){t.preventDefault();var n=e.props.form.validateFieldsAndScroll,r=e.props.changeCurrent;n((function(e,t){e||r("next")}))},e.exportFormWorkExcel=function(){var e=window.location.host;e.startsWith("localhost")&&(e="200.200.200.50"),window.location.href="https://"+e+"/v1/web/manage-open/labelInfo/exportFormworkExcel"},e.onRemove=function(t){e.props.deleteFile(t)},e.beforeUpload=function(t){return e.props.addFile(t),!1},e}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.scopeForm;return s.a.createElement("div",{className:"second-content"},s.a.createElement(y.a,x({},{labelCol:{span:2},wrapperCol:{span:18}},{className:"data-scope-form"}),s.a.createElement(y.a.Item,{label:"设备导入"},e("deviceImport",{rules:[{required:!0,message:"请选择文件"}]})(s.a.createElement("div",null,s.a.createElement("a",{href:"javascript:",className:"download",onClick:this.exportFormWorkExcel},"下载模版"),s.a.createElement(k.a,{onRemove:this.onRemove,beforeUpload:this.beforeUpload,fileList:t.excelFiles,accept:".xls,.xlsx"},s.a.createElement(r.a,null,s.a.createElement(C.a,{type:"upload"}),"批量倒入")),s.a.createElement("span",null,"备注：导入列表设备MAC、IMEI列表数据，后台将赋予上一步定义的标签名称和标签值。")))),s.a.createElement(y.a.Item,{label:"批次名"},e("batch",{rules:[{required:!0,message:"请输入本次导入的设备列表，备注名称"}]})(s.a.createElement(m.a,{placeholder:"输入本次导入的设备列表，备注名称",style:{width:"calc(50%)"}}))),s.a.createElement(y.a.Item,{label:"账户名称"},e("accountName",{rules:[{required:!0,message:"请输入账户名称"}]})(s.a.createElement(m.a,{placeholder:"请输入账户名称",style:{width:"calc(50%)"}})),s.a.createElement("span",{style:{marginLeft:"10px"}},"请输入管理后台配置好的接口访问用户角色下账号"))))}}])&&L(t.prototype,n),a&&L(t,a),c}(s.a.Component),q=y.a.create({name:"dataScope",onFieldsChange:function(e,t){"{}"!==JSON.stringify(t)&&e.changeFormData("scopeForm",t)},mapPropsToFields:function(e){var t=e.scopeForm;return{deviceImport:y.a.createFormField(D(D({},t.deviceImport),{},{value:t.deviceImport.value})),batch:y.a.createFormField(D(D({},t.batch),{},{value:t.batch.value})),accountName:y.a.createFormField(D(D({},t.accountName),{},{value:t.accountName.value}))}}})(V),U=n(3),K=n(9);n(1455);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=l.a.Step,Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(p,e);var t,n,u,f=W(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=f.call(this,e)).next=function(e){var n=t.props.current;0===n?t.dataLabelForm.handleSubmit(e):1===n&&t.dataScopeForm.handleSubmit(e)},t.saveStaticLabel=function(){var e,n=t.props,r=n.labelForm,a=n.scopeForm;(e={labelAlias:r.labelAlias.value,labelName:r.labelName.value,labelValue:r.labelValue.value,deviceImport:a.excelFiles[0],batch:a.batch.value,accountName:a.accountName.value},U.b.request({url:"manage-open/labelInfo/saveStaticLabel",data:e,needFormData:!0,method:"post",loading:!0})).then((function(e){var n=e.data.code,r=e.data.msg,a=0===n?"success":"error";n===K.a?(i.a[a]({message:"数据标签保存成功",description:"数据标签保存成功",duration:3,onClick:function(){console.log("Notification Clicked!")}}),t.props.changeCurrent("submit"),t.props.clearFormData()):i.a[a]({message:n,description:r,duration:3,onClick:function(){console.log("Notification Clicked!")}})}))},t}return t=p,(n=[{key:"componentDidMount",value:function(){this.props.changeCurrent("submit"),this.props.clearFormData()}},{key:"_getCurStepContent",value:function(){var e=this,t=this.props,n=t.labelForm,r=t.scopeForm,a=t.addFile,i=t.deleteFile,l=t.changeCurrent,u=t.changeFormData;return[{title:"定义标签数据",content:s.a.createElement(I,{changeCurrent:l,onRef:function(t){return e.dataLabelForm=t},labelForm:n,changeFormData:u})},{title:"确定数据范围",content:s.a.createElement(q,{scopeForm:r,changeCurrent:l,onRef:function(t){return e.dataScopeForm=t},changeFormData:u,addFile:a,deleteFile:i})},{title:"提交计算处理",content:s.a.createElement("div",{className:"third-content"},s.a.createElement(o.a,{gutter:0,align:"middle"},s.a.createElement(c.a,{span:2},s.a.createElement("span",null,"标签列表：")),s.a.createElement(c.a,{span:8},s.a.createElement("div",{className:"label-name-column"},s.a.createElement("div",null,"标签名称"),s.a.createElement("div",null,n.labelName.value))),s.a.createElement(c.a,{span:8},s.a.createElement("div",{className:"label-value-column"},s.a.createElement("div",null,"标签值"),s.a.createElement("div",null,n.labelValue.value)))),s.a.createElement(o.a,{gutter:8,align:"middle"},s.a.createElement(c.a,{span:2}),s.a.createElement(c.a,{span:16,className:"remarks"},s.a.createElement("span",null,"备注：设备标签，必须包含标签名称和对应的标签值。"))),s.a.createElement(o.a,{gutter:8,align:"middle"},s.a.createElement(c.a,{span:2},s.a.createElement("span",null,"范围数据：")),s.a.createElement(c.a,null,s.a.createElement("span",null,r.batch.value))))}]}},{key:"render",value:function(){var e=this.props,t=e.changeCurrent,n=e.current,o=this._getCurStepContent();return s.a.createElement("div",{className:"data-label-page-wrapper"},s.a.createElement(a.a,{title:"数据标签--标签分析",className:"data-label-title",subTitle:"备注：暂时仅支持对设备，做标签标示。"}),s.a.createElement("div",{className:"data-label-content-wrapper"},s.a.createElement("div",{className:"step-wrapper"},s.a.createElement(l.a,{current:n},o.map((function(e){return s.a.createElement($,{key:e.title,title:e.title})}))),s.a.createElement("div",{className:"steps-content"},o[n].content),s.a.createElement("div",{className:"steps-action"},n>0&&s.a.createElement(r.a,{style:{marginRight:8},onClick:function(){return t("prev")}},"上一步"),n<o.length-1&&s.a.createElement(r.a,{type:"primary",onClick:this.next},"下一步"),n===o.length-1&&s.a.createElement(r.a,{type:"primary",onClick:this.saveStaticLabel},"提交")))))}}])&&z(t.prototype,n),u&&z(t,u),p}(u.Component);t.default=Object(f.b)((function(e){return{labelForm:e.getIn(["dataLabel","labelForm"]).toJS(),scopeForm:e.getIn(["dataLabel","scopeForm"]).toJS(),current:e.getIn(["dataLabel","current"])}}),(function(e){return{changeCurrent:function(t){var n=p.a.changeCurrent(t);e(n)},changeFormData:function(t,n){var r=p.a.changeFormData(t,n);e(r)},saveStaticLabel:function(t){var n=p.a.saveStaticLabel(t);e(n)},addFile:function(t){var n=p.a.addFile(t);e(n)},deleteFile:function(t){var n=p.a.deleteFile(t);e(n)},clearFormData:function(){var t=p.a.clearFormData();e(t)}}}))(Z)},1517:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return V}));n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32),n(198),n(221),n(257),n(34),n(43),n(44),n(75);var r=n(20),a=(n(155),n(40)),o=(n(137),n(68)),c=(n(197),n(76)),i=(n(1397),n(1394)),l=(n(116),n(33),n(35),n(0)),u=n.n(l),s=n(106),f=n(1418);n(1464);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,n,r,a=b(o);function o(){return y(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.children,r=e.style;return u.a.createElement("section",{style:r||{},className:"alone-section-wrapper"},t&&u.a.createElement("div",{className:"alone-section-title"},t),n)}}])&&m(t.prototype,n),r&&m(t,r),o}(l.Component),E=(n(4),n(1465),n(30)),O=n(3);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var a=L(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=i.a.RangePicker,F=c.a.Option,B=function(e){D(n,e);var t=x(n);function n(){var e;C(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={defaultDate:new Date},e.handleSubmit=function(t){t.preventDefault();var n=e.props,r=n.form,a=n.searchLog;r.validateFields((function(e,t){if(!e){var n=t.time,r=void 0===n?[]:n,o=t.userName,c=t.type,i=t.theme,l=I(r,2),u=l[0],s=void 0===u?"":u,f=l[1],p=void 0===f?"":f;s&&(s=1e3*(s.hour(0).minute(0).second(0).millisecond(0).unix()-28800)),p&&(p=1e3*(p.hour(0).minute(0).second(0).millisecond(0).unix()-28800)),a({userName:o,type:c,theme:i,startTime:s,endTime:p})}}))},e.reset=function(){e.props.form.resetFields()},e}return T(n,[{key:"render",value:function(){var e=this.props.form,t=(this.state.defaultDate,e.getFieldDecorator);return u.a.createElement(a.a,{layout:"inline",onSubmit:this.handleSubmit},u.a.createElement(a.a.Item,{label:"操作人"},t("userName",{rules:[],initialValue:""})(u.a.createElement(o.a,{style:{width:"200px"},placeholder:"请输入操作账号"}))),u.a.createElement(a.a.Item,{label:"操作分类"},t("type",{rules:[],initialValue:""})(u.a.createElement(c.a,{style:{width:"200px"}},u.a.createElement(F,{value:""},"请选择"),u.a.createElement(F,{value:"0"},"基本操作"),u.a.createElement(F,{value:"1"},"产品操作"),u.a.createElement(F,{value:"2"},"openApi"),u.a.createElement(F,{value:"3"},"数据订阅"),u.a.createElement(F,{value:"4"},"应用管理"),u.a.createElement(F,{value:"5"},"设备管理")))),u.a.createElement(a.a.Item,{label:"对象"},t("theme",{rules:[],initialValue:""})(u.a.createElement(o.a,{style:{width:"200px"},placeholder:"请输入操作对象"}))),u.a.createElement(a.a.Item,{label:"时间"},t("time",{rules:[]})(u.a.createElement(A,{format:"YYYY/MM/DD"}))),u.a.createElement(a.a.Item,{style:{float:"right"}},u.a.createElement(r.a,{style:{marginRight:"12px"},htmlType:"submit",type:"primary"},"查询"),u.a.createElement(r.a,{onClick:this.reset,type:"default"},"重置")))}}]),n}(l.Component),M=a.a.create({name:"search-form"})(B),V=function(e){D(n,e);var t=x(n);function n(e){var r;return C(this,n),(r=t.call(this,e)).state={loading:!1,logsList:[],pager:{},pageIndex:1,conditions:{userName:"",type:"",theme:"",startTime:"",endTime:""}},r.searchLog=function(e){r.setState({conditions:e,pageIndex:1},(function(){r.getLogsList()}))},r.changePage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r.setState({pageIndex:e,loading:!0},(function(){r.getLogsList()}))},r.columns=[{title:"Id",dataIndex:"logId",width:"80px"},{title:"操作人",dataIndex:"userName",width:"200px"},{title:"操作",dataIndex:"content",width:"200px",render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"对象",dataIndex:"theme",render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"时间",width:"200px",dataIndex:"createTime",render:function(e,t){var n=t.createTime;return u.a.createElement("span",null,E.b.utcToDev(+n))}}],r}return T(n,[{key:"componentDidMount",value:function(){this.getLogsList()}},{key:"getLogsList",value:function(){var e,t=this,n=this.state,r=n.conditions,a=n.pageIndex,o={};Object.keys(r).forEach((function(e){r[e]&&(o[e]=r[e])})),(e=S(S({},o),{},{pageIndex:a,pageRows:20,version:"1.1"}),O.b.Get("/manage-open/operate/log/getList",e)).then((function(e){var n=e.data.data||{},r=n.list,a=n.pager;t.setState({logsList:Object(E.f)(r),pager:a,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.logsList,n=e.pager,r=(e.pageIndex,e.loading);return u.a.createElement("div",null,u.a.createElement(g,{title:""},u.a.createElement("div",{className:"search-area"},u.a.createElement(f.a,{title:"日志"},u.a.createElement(M,{searchLog:this.searchLog}))),u.a.createElement("div",{className:"operate-content",style:{marginTop:"24px",padding:"12px 24px"}},u.a.createElement(s.a,{rowKey:"logId",columns:this.columns,pager:n,loading:r,onPageChange:this.changePage,dataSource:t}))))}}]),n}(l.Component)},1525:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32),n(137);var r=n(68),a=(n(197),n(76)),o=(n(222),n(83)),c=(n(75),n(20)),i=(n(255),n(128)),l=(n(48),n(0)),u=n.n(l),s=n(1418),f=n(106),p=(n(35),n(34),n(43),n(33),n(44),n(466),n(170)),y=(n(155),n(40)),m=(n(116),n(3));function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=y.a.Item,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(c,e);var t,n,a,o=w(c);function c(){var e;g(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleOk=function(){var t=e.props,n=t.form,r=(t.target,t.editData);n.validateFields((function(t,n){if(!t){var a=h({},n),o="manage-open/thing/label/add";r.labelId&&(a.labelId=r.labelId,o="manage-open/thing/label/update"),m.b.Post(o,a).then((function(t){console.log("---res",t),e.props.getLabelList(),e.props.handleCancel()}))}}))},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.form,a=e.editData,o=n.getFieldDecorator,c={labelCol:{span:6},wrapperCol:{span:14}};return u.a.createElement(i.a,{visible:t,width:700,title:a.labelId?"编辑标签":"新建标签",onCancel:this.props.handleCancel,onOk:this.handleOk,wrapClassName:"role-manage-modal"},u.a.createElement(y.a,c,u.a.createElement(P,{label:"标签类型"},o("labelType",{rules:[{required:!0,message:"请选择标签类型"}]})(u.a.createElement(p.a.Group,null,u.a.createElement(p.a,{value:0},"基础"),u.a.createElement(p.a,{value:1},"复合")))),u.a.createElement(P,{label:"标签名称"},o("labelName",{rules:[{required:!0,message:"请输入标签名称"}]})(u.a.createElement(r.a,{maxLength:20,placeholder:"请输入标签名称"}))),u.a.createElement(P,{label:"英文名"},o("labelNameEn",{rules:[{required:!0,message:"请输入英文名"}]})(u.a.createElement(r.a,{maxLength:20,placeholder:"请输入标签英文名"}))),u.a.createElement(P,{label:"备注"},o("remark",{})(u.a.createElement(r.a.TextArea,{rows:3,placeholder:"请输入标签备注",maxLength:200})))))}}])&&E(t.prototype,n),a&&E(t,a),c}(u.a.Component),k=y.a.create({mapPropsToFields:function(e){var t=e.editData;return{labelName:y.a.createFormField({value:t.labelName}),labelNameEn:y.a.createFormField({value:t.labelNameEn}),remark:y.a.createFormField({value:t.remark}),labelType:y.a.createFormField({value:t.labelType||0})}},onFieldsChange:function(e,t){}})(I);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var a=N(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=s.a.Option,A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(y,e);var t,n,u,p=D(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=p.call(this,e)).componentDidMount=function(){t.getLabelList()},t.getLabelList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=t.state,r=n.labelName,a=n.labelType,o={pageIndex:e,pageRows:10};r&&(o.labelName=r),null!==a&&(o.labelType=a),m.b.Get("/manage-open/thing/label/getList",o).then((function(e){var n=e.data&&e.data.data;t.setState({labelList:n.list,pager:n.pager})}))},t.handleChange=function(e){t.setState({labelName:e.target.value})},t.handleChangeType=function(e){t.setState({labelType:e})},t.handleReset=function(){t.setState({labelName:"",labelType:null},(function(){t.getLabelList(),t.refInpt.setState({value:""})}))},t.openModal=function(e){t.setState({visible:!0,editData:e})},t.handleDel=function(e){var n=x(t);i.a.confirm({title:"提示",content:"是否确认删除？",onOk:function(){console.log("确认删除"),m.b.Get("/manage-open/thing/label/delete",{labelId:e}).then((function(e){n.getLabelList()}))}})},t.handleCancel=function(){t.setState({visible:!1})},t.state={labelList:[],labelName:"",labelType:null,pager:{},visible:!1,editData:{labelType:0}},t.columns=[{title:"标签名称",dataIndex:"labelName"},{title:"英文名",dataIndex:"labelNameEn"},{title:"类型",dataIndex:"labelType",render:function(e){return{0:"基础",1:"复合"}[e]}},{title:"备注",dataIndex:"remark"},{title:"操作",width:"150px",render:function(e){return l.createElement("div",{className:"action"},l.createElement(o.a,{placement:"top",title:"编辑"},l.createElement(c.a,{icon:"edit",shape:"circle",size:"small",onClick:t.openModal.bind(x(t),e)})),"  |  ",l.createElement(o.a,{placement:"top",title:"删除"},l.createElement(c.a,{icon:"delete",shape:"circle",size:"small",onClick:t.handleDel.bind(x(t),e.labelId)})))}}],t}return t=y,(n=[{key:"render",value:function(){var e=this,t=this.state,n=t.labelList,o=t.visible,i=t.labelType,u=t.pager,p=t.editData;return l.createElement("div",{className:"role-manage"},l.createElement(s.a,{title:"物标签"},l.createElement(L,{label:"标签类型"},l.createElement(a.a,{style:{width:160},value:i,onChange:this.handleChangeType},l.createElement(a.a.Option,{value:0},"基础标签"),l.createElement(a.a.Option,{value:1},"复合标签"))),l.createElement(L,{label:"标签名称"},l.createElement(r.a,{style:{width:240},maxLength:20,name:"roleName",onChange:this.handleChange,onPressEnter:this.getLabelList.bind(this,1),ref:function(t){return e.refInpt=t},placeholder:"输入物标签名称"})),l.createElement(L,null,l.createElement(c.a,{type:"primary",onClick:this.getLabelList.bind(this,1)},"查询")),l.createElement(L,null,l.createElement(c.a,{type:"primary",onClick:this.handleReset},"重置")),l.createElement(L,{align:"right"},l.createElement(c.a,{type:"primary",onClick:this.openModal.bind(this,{})},"新建"))),l.createElement("div",{className:"role-content",style:{backgroundColor:"#fff"}},l.createElement(f.a,{rowKey:"labelId",columns:this.columns,dataSource:n,pager:u,onPageChange:this.getLabelList})),l.createElement(k,{visible:o,editData:p,handleCancel:this.handleCancel,getLabelList:this.getLabelList}))}}])&&_(t.prototype,n),u&&_(t,u),y}(l.Component)},1526:function(e,t,n){"use strict";n.r(t);n(97),n(256);var r=n(0),a=n.n(r),o=n(58),c=(n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(31),n(32),n(98),n(39)),i=(n(197),n(76)),l=(n(137),n(68)),u=(n(222),n(83)),s=(n(75),n(20)),f=(n(155),n(40)),p=(n(116),n(169),n(65),n(35),n(42)),y=n(186),m=n(106),d=n(30),b=n(1418),h=n(1420);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var a=P(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=f.a.Item,k={0:"开发中",1:"已发布",2:"审核中"},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(p,e);var t,n,r,o=w(p);function p(){var e;g(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={productId:void 0,status:void 0,query:{},loading:!1},e.handleClick=function(t){e.props.history.push("./".concat(t))},e.column=[{title:"产品名称",dataIndex:"productName",key:"productName",width:"20%",render:function(e){return a.a.createElement("span",{title:e},e)}},{title:"产品ID",dataIndex:"productId",key:"productId",width:"10%"},{title:"所属分类",dataIndex:"allCategoryName",key:"allCategoryName",width:"20%",render:function(e){return a.a.createElement("span",{title:e},e)}},{title:"状态",dataIndex:"mode",key:"mode",width:"102px",render:function(e){return a.a.createElement("span",null,k[e]||"")}},{title:"创建账号",dataIndex:"email",key:"email",width:"20%",render:function(e){return a.a.createElement("span",{title:e},e)}},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:"17%",render:function(e){var t=d.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return a.a.createElement("span",{title:t},t)}},{title:"操作",dataIndex:"productId",key:"operation",width:66,render:function(t){return a.a.createElement(u.a,{placement:"top",title:"查看"},a.a.createElement(s.a,{icon:"info",shape:"circle",size:"small",onClick:e.handleClick.bind(S(e),t)}))}}],e}return t=p,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=t.productList,r=t.pager,o=t.loading;return a.a.createElement("div",{className:"product"},a.a.createElement(b.a,{title:"产品"},a.a.createElement(f.a,{layout:"inline"},a.a.createElement(I,{label:"产品ID"},e("productId",{getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(a.a.createElement(l.a,{placeholder:"请输入产品ID",maxLength:9,style:{width:240},onPressEnter:this.props.onFilter}))),a.a.createElement(I,{label:"状态"},e("mode")(a.a.createElement(i.a,{style:{width:160},placeholder:"请选择状态"},Object.keys(k).map((function(e,t){return a.a.createElement(i.a.Option,{key:t,value:+e},k[e])}))))),a.a.createElement(I,null,a.a.createElement(s.a,{type:"primary",onClick:this.props.onFilter},"查询")),a.a.createElement(I,null,a.a.createElement(s.a,{onClick:this.props.onReset},"重置")))),a.a.createElement(c.a,null,a.a.createElement(m.a,{rowKey:"productId",columns:this.column,dataSource:n,pager:r,onPageChange:this.props.onChange,loading:o})))}}])&&E(t.prototype,n),r&&E(t,r),p}(r.Component),_=Object(p.b)((function(e){return{productList:e.getIn(["product","productList"]).toJS(),pager:e.getIn(["product","pager"]).toJS(),loading:e.getIn(["product","loading"])}}),(function(e){return{getList:function(t){return e(y.a.getProductList(t))}}}))(f.a.create()(Object(h.a)(C))),T=n(844),D=n(1421);n(1454),t.default=function(e){var t=e.match;return a.a.createElement(o.d,null,a.a.createElement(o.b,{path:"".concat(t.url,"/list"),component:_}),a.a.createElement(o.b,{path:"".concat(t.url,"/:productId"),component:Object(D.a)(T.a)}),a.a.createElement(o.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}}}]);