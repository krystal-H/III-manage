(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1357:function(e,t,a){"use strict";a(46),a(47),a(22),a(20),a(35),a(36),a(27),a(29),a(30);var n=a(0),r=a.n(n);a(1358);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,r.a.Component);var t,a,n,i=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var a,n=u(e);if(t()){var r=u(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return o(this,a)}}(s);function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.apply(this,arguments)}return t=s,(a=[{key:"render",value:function(){var e=this.props,t=e.children,a=e.title;return r.a.createElement("div",{className:"title-tab"},r.a.createElement("div",{className:"title-tab-option"},r.a.createElement("span",{className:"title-tab-title"},a)),r.a.createElement("div",{className:"title-tab-option"},t))}}])&&l(t.prototype,a),n&&l(t,n),s}();s.Option=function(e){var t=e.children,a=e.label,n=e.align,i=void 0===n?"left":n;return r.a.createElement("div",{className:"".concat("left"===i?"title-tab-item":"title-tab-item-right")},r.a.createElement("span",{className:a?"title-table-label":"title-table-label-non"},a?a+":":""),t)},t.a=s},1358:function(e,t,a){},1431:function(e,t,a){},1432:function(e,t,a){},1433:function(e,t,a){},1434:function(e,t,a){},1453:function(e,t,a){"use strict";a.r(t);a(96),a(243);var n=a(0),r=a.n(n),i=a(107),l=(a(92),a(37)),c=(a(153),a(38)),o=(a(133),a(66)),u=(a(279),a(154)),s=(a(210),a(81)),m=(a(73),a(21)),d=(a(242),a(120)),p=(a(188),a(74)),f=a(1325),y=a.n(f),g=(a(62),a(108),a(435),a(22),a(63),a(436),a(166),a(36),a(27),a(29),a(30),a(20),a(35),a(34),a(33),a(41),a(32),a(42),a(1357)),v=a(97),h=a(4),b=function(e){return h.c.request({url:"/expert/scene/condition/option/getPage",params:e,method:"get"})},E=function(e){return h.c.request({url:"/expert/scene/condition/option/addOrUpdate",data:e,method:"post",needFormData:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},I=function(e){return h.c.request({url:"/expert/scene/condition/option/delete",params:e,method:"get"})},O=function(e){return h.c.request({url:"/expert/scene/condition/option/getOneOption",params:e,method:"get"})},P=function(e){return h.c.request({url:"/expert/scene/condition/getPageList",params:e,method:"get"})},k=function(e){return h.c.request({url:"/expert/scene/condition/option/getList",params:e,method:"get"})},w=function(e){return h.c.request({url:"/expert/deviceType/unit/list",params:e,method:"get"})},q=function(e){return h.c.request({url:"/expert/scene/condition/addOrUpdate",data:e,method:"post",headers:{"Content-Type":"application/json"}})},N=function(e){return h.c.request({url:"/expert/scene/condition/getOneCondition",params:e,method:"get"})},C=function(e){return h.c.request({url:"/expert/scene/condition/delete",params:e,method:"get"})},x=function(e){return h.c.request({url:"/expert/combine/deviceType/list/v2.0",params:e,method:"get"})},T=function(e){return h.c.request({url:"/expert/deviceType/statusQuery/list",params:e,method:"get"})},j=function(e){return h.c.request({url:"/expert/deviceType/deviceFunction/list",params:e,method:"get"})},L=function(e){return h.c.request({url:"/expert/deviceType/deviceFunction/delete",params:e,method:"get"})},S=function(e){return h.c.request({url:"/expert/deviceType/statusQuery/delete",params:e,method:"get"})},V=function(e){return h.c.request({url:"/expert/scene/ai/getPageList/v2.0",params:e,method:"get"})},D=function(e){return h.c.request({url:"/expert/scene/ai/addOrUpdate/v2.0",data:e,method:"post",headers:{"Content-Type":"application/json"}})};a(1431);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var R=o.a.TextArea;var _=c.a.create()(function(e){var t=e.form,a=e.visible,i=e.handleOk,l=e.handleCancel,s=e.conditionTypeDetailData,m=void 0===s?{}:s,p=t.getFieldDecorator,f=B(Object(n.useState)(!1),2),y=f[0],g=f[1];return r.a.createElement(d.a,{title:"添加/编辑条件类型",width:800,visible:a,onOk:function(){t.validateFields(function(e,t){if(!e){g(!0);var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach(function(t){A(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t);Object.keys(m).length>0&&(a.conditionOptionId=m.conditionOptionId),E(a).then(function(e){0===e.data.code&&(u.a.success("提交成功"),i())}).finally(function(){return g(!1)})}})},onCancel:l,maskClosable:!1,confirmLoading:y,wrapClassName:"module-add-scheme"},r.a.createElement(c.a,{labelCol:{span:4},wrapperCol:{span:18},autoComplete:"off"},r.a.createElement(c.a.Item,{label:"条件类型名称"},p("conditionOptionName",{initialValue:m.conditionOptionName,rules:[{required:!0,message:"请输入条件类型名称",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入条件类型名称"}))),r.a.createElement(c.a.Item,{label:"备注"},p("comments",{initialValue:m.comments,rules:[{required:!0,message:"请输入备注",whitespace:!0}]})(r.a.createElement(R,{maxLength:100,autoSize:{minRows:5,maxRows:5}})))))}),Q=(a(1328),a(1329)),z=(a(167),a(10));a(1432);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var G=p.a.Option,H=[];var W=c.a.create()(function(e){var t=e.form,a=e.visible,i=e.handleOk,l=e.handleCancel,s=e.conditionDicDetailData,f=void 0===s?{}:s,g=e.dicConditionType,v=void 0===g?[]:g,h=e.unitList,b=void 0===h?[]:h,E=t.getFieldDecorator,I=t.getFieldValue,O=M(Object(n.useState)(!1),2),P=O[0],k=O[1],w=M(Object(n.useState)(""),2),N=w[0],C=w[1];Object(n.useEffect)(function(){Object.keys(f).length&&C(f.paramStyleId+"")},[Object.keys(f).length]),Object.keys(f).length&&"2"===N&&(H=-1!==f.queryParams[0].queryParamName.indexOf("[")?[]:y()(f.queryParams)),E("queryParams",{initialValue:H});var x=I("queryParams").map(function(e,a){return r.a.createElement("div",{className:"inline-form-item2",key:a},r.a.createElement(c.a.Item,{label:"名称",labelCol:{span:6}},E("configList[".concat(a,"].queryParamName"),{initialValue:e.queryParamName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入名称"}]})(r.a.createElement(o.a,{placeholder:"请输入名称"}))),Object.keys(f).length>0&&r.a.createElement(c.a.Item,{label:"",style:{display:"none"}},E("configList[".concat(a,"].queryParamId"),{initialValue:e.queryParamId})(r.a.createElement(o.a,{style:{display:"none"}}))),"    ",r.a.createElement(c.a.Item,{label:"数值",labelCol:{span:6}},E("configList[".concat(a,"].queryParamValue"),{initialValue:e.queryParamValue,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(o.a,{placeholder:"请输入数值"}))),r.a.createElement("div",{className:"delete-btn"},"  ",r.a.createElement(z.a,{key:a,type:"minus-circle-o",onClick:function(){return function(e){var a=I("queryParams"),n=I("configList");t.setFieldsValue({queryParams:a.filter(function(t,a){return a!==e}),configList:n.filter(function(t,a){return a!==e})})}(a)}}),"  (*非负整数)"))});return r.a.createElement(d.a,{title:"添加/编辑条件字典",width:800,visible:a,onOk:function(){t.validateFields(function(e,t){if(!e){k(!0),console.log("values",t,K(N));var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach(function(t){J(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t);"1"===N?(a.queryParams=[{queryParamName:t.rangArr1,queryParamValue:t.rangArr2}],delete a.rangArr1,delete a.rangArr2,Object.keys(f).length&&(a.queryParams[0].queryParamId=f.queryParams[0].queryParamId,a.statusQueryId=f.statusQueryId,a.conditionId=f.conditionId)):"2"===N&&(a.queryParams=y()(t.configList),delete a.configList,Object.keys(f).length>0&&(a.statusQueryId=f.statusQueryId,a.conditionId=f.conditionId,a.queryParams=a.queryParams.map(function(e){var t={};return e.queryParamId&&(t.queryParamId=e.queryParamId),t.queryParamName=e.queryParamName,t.queryParamValue=e.queryParamValue,t}))),console.log("add-data",a),q(a).then(function(e){0===e.data.code&&(u.a.success("提交成功"),i())}).finally(function(){return k(!1)})}})},onCancel:l,maskClosable:!1,confirmLoading:P,wrapClassName:"condition-dic-modal"},r.a.createElement(c.a,{labelCol:{span:4},wrapperCol:{span:18},autoComplete:"off"},r.a.createElement(c.a.Item,{label:"条件字典名称"},E("conditionName",{initialValue:f.conditionName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入条件字典名称",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入条件字典名称"}))),r.a.createElement(c.a.Item,{label:"条件类型"},E("conditionOptionId",{initialValue:f.conditionOptionId?f.conditionOptionId+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择条件类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择条件类型"},v&&v.map(function(e){return r.a.createElement(G,{key:e.conditionOptionId,value:e.conditionOptionId+""},e.conditionOptionName)})))),r.a.createElement(c.a.Item,{label:"变化频率"},E("frequency",{initialValue:f.frequency||0===f.frequency?f.frequency+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入变化频率",whitespace:!0}]})(r.a.createElement(Q.a,{min:0,placeholder:"请输入变化频率",style:{width:448}})),r.a.createElement("span",{className:"ant-form-text"},"小时(*非负整数)")),r.a.createElement(c.a.Item,{label:"参数单位"},E("unitId",{initialValue:f.unitId?f.unitId+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择参数单位",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择参数单位"},b&&b.map(function(e){return r.a.createElement(G,{key:e.unitId,value:e.unitId+""},e.unitName)})))),r.a.createElement(c.a.Item,{label:"条件字典key"},E("dataKey",{initialValue:f.dataKey,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入条件字典key",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入条件字典key"}))),r.a.createElement(c.a.Item,{label:"类型"},E("paramStyleId",{initialValue:f.paramStyleId?f.paramStyleId+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择类型",onChange:function(e){console.log("change"),C(e)}},r.a.createElement(G,{value:"1"},"范围"),r.a.createElement(G,{value:"2"},"枚举")))),"1"===N&&r.a.createElement("div",{className:"rang-style"},r.a.createElement(c.a.Item,{label:""},E("rangArr1",{initialValue:f.queryParams?Array.isArray(JSON.parse(f.queryParams[0].queryParamName))?JSON.parse(f.queryParams[0].queryParamName)[0]+"":f.queryParams[0].queryParamName:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(o.a,{style:{width:90,marginRight:10}}))),r.a.createElement("div",{className:"short-line"},"-"),r.a.createElement(c.a.Item,{label:""},E("rangArr2",{initialValue:f.queryParams?Array.isArray(JSON.parse(f.queryParams[0].queryParamName))?JSON.parse(f.queryParams[0].queryParamName)[1]+"":f.queryParams[0].queryParamName:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(o.a,{style:{width:90,marginRight:10}}))),r.a.createElement("div",{className:"tip"},"(*填写整数且后者大于前者)")),"2"===N&&r.a.createElement("div",null,r.a.createElement(c.a.Item,{label:"设置参数"},r.a.createElement(m.a,{type:"dashed",onClick:function(){return e=I("queryParams").concat({}),void t.setFieldsValue({queryParams:e});var e},style:{width:"100%"}},r.a.createElement(z.a,{type:"plus"})," 新  增")),x)))});a(1433);function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Y=d.a.confirm;var Z=function(e){var t=e.visible,a=e.handleOk,i=e.handleCancel,l=e.sceneProductDetail,o=void 0===l?{}:l,u=X(Object(n.useState)([]),2),s=u[0],m=u[1],p=X(Object(n.useState)([]),2),f=p[0],y=p[1];Object(n.useEffect)(function(){v(),g()},[]);var g=function(){j({deviceTypeId:o.deviceTypeId}).then(function(e){0===e.data.code&&m(e.data.data)})},v=function(){T({deviceTypeId:o.deviceTypeId}).then(function(e){0===e.data.code&&y(e.data.data)})},h=function(e,t){Y({content:"是否确定删除本条数据？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){"func"===t&&b(e),"status"===t&&E(e)},onCancel:function(){}})},b=function(e){L({deviceFunctionId:e.deviceFunctionId}).then(function(e){0===e.data.code&&g()})},E=function(e){S({statusQueryId:e.statusQueryId}).then(function(e){0===e.data.code&&v()})};return r.a.createElement(d.a,{title:"查看详情",width:800,visible:t,onOk:a,onCancel:i,maskClosable:!1,wrapClassName:"scene-porduct-modal"},r.a.createElement("div",{className:"scene-porduct-modal-it"},r.a.createElement("div",{className:"title",style:{paddingTop:0}},"基本属性"),r.a.createElement(c.a,{labelAlign:"left"},r.a.createElement(c.a.Item,{label:"设备大类"},2===o.level?o.parent.deviceTypeName:3===o.level?o.grand.deviceTypeName:""),r.a.createElement(c.a.Item,{label:"设备小类"},2===o.level?o.deviceTypeName:3===o.level?o.parent.deviceTypeName:""),r.a.createElement(c.a.Item,{label:"输入输出类型"},o.inoutType.inoutTypeName),r.a.createElement(c.a.Item,{label:"安全级别"},o.securityLevel.securityLevelName),r.a.createElement(c.a.Item,{label:"设备场景自定义"},1===o.customizable?"是":"否")),r.a.createElement("div",{className:"title"},"扩展功能"),r.a.createElement("div",{className:"func-box"},r.a.createElement("div",{className:"func-box-title"},"状态查询："),r.a.createElement("div",{className:"func-box-cont"},f&&f.map(function(e,t){return r.a.createElement("div",{key:e.statusQueryId},r.a.createElement("div",null,"功能",t+1,"：",e.statusQueryName),r.a.createElement("div",{className:"func-params"},r.a.createElement("div",{className:"func-params-title"},"功能参数:"),r.a.createElement("div",{className:"func-params-box"},e.queryParams&&e.queryParams.map(function(e){return r.a.createElement("div",{key:e.queryParamId,className:"func-params-cont"},e.queryParamName,"：",e.queryParamValue)}),r.a.createElement("div",{className:"delete-btn",onClick:function(){return h(e,"status")}},"删除"))))}))),r.a.createElement("div",{className:"func-box"},r.a.createElement("div",{className:"func-box-title"},"功能控制："),r.a.createElement("div",{className:"func-box-cont"},s&&s.map(function(e,t){return r.a.createElement("div",{key:e.deviceFunctionId},r.a.createElement("div",null,"功能",t+1,"：",e.deviceFunctionName),r.a.createElement("div",{className:"func-params"},r.a.createElement("div",{className:"func-params-title"},"功能参数:"),r.a.createElement("div",{className:"func-params-box"},e.functionParams&&e.functionParams.map(function(e){return r.a.createElement("div",{key:e.functionParamId,className:"func-params-cont"},e.functionParamName,"：",e.functionParamValue)}),r.a.createElement("div",{className:"delete-btn",onClick:function(){return h(e,"func")}},"删除"))))})))))};a(783),a(1434);function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var te=o.a.TextArea,ae=p.a.Option,ne=0,re=0;var ie=c.a.create()(function(e){var t=e.form,a=e.visible,i=e.handleCancel,l=e.handleOk,s=ee(Object(n.useState)(!1),2),f=s[0],y=s[1],g=t.getFieldDecorator,v=t.getFieldValue,h=function(e){return e.map(function(e){return"1"==e.type&&e.enums?(e.enums=e.enums.filter(function(e){return e}),e):e})},b=function(e,a,n){g("innerList".concat(a),{initialValue:[]});var i=v("innerList".concat(a));return console.log("渲染的innerList",i),[i.map(function(n,i){return r.a.createElement("div",{className:"inline-form-item2",key:i},r.a.createElement(c.a.Item,{label:"名称",labelCol:{span:6}},g("".concat(e,"[").concat(n.uniquekey,"].name"),{initialValue:n.name,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入名称"}]})(r.a.createElement(o.a,{placeholder:"请输入名称"}))),r.a.createElement(c.a.Item,{label:"数值",labelCol:{span:6}},g("".concat(e,"[").concat(n.uniquekey,"].value"),{initialValue:n.value,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(o.a,{placeholder:"请输入数值"}))),r.a.createElement("div",{className:"delete-btn"},"  ",r.a.createElement(z.a,{key:i,type:"minus-circle-o",onClick:function(){return function(e,a){var n,r=v("innerList".concat(e)),i=v("aiInParamList");t.setFieldsValue(($(n={},"innerList".concat(e),r.filter(function(e,t){return e.uniquekey!==a})),$(n,"aiInParamList",i[e].enums.filter(function(e,t){return e.uniquekey!==a})),n))}(a,n.uniquekey)}}),"  (*非负整数)"))})]};g("queryParams",{initialValue:[]});var E=v("queryParams").map(function(e,a){return r.a.createElement("div",{className:"form-item-block",key:a},r.a.createElement(c.a.Item,{label:"输入key"},g("aiInParamList[".concat(a,"].key"),{initialValue:e.queryParamName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入输入key"}]})(r.a.createElement(o.a,{placeholder:"请输入输入key"}))),r.a.createElement(c.a.Item,{label:"类型"},g("aiInParamList[".concat(a,"].type"),{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择类型"},r.a.createElement(ae,{value:"2"},"范围"),r.a.createElement(ae,{value:"1"},"枚举")))),r.a.createElement("div",{className:"ai-del-btn",key:a,onClick:function(){return function(e){var a=v("queryParams"),n=v("aiInParamList");t.setFieldsValue({queryParams:a.filter(function(t,a){return a!==e}),aiInParamList:n.filter(function(t,a){return a!==e})})}(a)}},"删除"),"2"==v("aiInParamList[".concat(a,"].type"))&&r.a.createElement("div",{className:"rang-style"},r.a.createElement(c.a.Item,{label:""},g("aiInParamList[".concat(a,"].range.min"),{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(o.a,{style:{width:90,marginRight:10}}))),r.a.createElement("div",{className:"short-line"},"-"),r.a.createElement(c.a.Item,{label:""},g("aiInParamList[".concat(a,"].range.max"),{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(o.a,{style:{width:90,marginRight:10}}))),r.a.createElement("div",{className:"tip"},"(*填写整数且后者大于前者)")),"1"==v("aiInParamList[".concat(a,"].type"))&&r.a.createElement("div",null,r.a.createElement(c.a.Item,{label:"设置参数"},r.a.createElement(m.a,{type:"dashed",onClick:function(){return function(e){var a=v("innerList".concat(e));ne++;var n=a.concat({uniquekey:ne});t.setFieldsValue($({},"innerList".concat(e),n))}(a)}},r.a.createElement(z.a,{type:"plus"}))),b("aiInParamList[".concat(a,"].enums"),a)))}),I=function(e,a,n){g("outerList".concat(a),{initialValue:[]});var i=v("outerList".concat(a));return console.log("渲染的outerList",i),[i.map(function(n,i){return r.a.createElement("div",{className:"inline-form-item2",key:i},r.a.createElement(c.a.Item,{label:"名称",labelCol:{span:6}},g("".concat(e,"[").concat(n.uniquekey_2,"].name"),{initialValue:n.name,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入名称"}]})(r.a.createElement(o.a,{placeholder:"请输入名称"}))),r.a.createElement(c.a.Item,{label:"数值",labelCol:{span:6}},g("".concat(e,"[").concat(n.uniquekey_2,"].value"),{initialValue:n.value,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(o.a,{placeholder:"请输入数值"}))),r.a.createElement("div",{className:"delete-btn"},"  ",r.a.createElement(z.a,{key:i,type:"minus-circle-o",onClick:function(){return function(e,a){var n,r=v("outerList".concat(e)),i=v("aiOutParamList");t.setFieldsValue(($(n={},"outerList".concat(e),r.filter(function(e,t){return e.uniquekey_2!==a})),$(n,"aiOutParamList",i[e].enums.filter(function(e,t){return e.uniquekey_2!==a})),n))}(a,n.uniquekey_2)}}),"  (*非负整数)"))})]};g("outParams",{initialValue:[]});var O=v("outParams").map(function(e,a){return r.a.createElement("div",{className:"form-item-block",key:a},r.a.createElement(c.a.Item,{label:"输出key"},g("aiOutParamList[".concat(a,"].key"),{initialValue:e.queryParamName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入输出key"}]})(r.a.createElement(o.a,{placeholder:"请输入输出key"}))),r.a.createElement(c.a.Item,{label:"类型"},g("aiOutParamList[".concat(a,"].type"),{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择类型"},r.a.createElement(ae,{value:"2"},"范围"),r.a.createElement(ae,{value:"1"},"枚举")))),r.a.createElement("div",{className:"ai-del-btn",key:a,onClick:function(){return function(e){var a=v("outParams"),n=v("aiOutParamList");t.setFieldsValue({outParams:a.filter(function(t,a){return a!==e}),aiOutParamList:n.filter(function(t,a){return a!==e})})}(a)}},"删除"),"2"==v("aiOutParamList[".concat(a,"].type"))&&r.a.createElement("div",{className:"rang-style"},r.a.createElement(c.a.Item,{label:""},g("aiOutParamList[".concat(a,"].range.min"),{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(o.a,{style:{width:90,marginRight:10}}))),r.a.createElement("div",{className:"short-line"},"-"),r.a.createElement(c.a.Item,{label:""},g("aiOutParamList[".concat(a,"].range.max"),{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(o.a,{style:{width:90,marginRight:10}}))),r.a.createElement("div",{className:"tip"},"(*填写整数且后者大于前者)")),"1"==v("aiOutParamList[".concat(a,"].type"))&&r.a.createElement("div",null,r.a.createElement(c.a.Item,{label:"设置参数"},r.a.createElement(m.a,{type:"dashed",onClick:function(){return function(e){var a=v("outerList".concat(e));re++;var n=a.concat({uniquekey_2:re});t.setFieldsValue($({},"outerList".concat(e),n))}(a)}},r.a.createElement(z.a,{type:"plus"}))),I("aiOutParamList[".concat(a,"].enums"),a)))});return r.a.createElement(d.a,{title:"添加/编辑AI能力",width:700,visible:a,onOk:function(){t.validateFields(function(e,t){console.log("====",t);var a={aiName:t.aiName.trim(),aiUrl:t.aiUrl.trim(),aiDesc:t.aiDesc.trim()};t.aiInParamList&&(a.aiInParamList=h(t.aiInParamList)),t.aiOutParamList&&(a.aiOutParamList=h(t.aiOutParamList)),console.log("最终提交的数据",a),D(a).then(function(e){0===e.data.code&&(u.a.success("提交成功"),l())}).finally(function(){return y(!1)})})},onCancel:i,maskClosable:!1,confirmLoading:f,wrapClassName:"ai-ability-modal"},r.a.createElement(c.a,{labelCol:{span:4},wrapperCol:{span:18},autoComplete:"off"},r.a.createElement(c.a.Item,{label:"能力名称"},g("aiName",{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入能力名称",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入能力名称"}))),r.a.createElement(c.a.Item,{label:"接口地址"},g("aiUrl",{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入接口地址",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入接口地址"}))),r.a.createElement(c.a.Item,{label:"描述"},g("aiDesc",{initialValue:"",rules:[{required:!0,message:"请输入备注",whitespace:!0}]})(r.a.createElement(te,{maxLength:100,autoSize:{minRows:3,maxRows:3}}))),r.a.createElement(c.a.Item,{label:"输入"},r.a.createElement(m.a,{type:"dashed",onClick:function(){return e=v("queryParams").concat({}),void t.setFieldsValue({queryParams:e});var e}},r.a.createElement(z.a,{type:"plus"})," 新  增")),E,r.a.createElement("div",{className:"divider"}),r.a.createElement(c.a.Item,{label:"输出",style:{marginTop:"15px"}},r.a.createElement(m.a,{type:"dashed",onClick:function(){return e=v("outParams").concat({}),void t.setFieldsValue({outParams:e});var e}},r.a.createElement(z.a,{type:"plus"})," 新  增")),O))});function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach(function(t){oe(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var se=p.a.Option,me=d.a.confirm,de=[{title:"编辑",icon:"edit",status:0,key:1,type:"edit"},{title:"删除",icon:"delete",status:0,key:2,type:"delete"}],pe=["场景产品列表","条件类型列表","条件字典列表","AI能力列表"];var fe=c.a.create()(function(e){var t=e.form,a=t.getFieldDecorator,i=(t.getFieldsValue,ue(Object(n.useState)({pageIndex:1,pageRows:10,paged:!0}),2)),d=i[0],f=i[1],h=ue(Object(n.useState)(0),2),E=h[0],q=h[1],T=ue(Object(n.useState)([{}]),2),j=T[0],L=T[1],S=ue(Object(n.useState)(!1),2),D=S[0],F=S[1],A=ue(Object(n.useState)("4"),2),B=A[0],R=A[1],Q=ue(Object(n.useState)(!1),2),z=Q[0],U=Q[1],J=ue(Object(n.useState)({}),2),K=J[0],M=J[1],G=ue(Object(n.useState)(!1),2),H=G[0],X=G[1],Y=ue(Object(n.useState)({}),2),$=Y[0],ee=Y[1],te=ue(Object(n.useState)([]),2),ae=te[0],ne=te[1],re=ue(Object(n.useState)([]),2),le=re[0],oe=re[1],fe=ue(Object(n.useState)(!1),2),ye=fe[0],ge=fe[1],ve=ue(Object(n.useState)({}),2),he=ve[0],be=ve[1],Ee=ue(Object(n.useState)(!1),2),Ie=Ee[0],Oe=Ee[1],Pe={1:[{title:"产品名称",dataIndex:"deviceTypeName",key:"deviceTypeName"},{title:"产品ID",dataIndex:"defaultProductId",key:"defaultProductId"},{title:"大类",dataIndex:"judge",key:"judge",render:function(e,t){return 2===t.level?r.a.createElement("span",null,t.parent.deviceTypeName):3===t.level?r.a.createElement("span",null,t.grand.deviceTypeName):void 0}},{title:"小类",dataIndex:"judge2",key:"judge2",render:function(e,t){return 2===t.level?r.a.createElement("span",null,t.deviceTypeName):3===t.level?r.a.createElement("span",null,t.parent.deviceTypeName):void 0}},{title:"状态查询",dataIndex:"statusQueryCount",key:"statusQueryCount"},{title:"功能控制",dataIndex:"deviceFunctionCount",key:"deviceFunctionCount"},{title:"输入输出",dataIndex:"inoutType",key:"inoutType",render:function(e,t){return e&&e.inoutTypeName&&r.a.createElement("span",null,e.inoutTypeName)}},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"100px",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(s.a,{placement:"top",title:"查看"},r.a.createElement(m.a,{shape:"circle",size:"small",icon:"info",onClick:function(){return ke(t)}})))}}],2:[{title:"条件类型名称",dataIndex:"conditionOptionName",key:"conditionOptionName"},{title:"备注",dataIndex:"comments",key:"comments"},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"10%",render:function(e,t){return r.a.createElement("div",null,de.map(function(e,a){return r.a.createElement(s.a,{key:a,placement:"top",title:e.title},r.a.createElement(m.a,{style:{marginLeft:1===a?"10px":""},shape:"circle",size:"small",icon:e.icon,key:t.conditionOptionId,onClick:function(){return we(e,t)}}))}))}}],3:[{title:"条件字典名称",dataIndex:"conditionName",key:"conditionName"},{title:"条件类型",dataIndex:"conditionOptionName",key:"conditionOptionName"},{title:"类型",dataIndex:"paramStyleName",key:"paramStyleName"},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"10%",render:function(e,t){return r.a.createElement("div",null,de.map(function(e,a){return r.a.createElement(s.a,{key:a,placement:"top",title:e.title},r.a.createElement(m.a,{style:{marginLeft:1===a?"10px":""},shape:"circle",size:"small",icon:e.icon,key:t.conditionId,onClick:function(){return we(e,t)}}))}))}}],4:[{title:"能力名称",dataIndex:"aiName",key:"aiName"},{title:"接口地址",dataIndex:"aiUrl",key:"aiUrl"},{title:"输入",dataIndex:"aiInParamList",key:"aiInParamList",render:function(e,t){return e&&e.map(function(e){var t="";if(2==e.type&&(t=r.a.createElement("span",{title:"范围：".concat(e.range.min,"~").concat(e.range.max)},"范围：".concat(e.range.min,"~").concat(e.range.max),",   ")),1==e.type){var a="";a+=e.enums.map(function(e){return"".concat(e.name,":").concat(e.value)}),t=r.a.createElement("span",{title:"枚举：".concat(a)},"枚举：".concat(a),"   ")}return t})}},{title:"输出",dataIndex:"aiOutParamList",key:"aiOutParamList",render:function(e,t){return e&&e.map(function(e){var t="";if(2==e.type&&(t=r.a.createElement("span",{title:"范围：".concat(e.range.min,"~").concat(e.range.max)},"范围：".concat(e.range.min,"~").concat(e.range.max),",   ")),1==e.type){var a="";a+=e.enums.map(function(e){return"".concat(e.name,":").concat(e.value)}),t=r.a.createElement("span",{title:"枚举：".concat(a)},"枚举：".concat(a),"   ")}return t})}},{title:"描述",dataIndex:"aiDesc",key:"aiDesc",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"10%",render:function(e,t){return r.a.createElement("div",null,de.map(function(e,a){return r.a.createElement(s.a,{key:a,placement:"top",title:e.title},r.a.createElement(m.a,{style:{marginLeft:1===a?"10px":""},shape:"circle",size:"small",icon:e.icon,key:t.key}))}))}}]},ke=function(e){ge(!0),be(e)},we=function(e,t){"delete"===e.type?me({content:"是否确定删除本条数据？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){qe(t)},onCancel:function(){}}):"edit"===e.type&&Ne(t)},qe=function(e){"2"===B?I({conditionOptionId:e.conditionOptionId}).then(function(e){0===e.data.code&&(u.a.success("删除成功"),Ce())}):"3"===B&&C({conditionId:e.conditionId}).then(function(e){0===e.data.code&&(u.a.success("删除成功"),Ce())})},Ne=function(e){"2"===B?(U(!0),M({}),O({conditionOptionId:e.conditionOptionId}).then(function(e){0===e.data.code&&M(e.data.data)})):"3"===B&&(X(!0),ee({}),N({conditionId:e.conditionId}).then(function(e){0===e.data.code&&ee(e.data.data)}))},Ce=function(){var e={1:x,2:b,3:P,4:V},a=ce(ce({},t.getFieldsValue()),d);F(!0),e[B](a).then(function(e){0===e.data.code&&(L(e.data.data.list),q(e.data.data.pager.totalRows))}).finally(function(){F(!1)})};Object(n.useEffect)(function(){Ce()},[d.pageRows,d.pageIndex,B]),Object(n.useEffect)(function(){k({pageIndex:1,pageRows:999999}).then(function(e){0===e.data.code&&ne(e.data.data)}),w({paged:!1}).then(function(e){0===e.data.code&&oe(e.data.data)})},[]);var xe=function(){1===d.pageIndex?Ce():f(function(e){var t=y()(e);return Object.assign(t,{pageIndex:1,pageRows:10})})};return r.a.createElement("div",null,r.a.createElement("div",{className:"scene-lib-page"},r.a.createElement(g.a,{title:"场景库管理",className:"title-box"},r.a.createElement("div",{className:"select-box"},r.a.createElement(p.a,{defaultValue:"1",style:{width:150},onChange:function(e){return R(e)}},pe.map(function(e,t){return r.a.createElement(se,{key:e,value:t+1+""},e)}))),r.a.createElement(c.a,{layout:"inline",className:"scene-form",autoComplete:"off"},r.a.createElement("div",null,"1"===B&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Item,{label:"产品名称"},a("deviceTypeName",{})(r.a.createElement(o.a,{placeholder:"请输入产品名称",style:{width:240}}))),r.a.createElement(c.a.Item,{label:"产品ID"},a("defaultProductId",{})(r.a.createElement(o.a,{placeholder:"请输入产品ID",style:{width:240}})))),"2"===B&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Item,{label:"条件类型名称"},a("conditionOptionName",{})(r.a.createElement(o.a,{placeholder:"请输入条件类型名称",style:{width:240}})))),"3"===B&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Item,{label:"条件字典名称"},a("conditionName",{})(r.a.createElement(o.a,{placeholder:"请输入条件字典名称",style:{width:240}}))),r.a.createElement(c.a.Item,{label:"条件类型"},a("conditionTypeId",{})(r.a.createElement(p.a,{placeholder:"请选择条件类型",style:{width:240}},ae&&ae.map(function(e){return r.a.createElement(se,{key:e.conditionTypeId,value:e.conditionTypeId+""},e.conditionOptionName)}))))),"4"===B&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Item,{label:"能力名称"},a("aiName",{})(r.a.createElement(o.a,{placeholder:"请输入能力名称",style:{width:240}})))),r.a.createElement(c.a.Item,null,r.a.createElement(m.a,{type:"primary",onClick:function(){return xe()}},"查询")),r.a.createElement(c.a.Item,null,r.a.createElement(m.a,{type:"default",onClick:function(){return t.resetFields(),void xe()}},"重置"))),"1"!==B&&r.a.createElement("div",null,r.a.createElement(c.a.Item,null,r.a.createElement(m.a,{type:"primary",onClick:function(){({2:function(){U(!0),M({})},3:function(){X(!0),ee({})},4:function(){Oe(!0)}})[B]()}},"新增"))))),r.a.createElement(l.a,{className:"ModuleManagerListTable",style:{marginTop:10}},r.a.createElement(v.a,{rowKey:{1:"deviceTypeId",2:"conditionTypeId",3:"conditionId",4:""}[B],bordered:!0,columns:Pe[B],dataSource:j,loading:D,pagination:{defaultCurrent:1,current:d.pageIndex,onChange:function(e,t){f(function(a){var n=y()(a);return Object.assign(n,{pageIndex:t===d.pageRows?e:1,pageRows:t})})},pageSize:d.pageRows,total:E,showQuickJumper:!0,pageSizeOptions:["10"],showTotal:function(){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,E)," 条")}}})),z&&r.a.createElement(_,{visible:z,conditionTypeDetailData:K,handleOk:function(){U(!1),Ce()},handleCancel:function(){return U(!1)}}),H&&r.a.createElement(W,{visible:H,dicConditionType:ae,unitList:le,conditionDicDetailData:$,handleOk:function(){X(!1),Ce()},handleCancel:function(){return X(!1)}}),ye&&r.a.createElement(Z,{visible:ye,sceneProductDetail:he,handleOk:function(){ge(!1)},handleCancel:function(){return ge(!1)}}),Ie&&r.a.createElement(ie,{visible:Ie,handleCancel:function(){return Oe(!1)},handleOk:function(){return Oe(!1)}})))});t.default=function(e){var t=e.match;return r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"".concat(t.url,"/list"),component:fe}),r.a.createElement(i.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}}}]);