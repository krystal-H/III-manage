(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1448:function(e,a,t){},1449:function(e,a,t){},1450:function(e,a,t){},1451:function(e,a,t){},1475:function(e,a,t){"use strict";t.r(a);t(98),t(243);var n=t(0),r=t.n(n),i=t(108),l=(t(94),t(38)),c=(t(140),t(37)),o=(t(121),t(61)),u=(t(279),t(154)),m=(t(211),t(81)),s=(t(72),t(21)),d=(t(210),t(93)),p=(t(188),t(75)),y=t(1329),f=t.n(y),g=(t(63),t(109),t(437),t(22),t(64),t(438),t(166),t(35),t(26),t(28),t(29),t(19),t(34),t(36),t(33),t(39),t(32),t(40),t(436)),v=t(90),h=t(4),E=function(e){return h.c.request({url:"/expert/scene/condition/option/getPage",params:e,method:"get"})},b=function(e){return h.c.request({url:"/expert/scene/condition/option/addOrUpdate",data:e,method:"post",needFormData:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},I=function(e){return h.c.request({url:"/expert/scene/condition/option/delete",params:e,method:"get"})},O=function(e){return h.c.request({url:"/expert/scene/condition/option/getOneOption",params:e,method:"get"})},P=function(e){return h.c.request({url:"/expert/scene/condition/getPageList",params:e,method:"get"})},k=function(e){return h.c.request({url:"/expert/scene/condition/option/getList",params:e,method:"get"})},q=function(e){return h.c.request({url:"/expert/deviceType/unit/list",params:e,method:"get"})},N=function(e){return h.c.request({url:"/expert/scene/condition/addOrUpdate",data:e,method:"post",headers:{"Content-Type":"application/json"}})},w=function(e){return h.c.request({url:"/expert/scene/condition/getOneCondition",params:e,method:"get"})},x=function(e){return h.c.request({url:"/expert/scene/condition/delete",params:e,method:"get"})},C=function(e){return h.c.request({url:"/expert/combine/deviceType/list/v2.0",params:e,method:"get"})},T=function(e){return h.c.request({url:"/expert/deviceType/statusQuery/list",params:e,method:"get"})},L=function(e){return h.c.request({url:"/expert/deviceType/deviceFunction/list",params:e,method:"get"})},j=function(e){return h.c.request({url:"/expert/deviceType/deviceFunction/delete",params:e,method:"get"})},V=function(e){return h.c.request({url:"/expert/deviceType/statusQuery/delete",params:e,method:"get"})},S=function(e){return h.c.request({url:"/expert/scene/ai/getPageList/v2.0",params:e,method:"get"})},D=function(e){return h.c.request({url:"/expert/scene/ai/addOrUpdate/v2.0",data:e,method:"post",headers:{"Content-Type":"application/json"}})},F=function(e){return h.c.request({url:"/expert/scene/ai/getAiAbility/v2.0",params:e,method:"get"})},A=function(e){return h.c.request({url:"/expert/scene/ai/deleteById/v2.0",params:e,method:"get"})};t(1448);function B(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function R(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function Q(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(t.push(l.value),!a||t.length!==a);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var z=o.a.TextArea;var U=c.a.create()(function(e){var a=e.form,t=e.visible,i=e.handleOk,l=e.handleCancel,m=e.conditionTypeDetailData,s=void 0===m?{}:m,p=a.getFieldDecorator,y=Q(Object(n.useState)(!1),2),f=y[0],g=y[1];return r.a.createElement(d.a,{title:"添加/编辑条件类型",width:800,visible:t,onOk:function(){a.validateFields(function(e,a){if(!e){g(!0);var t=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?B(t,!0).forEach(function(a){R(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}({},a);Object.keys(s).length>0&&(t.conditionOptionId=s.conditionOptionId),b(t).then(function(e){0===e.data.code&&(u.a.success("提交成功"),i())}).finally(function(){return g(!1)})}})},onCancel:l,maskClosable:!1,confirmLoading:f,wrapClassName:"module-add-scheme"},r.a.createElement(c.a,{labelCol:{span:4},wrapperCol:{span:18},autoComplete:"off"},r.a.createElement(c.a.Item,{label:"条件类型名称"},p("conditionOptionName",{initialValue:s.conditionOptionName,rules:[{required:!0,message:"请输入条件类型名称",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入条件类型名称"}))),r.a.createElement(c.a.Item,{label:"备注"},p("comments",{initialValue:s.comments,rules:[{required:!0,message:"请输入备注",whitespace:!0}]})(r.a.createElement(z,{maxLength:100,autoSize:{minRows:5,maxRows:5}})))))}),$=(t(1334),t(1337)),J=(t(167),t(10));t(1340),t(1449);function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function K(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function M(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(t.push(l.value),!a||t.length!==a);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var G=p.a.Option,H=[];var W=c.a.create()(function(e){var a=e.form,t=e.visible,i=e.handleOk,l=e.handleCancel,m=e.conditionDicDetailData,y=void 0===m?{}:m,g=e.dicConditionType,v=void 0===g?[]:g,h=e.unitList,E=void 0===h?[]:h,b=a.getFieldDecorator,I=a.getFieldValue,O=M(Object(n.useState)(!1),2),P=O[0],k=O[1],q=M(Object(n.useState)(""),2),w=q[0],x=q[1];Object(n.useEffect)(function(){Object.keys(y).length&&x(y.paramStyleId+"")},[Object.keys(y).length]),Object.keys(y).length&&"2"===w&&(H=-1!==y.queryParams[0].queryParamName.indexOf("[")?[]:f()(y.queryParams)),b("queryParams",{initialValue:H});var C=I("queryParams").map(function(e,t){return r.a.createElement("div",{className:"inline-form-item2",key:t},r.a.createElement(c.a.Item,{label:"名称",labelCol:{span:6}},b("configList[".concat(t,"].queryParamName"),{initialValue:e.queryParamName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入名称"}]})(r.a.createElement(o.a,{placeholder:"请输入名称"}))),Object.keys(y).length>0&&r.a.createElement(c.a.Item,{label:"",style:{display:"none"}},b("configList[".concat(t,"].queryParamId"),{initialValue:e.queryParamId})(r.a.createElement(o.a,{style:{display:"none"}}))),"    ",r.a.createElement(c.a.Item,{label:"数值",labelCol:{span:6}},b("configList[".concat(t,"].queryParamValue"),{initialValue:e.queryParamValue,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"},{pattern:/^\d+$/,message:"请输入非负整数"}]})(r.a.createElement(o.a,{placeholder:"请输入数值"}))),r.a.createElement("div",{className:"delete-btn"},"  ",r.a.createElement(J.a,{key:t,type:"minus-circle-o",onClick:function(){return function(e){var t=I("queryParams"),n=I("configList");a.setFieldsValue({queryParams:t.filter(function(a,t){return t!==e}),configList:n.filter(function(a,t){return t!==e})})}(t)}}),"  (*非负整数)"))});return r.a.createElement(d.a,{title:"添加/编辑条件字典",width:800,visible:t,onOk:function(){a.validateFields(function(e,a){if(!e){k(!0),console.log("values",a);var t=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(t,!0).forEach(function(a){K(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}({},a);"1"===w?(t.queryParams=[{queryParamName:a.rangArr1,queryParamValue:a.rangArr2}],delete t.rangArr1,delete t.rangArr2,Object.keys(y).length&&(t.queryParams[0].queryParamId=y.queryParams[0].queryParamId,t.statusQueryId=y.statusQueryId,t.conditionId=y.conditionId)):"2"===w&&(t.queryParams=f()(a.configList),delete t.configList,Object.keys(y).length>0&&(t.statusQueryId=y.statusQueryId,t.conditionId=y.conditionId,t.queryParams=t.queryParams.map(function(e){var a={};return e.queryParamId&&(a.queryParamId=e.queryParamId),a.queryParamName=e.queryParamName,a.queryParamValue=e.queryParamValue,a}))),console.log("add-data",t),N(t).then(function(e){0===e.data.code&&(u.a.success("提交成功"),i())}).finally(function(){return k(!1)})}})},onCancel:l,maskClosable:!1,confirmLoading:P,wrapClassName:"condition-dic-modal"},r.a.createElement(c.a,{labelCol:{span:4},wrapperCol:{span:18},autoComplete:"off"},r.a.createElement(c.a.Item,{label:"条件字典名称"},b("conditionName",{initialValue:y.conditionName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入条件字典名称",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入条件字典名称"}))),r.a.createElement(c.a.Item,{label:"条件类型"},b("conditionOptionId",{initialValue:y.conditionOptionId?y.conditionOptionId+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择条件类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择条件类型"},v&&v.map(function(e){return r.a.createElement(G,{key:e.conditionOptionId,value:e.conditionOptionId+""},e.conditionOptionName)})))),r.a.createElement(c.a.Item,{label:"变化频率"},b("frequency",{initialValue:y.frequency||0===y.frequency?y.frequency+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入变化频率",whitespace:!0}]})(r.a.createElement($.a,{min:0,placeholder:"请输入变化频率",style:{width:448}})),r.a.createElement("span",{className:"ant-form-text"},"小时(*非负整数)")),r.a.createElement(c.a.Item,{label:"参数单位"},b("unitId",{initialValue:y.unitId?y.unitId+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择参数单位",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择参数单位"},E&&E.map(function(e){return r.a.createElement(G,{key:e.unitId,value:e.unitId+""},e.unitName)})))),r.a.createElement(c.a.Item,{label:"条件字典key"},b("dataKey",{initialValue:y.dataKey,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入条件字典key",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入条件字典key"}))),r.a.createElement(c.a.Item,{label:"类型"},b("paramStyleId",{initialValue:y.paramStyleId?y.paramStyleId+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择类型",onChange:function(e){console.log("change"),x(e)}},r.a.createElement(G,{value:"1"},"范围"),r.a.createElement(G,{value:"2"},"枚举")))),"1"===w&&r.a.createElement("div",{className:"rang-style"},r.a.createElement(c.a.Item,{label:""},b("rangArr1",{initialValue:y.queryParams?Array.isArray(JSON.parse(y.queryParams[0].queryParamName))?JSON.parse(y.queryParams[0].queryParamName)[0]+"":y.queryParams[0].queryParamName:"",validateTrigger:["onChange","onBlur"],rules:[{validator:function(e,a,t){a?/^-?[0-9]\d*$/.test(a)?t():t("请输入整数"):t("请输入数值")}}]})(r.a.createElement(o.a,{style:{width:159,marginRight:10}}))),r.a.createElement("div",{className:"short-line"},"-"),r.a.createElement(c.a.Item,{label:""},b("rangArr2",{initialValue:y.queryParams?Array.isArray(JSON.parse(y.queryParams[0].queryParamName))?JSON.parse(y.queryParams[0].queryParamName)[1]+"":y.queryParams[0].queryParamName:"",validateTrigger:["onChange","onBlur"],rules:[{validator:function(e,a,t){a?/^-?[0-9]\d*$/.test(a)?a&&Number(I("rangArr1"))<Number(a)?t():t("填写整数且后者大于前者"):t("请输入整数"):t("请输入数值")}}]})(r.a.createElement(o.a,{style:{width:196,marginRight:10}}))),r.a.createElement("div",{className:"tip"},"(*填写整数且后者大于前者)")),"2"===w&&r.a.createElement("div",null,r.a.createElement(c.a.Item,{label:"设置参数"},r.a.createElement(s.a,{type:"dashed",onClick:function(){return e=I("queryParams").concat({}),void a.setFieldsValue({queryParams:e});var e},style:{width:"100%"}},r.a.createElement(J.a,{type:"plus"})," 新  增")),C)))});t(1450);function X(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(t.push(l.value),!a||t.length!==a);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Y=d.a.confirm;var Z=function(e){var a=e.visible,t=e.handleOk,i=e.handleCancel,l=e.sceneProductDetail,o=void 0===l?{}:l,u=X(Object(n.useState)([]),2),m=u[0],s=u[1],p=X(Object(n.useState)([]),2),y=p[0],f=p[1];Object(n.useEffect)(function(){v(),g()},[]);var g=function(){L({deviceTypeId:o.deviceTypeId}).then(function(e){0===e.data.code&&s(e.data.data)})},v=function(){T({deviceTypeId:o.deviceTypeId}).then(function(e){0===e.data.code&&f(e.data.data)})},h=function(e,a){Y({content:"是否确定删除本条数据？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){"func"===a&&E(e),"status"===a&&b(e)},onCancel:function(){}})},E=function(e){j({deviceFunctionId:e.deviceFunctionId}).then(function(e){0===e.data.code&&g()})},b=function(e){V({statusQueryId:e.statusQueryId}).then(function(e){0===e.data.code&&v()})};return r.a.createElement(d.a,{title:"查看详情",width:800,visible:a,onOk:t,onCancel:i,maskClosable:!1,wrapClassName:"scene-porduct-modal"},r.a.createElement("div",{className:"scene-porduct-modal-it"},r.a.createElement("div",{className:"title",style:{paddingTop:0}},"基本属性"),r.a.createElement(c.a,{labelAlign:"left"},r.a.createElement(c.a.Item,{label:"设备大类"},2===o.level?o.parent.deviceTypeName:3===o.level?o.grand.deviceTypeName:""),r.a.createElement(c.a.Item,{label:"设备小类"},2===o.level?o.deviceTypeName:3===o.level?o.parent.deviceTypeName:""),r.a.createElement(c.a.Item,{label:"输入输出类型"},o.inoutType.inoutTypeName),r.a.createElement(c.a.Item,{label:"安全级别"},o.securityLevel.securityLevelName),r.a.createElement(c.a.Item,{label:"设备场景自定义"},1===o.customizable?"是":"否")),r.a.createElement("div",{className:"title"},"扩展功能"),r.a.createElement("div",{className:"func-box"},r.a.createElement("div",{className:"func-box-title"},"状态查询："),r.a.createElement("div",{className:"func-box-cont"},y&&y.map(function(e,a){return r.a.createElement("div",{key:e.statusQueryId},r.a.createElement("div",null,"功能",a+1,"：",e.statusQueryName),r.a.createElement("div",{className:"func-params"},r.a.createElement("div",{className:"func-params-title"},"功能参数:"),r.a.createElement("div",{className:"func-params-box"},e.queryParams&&e.queryParams.map(function(e){return r.a.createElement("div",{key:e.queryParamId,className:"func-params-cont"},e.queryParamName,"：",e.queryParamValue)}),r.a.createElement("div",{className:"delete-btn",onClick:function(){return h(e,"status")}},"删除"))))}))),r.a.createElement("div",{className:"func-box"},r.a.createElement("div",{className:"func-box-title"},"功能控制："),r.a.createElement("div",{className:"func-box-cont"},m&&m.map(function(e,a){return r.a.createElement("div",{key:e.deviceFunctionId},r.a.createElement("div",null,"功能",a+1,"：",e.deviceFunctionName),r.a.createElement("div",{className:"func-params"},r.a.createElement("div",{className:"func-params-title"},"功能参数:"),r.a.createElement("div",{className:"func-params-box"},e.functionParams&&e.functionParams.map(function(e){return r.a.createElement("div",{key:e.functionParamId,className:"func-params-cont"},e.functionParamName,"：",e.functionParamValue)}),r.a.createElement("div",{className:"delete-btn",onClick:function(){return h(e,"func")}},"删除"))))})))))};t(787),t(1451);function ee(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function ae(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(t.push(l.value),!a||t.length!==a);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var te=o.a.TextArea,ne=p.a.Option,re=0,ie=0;var le=c.a.create()(function(e){var a=e.form,t=e.visible,i=e.handleCancel,l=e.handleOk,m=e.aiAbilityDetail,y=void 0===m?{}:m,f=a.getFieldDecorator,g=a.getFieldValue,v=ae(Object(n.useState)(!1),2),h=v[0],E=v[1],b=ae(Object(n.useState)([]),2),I=b[0],O=b[1],P=ae(Object(n.useState)([]),2),k=P[0],q=P[1];Object(n.useEffect)(function(){Object.keys(y).length>0&&(y.aiInParamList&&y.aiInParamList.forEach(function(e){1==e.type&&(e.enums=e.enums.map(function(e){return re++,{name:e.name,value:e.value,uniquekey:re}}))}),O(y.aiInParamList),y.aiOutParamList&&y.aiOutParamList.forEach(function(e){1==e.type&&(e.enums=e.enums.map(function(e){return ie++,{name:e.name,value:e.value,uniquekey_2:ie}}))}),q(y.aiOutParamList))},[y]);var N=function(e){return e.map(function(e){return"1"==e.type&&e.enums?(e.enums=e.enums.filter(function(e){return e}),e):e})},w=function(e,t,n){f("innerList".concat(t),{initialValue:n.enums||[]});var i=g("innerList".concat(t));return console.log("innerList",i),[i.map(function(n,i){return r.a.createElement("div",{className:"inline-form-item2",key:i},r.a.createElement(c.a.Item,{label:"名称",labelCol:{span:6}},f("".concat(e,"[").concat(n.uniquekey,"].name"),{initialValue:n.name,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入名称"}]})(r.a.createElement(o.a,{placeholder:"请输入名称"}))),r.a.createElement(c.a.Item,{label:"数值",labelCol:{span:6}},f("".concat(e,"[").concat(n.uniquekey,"].value"),{initialValue:n.value,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"},{pattern:/^\d+$/,message:"请输入非负整数"}]})(r.a.createElement(o.a,{placeholder:"请输入数值"}))),r.a.createElement("div",{className:"delete-btn"},"  ",r.a.createElement(J.a,{key:i,type:"minus-circle-o",onClick:function(){return function(e,t){var n,r=g("innerList".concat(e)),i=g("aiInParamList");a.setFieldsValue((ee(n={},"innerList".concat(e),r.filter(function(e,a){return e.uniquekey!==t})),ee(n,"aiInParamList",i[e].enums.filter(function(e,a){return e.uniquekey!==t})),n))}(t,n.uniquekey)}}),"  (*非负整数)"))})]};f("queryParams",{initialValue:I||[]});var x=g("queryParams").map(function(e,t){return r.a.createElement("div",{className:"form-item-block",key:t},r.a.createElement(c.a.Item,{label:"输入key"},f("aiInParamList[".concat(t,"].key"),{initialValue:e.key,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入输入key"}]})(r.a.createElement(o.a,{placeholder:"请输入输入key"}))),r.a.createElement(c.a.Item,{label:"类型"},f("aiInParamList[".concat(t,"].type"),{initialValue:e.type?e.type+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择类型"},r.a.createElement(ne,{value:"2"},"范围"),r.a.createElement(ne,{value:"1"},"枚举")))),r.a.createElement("div",{className:"ai-del-btn",key:t,onClick:function(){return function(e){var t=g("queryParams"),n=g("aiInParamList");a.setFieldsValue({queryParams:t.filter(function(a,t){return t!==e}),aiInParamList:n.filter(function(a,t){return t!==e})})}(t)}},"删除"),"2"==g("aiInParamList[".concat(t,"].type"))&&r.a.createElement("div",{className:"rang-style"},r.a.createElement(c.a.Item,{label:""},f("aiInParamList[".concat(t,"].range.min"),{initialValue:e.range&&e.range.min,validateTrigger:["onChange","onBlur"],rules:[{validator:function(e,a,t){a?/^-?[0-9]\d*$/.test(a)?t():t("请输入整数"):t("请输入数值")}}]})(r.a.createElement(o.a,{style:{width:159,marginRight:10}}))),r.a.createElement("div",{className:"short-line"},"-"),r.a.createElement(c.a.Item,{label:""},f("aiInParamList[".concat(t,"].range.max"),{initialValue:e.range&&e.range.max,validateTrigger:["onChange","onBlur"],rules:[{validator:function(e,a,n){a?/^-?[0-9]\d*$/.test(a)?a&&Number(g("aiInParamList[".concat(t,"].range.min")))<Number(a)?n():n("填写整数且后者大于前者"):n("请输入整数"):n("请输入数值")}}]})(r.a.createElement(o.a,{style:{width:196,marginRight:10}}))),r.a.createElement("div",{className:"tip"},"(*填写整数且后者大于前者)")),"1"==g("aiInParamList[".concat(t,"].type"))&&r.a.createElement("div",null,r.a.createElement(c.a.Item,{label:"设置参数"},r.a.createElement(s.a,{type:"dashed",onClick:function(){return function(e){var t=g("innerList".concat(e));re++;var n=t.concat({uniquekey:re});a.setFieldsValue(ee({},"innerList".concat(e),n))}(t)}},r.a.createElement(J.a,{type:"plus"}))),w("aiInParamList[".concat(t,"].enums"),t,e)))}),C=function(e,t,n){f("outerList".concat(t),{initialValue:n.enums||[]});var i=g("outerList".concat(t));return console.log("outerList",i),[i.map(function(n,i){return r.a.createElement("div",{className:"inline-form-item2",key:i},r.a.createElement(c.a.Item,{label:"名称",labelCol:{span:6}},f("".concat(e,"[").concat(n.uniquekey_2,"].name"),{initialValue:n.name,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入名称"}]})(r.a.createElement(o.a,{placeholder:"请输入名称"}))),r.a.createElement(c.a.Item,{label:"数值",labelCol:{span:6}},f("".concat(e,"[").concat(n.uniquekey_2,"].value"),{initialValue:n.value,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"},{pattern:/^\d+$/,message:"请输入非负整数"}]})(r.a.createElement(o.a,{placeholder:"请输入数值"}))),r.a.createElement("div",{className:"delete-btn"},"  ",r.a.createElement(J.a,{key:i,type:"minus-circle-o",onClick:function(){return function(e,t){var n,r=g("outerList".concat(e)),i=g("aiOutParamList");a.setFieldsValue((ee(n={},"outerList".concat(e),r.filter(function(e,a){return e.uniquekey_2!==t})),ee(n,"aiOutParamList",i[e].enums.filter(function(e,a){return e.uniquekey_2!==t})),n))}(t,n.uniquekey_2)}}),"  (*非负整数)"))})]};f("outParams",{initialValue:k||[]});var T=g("outParams").map(function(e,t){return r.a.createElement("div",{className:"form-item-block",key:t},r.a.createElement(c.a.Item,{label:"输出key"},f("aiOutParamList[".concat(t,"].key"),{initialValue:e.key,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入输出key"}]})(r.a.createElement(o.a,{placeholder:"请输入输出key"}))),r.a.createElement(c.a.Item,{label:"类型"},f("aiOutParamList[".concat(t,"].type"),{initialValue:e.type?e.type+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择类型"},r.a.createElement(ne,{value:"2"},"范围"),r.a.createElement(ne,{value:"1"},"枚举")))),r.a.createElement("div",{className:"ai-del-btn",key:t,onClick:function(){return function(e){var t=g("outParams"),n=g("aiOutParamList");a.setFieldsValue({outParams:t.filter(function(a,t){return t!==e}),aiOutParamList:n.filter(function(a,t){return t!==e})})}(t)}},"删除"),"2"==g("aiOutParamList[".concat(t,"].type"))&&r.a.createElement("div",{className:"rang-style"},r.a.createElement(c.a.Item,{label:""},f("aiOutParamList[".concat(t,"].range.min"),{initialValue:e.range&&e.range.min,validateTrigger:["onChange","onBlur"],rules:[{validator:function(e,a,t){a?/^-?[0-9]\d*$/.test(a)?t():t("请输入整数"):t("请输入数值")}}]})(r.a.createElement(o.a,{style:{width:159,marginRight:10}}))),r.a.createElement("div",{className:"short-line"},"-"),r.a.createElement(c.a.Item,{label:""},f("aiOutParamList[".concat(t,"].range.max"),{initialValue:e.range&&e.range.max,validateTrigger:["onChange","onBlur"],rules:[{validator:function(e,a,n){a?/^-?[0-9]\d*$/.test(a)?a&&Number(g("aiOutParamList[".concat(t,"].range.min")))<Number(a)?n():n("填写整数且后者大于前者"):n("请输入整数"):n("请输入数值")}}]})(r.a.createElement(o.a,{style:{width:196,marginRight:10}}))),r.a.createElement("div",{className:"tip"},"(*填写整数且后者大于前者)")),"1"==g("aiOutParamList[".concat(t,"].type"))&&r.a.createElement("div",null,r.a.createElement(c.a.Item,{label:"设置参数"},r.a.createElement(s.a,{type:"dashed",onClick:function(){return function(e){var t=g("outerList".concat(e));ie++;var n=t.concat({uniquekey_2:ie});a.setFieldsValue(ee({},"outerList".concat(e),n))}(t)}},r.a.createElement(J.a,{type:"plus"}))),C("aiOutParamList[".concat(t,"].enums"),t,e)))});return r.a.createElement(d.a,{title:"添加/编辑AI能力",width:787,visible:t,onOk:function(){a.validateFields(function(e,a){var t={aiName:a.aiName.trim(),aiUrl:a.aiUrl.trim(),aiDesc:a.aiDesc.trim()};a.aiInParamList&&(t.aiInParamList=N(a.aiInParamList)),a.aiOutParamList&&(t.aiOutParamList=N(a.aiOutParamList)),Object.keys(y).length>0&&(t.aiId=y.aiId),console.log("submit==",t),D(t).then(function(e){0===e.data.code&&(u.a.success("提交成功"),l())}).finally(function(){return E(!1)})})},onCancel:i,maskClosable:!1,confirmLoading:h,wrapClassName:"ai-ability-modal"},r.a.createElement(c.a,{labelCol:{span:4},wrapperCol:{span:18},autoComplete:"off"},r.a.createElement(c.a.Item,{label:"能力名称"},f("aiName",{initialValue:y.aiName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入能力名称",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入能力名称"}))),r.a.createElement(c.a.Item,{label:"接口地址"},f("aiUrl",{initialValue:y.aiUrl,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入接口地址",whitespace:!0}]})(r.a.createElement(o.a,{maxLength:20,placeholder:"请输入接口地址"}))),r.a.createElement(c.a.Item,{label:"描述"},f("aiDesc",{initialValue:y.aiDesc,rules:[{required:!0,message:"请输入备注",whitespace:!0}]})(r.a.createElement(te,{maxLength:100,autoSize:{minRows:3,maxRows:3}}))),r.a.createElement(c.a.Item,{label:"输入"},r.a.createElement(s.a,{type:"dashed",onClick:function(){return e=g("queryParams").concat({}),void a.setFieldsValue({queryParams:e});var e}},r.a.createElement(J.a,{type:"plus"})," 新  增")),x,r.a.createElement("div",{className:"divider"}),r.a.createElement(c.a.Item,{label:"输出",style:{marginTop:"15px"}},r.a.createElement(s.a,{type:"dashed",onClick:function(){return e=g("outParams").concat({}),void a.setFieldsValue({outParams:e});var e}},r.a.createElement(J.a,{type:"plus"})," 新  增")),T))});function ce(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function oe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ce(t,!0).forEach(function(a){ue(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ce(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function ue(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function me(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=[],n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(t.push(l.value),!a||t.length!==a);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var se=p.a.Option,de=d.a.confirm,pe=[{title:"编辑",icon:"edit",status:0,key:1,type:"edit"},{title:"删除",icon:"delete",status:0,key:2,type:"delete"}],ye=["场景产品列表","条件类型列表","条件字典列表","AI能力列表"];var fe=c.a.create()(function(e){var a=e.form,t=a.getFieldDecorator,i=(a.getFieldsValue,me(Object(n.useState)({pageIndex:1,pageRows:10,paged:!0}),2)),d=i[0],y=i[1],h=me(Object(n.useState)(0),2),b=h[0],N=h[1],T=me(Object(n.useState)([{}]),2),L=T[0],j=T[1],V=me(Object(n.useState)(!1),2),D=V[0],B=V[1],R=me(Object(n.useState)("1"),2),Q=R[0],z=R[1],$=me(Object(n.useState)(!1),2),J=$[0],_=$[1],K=me(Object(n.useState)({}),2),M=K[0],G=K[1],H=me(Object(n.useState)(!1),2),X=H[0],Y=H[1],ee=me(Object(n.useState)({}),2),ae=ee[0],te=ee[1],ne=me(Object(n.useState)([]),2),re=ne[0],ie=ne[1],ce=me(Object(n.useState)([]),2),ue=ce[0],fe=ce[1],ge=me(Object(n.useState)(!1),2),ve=ge[0],he=ge[1],Ee=me(Object(n.useState)({}),2),be=Ee[0],Ie=Ee[1],Oe=me(Object(n.useState)(!1),2),Pe=Oe[0],ke=Oe[1],qe=me(Object(n.useState)({}),2),Ne=qe[0],we=qe[1],xe={1:[{title:"产品名称",dataIndex:"deviceTypeName",key:"deviceTypeName"},{title:"产品ID",dataIndex:"defaultProductId",key:"defaultProductId"},{title:"大类",dataIndex:"judge",key:"judge",render:function(e,a){return 2===a.level?r.a.createElement("span",null,a.parent.deviceTypeName):3===a.level?r.a.createElement("span",null,a.grand.deviceTypeName):void 0}},{title:"小类",dataIndex:"judge2",key:"judge2",render:function(e,a){return 2===a.level?r.a.createElement("span",null,a.deviceTypeName):3===a.level?r.a.createElement("span",null,a.parent.deviceTypeName):void 0}},{title:"状态查询",dataIndex:"statusQueryCount",key:"statusQueryCount"},{title:"功能控制",dataIndex:"deviceFunctionCount",key:"deviceFunctionCount"},{title:"输入输出",dataIndex:"inoutType",key:"inoutType",render:function(e,a){return e&&e.inoutTypeName&&r.a.createElement("span",null,e.inoutTypeName)}},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"100px",render:function(e,a){return r.a.createElement("div",null,r.a.createElement(m.a,{placement:"top",title:"查看"},r.a.createElement(s.a,{shape:"circle",size:"small",icon:"info",onClick:function(){return Ce(a)}})))}}],2:[{title:"条件类型名称",dataIndex:"conditionOptionName",key:"conditionOptionName"},{title:"备注",dataIndex:"comments",key:"comments"},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"10%",render:function(e,a){return r.a.createElement("div",null,pe.map(function(e,t){return r.a.createElement(m.a,{key:t,placement:"top",title:e.title},r.a.createElement(s.a,{style:{marginLeft:1===t?"10px":""},shape:"circle",size:"small",icon:e.icon,key:a.conditionOptionId,onClick:function(){return Te(e,a)}}))}))}}],3:[{title:"条件字典名称",dataIndex:"conditionName",key:"conditionName"},{title:"条件类型",dataIndex:"conditionOptionName",key:"conditionOptionName"},{title:"类型",dataIndex:"paramStyleName",key:"paramStyleName"},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"10%",render:function(e,a){return r.a.createElement("div",null,pe.map(function(e,t){return r.a.createElement(m.a,{key:t,placement:"top",title:e.title},r.a.createElement(s.a,{style:{marginLeft:1===t?"10px":""},shape:"circle",size:"small",icon:e.icon,key:a.conditionId,onClick:function(){return Te(e,a)}}))}))}}],4:[{title:"能力名称",dataIndex:"aiName",key:"aiName"},{title:"接口地址",dataIndex:"aiUrl",key:"aiUrl"},{title:"输入",dataIndex:"aiInParamList",key:"aiInParamList",render:function(e,a){return e&&e.map(function(e,a){var t="";if(2==e.type&&(t=r.a.createElement("span",{title:"范围：".concat(e.range.min,"~").concat(e.range.max),key:a},"范围：".concat(e.range.min,"~").concat(e.range.max),",   ")),1==e.type){var n="";n+=e.enums.map(function(e){return"".concat(e.name,":").concat(e.value)}),t=r.a.createElement("span",{title:"枚举：".concat(n),key:a},"枚举：".concat(n),"   ")}return t})}},{title:"输出",dataIndex:"aiOutParamList",key:"aiOutParamList",render:function(e,a){return e&&e.map(function(e,a){var t="";if(2==e.type&&(t=r.a.createElement("span",{title:"范围：".concat(e.range.min,"~").concat(e.range.max),key:a},"范围：".concat(e.range.min,"~").concat(e.range.max),",   ")),1==e.type){var n="";n+=e.enums.map(function(e){return"".concat(e.name,":").concat(e.value)}),t=r.a.createElement("span",{title:"枚举：".concat(n),key:a},"枚举：".concat(n),"   ")}return t})}},{title:"描述",dataIndex:"aiDesc",key:"aiDesc",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"10%",render:function(e,a){return r.a.createElement("div",null,pe.map(function(e,t){return r.a.createElement(m.a,{key:t,placement:"top",title:e.title},r.a.createElement(s.a,{style:{marginLeft:1===t?"10px":""},shape:"circle",size:"small",icon:e.icon,key:a.key,onClick:function(){return Te(e,a)}}))}))}}]},Ce=function(e){he(!0),Ie(e)},Te=function(e,a){"delete"===e.type?de({content:"是否确定删除本条数据？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){Le(a)},onCancel:function(){}}):"edit"===e.type&&je(a)},Le=function(e){"2"===Q?I({conditionOptionId:e.conditionOptionId}).then(function(e){0===e.data.code&&(u.a.success("删除成功"),Ve())}):"3"===Q?x({conditionId:e.conditionId}).then(function(e){0===e.data.code&&(u.a.success("删除成功"),Ve())}):"4"===Q&&A({aiId:e.aiId}).then(function(e){0===e.data.code&&(u.a.success("删除成功"),Ve())})},je=function(e){"2"===Q?(_(!0),G({}),O({conditionOptionId:e.conditionOptionId}).then(function(e){0===e.data.code&&G(e.data.data)})):"3"===Q?(Y(!0),te({}),w({conditionId:e.conditionId}).then(function(e){0===e.data.code&&te(e.data.data)})):"4"===Q&&(ke(!0),we({}),F({aiId:e.aiId}).then(function(e){0===e.data.code&&we(e.data.data)}))},Ve=function(){var e={1:C,2:E,3:P,4:S},t=oe(oe({},a.getFieldsValue()),d);B(!0),e[Q](t).then(function(e){0===e.data.code&&(j(e.data.data.list),N(e.data.data.pager.totalRows))}).finally(function(){B(!1)})};Object(n.useEffect)(function(){Ve()},[d.pageRows,d.pageIndex,Q]),Object(n.useEffect)(function(){k({pageIndex:1,pageRows:999999}).then(function(e){0===e.data.code&&ie(e.data.data)}),q({paged:!1}).then(function(e){0===e.data.code&&fe(e.data.data)})},[]);var Se=function(){1===d.pageIndex?Ve():y(function(e){var a=f()(e);return Object.assign(a,{pageIndex:1,pageRows:10})})};return r.a.createElement("div",null,r.a.createElement("div",{className:"scene-lib-page"},r.a.createElement(g.a,{title:"场景库管理",className:"title-box"},r.a.createElement("div",{className:"select-box"},r.a.createElement(p.a,{defaultValue:"1",style:{width:150},onChange:function(e){return z(e)}},ye.map(function(e,a){return r.a.createElement(se,{key:e,value:a+1+""},e)}))),r.a.createElement(c.a,{layout:"inline",className:"scene-form",autoComplete:"off"},r.a.createElement("div",null,"1"===Q&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Item,{label:"产品名称"},t("deviceTypeName",{})(r.a.createElement(o.a,{placeholder:"请输入产品名称",style:{width:240}}))),r.a.createElement(c.a.Item,{label:"产品ID"},t("defaultProductId",{})(r.a.createElement(o.a,{placeholder:"请输入产品ID",style:{width:240}})))),"2"===Q&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Item,{label:"条件类型名称"},t("conditionOptionName",{})(r.a.createElement(o.a,{placeholder:"请输入条件类型名称",style:{width:240}})))),"3"===Q&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Item,{label:"条件字典名称"},t("conditionName",{})(r.a.createElement(o.a,{placeholder:"请输入条件字典名称",style:{width:240}}))),r.a.createElement(c.a.Item,{label:"条件类型"},t("conditionTypeId",{})(r.a.createElement(p.a,{placeholder:"请选择条件类型",style:{width:240}},re&&re.map(function(e){return r.a.createElement(se,{key:e.conditionTypeId,value:e.conditionTypeId+""},e.conditionOptionName)}))))),"4"===Q&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Item,{label:"能力名称"},t("aiName",{})(r.a.createElement(o.a,{placeholder:"请输入能力名称",style:{width:240}})))),r.a.createElement(c.a.Item,null,r.a.createElement(s.a,{type:"primary",onClick:function(){return Se()}},"查询")),r.a.createElement(c.a.Item,null,r.a.createElement(s.a,{type:"default",onClick:function(){return a.resetFields(),void Se()}},"重置"))),"1"!==Q&&r.a.createElement("div",null,r.a.createElement(c.a.Item,null,r.a.createElement(s.a,{type:"primary",onClick:function(){({2:function(){_(!0),G({})},3:function(){Y(!0),te({})},4:function(){ke(!0),we({})}})[Q]()}},"新增"))))),r.a.createElement(l.a,{className:"ModuleManagerListTable",style:{marginTop:10}},r.a.createElement(v.a,{rowKey:{1:"deviceTypeId",2:"conditionTypeId",3:"conditionId",4:"aiId"}[Q],bordered:!0,columns:xe[Q],dataSource:L,loading:D,pagination:{defaultCurrent:1,current:d.pageIndex,onChange:function(e,a){y(function(t){var n=f()(t);return Object.assign(n,{pageIndex:a===d.pageRows?e:1,pageRows:a})})},pageSize:d.pageRows,total:b,showQuickJumper:!0,pageSizeOptions:["10"],showTotal:function(){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,b)," 条")}}})),J&&r.a.createElement(U,{visible:J,conditionTypeDetailData:M,handleOk:function(){_(!1),Ve()},handleCancel:function(){return _(!1)}}),X&&r.a.createElement(W,{visible:X,dicConditionType:re,unitList:ue,conditionDicDetailData:ae,handleOk:function(){Y(!1),Ve()},handleCancel:function(){return Y(!1)}}),ve&&r.a.createElement(Z,{visible:ve,sceneProductDetail:be,handleOk:function(){he(!1)},handleCancel:function(){return he(!1)}}),Pe&&r.a.createElement(le,{visible:Pe,aiAbilityDetail:Ne,handleCancel:function(){return ke(!1)},handleOk:function(){ke(!1),Ve()}})))});a.default=function(e){var a=e.match;return r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"".concat(a.url,"/list"),component:fe}),r.a.createElement(i.a,{from:"".concat(a.url,"/"),to:"".concat(a.url,"/list")}))}}}]);