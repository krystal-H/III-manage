(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1424:function(e,t,a){"use strict";a(48),a(49),a(19),a(37),a(22),a(38),a(28),a(30),a(31);var n=a(0),r=a.n(n);a(1425);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=s(e);if(t){var r=s(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d(this,a)}}function d(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,e);var t,a,n,i=u(d);function d(){return o(this,d),i.apply(this,arguments)}return t=d,(a=[{key:"render",value:function(){var e=this.props,t=e.children,a=e.title;return r.a.createElement("div",{className:"title-tab"},r.a.createElement("div",{className:"title-tab-option"},r.a.createElement("span",{className:"title-tab-title"},a)),r.a.createElement("div",{className:"title-tab-option"},t))}}])&&l(t.prototype,a),n&&l(t,n),d}(r.a.Component);m.Option=function(e){var t=e.children,a=e.label,n=e.align,i=void 0===n?"left":n;return r.a.createElement("div",{className:"".concat("left"===i?"title-tab-item":"title-tab-item-right")},r.a.createElement("span",{className:a?"title-table-label":"title-table-label-non"},a?a+":":""),t)},t.a=m},1425:function(e,t,a){},1498:function(e,t,a){},1499:function(e,t,a){},1500:function(e,t,a){},1520:function(e,t,a){"use strict";a.r(t);a(97),a(257);var n=a(0),r=a.n(n),i=a(58),o=(a(19),a(37),a(38),a(28),a(30),a(31),a(198),a(220),a(256),a(35),a(34),a(43),a(33),a(44),a(98),a(39)),l=(a(154),a(40)),c=(a(136),a(69)),u=(a(298),a(155)),d=(a(221),a(83)),s=(a(75),a(20)),m=(a(255),a(127)),p=(a(197),a(76)),f=a(1390),y=a.n(f),b=(a(65),a(22),a(66),a(468),a(168),a(170),a(1424)),v=a(106),g=a(3),h=function(e){return g.c.request({url:"/expert/scene/condition/option/getPage",params:e,method:"get"})},E=function(e){return g.c.request({url:"/expert/scene/condition/getPageList",params:e,method:"get"})},O=function(e){return g.c.request({url:"/expert/combine/deviceType/list/v2.0",params:e,method:"get"})},I=function(e){return g.c.request({})};a(1498);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,i=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var k=c.a.TextArea;var q=l.a.create()((function(e){var t=e.form,a=e.visible,i=e.handleOk,o=e.handleCancel,d=e.conditionTypeDetailData,s=void 0===d?{}:d,p=t.getFieldDecorator,f=j(Object(n.useState)(!1),2),y=f[0],b=f[1];return r.a.createElement(m.a,{title:"添加/编辑条件类型",width:800,visible:a,onOk:function(){t.validateFields((function(e,t){if(!e){b(!0);var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){P(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t);Object.keys(s).length>0&&(a.conditionOptionId=s.conditionOptionId),function(e){return g.c.request({url:"/expert/scene/condition/option/addOrUpdate",data:e,method:"post",needFormData:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}(a).then((function(e){0===e.data.code&&(u.a.success("提交成功"),i())})).finally((function(){return b(!1)}))}}))},onCancel:o,maskClosable:!1,confirmLoading:y,wrapClassName:"module-add-scheme"},r.a.createElement(l.a,{labelCol:{span:4},wrapperCol:{span:18},autoComplete:"off"},r.a.createElement(l.a.Item,{label:"条件类型名称"},p("conditionOptionName",{initialValue:s.conditionOptionName,rules:[{required:!0,message:"请输入条件类型名称",whitespace:!0}]})(r.a.createElement(c.a,{maxLength:20,placeholder:"请输入条件类型名称"}))),r.a.createElement(l.a.Item,{label:"备注"},p("comments",{initialValue:s.comments,rules:[{required:!0,message:"请输入备注",whitespace:!0}]})(r.a.createElement(k,{maxLength:100,autoSize:{minRows:5,maxRows:5}})))))})),x=(a(1393),a(1396)),T=(a(169),a(7));a(117),a(1499);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,i=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var F=p.a.Option,L=[];var R=l.a.create()((function(e){var t=e.form,a=e.visible,i=e.handleOk,o=e.handleCancel,d=e.conditionDicDetailData,f=void 0===d?{}:d,b=e.dicConditionType,v=void 0===b?[]:b,h=e.unitList,E=void 0===h?[]:h,O=t.getFieldDecorator,I=t.getFieldValue,w=D(Object(n.useState)(!1),2),P=w[0],j=w[1],N=D(Object(n.useState)(""),2),k=N[0],q=N[1];Object(n.useEffect)((function(){Object.keys(f).length&&q(f.paramStyleId+"")}),[Object.keys(f).length]),Object.keys(f).length&&"2"===k&&(L=-1!==f.queryParams[0].queryParamName.indexOf("[")?[]:y()(f.queryParams)),O("queryParams",{initialValue:L});var V=I("queryParams").map((function(e,a){return r.a.createElement("div",{className:"inline-form-item2",key:a},r.a.createElement(l.a.Item,{label:"名称",labelCol:{span:6}},O("configList[".concat(a,"].queryParamName"),{initialValue:e.queryParamName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入名称"}]})(r.a.createElement(c.a,{placeholder:"请输入名称"}))),Object.keys(f).length&&r.a.createElement(l.a.Item,{label:"",style:{display:"none"}},O("configList[".concat(a,"].queryParamId"),{initialValue:e.queryParamId})(r.a.createElement(c.a,{style:{display:"none"}}))),"    ",r.a.createElement(l.a.Item,{label:"数值",labelCol:{span:6}},O("configList[".concat(a,"].queryParamValue"),{initialValue:e.queryParamValue,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(c.a,{placeholder:"请输入数值"}))),r.a.createElement("div",{className:"delete-btn"},"  ",r.a.createElement(T.a,{key:a,type:"minus-circle-o",onClick:function(){return function(e){var a=I("queryParams"),n=I("configList");t.setFieldsValue({queryParams:a.filter((function(t,a){return a!==e})),configList:n.filter((function(t,a){return a!==e}))})}(a)}}),"  (*非负整数)"))}));return r.a.createElement(m.a,{title:"添加/编辑条件字典",width:800,visible:a,onOk:function(){t.validateFields((function(e,t){if(!e){j(!0),console.log("values",t,A(k));var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){C(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t);"1"===k?(a.queryParams=[{queryParamName:t.rangArr1,queryParamValue:t.rangArr2}],delete a.rangArr1,delete a.rangArr2,Object.keys(f).length&&(a.queryParams[0].queryParamId=f.queryParams[0].queryParamId,a.statusQueryId=f.statusQueryId,a.conditionId=f.conditionId)):"2"===k&&(a.queryParams=y()(t.configList),delete a.configList,Object.keys(f).length>0&&(a.statusQueryId=f.statusQueryId,a.conditionId=f.conditionId,a.queryParams=a.queryParams.map((function(e){var t={};return e.queryParamId&&(t.queryParamId=e.queryParamId),t.queryParamName=e.queryParamName,t.queryParamValue=e.queryParamValue,t})))),console.log("add-data",a),function(e){return g.c.request({url:"/expert/scene/condition/addOrUpdate",data:e,method:"post",headers:{"Content-Type":"application/json"}})}(a).then((function(e){0===e.data.code&&(u.a.success("提交成功"),i())})).finally((function(){return j(!1)}))}}))},onCancel:o,maskClosable:!1,confirmLoading:P,wrapClassName:"condition-dic-modal"},r.a.createElement(l.a,{labelCol:{span:4},wrapperCol:{span:18},autoComplete:"off"},r.a.createElement(l.a.Item,{label:"条件字典名称"},O("conditionName",{initialValue:f.conditionName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入条件字典名称",whitespace:!0}]})(r.a.createElement(c.a,{maxLength:20,placeholder:"请输入条件字典名称"}))),r.a.createElement(l.a.Item,{label:"条件类型"},O("conditionOptionId",{initialValue:f.conditionOptionId?f.conditionOptionId+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择条件类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择条件类型"},v&&v.map((function(e){return r.a.createElement(F,{key:e.conditionOptionId,value:e.conditionOptionId+""},e.conditionOptionName)}))))),r.a.createElement(l.a.Item,{label:"变化频率"},O("frequency",{initialValue:f.frequency||0===f.frequency?f.frequency+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入变化频率",whitespace:!0}]})(r.a.createElement(x.a,{min:0,placeholder:"请输入变化频率",style:{width:448}})),r.a.createElement("span",{className:"ant-form-text"},"小时(*非负整数)")),r.a.createElement(l.a.Item,{label:"参数单位"},O("unitId",{initialValue:f.unitId?f.unitId+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择参数单位",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择参数单位"},E&&E.map((function(e){return r.a.createElement(F,{key:e.unitId,value:e.unitId+""},e.unitName)}))))),r.a.createElement(l.a.Item,{label:"条件字典key"},O("dataKey",{initialValue:f.dataKey,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入条件字典key",whitespace:!0}]})(r.a.createElement(c.a,{maxLength:20,placeholder:"请输入条件字典key"}))),r.a.createElement(l.a.Item,{label:"类型"},O("paramStyleId",{initialValue:f.paramStyleId?f.paramStyleId+"":"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择类型",whitespace:!0}]})(r.a.createElement(p.a,{placeholder:"请选择类型",onChange:function(e){console.log("change"),q(e)}},r.a.createElement(F,{value:"1"},"范围"),r.a.createElement(F,{value:"2"},"枚举")))),"1"===k&&r.a.createElement("div",{className:"rang-style"},r.a.createElement(l.a.Item,{label:""},O("rangArr1",{initialValue:f.queryParams?Array.isArray(JSON.parse(f.queryParams[0].queryParamName))?JSON.parse(f.queryParams[0].queryParamName)[0]+"":f.queryParams[0].queryParamName:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(c.a,{style:{width:90,marginRight:10}}))),r.a.createElement("div",{className:"short-line"},"-"),r.a.createElement(l.a.Item,{label:""},O("rangArr2",{initialValue:f.queryParams?Array.isArray(JSON.parse(f.queryParams[0].queryParamName))?JSON.parse(f.queryParams[0].queryParamName)[1]+"":f.queryParams[0].queryParamName:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值"}]})(r.a.createElement(c.a,{style:{width:90,marginRight:10}}))),r.a.createElement("div",{className:"tip"},"(*填写整数且后者大于前者)")),"2"===k&&r.a.createElement("div",null,r.a.createElement(l.a.Item,{label:"设置参数"},r.a.createElement(s.a,{type:"dashed",onClick:function(){return e=I("queryParams").concat({}),void t.setFieldsValue({queryParams:e});var e},style:{width:"100%"}},r.a.createElement(T.a,{type:"plus"})," 新  增")),V)))}));a(1500);function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,i=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var z=m.a.confirm;var _=function(e){var t=e.visible,a=e.handleOk,i=e.handleCancel,o=e.sceneProductDetail,c=void 0===o?{}:o,u=Q(Object(n.useState)([]),2),d=u[0],s=u[1],p=Q(Object(n.useState)([]),2),f=p[0],y=p[1];Object(n.useEffect)((function(){v(),b()}),[]);var b=function(){var e;(e={deviceTypeId:c.deviceTypeId},g.c.request({url:"/expert/deviceType/deviceFunction/list",params:e,method:"get"})).then((function(e){0===e.data.code&&s(e.data.data)}))},v=function(){var e;(e={deviceTypeId:c.deviceTypeId},g.c.request({url:"/expert/deviceType/statusQuery/list",params:e,method:"get"})).then((function(e){0===e.data.code&&y(e.data.data)}))},h=function(e,t){z({content:"是否确定删除本条数据？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){"func"===t&&E(e),"status"===t&&O(e)},onCancel:function(){}})},E=function(e){var t;(t={deviceFunctionId:e.deviceFunctionId},g.c.request({url:"/expert/deviceType/deviceFunction/delete",params:t,method:"get"})).then((function(e){0===e.data.code&&b()}))},O=function(e){var t;(t={statusQueryId:e.statusQueryId},g.c.request({url:"/expert/deviceType/statusQuery/delete",params:t,method:"get"})).then((function(e){0===e.data.code&&v()}))};return r.a.createElement(m.a,{title:"查看详情",width:800,visible:t,onOk:a,onCancel:i,maskClosable:!1,wrapClassName:"scene-porduct-modal"},r.a.createElement("div",{className:"scene-porduct-modal-it"},r.a.createElement("div",{className:"title",style:{paddingTop:0}},"基本属性"),r.a.createElement(l.a,{labelAlign:"left"},r.a.createElement(l.a.Item,{label:"设备大类"},2===c.level?c.parent.deviceTypeName:3===c.level?c.grand.deviceTypeName:""),r.a.createElement(l.a.Item,{label:"设备小类"},2===c.level?c.deviceTypeName:3===c.level?c.parent.deviceTypeName:""),r.a.createElement(l.a.Item,{label:"输入输出类型"},c.inoutType.inoutTypeName),r.a.createElement(l.a.Item,{label:"安全级别"},c.securityLevel.securityLevelName),r.a.createElement(l.a.Item,{label:"设备场景自定义"},1===c.customizable?"是":"否")),r.a.createElement("div",{className:"title"},"扩展功能"),r.a.createElement("div",{className:"func-box"},r.a.createElement("div",{className:"func-box-title"},"状态查询："),r.a.createElement("div",{className:"func-box-cont"},f&&f.map((function(e,t){return r.a.createElement("div",{key:e.statusQueryId},r.a.createElement("div",null,"功能",t+1,"：",e.statusQueryName),r.a.createElement("div",{className:"func-params"},r.a.createElement("div",{className:"func-params-title"},"功能参数:"),r.a.createElement("div",{className:"func-params-box"},e.queryParams&&e.queryParams.map((function(e){return r.a.createElement("div",{key:e.queryParamId,className:"func-params-cont"},e.queryParamName,"：",e.queryParamValue)})),r.a.createElement("div",{className:"delete-btn",onClick:function(){return h(e,"status")}},"删除"))))})))),r.a.createElement("div",{className:"func-box"},r.a.createElement("div",{className:"func-box-title"},"功能控制："),r.a.createElement("div",{className:"func-box-cont"},d&&d.map((function(e,t){return r.a.createElement("div",{key:e.deviceFunctionId},r.a.createElement("div",null,"功能",t+1,"：",e.deviceFunctionName),r.a.createElement("div",{className:"func-params"},r.a.createElement("div",{className:"func-params-title"},"功能参数:"),r.a.createElement("div",{className:"func-params-box"},e.functionParams&&e.functionParams.map((function(e){return r.a.createElement("div",{key:e.functionParamId,className:"func-params-cont"},e.functionParamName,"：",e.functionParamValue)})),r.a.createElement("div",{className:"delete-btn",onClick:function(){return h(e,"func")}},"删除"))))}))))))};function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){U(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,i=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var G=p.a.Option,H=m.a.confirm,W=[{title:"编辑",icon:"edit",status:0,key:1,type:"edit"},{title:"删除",icon:"delete",status:0,key:2,type:"delete"}],X=["场景产品列表","条件类型列表","条件字典列表","AI能力列表"];var Y=l.a.create()((function(e){var t=e.form,a=t.getFieldDecorator,i=(t.getFieldsValue,$(Object(n.useState)({pageIndex:1,pageRows:10,paged:!0}),2)),m=i[0],f=i[1],w=$(Object(n.useState)(0),2),P=w[0],j=w[1],N=$(Object(n.useState)([{}]),2),k=N[0],x=N[1],T=$(Object(n.useState)(!1),2),S=T[0],C=T[1],A=$(Object(n.useState)("1"),2),D=A[0],V=A[1],F=$(Object(n.useState)(!1),2),L=F[0],Q=F[1],B=$(Object(n.useState)({}),2),z=B[0],J=B[1],U=$(Object(n.useState)(!1),2),K=U[0],Y=U[1],Z=$(Object(n.useState)({}),2),ee=Z[0],te=Z[1],ae=$(Object(n.useState)([]),2),ne=ae[0],re=ae[1],ie=$(Object(n.useState)([]),2),oe=ie[0],le=ie[1],ce=$(Object(n.useState)(!1),2),ue=ce[0],de=ce[1],se=$(Object(n.useState)({}),2),me=se[0],pe=se[1],fe={1:[{title:"产品名称",dataIndex:"deviceTypeName",key:"deviceTypeName"},{title:"产品ID",dataIndex:"",key:""},{title:"大类",dataIndex:"judge",key:"judge",render:function(e,t){return 2===t.level?r.a.createElement("span",null,t.parent.deviceTypeName):3===t.level?r.a.createElement("span",null,t.grand.deviceTypeName):void 0}},{title:"小类",dataIndex:"judge2",key:"judge2",render:function(e,t){return 2===t.level?r.a.createElement("span",null,t.deviceTypeName):3===t.level?r.a.createElement("span",null,t.parent.deviceTypeName):void 0}},{title:"状态查询",dataIndex:"statusQueryCount",key:"statusQueryCount"},{title:"功能控制",dataIndex:"deviceFunctionCount",key:"deviceFunctionCount"},{title:"输入输出",dataIndex:"inoutType",key:"inoutType",render:function(e,t){return e&&e.inoutTypeName&&r.a.createElement("span",null,e.inoutTypeName)}},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"100px",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(d.a,{placement:"top",title:"查看"},r.a.createElement(s.a,{shape:"circle",size:"small",icon:"info",onClick:function(){return ye(t)}})))}}],2:[{title:"条件类型名称",dataIndex:"conditionOptionName",key:"conditionOptionName"},{title:"备注",dataIndex:"comments",key:"comments"},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"10%",render:function(e,t){return r.a.createElement("div",null,W.map((function(e,a){return r.a.createElement(d.a,{key:a,placement:"top",title:e.title},r.a.createElement(s.a,{style:{marginLeft:1===a?"10px":""},shape:"circle",size:"small",icon:e.icon,key:t.conditionOptionId,onClick:function(){return be(e,t)}}))})))}}],3:[{title:"条件字典名称",dataIndex:"conditionName",key:"conditionName"},{title:"条件类型",dataIndex:"conditionOptionName",key:"conditionOptionName"},{title:"类型",dataIndex:"paramStyleName",key:"paramStyleName"},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"operation",key:"operation",width:"10%",render:function(e,t){return r.a.createElement("div",null,W.map((function(e,a){return r.a.createElement(d.a,{key:a,placement:"top",title:e.title},r.a.createElement(s.a,{style:{marginLeft:1===a?"10px":""},shape:"circle",size:"small",icon:e.icon,key:t.conditionId,onClick:function(){return be(e,t)}}))})))}}],4:[{title:"能力名称",dataIndex:"",key:""},{title:"接口地址",dataIndex:"",key:""},{title:"输入",dataIndex:"",key:""},{title:"输出",dataIndex:"",key:""},{title:"描述",dataIndex:"",key:""},{title:"编辑时间",dataIndex:"",key:""},{title:"操作",dataIndex:"operation",key:"operation",width:"10%",render:function(e,t){return r.a.createElement("div",null,W.map((function(e,a){return r.a.createElement(d.a,{key:a,placement:"top",title:e.title},r.a.createElement(s.a,{style:{marginLeft:1===a?"10px":""},shape:"circle",size:"small",icon:e.icon,key:t.key}))})))}}]},ye=function(e){de(!0),pe(e)},be=function(e,t){"delete"===e.type?H({content:"是否确定删除本条数据？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){ve(t)},onCancel:function(){}}):"edit"===e.type&&ge(t)},ve=function(e){var t;"2"===D?(t={conditionOptionId:e.conditionOptionId},g.c.request({url:"/expert/scene/condition/option/delete",params:t,method:"get"})).then((function(e){0===e.data.code&&(u.a.success("删除成功"),he())})):"3"===D&&function(e){return g.c.request({url:"/expert/scene/condition/delete",params:e,method:"get"})}({conditionId:e.conditionId}).then((function(e){0===e.data.code&&(u.a.success("删除成功"),he())}))},ge=function(e){var t;"2"===D?(Q(!0),J({}),(t={conditionOptionId:e.conditionOptionId},g.c.request({url:"/expert/scene/condition/option/getOneOption",params:t,method:"get"})).then((function(e){0===e.data.code&&J(e.data.data)}))):"3"===D&&(Y(!0),te({}),function(e){return g.c.request({url:"/expert/scene/condition/getOneCondition",params:e,method:"get"})}({conditionId:e.conditionId}).then((function(e){0===e.data.code&&te(e.data.data)})))},he=function(){var e={1:O,2:h,3:E,4:I},a=M(M({},t.getFieldsValue()),m);C(!0),e[D](a).then((function(e){0===e.data.code&&(x(e.data.data.list),j(e.data.data.pager.totalRows))})).finally((function(){C(!1)}))};Object(n.useEffect)((function(){he()}),[m.pageRows,m.pageIndex,D]);var Ee=function(){var e;(e={pageIndex:1,pageRows:999999},g.c.request({url:"/expert/scene/condition/option/getList",params:e,method:"get"})).then((function(e){0===e.data.code&&re(e.data.data)}))},Oe=function(){var e;(e={paged:!1},g.c.request({url:"/expert/deviceType/unit/list",params:e,method:"get"})).then((function(e){0===e.data.code&&le(e.data.data)}))};Object(n.useEffect)((function(){Ee(),Oe()}),[]);var Ie=function(){1===m.pageIndex?he():f((function(e){var t=y()(e);return Object.assign(t,{pageIndex:1,pageRows:10})}))};return r.a.createElement("div",null,r.a.createElement("div",{className:"scene-lib-page"},r.a.createElement(b.a,{title:"场景库管理",className:"title-box"},r.a.createElement("div",{className:"select-box"},r.a.createElement(p.a,{defaultValue:"1",style:{width:150},onChange:function(e){return V(e)}},X.map((function(e,t){return r.a.createElement(G,{key:e,value:t+1+""},e)})))),r.a.createElement(l.a,{layout:"inline",className:"scene-form",autoComplete:"off"},r.a.createElement("div",null,"1"===D&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a.Item,{label:"产品名称"},a("deviceTypeName",{})(r.a.createElement(c.a,{placeholder:"请输入产品名称",style:{width:240}}))),r.a.createElement(l.a.Item,{label:"产品ID"},a("productId",{})(r.a.createElement(c.a,{placeholder:"请输入产品ID",style:{width:240}})))),"2"===D&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a.Item,{label:"条件类型名称"},a("conditionOptionName",{})(r.a.createElement(c.a,{placeholder:"请输入条件类型名称",style:{width:240}})))),"3"===D&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a.Item,{label:"条件字典名称"},a("conditionName",{})(r.a.createElement(c.a,{placeholder:"请输入条件字典名称",style:{width:240}}))),r.a.createElement(l.a.Item,{label:"条件类型"},a("conditionTypeId",{})(r.a.createElement(p.a,{placeholder:"请选择条件类型",style:{width:240}},ne&&ne.map((function(e){return r.a.createElement(G,{key:e.conditionTypeId,value:e.conditionTypeId+""},e.conditionOptionName)})))))),"4"===D&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a.Item,{label:"AI能力列表"},a("productName",{getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(r.a.createElement(c.a,{placeholder:"请输入AI能力列表",style:{width:240}})))),r.a.createElement(l.a.Item,null,r.a.createElement(s.a,{type:"primary",onClick:function(){return Ie()}},"查询")),r.a.createElement(l.a.Item,null,r.a.createElement(s.a,{type:"default",onClick:function(){return t.resetFields(),void Ie()}},"重置"))),r.a.createElement("div",null,r.a.createElement(l.a.Item,null,r.a.createElement(s.a,{type:"primary",onClick:function(){({2:function(){Q(!0),J({})},3:function(){Y(!0),te({})}})[D]()}},"新增"))))),r.a.createElement(o.a,{className:"ModuleManagerListTable",style:{marginTop:10}},r.a.createElement(v.a,{rowKey:{1:"deviceTypeId",2:"conditionTypeId",3:"conditionId",4:""}[D],bordered:!0,columns:fe[D],dataSource:k,loading:S,pagination:{defaultCurrent:1,current:m.pageIndex,onChange:function(e,t){f((function(a){var n=y()(a);return Object.assign(n,{pageIndex:t===m.pageRows?e:1,pageRows:t})}))},pageSize:m.pageRows,total:P,showQuickJumper:!0,pageSizeOptions:["10"],showTotal:function(){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,P)," 条")}}})),L&&r.a.createElement(q,{visible:L,conditionTypeDetailData:z,handleOk:function(){Q(!1),he()},handleCancel:function(){return Q(!1)}}),K&&r.a.createElement(R,{visible:K,dicConditionType:ne,unitList:oe,conditionDicDetailData:ee,handleOk:function(){Y(!1),he()},handleCancel:function(){return Y(!1)}}),ue&&r.a.createElement(_,{visible:ue,sceneProductDetail:me,handleOk:function(){de(!1)},handleCancel:function(){return de(!1)}})))}));t.default=function(e){var t=e.match;return r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"".concat(t.url,"/list"),component:Y}),r.a.createElement(i.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}}}]);