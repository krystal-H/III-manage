(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1421:function(e,t,n){"use strict";n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(32),n(31);var r=n(0),o=n.n(r);n(1422);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t,n,r,a=u(s);function s(){return c(this,s),a.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title;return o.a.createElement("div",{className:"title-tab"},o.a.createElement("div",{className:"title-tab-option"},o.a.createElement("span",{className:"title-tab-title"},n)),o.a.createElement("div",{className:"title-tab-option"},t))}}])&&i(t.prototype,n),r&&i(t,r),s}(o.a.Component);p.Option=function(e){var t=e.children,n=e.label,r=e.align,a=void 0===r?"left":r;return o.a.createElement("div",{className:"".concat("left"===a?"title-tab-item":"title-tab-item-right")},o.a.createElement("span",{className:n?"title-table-label":"title-table-label-non"},n?n+":":""),t)},t.a=p},1422:function(e,t,n){},1423:function(e,t,n){"use strict";n(117),n(97),n(170),n(363),n(474),n(258),n(198),n(65),n(35),n(364),n(365),n(48),n(49),n(19),n(34),n(43),n(33),n(44),n(168),n(37),n(22),n(38),n(29),n(32),n(31);var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(m,t);var n,o,c,y=p(m);function m(){var e;u(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=y.call.apply(y,[this].concat(n))).state={pageIndex:1},e.onChange=function(t){var n=e.state.pageIndex;e.setState({pageIndex:t||n||1},(function(){var t=e.state,n=[];for(var r in t)t[r]&&n.push("".concat(r,"=").concat(t[r]));e.props.history.replace("?"+n.join("&")),e.props.getList(i({},t))}))},e.onFilter=function(t){var n=e.props.form;n&&(t=n.getFieldsValue()),e.setState(i({},t),(function(){e.onChange(1)}))},e.onReset=function(){var t=e.props.form;t&&t.resetFields()},e}return n=m,(o=[{key:"componentDidMount",value:function(){var e=this,t={pageIndex:1},n=this.props.history.location.search;n&&n.length&&n.slice(1).split("&").map((function(e){if(/^(.+)=(.+)$/.test(e)){var n=e.split("=");t[n[0]]=decodeURI(n[1])}})),this.setState(i({},t),(function(){e.props.getList(t)}));var r=this.props.form;if(r){var o=r.getFieldsValue(),a=Object.keys(o);for(var c in t)a.includes(c)&&r.setFieldsValue(l({},c,+t[c]||t[c]))}}},{key:"render",value:function(){return r.createElement(e,a({},this.props,{onChange:this.onChange,onFilter:this.onFilter,onReset:this.onReset,query:this.state}))}}])&&s(n.prototype,o),c&&s(n,c),m}(r.Component)}},1424:function(e,t,n){"use strict";n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(32),n(31);var r=n(0),o=n(12),a=n.n(o);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(p,t);var n,o,c,f=s(p);function p(){return i(this,p),f.apply(this,arguments)}return n=p,(o=[{key:"componentDidMount",value:function(){var e=a.a.findDOMNode(this);e&&e.parentElement&&e.parentElement.parentElement&&(e.parentElement.parentElement.scrollTop=0)}},{key:"render",value:function(){return r.createElement(e,this.props)}}])&&l(n.prototype,o),c&&l(n,c),p}(r.Component)}},1426:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var r=n(3),o=function(e){return r.c.Post("manage-open/audit/getList",e).then((function(e){return{list:e.data.data.list,pager:e.data.data.pager,code:e.data.code,data:e}}))},a=function(e){return r.c.Post("manage-open/audit/app/get",e,{isModalError:!0})},c=function(e){return r.c.Post("manage-open/audit/updateToRead",e)},i=function(e){return r.c.Post("manage-open/audit/update",e,{isModalError:!0})}},1470:function(e,t,n){},1471:function(e,t,n){},1472:function(e,t,n){},1473:function(e,t,n){},1474:function(e,t,n){},1475:function(e,t,n){},1476:function(e,t,n){},1496:function(e,t,n){"use strict";n.r(t);n(49),n(19),n(37),n(22),n(38),n(29),n(32),n(31),n(255);var r=n(127),o=(n(1395),n(1396)),a=(n(75),n(20)),c=(n(142),n(47)),i=(n(33),n(48),n(0)),l=n.n(i),u=n(42),s=n(797),f=n(458),p=n(9),y=n(106);n(1470);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,i,u=h(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).componentDidMount=function(){t.props.getMethodList({pageIndex:1,pageRows:10})},t.showModal=function(){t.setState({visible:!0})},t.handleOk=function(e){var n=t.props.curApi;t.setState({loading:!0});var r=1===e?"统计方法审核通过":"统计方法审核已拒绝",o=1===e?"success":"error";Object(f.a)({apiId:n.apiId,status:e}).then((function(e){e.data.code===p.a&&(c.a[o]({message:r,description:r,duration:3,onClick:function(){console.log("Notification Clicked!")}}),t.setState({loading:!1,visible:!1},(function(){t.props.getMethodList({pageIndex:1,pageRows:10})})))}))},t.handleCancel=function(){t.setState({visible:!1})},t.onChange=function(e){t.props.getMethodList({pageIndex:e,pageRows:10})},t.getMethodDetail=function(e){t.props.getMethodDetail(e),t.showModal()},t._ruleType=function(e){return 1===e?l.a.createElement("span",null,"取平均值：y=（a",l.a.createElement("sub",null,"1"),"+a",l.a.createElement("sub",null,"2"),"+...+a",l.a.createElement("sub",null,"n"),"）/n"):2===e?l.a.createElement("span",null,"取和：y= a",l.a.createElement("sub",null,"n"),"+a",l.a.createElement("sub",null,"（n-1）")):3===e?l.a.createElement("span",null,"取最大值：y=a",l.a.createElement("sub",null,"max")):4===e?l.a.createElement("span",null,"取最小值：y=a",l.a.createElement("sub",null,"min")):l.a.createElement("span",null,"加载中...")},t.state={loading:!1,visible:!1},t}return t=s,(n=[{key:"_getAntDMethodListData",value:function(){var e=this,t=this.props,n=t.methodList,r=t.pager;return n.forEach((function(e,t){e.key=e.apiId,e.id=10*(r.pageIndex-1)+t+1})),{methodList:n,columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"统计方法名称",dataIndex:"apiName",key:"apiName",render:function(e){return l.a.createElement("span",{title:e},e)}},{title:"申请时间",dataIndex:"createDate",key:"createDate"},{title:"申请账号",dataIndex:"developerName",key:"developerName",render:function(e){return l.a.createElement("span",{title:e},e)}},{title:"状态",dataIndex:"status",key:"status",width:"120px",render:function(e){return 0===e?"未审核":1===e?"已通过":"已拒绝"}},{title:"操作",key:"opt",width:"120px",render:function(t,n){return l.a.createElement("span",null,l.a.createElement("a",{href:"javascript:",onClick:function(){return e.getMethodDetail(n.apiId)}},"审核入口"))}}]}}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,c=t.loading,i=this.props,u=i.pager,s=i.curApi,f=i.methodListLoading,p=this._getAntDMethodListData(),m=p.methodList,d=p.columns,b="",h="";switch(s.reportFormsType){case 1:b="1年";break;case 2:b="1月";break;case 3:b="1天";break;case 4:b="1小时"}switch(s.status){case 0:h="未审核";break;case 1:h="已通过";break;case 2:h="已拒绝"}var v=[l.a.createElement(a.a,{key:"back",type:"danger",loading:c,onClick:function(){return e.handleOk(2)}},"拒绝"),l.a.createElement(a.a,{key:"submit",type:"primary",loading:c,onClick:function(){return e.handleOk(1)}},"通过")];return 0!==s.status&&(v=[l.a.createElement(a.a,{key:"submit",type:"primary",onClick:this.handleCancel},"确认")]),l.a.createElement("div",{className:"method-page-wrapper"},l.a.createElement(o.a,{title:"自定义统计方法审核",className:"method-title"}),l.a.createElement("div",{className:"method-content-wrapper"},l.a.createElement("h3",null,"统计方法列表："),l.a.createElement(y.a,{dataSource:m,columns:d,rowKey:"id",pager:u,loading:f,onPageChange:this.onChange}),l.a.createElement(r.a,{width:"600px",visible:n,title:"API详情",onCancel:this.handleCancel,footer:v},l.a.createElement("ul",{className:"name-wrapper"},l.a.createElement("li",{className:"item"},"统计方法名称："),l.a.createElement("li",{className:"item"},s.apiName)),l.a.createElement("ul",{className:"detail-wrapper"},l.a.createElement("li",{className:"item"},"详情："),l.a.createElement("li",{className:"item"},"状态：",h),l.a.createElement("li",{className:"item"},"产品名称：",s.productName),l.a.createElement("li",{className:"item"},"统计协议：",s.property),l.a.createElement("li",{className:"item"},"统计精度：",b),l.a.createElement("li",{className:"item"},"返回值计算规则：",this._ruleType(s.ruleType))))))}}])&&d(t.prototype,n),i&&d(t,i),s}(i.Component);t.default=Object(u.b)((function(e){return{methodList:e.getIn(["customMethod","methodList"]).toJS(),pager:e.getIn(["customMethod","pager"]).toJS(),curApi:e.getIn(["customMethod","curApi"]).toJS(),methodListLoading:e.getIn(["customMethod","methodListLoading"])}}),(function(e){return{getMethodList:function(t){var n=s.a.getMethodList(t);e(n)},getMethodDetail:function(t){var n=s.a.getMethodDetail(t);e(n)}}}))(O)},1500:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return We}));n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(32),n(31);var r=n(0),o=n.n(r),a=n(42),c=(n(98),n(39)),i=(n(298),n(155)),l=(n(33),n(35),n(363),n(65),n(198),n(34),n(43),n(44),n(166)),u=n(3),s=n(1426),f=n(484),p=n(717);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={},h=function(){return p.b.slice(1).map((function(e){return e.id})).join(",")},v=function(){return{type:l.b}},g=function(){return{type:l.c}},O=function(){return function(e){var t;e({type:l.e}),(t=m({},b),u.c.Post("manage-open/auditScene/getSceneList",t).then((function(e){return{list:e.data.data.list,pager:e.data.data.pager,code:e.data.code,data:e}}))).then((function(t){var n=t.code,r=t.list,o=t.pager;e(0===n?function(e){var t=e.list,n=e.pager;return{type:l.d,list:t,pager:n}}({list:r,pager:o}):v())})).catch((function(t){e(v())}))}},E=function(e){var t,n,r=e.types;r||(r=h()),t=b,n=m(m({},e),{},{types:r}),Object.keys(n).forEach((function(e){var r,o=n[e],a=!(null==(r=o)||""===r);!a&&e in t?delete t[e]:a&&(t[e]=o)}))},w=function(e){var t=e.id,n=e.productId;return function(r){var o,a=i.a.loading("正在读取详情数据...",0);(o={id:t,productId:n},u.c.Post("manage-open/auditScene/getSceneDetailById",o,{isModalError:!0})).then((function(n){var o,c=n.data,i=c.code,u=c.data;c.msg;(a(),0===i)&&(r((o=m(m({},u),{},{prevDetailData:e}),{type:l.f,detailData:o})),1!==u.readStatus&&Object(s.b)({id:t}).then((function(e){0===e.data.code&&r(Object(f.getMsgCount)())})))})).catch((function(e){a()}))}},j=function(e){return function(t){var n;t({type:l.h}),(n=e,u.c.Post("manage-open/auditScene/update",n,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},isModalError:!0})).then((function(e){0===e.data.code?(i.a.success("提交审核成功"),t({type:l.g}),t(O())):t(g())})).catch((function(e){t(g())}))}},P=(n(75),n(20)),S=(n(197),n(76)),k=(n(154),n(40)),D=(n(136),n(68));n(117);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(c,e);var t,n,r,a=A(c);function c(){var e;R(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).sty={width:"193px"},e.checkProductId=function(e,t,n){void 0===t||/^\d*?$/.test(t)?n():n("产品ID仅为数字!")},e.onSearch=function(t){t.preventDefault();var n=e.props,r=n.form,o=n.changeSearchData,a=n.getList;r.validateFields().then((function(e){o(T(T({},e),{},{pageIndex:1})),a()})).catch((function(e){i.a.warn("请根据提示完成选项")}))},e.clear=function(){e.props.form.setFieldsValue({productId:"",statu:void 0})},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=(e.serverTypeList,e.checkerList),n=e.isLoading,r=e.form.getFieldDecorator,a=!!n;return o.a.createElement(k.a,{layout:"inline",onSubmit:this.onSearch},o.a.createElement(k.a.Item,{label:"产品ID"},r("productId",{rules:[{validator:this.checkProductId}]})(o.a.createElement(D.a,{placeholder:"请输入产品ID",maxLength:30,allowClear:!0}))),o.a.createElement(k.a.Item,{label:"审核状态"},r("statu",{initialValue:void 0})(o.a.createElement(S.a,{placeholder:"请选择审核状态",style:this.sty},t.map((function(e){var t=e.id,n=e.value;return o.a.createElement(S.a.Option,{value:t,key:t},n)}))))),o.a.createElement(k.a.Item,null,o.a.createElement(P.a,{icon:"search",type:"primary",htmlType:"submit",loading:a},"搜索")),o.a.createElement(k.a.Item,null,o.a.createElement(P.a,{onClick:this.clear},"重置")))}}])&&x(t.prototype,n),r&&x(t,r),c}(r.Component),B=k.a.create({name:"SearchServerAudit"})(F),z=Object(a.b)((function(e,t){var n=e.get("sceneChecker");return{serverTypeList:n.serverTypeList,checkerList:n.checkerList,isLoading:n.isLoading}}),(function(e,t){return{changeSearchData:E,getList:function(){return e(O())}}}))(B);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(l,e);var t,n,a,i=U(l);function l(){return V(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(c.a,null,o.a.createElement("h2",{className:"page-title"},"场景服务审核"),o.a.createElement(z,null)),o.a.createElement("div",{className:"page-interval"}))}}])&&q(t.prototype,n),a&&q(t,a),l}(r.Component),G=(n(301),n(173)),$=(n(221),n(83)),X=n(106),Q=n(4),Z=n.n(Q);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){if(!e)return null;var t=Z()(e);return t.add(t.utcOffset()/60,"h").format("YYYY-MM-DD HH:mm:ss")},le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(l,e);var t,n,a,c=oe(l);function l(){var e;te(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=c.call.apply(c,[this].concat(n))).columns=[{title:"产品ID",dataIndex:"productId",key:"productId"},{title:"产品名称",dataIndex:"productName",key:"productName"},{title:"提交用户",dataIndex:"email",key:"email"},{title:"状态",dataIndex:"statu",key:"statu",render:function(e){var t=0===e?"待审核":"已审核",n={color:0===e?"blue":"green"};return o.a.createElement("span",{style:n},t)}},{title:"申请日期",dataIndex:"createTime",key:"createTime",render:function(e){return ie(e)}},{title:"操作",dataIndex:"id",key:"done",width:"120px",render:function(t,n){var a=n.statu,c=0===a?"form":"search",i=0===a?"审核":"查看",l=0===a?"primary":void 0;return o.a.createElement(r.Fragment,null,o.a.createElement($.a,{title:i,placement:"top"},o.a.createElement(P.a,{shape:"circle",type:l,icon:c,size:"small",onClick:function(){return e.openModal(n)}})))}}],e.openModal=function(t){e.props.getDetailAndOpenModal(t)},e.setPage=function(t){var n=e.props,r=n.pager.totalPages,o=n.changeSearchData,a=n.getList;t>r?i.a.warning("输入页码超过总页数！"):(o({pageIndex:t}),a())},e.tryAgain=function(){e.props.getList()},e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.pager,r=e.isLoading,a=void 0!==r&&r,c=e.isError;return void 0!==c&&c?o.a.createElement(G.a,{status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:o.a.createElement(P.a,{type:"primary",onClick:this.tryAgain},"重 试")}):o.a.createElement(X.a,{className:"page-table",bordered:!0,columns:this.columns,dataSource:t,rowKey:"id",onPageChange:this.setPage,pager:n,loading:a})}}])&&ne(t.prototype,n),a&&ne(t,a),l}(r.Component),ue=Object(a.b)((function(e,t){var n=e.get("sceneChecker");return{serverTypeMap:n.serverTypeMap,checkerMap:n.checkerMap,list:n.list,pager:n.pager,isLoading:n.isLoading,isError:n.isError}}),(function(e,t){return{changeSearchData:E,getList:function(){return e(O())},getDetailAndOpenModal:function(t){return e(w(t))}}}))(le);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);if(t){var o=be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(i,e);var t,n,r,a=me(i);function i(){return fe(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement(c.a,null,o.a.createElement(ue,null))}}])&&pe(t.prototype,n),r&&pe(t,r),i}(r.Component),ve=(n(168),n(255),n(127)),ge=(n(300),n(156)),Oe=(n(304),n(64)),Ee=(n(467),n(171));function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ie(e);if(t){var o=Ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(i,e);var t,n,a,c=ke(i);function i(){var e;je(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=c.call.apply(c,[this].concat(n))).redSty={color:"red"},e.greenSty={color:"green"},e.tableScroll={y:240},e.columns=[{title:"序号",dataIndex:"deviceCmdId",key:"deviceCmdId",width:60,render:function(e,t,n){return n+1}},{title:"功能名称",dataIndex:"name",width:200,key:"name",render:function(e){return o.a.createElement("div",{className:"page-ellipsis",style:{width:"183px"},title:e},e)}},{title:"类型",dataIndex:"cmdType",key:"cmdType",width:80,render:function(t){return e.props.sceneType[t]}},{title:"触发协议",dataIndex:"protocolName",key:"protocolName",width:200,render:function(e){return o.a.createElement("div",{className:"page-ellipsis",style:{width:"183px"},title:e},e)}},{title:"触发参数",dataIndex:"triggerParam",width:200,key:"triggerParam",render:function(e){var t=e||"-";return o.a.createElement("div",{className:"page-ellipsis",style:{width:"183px"},title:t},t)}},{title:"审核操作",dataIndex:"deviceCmdId",key:"done",render:function(t,n){var r=n.status,a=e.props.form,c=a.getFieldDecorator,i="statu-"+t,l=(0,a.getFieldValue)(i);return 0===r?o.a.createElement(k.a.Item,null,c(i,{rules:[{required:!0,message:"请选择审核意见"}]})(o.a.createElement(Ee.a.Group,null,o.a.createElement(Ee.a,{value:1},o.a.createElement("span",{style:1===l?e.greenSty:null},"通过")),o.a.createElement(Ee.a,{value:2},o.a.createElement("span",{style:2===l?e.redSty:null},"不通过"))))):1===r?o.a.createElement("span",{style:e.greenSty},"通过"):o.a.createElement("span",{style:e.redSty},"不通过")}}],e.getPopupContainer=function(e){return e.parentNode},e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.detailData,n=e.form,a=n.getFieldDecorator,c=n.getFieldValue,i=t||{},l=i.status,u=i.remark,s=i.sceneFunctionList,f=i.typeName,p=i.productName,y=i.prevDetailData,m=(y=void 0===y?{}:y).email,d=y.createTime,b=y.updateTime,h=0===l&&void 0!==l,v=2===l,g=s||[],O=g.map((function(e){var t=e.deviceCmdId;return c("statu-"+t)})),E=g.length>4,w=O.indexOf(2)>-1;return o.a.createElement(r.Fragment,null,o.a.createElement(Oe.a,{title:"基础信息",column:2,size:"small"},o.a.createElement(Oe.a.Item,{label:"产品名称"},p),o.a.createElement(Oe.a.Item,{label:"所属分类"},f),o.a.createElement(Oe.a.Item,{label:"服务类型"},"场景联动服务"),o.a.createElement(Oe.a.Item,{label:"申请账号"},m),o.a.createElement(Oe.a.Item,{label:"申请时间"},ie(d)),!h&&b?o.a.createElement(Oe.a.Item,{label:"处理时间"},ie(b)):null),o.a.createElement(Oe.a,{title:"审核内容",size:"small"}),o.a.createElement(ge.a,{bordered:!0,className:"page-server-table",size:"small",columns:this.columns,dataSource:g,rowKey:"deviceCmdId",pagination:!1,scroll:E?this.tableScroll:void 0}),o.a.createElement("div",{className:"page-interval"}),h&&w?o.a.createElement(r.Fragment,null,o.a.createElement(Oe.a,{title:"驳回说明",size:"small"}),o.a.createElement(k.a.Item,null,a("remark",{})(o.a.createElement(D.a.TextArea,{rows:3,maxLength:500,placeholder:"请输入驳回说明"})))):null,v?o.a.createElement(Oe.a,{title:"驳回说明",size:"small"},o.a.createElement(Oe.a.Item,{span:3},u)):null)}}])&&Pe(t.prototype,n),a&&Pe(t,a),i}(r.Component);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Le(e);if(t){var o=Le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(e,t){if(t&&("object"===Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(c,e);var t,n,r,a=Ae(c);function c(){var e;Re(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).closeModal=function(){e.props.closeModal()},e.submit=function(){var t=e.props,n=t.detailData,r=t.form,o=t.checkForAPP;r.validateFields().then((function(e){var t=n.id,r=n.sceneFunctionList;o({id:t,list:r.map((function(t){var n=t.deviceCmdId;return{deviceCmdId:n,cmdType:t.cmdType,status:e["statu-"+n]}})),remark:e.remark||""})})).catch((function(e){i.a.warn("请根据提示完成选项")}))},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.showDetailModal,n=(e.serverTypeMap,e.sceneType),r=e.detailData,a=e.isSaving,c=e.form,i={};return 0===(r||{}).status||(i.footer=null),o.a.createElement(ve.a,Ce({width:1120,title:"场景服务审核",visible:t,okButtonProps:{loading:a},onOk:this.submit,onCancel:this.closeModal,destroyOnClose:!0},i),o.a.createElement(_e,{detailData:r,sceneType:n,form:c}))}}])&&xe(t.prototype,n),r&&xe(t,r),c}(r.Component),Be=k.a.create({name:"sceneAuditChecker"})(Fe),ze=Object(a.b)((function(e,t){var n=e.get("sceneChecker");return{showDetailModal:n.showDetailModal,serverTypeMap:n.serverTypeMap,sceneType:n.sceneType,detailData:n.detailData,isSaving:n.isSaving}}),(function(e,t){return{closeModal:function(){return e({type:l.a})},checkForAPP:function(t){return e(j(t))}}}))(Be);n(1474);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);if(t){var o=Ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(i,e);var t,n,a,c=He(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=c.call(this,e),e.init(),t}return t=i,(n=[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(W,null),o.a.createElement(he,null),o.a.createElement(ze,null))}}])&&Ve(t.prototype,n),a&&Ve(t,a),i}(r.Component),We=Object(a.b)(void 0,(function(e,t){return{init:function(){return e((function(e){b={pageRows:10,pageIndex:1,types:h()},O()(e)}))},getDetailAndOpenModal:function(t){return e(w(t))}}}))(Ye)},1502:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Qe}));n(97),n(474),n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(32),n(31);var r=n(0),o=n.n(r),a=n(42),c=(n(98),n(39)),i=(n(298),n(155)),l=(n(33),n(35),n(363),n(65),n(198),n(34),n(43),n(44),n(165)),u=n(1426),s=n(484),f=n(716);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={},b=function(){return f.b.slice(1).map((function(e){return e.id})).join(",")},h=function(e){var t=e.list,n=e.pager;return{type:l.d,list:t,pager:n}},v=function(){return{type:l.b}},g=function(){return{type:l.c}},O=function(){return function(e){e({type:l.e}),Object(u.d)(y({},d)).then((function(t){var n=t.code,r=t.list,o=t.pager;e(0===n?h({list:r,pager:o}):v()),e(h({list:r,pager:o}))})).catch((function(t){e(v())}))}},E=function(e){var t,n,r=e.types;r||(r=b()),t=d,n=y(y({},e),{},{types:r}),Object.keys(n).forEach((function(e){var r,o=n[e],a=!(null==(r=o)||""===r);!a&&e in t?delete t[e]:a&&(t[e]=o)}))},w=function(e){var t=e.productId,n=e.typeId,r=e.id;return function(o){var a=i.a.loading("正在读取详情数据...",0);Object(u.c)({productId:t,typeId:n,id:r}).then((function(t){var n,r=t.data,c=r.code,i=r.data;r.msg;if(a(),0===c){o((n=y(y({},i),{},{prevDetailData:e}),{type:l.f,detailData:n}));var f=i.flowCheck,p=f.id;1!==f.readStatus&&Object(u.b)({id:p}).then((function(e){0===e.data.code&&o(Object(s.getMsgCount)())}))}})).catch((function(e){a()}))}},j=function(e){var t=e.id,n=e.statu,r=e.remark,o={id:t,statu:n};return r&&(o.remark=r),function(e){e({type:l.h}),Object(u.a)(o).then((function(t){var n=t.data,r=n.code;n.data,n.msg;0===r?(i.a.success("提交审核成功"),e({type:l.g}),e(O())):e(g())})).catch((function(t){e(g())}))}},P=(n(75),n(20)),S=(n(197),n(76)),k=(n(154),n(40)),D=(n(136),n(68));n(117);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(c,e);var t,n,r,a=A(c);function c(){var e;R(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).sty={width:"193px"},e.checkProductId=function(e,t,n){void 0===t||/^\d*?$/.test(t)?n():n("产品ID仅为数字!")},e.onSearch=function(t){t.preventDefault();var n=e.props,r=n.form,o=n.changeSearchData,a=n.getList;r.validateFields().then((function(e){o(T(T({},e),{},{pageIndex:1})),a()})).catch((function(e){i.a.warn("请根据提示完成选项")}))},e.clear=function(){e.props.form.setFieldsValue({productId:"",statu:void 0})},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.checkerList,n=e.isLoading,r=e.form.getFieldDecorator,a=!!n;return o.a.createElement(k.a,{layout:"inline",onSubmit:this.onSearch},o.a.createElement(k.a.Item,{label:"产品ID"},r("productId",{rules:[{validator:this.checkProductId}]})(o.a.createElement(D.a,{placeholder:"请输入产品ID",maxLength:30,allowClear:!0}))),o.a.createElement(k.a.Item,{label:"审核状态"},r("statu",{initialValue:void 0})(o.a.createElement(S.a,{placeholder:"请选择审核状态",style:this.sty},t.map((function(e){var t=e.id,n=e.value;return o.a.createElement(S.a.Option,{value:t,key:t},n)}))))),o.a.createElement(k.a.Item,null,o.a.createElement(P.a,{icon:"search",type:"primary",htmlType:"submit",loading:a},"搜索")),o.a.createElement(k.a.Item,null,o.a.createElement(P.a,{onClick:this.clear},"重置")))}}])&&x(t.prototype,n),r&&x(t,r),c}(r.Component),B=k.a.create({name:"SearchServerAudit"})(F),z=Object(a.b)((function(e,t){var n=e.get("serverChecker");return{serverTypeList:n.serverTypeList,checkerList:n.checkerList,isLoading:n.isLoading}}),(function(e,t){return{changeSearchData:E,getList:function(){return e(O())}}}))(B);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(l,e);var t,n,a,i=U(l);function l(){return V(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(c.a,null,o.a.createElement("h2",{className:"page-title"},"APP控制服务审核"),o.a.createElement(z,null)),o.a.createElement("div",{className:"page-interval"}))}}])&&q(t.prototype,n),a&&q(t,a),l}(r.Component),G=(n(301),n(173)),$=(n(221),n(83)),X=n(106),Q=n(4),Z=n.n(Q);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){if(!e)return null;var t=Z()(e);return t.add(t.utcOffset()/60,"h").format("YYYY-MM-DD HH:mm:ss")},le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(l,e);var t,n,a,c=oe(l);function l(){var e;te(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=c.call.apply(c,[this].concat(n))).columns=[{title:"产品ID",dataIndex:"productId",key:"productId"},{title:"产品名称",dataIndex:"productName",key:"productName"},{title:"提交用户",dataIndex:"email",key:"email"},{title:"状态",dataIndex:"statu",key:"statu",render:function(t){var n=e.props.checkerMap[t],r={color:2===t?"red":1===t?"green":"blue"};return o.a.createElement("span",{style:r},n)}},{title:"申请日期",dataIndex:"createTime",key:"createTime",render:function(e){return ie(e)}},{title:"操作",dataIndex:"id",key:"done",width:"120px",render:function(t,n){var a=n.statu,c=0===a?"form":"search",i=0===a?"审核":"查看",l=0===a?"primary":void 0;return o.a.createElement(r.Fragment,null,o.a.createElement($.a,{title:i,placement:"top"},o.a.createElement(P.a,{shape:"circle",type:l,icon:c,size:"small",onClick:function(){return e.openModal(n)}})))}}],e.openModal=function(t){e.props.getDetailAndOpenModal(t)},e.setPage=function(t){var n=e.props,r=n.pager.totalPages,o=n.changeSearchData,a=n.getList;t>r?i.a.warning("输入页码超过总页数！"):(o({pageIndex:t}),a())},e.tryAgain=function(){e.props.getList()},e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.pager,r=e.isLoading,a=void 0!==r&&r,c=e.isError;return void 0!==c&&c?o.a.createElement(G.a,{status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:o.a.createElement(P.a,{type:"primary",onClick:this.tryAgain},"重 试")}):o.a.createElement(X.a,{className:"page-table",bordered:!0,columns:this.columns,dataSource:t,rowKey:"id",onPageChange:this.setPage,pager:n,loading:a})}}])&&ne(t.prototype,n),a&&ne(t,a),l}(r.Component),ue=Object(a.b)((function(e,t){var n=e.get("serverChecker");return{serverTypeMap:n.serverTypeMap,checkerMap:n.checkerMap,list:n.list,pager:n.pager,isLoading:n.isLoading,isError:n.isError}}),(function(e,t){return{changeSearchData:E,getList:function(){return e(O())},getDetailAndOpenModal:function(t){return e(w(t))}}}))(le);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);if(t){var o=be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(i,e);var t,n,r,a=me(i);function i(){return fe(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement(c.a,null,o.a.createElement(ue,null))}}])&&pe(t.prototype,n),r&&pe(t,r),i}(r.Component),ve=(n(168),n(255),n(127)),ge=(n(467),n(171)),Oe=(n(846),n(497)),Ee=(n(304),n(64));function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ie(e);if(t){var o=Ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(l,e);var t,n,a,i=ke(l);function l(){var e;je(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).mlSty={marginLeft:"20px",wordBreak:"break-all"},e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.detailData,n=e.form,a=n.getFieldDecorator,i=n.getFieldValue,l=t||{},u=l.appProject,s=void 0===u?{}:u,f=l.flowCheck,p=void 0===f?{}:f,y=l.product,m=void 0===y?{}:y,d=m.productId,b=m.productName,h=m.allCategoryName,v=s.projectName,g=s.appName,O=s.qrcode,E=s.status,w=p.statu,j=p.remark,P=0===w,S=2===w,I=i("statu");return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{title:"基础信息",column:2,size:"small"},o.a.createElement(Ee.a.Item,{label:"产品名称"},b),o.a.createElement(Ee.a.Item,{label:"页面名称"},v),o.a.createElement(Ee.a.Item,{label:"产品ID"},d),o.a.createElement(Ee.a.Item,{label:"发布APP"},g),o.a.createElement(Ee.a.Item,{label:"所属分类"},h),o.a.createElement(Ee.a.Item,{label:"升级方式"},1===E?"普通升级":"强制升级")),o.a.createElement(Ee.a,{className:"page-nomb",title:P?"审核内容":"页面二维码",size:"small"}),o.a.createElement(c.a,{className:"page-ewm",hoverable:!0,cover:o.a.createElement("img",{alt:O?"预览二维码":"二维码未获取到",src:O})},o.a.createElement(c.a.Meta,{title:"扫描预览页面"})),o.a.createElement("div",{className:"page-interval"}),o.a.createElement(Ee.a,{className:"page-nomb",size:"small",title:P?"审核结果":o.a.createElement(r.Fragment,null,o.a.createElement("span",null,"审核状态"),o.a.createElement(Oe.a,{style:this.mlSty,status:1===w?"success":"error",text:1===w?"通过":"不通过"}))},P?o.a.createElement(Ee.a.Item,{span:3},o.a.createElement(k.a.Item,null,a("statu",{rules:[{required:!0,message:"请选择审核意见"}]})(o.a.createElement(ge.a.Group,null,o.a.createElement(ge.a,{value:1},"审核通过"),o.a.createElement(ge.a,{value:2},"审核不通过"))))):null),P&&2===I?o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{title:"驳回说明",size:"small"}),o.a.createElement(k.a.Item,{className:"page-nomb"},a("remark",{})(o.a.createElement(D.a.TextArea,{rows:3,maxLength:500,placeholder:"请输入驳回说明"})))):null,S?o.a.createElement(Ee.a,{title:o.a.createElement(r.Fragment,null,o.a.createElement("span",null,"驳回说明"),o.a.createElement(Oe.a,{style:this.mlSty,status:"error",text:j||"无"})),size:"small"}):null)}}])&&Pe(t.prototype,n),a&&Pe(t,a),l}(r.Component);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ze(e);if(t){var o=ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){if(t&&("object"===Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(c,e);var t,n,r,a=Fe(c);function c(){var e;Ae(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).closeModal=function(){e.props.closeModal()},e.submit=function(){var t=e.props,n=t.detailData,r=t.form,o=t.checkForAPP;r.validateFields().then((function(e){var t=n.prevDetailData.type,r=void 0===t?11:t,a=n.flowCheck.id;11===r&&o(xe({id:a},e))})).catch((function(e){i.a.warn("请根据提示完成选项")}))},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.showDetailModal,n=e.serverTypeMap,r=(e.sceneType,e.detailData),a=e.isSaving,c=e.form,i=r||{},l=i.prevDetailData,u=i.flowCheck,s=(u=void 0===u?{}:u).statu,f=(l||{}).type,p=void 0===f?11:f,y=n[p],m=11===p?800:1080,d={};return 0===s||(d.footer=null),o.a.createElement(ve.a,Ce({width:m,title:y,visible:t,okButtonProps:{loading:a},onOk:this.submit,onCancel:this.closeModal,destroyOnClose:!0},d),o.a.createElement(_e,{detailData:r,form:c}))}}])&&Me(t.prototype,n),r&&Me(t,r),c}(r.Component),Ve=k.a.create({name:"serverAuditChecker"})(Je),qe=Object(a.b)((function(e,t){var n=e.get("serverChecker");return{showDetailModal:n.showDetailModal,serverTypeMap:n.serverTypeMap,sceneType:n.sceneType,detailData:n.detailData,isSaving:n.isSaving}}),(function(e,t){return{closeModal:function(){return e({type:l.a})},checkForAPP:function(t){return e(j(t))}}}))(Ve),He=n(30);n(1473);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$e(e);if(t){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ge(this,n)}}function Ge(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(i,e);var t,n,a,c=We(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=c.call(this,e),e.init(),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=He.d.getHrefParams(this.props.location.search)||{},t=e.id,n=e.productId,r=e.typeId;t&&n&&r&&this.props.getDetailAndOpenModal({id:t,productId:n,typeId:r})}},{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(W,null),o.a.createElement(he,null),o.a.createElement(qe,null))}}])&&Ke(t.prototype,n),a&&Ke(t,a),i}(r.Component),Qe=Object(a.b)(void 0,(function(e,t){return{init:function(){return e((function(e){d={pageRows:10,pageIndex:1,types:b()},O()(e)}))},getDetailAndOpenModal:function(t){return e(w(t))}}}))(Xe)},1503:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ie}));n(98);var r=n(39),o=(n(97),n(474),n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(32),n(31),n(0)),a=n.n(o),c=n(42),i=(n(298),n(155)),l=(n(33),n(35),n(34),n(43),n(44),n(167)),u=n(3),s=n(1426),f=n(484);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={},d=function(){return{type:l.b}},b=function(){return{type:l.c}},h=function(){return function(e){var t;e({type:l.e}),(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m),u.c.Post("manage-open/userAudit/getList",t).then((function(e){return{list:e.data.data.list,pager:e.data.data.pager,data:e,code:e.data.code}}))).then((function(t){var n=t.list,r=t.pager,o=t.code;e(0===o?function(e){var t=e.list,n=e.pager;return{type:l.d,list:t,pager:n}}({list:n,pager:r}):d())})).catch((function(){e(d())}))}},v=function(e){var t,n;t=m,n=e,Object.keys(n).forEach((function(e){var r,o=n[e],a=!(null==(r=o)||""===r);!a&&e in t?delete t[e]:a&&(t[e]=o)}))},g=function(e){var t=e.id;return function(n){var r,o=i.a.loading("正在读取详情数据...",0);(r={id:t},u.c.Post("manage-open/userAudit/get",r,{isModalError:!0})).then((function(r){var a,c=r.data,i=c.code,u=c.data;(o(),0===i)&&(n((a={data:u,prevDetailData:e},{type:l.f,detailData:a})),1!==u.readStatus&&Object(s.b)({id:t}).then((function(e){0===e.data.code&&n(Object(f.getMsgCount)())})))})).catch((function(e){o()}))}},O=function(e){var t=e.id,n=e.statu,r=e.remark,o={id:t,statu:n};return r&&(o.remark=r),function(e){e({type:l.h}),Object(s.a)(o).then((function(t){0===t.data.code?(i.a.success("提交审核成功"),e({type:l.g}),e(h())):e(b())})).catch((function(){e(b())}))}},E=(n(75),n(20)),w=(n(197),n(76)),j=(n(154),n(40)),P=(n(136),n(68));n(117),n(65);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(c,e);var t,n,r,o=R(c);function c(){var e;_(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).sty={width:"193px"},e.onSearch=function(t){t.preventDefault();var n=e.props,r=n.form,o=n.changeSearchData,a=n.getList;r.validateFields().then((function(e){o(D(D({},e),{},{pageIndex:1})),a()})).catch((function(){i.a.warn("请根据提示完成选项")}))},e.clear=function(){e.props.form.setFieldsValue({productName:"",statu:void 0})},e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.checkerList,n=e.isLoading,r=e.form.getFieldDecorator,o=!!n;return a.a.createElement(j.a,{layout:"inline",onSubmit:this.onSearch},a.a.createElement(j.a.Item,{label:"提交用户"},r("productName",{})(a.a.createElement(P.a,{placeholder:"请输入用户",maxLength:30,allowClear:!0}))),a.a.createElement(j.a.Item,{label:"审核状态"},r("statu",{initialValue:void 0})(a.a.createElement(w.a,{placeholder:"请选择审核状态",style:this.sty},t.map((function(e){var t=e.id,n=e.value;return a.a.createElement(w.a.Option,{value:t,key:t},n)}))))),a.a.createElement(j.a.Item,null,a.a.createElement(E.a,{type:"primary",icon:"search",htmlType:"submit",loading:o},"搜索")),a.a.createElement(j.a.Item,null,a.a.createElement(E.a,{onClick:this.clear},"重置")))}}])&&T(t.prototype,n),r&&T(t,r),c}(o.Component),M=j.a.create({name:"SearchUserAudit"})(A),L=Object(c.b)((function(e){var t=e.get("userChecker");return{checkerList:t.checkerList,isLoading:t.isLoading}}),(function(e){return{changeSearchData:v,getList:function(){return e(h())}}}))(M);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var o=H(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return q(this,n)}}function q(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(l,e);var t,n,c,i=V(l);function l(){return B(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return a.a.createElement(o.Fragment,null,a.a.createElement(r.a,null,a.a.createElement("h2",{className:"page-title"},"用户审核"),a.a.createElement(L,null)),a.a.createElement("div",{className:"page-interval"}))}}])&&z(t.prototype,n),c&&z(t,c),l}(o.Component),K=(n(301),n(173)),Y=(n(221),n(83)),W=n(106),G=n(4),$=n.n(G);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oe=function(e){if(!e)return null;var t=$()(e);return t.add(t.utcOffset()/60,"h").format("YYYY-MM-DD HH:mm:ss")},ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(l,e);var t,n,r,c=te(l);function l(){var e;Q(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=c.call.apply(c,[this].concat(n))).columns=[{title:"提交用户",dataIndex:"name",key:"name"},{title:"审核类型",dataIndex:"type",key:"type",render:function(e){return 12===e?"用户注销":"未知审核"}},{title:"状态",dataIndex:"status",key:"status",render:function(t){var n=e.props.checkerMap[t],r={color:2===t?"red":1===t?"green":"blue"};return a.a.createElement("span",{style:r},n)}},{title:"申请日期",dataIndex:"createTime",key:"createTime",render:function(e){return oe(e)}},{title:"操作",dataIndex:"id",key:"done",width:"120px",render:function(t,n){var r=n.statu,c=0===r?"form":"search",i=0===r?"审核":"查看",l=0===r?"primary":void 0;return a.a.createElement(o.Fragment,null,a.a.createElement(Y.a,{title:i,placement:"top"},a.a.createElement(E.a,{shape:"circle",type:l,icon:c,size:"small",onClick:function(){return e.openModal(n)}})))}}],e.openModal=function(t){e.props.getDetailAndOpenModal(t)},e.setPage=function(t){var n=e.props,r=n.pager.totalPages,o=n.changeSearchData,a=n.getList;t>r?i.a.warning("输入页码超过总页数！"):(o({pageIndex:t}),a())},e.tryAgain=function(){e.props.getList()},e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.pager,r=e.isLoading,o=void 0!==r&&r,c=e.isError;return void 0!==c&&c?a.a.createElement(K.a,{status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:a.a.createElement(E.a,{type:"primary",onClick:this.tryAgain},"重 试")}):a.a.createElement(W.a,{bordered:!0,columns:this.columns,dataSource:t,rowKey:"id",onPageChange:this.setPage,pager:n,loading:o})}}])&&Z(t.prototype,n),r&&Z(t,r),l}(o.Component),ce=Object(c.b)((function(e){var t=e.get("userChecker");return{checkerMap:t.checkerMap,list:t.list,pager:t.pager,isLoading:t.isLoading,isError:t.isError}}),(function(e){return{changeSearchData:v,getList:function(){return e(h())},getDetailAndOpenModal:function(t){return e(g(t))}}}))(ae),ie=(n(168),n(255),n(127)),le=(n(846),n(497)),ue=(n(304),n(64));function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=he(e);if(t){var o=he(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return be(this,n)}}function be(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(i,e);var t,n,r,c=de(i);function i(){var e;pe(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=c.call.apply(c,[this].concat(n))).mlSty={marginLeft:"20px"},e.redStyle={color:"red"},e.greenStyle={color:"green"},e.closeModal=function(){e.props.closeModal()},e.submit=function(){var t=e.props,n=t.detailData.prevDetailData.id;(0,t.checkForUser)({id:n,statu:1})},e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.showDetailModal,n=e.detailData,r=e.isSaving,c=n&&n.data||{},i=c.developerId,l=c.mobilePhone,u=c.createTime,s=c.email,f=c.contactPerson,p=c.contactAddr,y=c.reason,m=c.appApply,d=c.hardware,b=c.status,h=void 0===b?0:b,v=0===h,g={};return v||(g.footer=null),a.a.createElement(ie.a,fe({width:800,title:"用户注销审核",visible:t,okButtonProps:{loading:r},okText:"审核通过",onOk:this.submit,onCancel:this.closeModal,destroyOnClose:!0},g),a.a.createElement(ue.a,{title:"账号信息",column:2,size:"small"},a.a.createElement(ue.a.Item,{label:"账号ID"},i),a.a.createElement(ue.a.Item,{label:"注册时间"},function(e){if(!e)return null;var t=$()(e);return t.add(t.utcOffset()/60,"h").format("YYYY-MM-DD HH:mm:ss")}(u)),a.a.createElement(ue.a.Item,{label:"手机号码"},l),a.a.createElement(ue.a.Item,{label:"电子邮箱"},s),a.a.createElement(ue.a.Item,{label:"联系人"},f),a.a.createElement(ue.a.Item,{label:"联系地址"},p)),a.a.createElement(ue.a,{size:"small",title:"注销说明",column:2},a.a.createElement(ue.a.Item,{label:"注销原因",span:2},y),a.a.createElement(ue.a.Item,{label:"保持应用可用"},1===m?a.a.createElement("span",{style:this.greenStyle},"保持应用&APP可用"):2===m?a.a.createElement("span",{style:this.redStyle},"应用&APP不可用"):null),a.a.createElement(ue.a.Item,{label:"保持硬件可用"},1===d?a.a.createElement("span",{style:this.greenStyle},"保持硬件可用"):2===d?a.a.createElement("span",{style:this.redStyle},"硬件产品不可用"):null)),v?null:a.a.createElement(ue.a,{className:"page-nomb",size:"small",title:a.a.createElement(o.Fragment,null,a.a.createElement("span",null,"审核结果"),a.a.createElement(le.a,{style:this.mlSty,status:1===h?"success":"error",text:1===h?"通过":"不通过"}))}),a.a.createElement("div",{className:"page-interval"}),a.a.createElement("div",{className:"page-interval"}),a.a.createElement("div",{className:"page-interval"}))}}])&&ye(t.prototype,n),r&&ye(t,r),i}(o.Component),ge=Object(c.b)((function(e){var t=e.get("userChecker");return{showDetailModal:t.showDetailModal,detailData:t.detailData,isSaving:t.isSaving}}),(function(e){return{closeModal:function(){return e({type:l.a})},checkForUser:function(t){return e(O(t))}}}))(ve),Oe=n(30);n(1475);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke(e);if(t){var o=ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(l,e);var t,n,c,i=Pe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=i.call(this,e),e.init(),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=(Oe.d.getHrefParams(this.props.location.search)||{}).id,t=void 0===e?null:e;t&&this.props.getDetailAndOpenModal({id:t})}},{key:"render",value:function(){return a.a.createElement(o.Fragment,null,a.a.createElement(U,null),a.a.createElement(r.a,null,a.a.createElement(ce,null)),a.a.createElement(ge,null))}}])&&we(t.prototype,n),c&&we(t,c),l}(o.Component),Ie=Object(c.b)(void 0,(function(e){return{init:function(){return e((function(e){m={pageRows:10,pageIndex:1},h()(e)}))},getDetailAndOpenModal:function(t){return e(g(t))}}}))(De)},1513:function(e,t,n){"use strict";n.r(t);n(97),n(256);var r=n(0),o=n.n(r),a=n(58),c=(n(48),n(49),n(19),n(34),n(43),n(33),n(44),n(37),n(22),n(38),n(29),n(32),n(31),n(98),n(39)),i=(n(197),n(76)),l=(n(136),n(68)),u=(n(221),n(83)),s=(n(75),n(20)),f=(n(255),n(127)),p=(n(154),n(40)),y=(n(117),n(170),n(65),n(35),n(30)),m=n(42),d=(n(467),n(171));function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(c,e);var t,n,r,a=O(c);function c(){var e;h(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={statu:1,remark:""},e.onChange=function(t){var n=t.target.value;e.setState({statu:n})},e.changeText=function(t){e.setState({remark:t.target.value||""})},e}return t=c,(n=[{key:"render",value:function(){var e=this.state.statu;return o.a.createElement("div",{className:"audit-modal"},o.a.createElement("span",{className:"label"},"审核结果："),o.a.createElement(d.a.Group,{value:e,buttonStyle:"solid",onChange:this.onChange},o.a.createElement(d.a.Button,{value:1},"通过"),o.a.createElement(d.a.Button,{value:2},"不通过")),e&&2==e?o.a.createElement("div",{style:{marginTop:10}},o.a.createElement("span",{className:"label"},"说明："),o.a.createElement(l.a.TextArea,{style:{height:100,marginTop:10},onChange:this.changeText})):null)}}])&&v(t.prototype,n),r&&v(t,r),c}(r.Component),P=n(493),S=n(106),k=n(1421),D=n(1423);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=p.a.Item,F={0:"待审核",1:"通过",2:"未通过"},B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(m,e);var t,n,r,a=x(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=a.call(this,e)).handleAudit=function(e){var n=A(t);f.a.confirm({width:520,title:e.typeName+"审核",centered:!0,okText:"确定",cancelText:"取消",maskClosable:!0,content:o.a.createElement(j,{ref:function(e){return n.refDadio=e}}),onOk:function(){n.props.updateAuditStatus(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},n.refDadio.state))},onCancel:function(){}})},t.handleClick=function(e){t.props.history.push(e)},t.state={serviceList:[],loading:!1,totalRows:"",pageIndex:"",oldParams:{},query:{}},t}return t=m,(n=[{key:"render",value:function(){var e=this,t=[{title:"产品ID",dataIndex:"productId",key:"productId",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"产品名称",dataIndex:"productName",key:"productName",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"发布用户",dataIndex:"email",key:"email",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"审核类型",dataIndex:"typeName",key:"typeName",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"状态",key:"statuName",width:"120px",render:function(e){return o.a.createElement("span",{style:{color:"".concat(["#0000FF","#333333","#D9001B"][e.statu])}},e.statuName)}},{title:"申请时间",dataIndex:"createTime",key:"createTime",render:function(e){var t=y.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return o.a.createElement("span",{title:t},t)}},{title:"操作",key:"operation",width:"140px",render:function(t){return o.a.createElement("div",null,o.a.createElement(u.a,{placement:"top",title:"审核"},o.a.createElement(s.a,{icon:"file-done",shape:"circle",size:"small",type:0===t.statu?"primary":void 0,onClick:0===t.statu?e.handleAudit.bind(e,t):null})),"  ",o.a.createElement(u.a,{placement:"top",title:"查看"},o.a.createElement(s.a,{icon:"info",shape:"circle",size:"small",onClick:e.handleClick.bind(e,"./".concat(t.productId,"/").concat(t.id))})))}}],n=this.props.form.getFieldDecorator,r=this.props,a=r.productAuditList,f=r.pager,m=r.loading;return o.a.createElement("div",{className:"ProductAuditContent"},o.a.createElement(k.a,{title:"产品审核"},o.a.createElement(p.a,{layout:"inline"},o.a.createElement(L,{label:"产品ID"},n("productId",{getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(o.a.createElement(l.a,{placeholder:"请输入产品ID",maxLength:9,style:{width:240},onPressEnter:this.props.onFilter}))),o.a.createElement(L,{label:"状态"},n("statu")(o.a.createElement(i.a,{style:{width:160},placeholder:"请选择状态"},Object.keys(F).map((function(e,t){return o.a.createElement(i.a.Option,{key:t,value:+e},F[e])}))))),o.a.createElement(L,null,o.a.createElement(s.a,{type:"primary",onClick:this.props.onFilter},"查询")),o.a.createElement(L,{style:{marginBottom:"0"}},o.a.createElement(s.a,{onClick:this.props.onReset},"重置")))),o.a.createElement(c.a,{className:"ProductAuditContent_Table",style:{marginTop:10}},o.a.createElement(S.a,{rowKey:"id",bordered:!0,columns:t,dataSource:a,pager:f,onPageChange:this.props.onChange,loading:m})))}}])&&C(t.prototype,n),r&&C(t,r),m}(r.Component),z=Object(m.b)((function(e){return{productAuditList:e.getIn(["productAudit","productAuditList"]).toJS(),pager:e.getIn(["productAudit","pager"]).toJS(),loading:e.getIn(["productAudit","loading"])}}),(function(e){return{getList:function(t){return e(P.a.getAuditList(t))},updateAuditStatus:function(t){return e(P.a.updateAuditStatus(t))}}}))(p.a.create()(Object(D.a)(B))),J=(n(299),n(107)),V=(n(69),n(470),n(302),n(714)),q=n(479),H=n(184),U=n(799);n(847);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ee(e);if(t){var o=ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=J.a.TabPane,ne={0:"普通设备",1:"网关设备"},re={0:"初级鉴权",1:"中级鉴权",2:"高级鉴权"},oe=function(e){var t=e.label,n=e.value,r=e.visible;return o.a.createElement("div",{className:"info-item"},o.a.createElement("span",{className:"label"},t,"："),r?o.a.createElement(V.a,{label:n}):o.a.createElement("span",null,n))},ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(c,e);var t,n,r,a=Q(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).delaData=function(e){var t=[];return e.forEach((function(e){e.funcParamList&&e.funcParamList.length&&e.funcParamList.forEach((function(n){var r=JSON.parse(JSON.stringify(e));t.push(W(W({},r),n))}))})),t.forEach((function(e,t){e.key=t})),t},t.getPhysicalData=function(e){t.setState({tableComloading:!0}),Object(q.c)({id:e}).then((function(e){if(0==e.data.code){var n=t.delaData(e.data.data.standard||[]);t.setState({showPhysicalList:n}),t.tabcallback("1",n)}})).finally((function(){return t.setState({tableComloading:!1})}))},t.tabcallback=function(e,n){n=n||t.state.showPhysicalList,t.setState({currentPhysicalTab:e});var r=["properties","events","services"],o=n.filter((function(t){if(t.funcType==r[e-1])return t}));t.setState({dataSource:o})},t.state={showPhysicalList:[],currentPhysicalTab:"1",dataSource:[],physicalModelId:e.showProductDetail.physicalModelId,tableComloading:!1},t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.productId;this.props.getProduct(e)}},{key:"componentDidUpdate",value:function(e){if(this.props.showProductDetail){var t=this.props.showProductDetail.physicalModelId;e.showProductDetail.physicalModelId!==t&&this.getPhysicalData(t)}}},{key:"componentWillUnmount",value:function(){this.props.clearProductInfo()}},{key:"render",value:function(){var e=this,t=this.state,n=t.showPhysicalList,r=t.currentPhysicalTab,a=t.dataSource,c=t.tableComloading,i=this.props,l=i.productDetail,u=i.audit,s=i.showProductDetail,f=void 0===s?{}:s;f||(f={});var p=l.product||{},y=(p.productName,p.allCategoryName,p.bindTypeName,p.productCode,p.productClassName,p.protocolFormatName,p.productClassId),m=(p.productIdHex,p.deviceKey,p.ssid,p.ssidPassword,p.accessModeName,p.barCode,p.radiocastName),d=(p.gatewayCommTypeName,p.isRelatedGateway),b=(p.netTypeName,p.productId,p.accessModeId,p.authorityType,l.communicateModule||{}),h=b.modulePicture,v=b.modulePictureName,g=b.hetModuleTypeName,O=b.originalModuleTypeName,E=b.sizeWidth,w=b.sizeHeight,j=b.sizeThickness,P=b.moduleTypeNameList,S=b.communicateSpeed,k=b.networkTypeNameList,D=b.burnFileName,I=b.burnFileVersion,_=b.burnFile,T=b.commFreq,C=b.supportSocProject,R=b.sourceCode,x=b.sourceCodeName,N=b.sourceCodeVersion,A=l.productCommerceInfo||{},M=A.productPic,L=A.size,F=A.weight,B=A.introduction,z=A.productParam,V=A.instruction,q=A.supplier,H=A.contact,K=A.tel;return M=M&&/^\[.*\]$/.test(M.toString())?JSON.parse(M).filter((function(e){return e})):[],V=V&&/^\[.*\]$/.test(V.toString())?JSON.parse(V).filter((function(e){return e})):[],o.a.createElement("div",{className:"product-info"},o.a.createElement("div",{className:"info-item product-info-detail"},o.a.createElement("h3",null,"产品信息"),o.a.createElement("div",{className:"product-info-msg"},o.a.createElement(oe,{label:"产品名称",value:f.productName||""}),o.a.createElement(oe,{label:"产品型号",value:f.productCode||""}),o.a.createElement(oe,{label:"产品ID",value:f.productId||""}),o.a.createElement(oe,{label:"所属分类",value:f.deviceTypeName||""}),o.a.createElement(oe,{label:"产品类型",value:ne[f.productClassId]}))),o.a.createElement("div",{className:"info-item technical-detail",style:{display:"".concat(u?"none":"block")}},o.a.createElement("h3",null,"技术方案"),o.a.createElement("div",{className:"product-info-msg"},o.a.createElement(oe,{label:"通信方式",value:f.bindTypeName}),o.a.createElement(oe,{label:"配网方式",value:f.netTypeName}),1===y?o.a.createElement(oe,{label:"是否接入网关",value:d&&1===d?"是":"否"}):null,o.a.createElement(oe,{label:"产品编码",value:f.productIdHex}),o.a.createElement(oe,{label:"产品密钥",value:f.deviceKey,visible:!0}),o.a.createElement(oe,{label:"安全认证级别",value:re[f.authorityType]}),o.a.createElement(oe,{label:"通信模组",value:f.moduleName}),o.a.createElement(oe,{label:"AP-SSID/广播名",value:m}))),o.a.createElement("div",{className:"info-item protocol-detail",style:{display:"".concat(u?"none":"block"),marginBottom:0}},o.a.createElement("h3",null,"产品协议"),n.length?o.a.createElement("div",null,o.a.createElement(J.a,{activeKey:r,onChange:function(t){return e.tabcallback(t)}},o.a.createElement(te,{tab:"属性",key:"1"}),o.a.createElement(te,{tab:"事件",key:"2"}),o.a.createElement(te,{tab:"服务",key:"3"})),o.a.createElement("div",{className:"white"},o.a.createElement(U.a,{dataSource:a,pagination:!1,loading:c}))):null),o.a.createElement("div",{style:{height:"60px",width:"100%",background:"#f6f6f6"}}),o.a.createElement("div",{className:"info-item module-detail",style:{display:"".concat(u?"none":"block"),marginTop:20}},o.a.createElement("h3",null,"通信模组"),o.a.createElement("div",{className:"module-wrap img-wrap"},o.a.createElement("img",{src:h,alt:v}),o.a.createElement("span",{className:"module-name"},g),o.a.createElement("div",null,o.a.createElement("span",null,"芯片："),o.a.createElement("span",null,O)),o.a.createElement("div",null,o.a.createElement("span",null,"尺寸："),o.a.createElement("span",null,E&&w&&j?"".concat(E,"*").concat(w,"*").concat(j," mm"):""))),o.a.createElement("div",{className:"module-wrap list-wrap"},o.a.createElement("h4",null,"通信参数设置："),o.a.createElement("table",{className:"module-table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"left"},"支持通信"),o.a.createElement("td",{className:"right"},P)),o.a.createElement("tr",null,o.a.createElement("td",{className:"left"},"配网方式"),o.a.createElement("td",{className:"right"},k)),o.a.createElement("tr",null,o.a.createElement("td",{className:"left"},"通信速率"),o.a.createElement("td",{className:"right"},"".concat(S||0," bps"))),o.a.createElement("tr",null,o.a.createElement("td",{className:"left"},"通信频率"),o.a.createElement("td",{className:"right"},"".concat(T||0," s")))))),o.a.createElement("div",null,o.a.createElement("div",{className:"module-version"},o.a.createElement("div",null,o.a.createElement("span",null,"固件程序："),o.a.createElement("span",null,C?x:D)),o.a.createElement("div",null,o.a.createElement("span",null,"固件版本："),o.a.createElement("span",null,C?N:I))),u?void 0:o.a.createElement("a",{className:"ant-btn ant-btn-primary module-download",href:C?R:_,target:"_blank",rel:"noopener noreferrer"},"下载固件程序"))),o.a.createElement("div",{className:"info-item business-detail"},o.a.createElement("h3",null,"商业化信息"),o.a.createElement("div",{className:"info-item"},o.a.createElement("span",{className:"label"},"产品图片："),o.a.createElement("span",null,M.map((function(e,t){return o.a.createElement("img",{key:t,className:"product-img",src:e.filesrc,alt:e.filename||""})})))),o.a.createElement(oe,{label:"尺寸",value:"".concat(L||0," mm")}),o.a.createElement(oe,{label:"重量",value:"".concat(F||0," kg")}),o.a.createElement("div",{className:"info-item"},o.a.createElement("span",{className:"label"},"产品参数："),o.a.createElement("span",null,z)),o.a.createElement(oe,{label:"产品介绍",value:B}),o.a.createElement("div",{className:"info-item"},o.a.createElement("span",{className:"label"},"说明书："),V.map((function(e,t){return o.a.createElement("a",{key:t,href:e.filesrc||"",target:"blank",style:{marginRight:"5px"}},e.filename)}))),o.a.createElement(oe,{label:"供应商",value:q}),o.a.createElement(oe,{label:"联系人",value:H}),o.a.createElement(oe,{label:"电话",value:K})))}}])&&$(t.prototype,n),r&&$(t,r),c}(r.Component),ce=Object(m.b)((function(e){return{productDetail:e.getIn(["product","productDetail"]).toJS()}}),(function(e){return{getProduct:function(t){e(H.a.getProductDetail(t))}}}))(ae),ie=n(473);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);if(t){var o=be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return de(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(i,e);var t,n,r,a=ye(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).handleAudit=function(){var e=t.props.match.params.id,n=de(t);f.a.confirm({width:520,title:"提交审核",centered:!0,okText:"确定",cancelText:"取消",maskClosable:!0,content:o.a.createElement(j,{ref:function(e){return n.refDadio=e}}),onOk:function(){n.props.updateAuditStatus(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e},n.refDadio.state))},onCancel:function(){}})},t.state={showProductDetail:{}},t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,n=t.productId,r=t.id;this.props.getAuditData({productId:n,id:r}),Object(ie.d)({productId:n}).then((function(t){e.setState({showProductDetail:t.data.data})}))}},{key:"render",value:function(){var e=this,t=this.props.match.params.productId,n=this.props.auditDetail,r=n.statu,a=n.statuName,i=n.remark,l=this.state.showProductDetail;return o.a.createElement("div",{className:"product-audit"},o.a.createElement(c.a,null,o.a.createElement("h2",{className:"title"},"发布产品"),o.a.createElement(s.a,{type:"primary",className:"btn-back",onClick:function(){return e.props.history.go(-1)}},"返回")),o.a.createElement(c.a,null,o.a.createElement(ce,{productId:t,audit:r,showProductDetail:l,clearProductInfo:this.props.clearProductInfo})),0===r?o.a.createElement(s.a,{type:"primary",style:{float:"right",margin:"20px 20px 20px 0"},onClick:this.handleAudit},"审核"):o.a.createElement(c.a,null,o.a.createElement("h3",null,"审核状态"),o.a.createElement("div",{className:"info-item"},o.a.createElement("span",{className:"label"},"审核结果："),o.a.createElement("span",null,a)),2===r?o.a.createElement("div",{className:"info-item"},o.a.createElement("span",{className:"label"},"驳回说明："),o.a.createElement("span",null,i||"--")):null))}}])&&fe(t.prototype,n),r&&fe(t,r),i}(r.Component),ve=Object(m.b)((function(e){return{auditDetail:e.getIn(["productAudit","auditDetail"]).toJS()}}),(function(e){return{getAuditData:function(t){return e(P.a.getAuditInfo(t))},updateAuditStatus:function(t){return e(P.a.updateAuditStatus(t))},clearProductInfo:function(){return e(P.a.clearProductInfo())}}}))(he),ge=n(1424);n(1472),t.default=function(e){var t=e.match;return o.a.createElement(a.d,null,o.a.createElement(a.b,{path:"".concat(t.url,"/list"),component:z}),o.a.createElement(a.b,{path:"".concat(t.url,"/:productId/:id"),component:Object(ge.a)(ve)}),o.a.createElement(a.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1518:function(e,t,n){"use strict";n.r(t);n(97),n(256);var r=n(0),o=n.n(r),a=n(58),c=(n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(32),n(31),n(136),n(68)),i=(n(221),n(83)),l=(n(75),n(20)),u=(n(255),n(127)),s=(n(197),n(76)),f=(n(154),n(40)),p=(n(117),n(65),n(35),n(1421)),y=n(106),m=n(30),d=n(172),b=n(42),h=n(489),v=n(1423);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D,I=f.a.Item,_=s.a.Option,T={1:"系统公告",2:"流程消息",3:"服务消息"},C={1:"草稿",2:"已发布",3:"已删除"};!function(e){e[e.All=9]="All",e[e.Direaction=10]="Direaction"}(D||(D={}));var R={2:"#00CC00",3:"#CC0000"},x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(d,e);var t,n,o,a=j(d);function d(){var e;O(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleEdit=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e.props.history.push("./".concat(t))},e.handleView=function(t){e.props.setNotice(t),e.props.history.push("./view/".concat(t.noticeId))},e.handlePublish=function(t){var n=S(e);u.a.confirm({title:"提示",content:"是否确认发布？",onOk:function(){n.props.publishNotice(t).then((function(e){e&&n.props.onChange(1)}))}})},e.handleCancel=function(t){var n=S(e);u.a.confirm({title:"提示",content:"是否确认撤销？",onOk:function(){n.props.cancelNotice(t).then((function(e){e&&n.props.onChange(1)}))}})},e.handleDel=function(t){var n=S(e);u.a.confirm({title:"提示",content:"是否确认删除？",onOk:function(){n.props.delNotice(t).then((function(e){e&&n.props.onChange(1)}))}})},e}return t=d,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.form,o=t.list,a=t.pager,u=t.loading,d=n.getFieldDecorator,b=[{title:"消息标题",dataIndex:"noticeTitle",width:"30%",render:function(e){return r.createElement("span",{title:e},e)}},{title:"消息类型",dataIndex:"noticeTypeName",width:"200px",render:function(e){return r.createElement("span",{title:e},e||"--")}},{title:"发布对象",width:"20%",render:function(e){return e.sendTo===D.All?r.createElement("span",null,"所有用户"):r.createElement("span",{title:e.sendToUserNames||"--"},e.sendToUserNames||"--")}},{title:"更新时间",dataIndex:"updateTime",width:"20%",render:function(e){var t=m.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return r.createElement("span",{title:t},t)}},{title:"消息状态",dataIndex:"noticeStatus",width:"120px",render:function(e){return r.createElement("span",{style:R[e]?{color:R[e]}:void 0},C[e]||"--")}},{title:"操作",width:"190px",render:function(t){return r.createElement("div",{className:"action"},1===t.noticeStatus?r.createElement("span",null,r.createElement(i.a,{placement:"top",title:"编辑"},r.createElement(l.a,{icon:"edit",shape:"circle",size:"small",onClick:e.handleEdit.bind(e,t.noticeId)})),"  |  "):null,r.createElement(i.a,{placement:"top",title:"查看"},r.createElement(l.a,{icon:"info",shape:"circle",size:"small",onClick:e.handleView.bind(e,t)})),"  |  ",1===t.noticeStatus?r.createElement("span",null,r.createElement(i.a,{placement:"top",title:"发布"},r.createElement(l.a,{icon:"upload",shape:"circle",size:"small",onClick:e.handlePublish.bind(e,t.noticeId)})),"  |  "):2===t.noticeStatus?r.createElement("span",null,r.createElement(i.a,{placement:"top",title:"撤销"},r.createElement(l.a,{icon:"download",shape:"circle",size:"small",onClick:e.handleCancel.bind(e,t.noticeId)})),"  |  "):null,r.createElement(i.a,{placement:"top",title:"删除"},r.createElement(l.a,{icon:"delete",shape:"circle",size:"small",onClick:e.handleDel.bind(e,t.noticeId)})))}}];return r.createElement("div",{className:"message-manage"},r.createElement(p.a,{title:"消息管理"},r.createElement(f.a,{layout:"inline"},r.createElement("div",{className:"message-filter-item"},r.createElement(I,{label:"消息标题"},d("noticeTitle")(r.createElement(c.a,{placeholder:"请输入消息标题",maxLength:20,style:{width:160},onPressEnter:this.props.onFilter}))),r.createElement(I,{label:"消息类型"},d("noticeType")(r.createElement(s.a,{style:{width:160},placeholder:"请选择消息类型"},r.createElement(_,{key:"0",value:""},"全部"),Object.keys(T).map((function(e){return r.createElement(_,{key:e,value:+e},T[e])}))))),r.createElement(I,{label:"消息状态"},d("noticeStatus")(r.createElement(s.a,{style:{width:160},placeholder:"请选择消息状态"},r.createElement(_,{key:"0",value:""},"全部"),Object.keys(C).map((function(e){return r.createElement(_,{key:e,value:+e},C[e])}))))),r.createElement(I,{label:"发布类型"},d("sendTo")(r.createElement(s.a,{style:{width:160},placeholder:"请选择发布类型"},r.createElement(_,{key:"0",value:""},"全部"),r.createElement(_,{key:"1",value:D.All},"广播推送"),r.createElement(_,{key:"2",value:D.Direaction},"定向推送")))),r.createElement(I,null,r.createElement(l.a,{type:"primary",onClick:this.props.onFilter},"查询")),r.createElement(I,null,r.createElement(l.a,{type:"primary",onClick:this.props.onReset},"重置"))),r.createElement("div",{className:"message-filter-item"},r.createElement(I,{style:{float:"right"}},r.createElement(l.a,{type:"primary",onClick:this.handleEdit.bind(this,0)},"新建"))))),r.createElement("div",{className:"message-manage-content"},r.createElement(y.a,{rowKey:"noticeId",columns:b,dataSource:o,pager:a,loading:u,onPageChange:this.props.onChange})))}}])&&E(t.prototype,n),o&&E(t,o),d}(r.Component),N=Object(b.b)((function(e){return{list:e.getIn(["noticeManage","list"]).toJS(),pager:e.getIn(["noticeManage","pager"]).toJS(),loading:e.getIn(["noticeManage","loading"])}}),(function(e){return Object(d.b)({getList:h.a.getList,delNotice:h.a.delNotice,publishNotice:h.a.publishNotice,cancelNotice:h.a.cancelNotice,setNotice:h.a.setNotice},e)}))(f.a.create()(Object(v.a)(x))),A=(n(43),n(33),n(44),n(257),n(198),n(220),n(168),n(848),n(800)),M=(n(826),n(477)),L=(n(142),n(47)),F=(n(363),n(34),n(258),n(302),n(1408)),B=n.n(F);n(1409);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var o=Q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return X(this,n)}}function X(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z,ee=f.a.Item,te=s.a.Option,ne=[{value:"1",label:"系统公告"},{value:"3",label:"服务消息",children:[{value:"1",label:"APP控制服务"},{value:"2",label:"云端定时服务"},{value:"3",label:"场景联动服务"}]}];!function(e){e[e.All=9]="All",e[e.Direaction=10]="Direaction"}(Z||(Z={}));var re,oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(i,e);var t,n,o,a=$(i);function i(){var e;Y(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).refInput=void 0,e.state={receive_users:[]},e.handleBack=function(){e.props.history.go(-1)},e.handleSave=function(){var t=e.props,n=t.form,r=t.notice,o=e.state.receive_users;n.validateFields((function(t,n){if(!(t||n.sendTo===Z.Direaction&&0===o.length)){var a=U(U({},n),{},{noticeContent:n.noticeContent.toHTML()});a.sendToUserId=n.sendTo===Z.Direaction?o.map((function(e){return e.id})).join(","):void 0,a.noticeType=+a.noticeType.join(""),r.noticeId&&(a.noticeId=r.noticeId),e.props.saveNotice(a).then((function(t){t&&e.props.history.go(-1)}))}}))},e.handleAdd=function(){e.props.form.validateFields(["receive_users"],(function(t,n){if(!t){var r=e.state.receive_users;r.length>19?L.a.warning({duration:3,message:"最多添加20个用户"}):e.setState({receive_users:[].concat(V(r),[{id:Math.floor(100*Math.random()),value:""}])},(function(){e.refInput.focus()}))}}))},e.handleClose=function(t){var n=e.state.receive_users;e.setState({receive_users:n.filter((function(e){return e.id!==t}))})},e.handleValidate=function(t,n,r){var o=e.state.receive_users;if(!n){var a=V(o);return a.pop(),void e.setState({receive_users:a})}o.some((function(e){return e.value===n}))?r("账号已添加"):e.props.validateAccout(n).then((function(t){if(t){var a=V(o),c=a.pop();c.value=n,c.id=t.developerId,e.setState({receive_users:[].concat(V(a),[c])})}else r("账号不存在");r()}))},e.handleBlur=function(){e.refInput.blur()},e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.noticeId;+t&&this.props.getNotice(t).then((function(t){if(t){var n=t.noticeTitle,r=t.noticeContent,o=t.noticeType,a=t.sendTo,c=t.sendToUserNames,i=t.sendToUserId;if(e.props.form.setFieldsValue({noticeTitle:n,sendTo:a,noticeType:o.toString().split(""),noticeContent:B.a.createEditorState(r)}),a===Z.Direaction&&i&&c){var l=i.split(",").filter(Boolean),u=c.split(",").filter(Boolean);e.setState({receive_users:l.map((function(e,t){return{id:+e,value:u[t]}}))})}}}))}},{key:"componentWillUnmount",value:function(){this.props.clearNotice()}},{key:"render",value:function(){var e=this,t=this.props.match.params.noticeId,n=this.state.receive_users,o=this.props.form,a=o.getFieldDecorator,i={labelCol:{span:3},wrapperCol:{span:10}},u={labelCol:{span:3},wrapperCol:{span:21}},y=(0,o.getFieldValue)("sendTo"),m=y===Z.Direaction&&0===n.length?{help:"至少添加一个用户",validateStatus:"error"}:{};return r.createElement("div",{className:"message-manage"},r.createElement(p.a,{title:+t?"编辑消息":"新增消息"},r.createElement(l.a,{type:"primary",className:"btn-back",onClick:this.handleBack},"返回")),r.createElement("div",{className:"message-manage-content"},r.createElement(f.a,{style:{width:1e3}},r.createElement(ee,J({label:"消息标题"},i),a("noticeTitle",{rules:[{required:!0,message:"请输入标题"}]})(r.createElement(c.a,{maxLength:20,placeholder:"请输入标题"}))),r.createElement(ee,J({label:"消息类型"},i),a("noticeType",{rules:[{required:!0,message:"请选择消息类型"}]})(r.createElement(M.a,{placeholder:"请选择消息类型",style:{width:240},options:ne}))),r.createElement(ee,J({label:"消息内容"},u),a("noticeContent",{validateTrigger:"onBlur",rules:[{required:!0,validator:function(e,t,n){var r=t&&t.toHTML();r&&"<p></p>"!==r?n():n("请输入正文内容")}}]})(r.createElement(B.a,{className:"notice-editor",placeholder:"请输入正文内容"}))),r.createElement(ee,J({label:"推送方式"},u),a("sendTo",{initialValue:9,rules:[{required:!0,validator:function(e,t,n){t?n():n("请选择推送方式")}}]})(r.createElement(s.a,{placeholder:"请选择消息类型",style:{width:240},allowClear:!0},r.createElement(te,{value:Z.All,key:"1"},"广播消息"),r.createElement(te,{value:Z.Direaction,key:"2"},"定向发布")))),y===Z.Direaction?r.createElement(ee,J({wrapperCol:{span:21,offset:3}},m),r.createElement("div",{className:"receive_users"},n.map((function(t){return t.value?r.createElement(A.a,{key:t.id,closable:!0,onClose:e.handleClose.bind(e,t.id)},t.value):a("receive_users",{validateTrigger:"onBlur",rules:[{validator:e.handleValidate}]})(r.createElement(c.a,{key:t.id,placeholder:"请输入账号",maxLength:30,style:{width:240},ref:function(t){return e.refInput=t},onPressEnter:e.handleBlur}))})),r.createElement(l.a,{className:"btn-add-user",onClick:this.handleAdd},"添加账号"))):null,r.createElement(ee,null,r.createElement(l.a,{type:"primary",className:"btn-save",onClick:this.handleSave},"保存")))))}}])&&W(t.prototype,n),o&&W(t,o),i}(r.Component),ae=Object(b.b)((function(e){return{notice:e.getIn(["noticeManage","notice"]).toJS()}}),(function(e){return Object(d.b)({saveNotice:h.a.saveNotice,validateAccout:h.a.validateAccout,getNotice:h.a.getNotice,clearNotice:h.a.clearNotice},e)}))(f.a.create()(oe));function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pe(e);if(t){var o=pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e){e[e.All=9]="All",e[e.Direaction=10]="Direaction"}(re||(re={}));var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(c,e);var t,n,o,a=se(c);function c(){var e;ie(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleBack=function(){e.props.history.go(-1)},e}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params.noticeId;+e&&this.props.getNotice(e)}},{key:"componentWillUnmount",value:function(){this.props.clearNotice()}},{key:"render",value:function(){var e=this.props.notice,t=e.noticeTitle,n=e.noticeTypeName,o=e.sendTo,a=e.sendToUserNames,c=e.sendTime;return r.createElement("div",{className:"message-manage"},r.createElement(p.a,{title:"消息管理"},r.createElement(l.a,{type:"primary",className:"btn-back",onClick:this.handleBack},"返回")),r.createElement("div",{className:"message-manage-content notice-view"},r.createElement("h2",{className:"notice-title"},t),r.createElement("p",{className:"notice-descript"},r.createElement("span",null,"推送时间：",c?m.b.utc2beijing(c,"yyyy-MM-dd hh:mm:ss"):"--"),r.createElement("span",null,"消息类型：",n||"--"),r.createElement("br",null),r.createElement("span",{style:{maxWidth:"100%",wordBreak:"break-all"}},"推送对象：",o===re.All?"所有用户":a||"--")),r.createElement("hr",null),r.createElement("div",{className:"notice-content",dangerouslySetInnerHTML:{__html:e.noticeContent}})))}}])&&le(t.prototype,n),o&&le(t,o),c}(r.Component),me=Object(b.b)((function(e){return{notice:e.getIn(["noticeManage","notice"]).toJS()}}),(function(e){return Object(d.b)({getNotice:h.a.getNotice,clearNotice:h.a.clearNotice},e)}))(ye),de=n(1424);n(1476),t.default=function(e){var t=e.match;return o.a.createElement(a.d,null,o.a.createElement(a.b,{exact:!0,path:"".concat(t.url,"/list"),component:N}),o.a.createElement(a.b,{exact:!0,path:"".concat(t.url,"/view/:noticeId"),component:me}),o.a.createElement(a.b,{exact:!0,path:"".concat(t.url,"/:noticeId"),component:Object(de.a)(ae)}),o.a.createElement(a.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1523:function(e,t,n){"use strict";n.r(t);n(48),n(49),n(19),n(37),n(22),n(38),n(29),n(32),n(31),n(1395);var r=n(1396),o=(n(75),n(20)),a=(n(1389),n(1390)),c=(n(142),n(47)),i=(n(299),n(107)),l=(n(35),n(1393),n(97),n(258),n(33),n(0)),u=n.n(l),s=n(42),f=n(796),p=(n(5),n(168),n(255),n(127)),y=(n(169),n(7)),m=(n(154),n(40)),d=(n(136),n(68));n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(839),n(840),n(841),n(842),n(843),n(485),n(1403),n(363),n(65);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(c,e);var t,n,r,a=E(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).handleCancel=function(e){(0,t.props.toggleDialog)(e)},t.compareToDimensionKeys=function(e,n,r){var o=t.props,a=o.form,c=o.dataDimension,i=[];c.toJS().forEach((function(e,t){console.log("getFieldValue",a.getFieldValue("dimensionName-"+t)),i.push(a.getFieldValue("dimensionName-"+t))}));var l=!1;i.length!==new Set(i).size&&(l=!0),n&&l?r("数据维度Key值重复输入"):r()},t.serializableDimensionJson=function(e,t){for(var n=[],r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];"dimension"===e&&a.startsWith("d")&&n.push(v({},a,t[a])),"index"===e&&a.startsWith("i")&&n.push(v({},a,t[a]))}n.sort((function(e,t){var n=Object.keys(e)[0],r=Object.keys(t)[0];return n.split("").reverse().join("")-r.split("").reverse().join("")}));for(var c="{",i=0;i<n.length;i++){var l=n[i],u=n[++i];c=c+'"'+Object.values(l)[0]+'":"'+Object.values(u)[0]+'",'}return c=c.substr(0,c.length-1),c+="}"},t.handleSubmit=function(e){e.preventDefault(),(0,t.props.form.validateFieldsAndScroll)((function(e,n){if(!e){console.log("Received values of form: ",n);var r=t.serializableDimensionJson("dimension",n),o=t.serializableDimensionJson("index",n),a=t.props;(0,a.saveDimensionIndex)(r,o,a.dimensionType)}}))},t.state={loading:!1},t}return t=c,(n=[{key:"getDimensionListHTML",value:function(e){var t=this,n=this.props,r=n.form,o=n.dataDimension,a=n.dataIndex,c=n.delDimensionItem,i=o.toJS(),l=a.toJS(),s=r.getFieldDecorator,f=null,p="",b="",h="";return"dimension"===e?(f=i,p="dimensionName-",b="dimensionDesc-",h="请输入维度"):(f=l,p="indexName-",b="indexDesc-",h="请输入指标"),f&&f.length>0?f.map((function(n,r){return u.a.createElement("div",{key:r},u.a.createElement(m.a.Item,{hasFeedback:!0,style:{display:"inline-block",width:"calc(50% - 24px)"}},s(p+r,{rules:[{required:!0,message:h},{validator:t.compareToDimensionKeys}]})(u.a.createElement(d.a,{placeholder:h}))),u.a.createElement("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}}),u.a.createElement(m.a.Item,{hasFeedback:!0,style:{display:"inline-block",width:"calc(50% - 24px)"}},s(b+r,{rules:[{required:!0,message:"请输入备注，不超50个字符"},{max:50,message:"请输入备注，不超50个字符"}]})(u.a.createElement(d.a,{placeholder:"请输入备注，不超50个字符"}))),0!==r&&u.a.createElement("a",{href:"javascript:",onClick:function(){return c(e,r)},style:{display:"inline-block",width:"24px",textAlign:"center"}},u.a.createElement(y.a,{type:"minus-circle"})))})):null}},{key:"render",value:function(){var e=this.props,t=e.showDimensionDialog,n=e.addDimensionItem,r=this.state.loading;return u.a.createElement(p.a,{width:"1000px",visible:t,title:"维度指标发布/编辑",onCancel:this.handleCancel.bind(this,"dimension"),footer:[u.a.createElement(o.a,{key:"submit",type:"primary",loading:r,onClick:this.handleSubmit},"发布")]},u.a.createElement("div",{className:"dimension-wrapper"},u.a.createElement(m.a,h({},{labelCol:{span:6},wrapperCol:{span:12}},{className:"dimension-form"}),u.a.createElement(m.a.Item,{label:"数据维度"},this.getDimensionListHTML("dimension"),u.a.createElement("div",null,u.a.createElement("a",{href:"javascript:",onClick:function(){return n("dimension")}},"+ 新增维度"))),u.a.createElement(m.a.Item,{label:"数据指标"},this.getDimensionListHTML("index"),u.a.createElement("div",null,u.a.createElement("a",{href:"javascript:",onClick:function(){return n("index")}},"+ 新增指标"))))))}}])&&g(t.prototype,n),r&&g(t,r),c}(l.Component),S=m.a.create({name:"dimension",onFieldsChange:function(e,t){console.log("changedFields",t),"{}"!==JSON.stringify(t)&&e.changeDimensionData(t)},mapPropsToFields:function(e){var t=e.dataDimension.toJS(),n=e.dataIndex.toJS(),r={};return t.forEach((function(e,t){var n=e.dimensionName,o=e.dimensionDesc;r["dimensionName-"+t]=m.a.createFormField({value:n}),r["dimensionDesc-"+t]=m.a.createFormField({value:o})})),n.forEach((function(e,t){var n=e.indexName,o=e.indexDesc;r["indexName-"+t]=m.a.createFormField({value:n}),r["indexDesc-"+t]=m.a.createFormField({value:o})})),r}})(P),k=(n(197),n(76));n(117),n(1407);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(c,e);var t,n,r,a=R(c);function c(){var e;_(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleSubmit=function(t){t.preventDefault();var n=e.props.form.validateFieldsAndScroll,r=e.props.saveOpen,o=e.props.curApi.toJS();n((function(e,t){e||(console.log("Received values of form: ",t),(o.releaseId||0===o.releaseId)&&(t.releaseId=o.releaseId),t.dataType=Number(t.dataType),r(t))}))},e.handleCancel=function(t){(0,e.props.toggleDialog)(t)},e}return t=c,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.showApiDialog;return u.a.createElement(p.a,{width:"1000px",visible:t,title:"新增API/编辑",onCancel:this.handleCancel.bind(this,"api"),footer:[u.a.createElement(o.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"发布")]},u.a.createElement("div",{className:"api-wrapper"},u.a.createElement(m.a,I({},{labelCol:{span:6},wrapperCol:{span:8}},{className:"api-form"}),u.a.createElement(m.a.Item,{label:"数据类别",wrapperCol:{span:6}},e("dataType",{rules:[{required:!0}]})(u.a.createElement(k.a,null,u.a.createElement(k.a.Option,{value:1},"设备数据"),u.a.createElement(k.a.Option,{value:2},"用户数据")))),u.a.createElement(m.a.Item,{label:"API名称/接口URL",hasFeedback:!0},e("apiName",{rules:[{required:!0,message:"请输入api名称"},{max:20,message:"API接口名称不能超过20个字符"}]})(u.a.createElement(d.a,{placeholder:"请输入API接口的名称"}))),u.a.createElement(m.a.Item,{label:" ",hasFeedback:!0,colon:!1,wrapperCol:{span:12}},e("apiUrl",{rules:[{required:!0,message:"请输入API接口的url"}]})(u.a.createElement(d.a,{placeholder:"接口的URL"}))),u.a.createElement(m.a.Item,{label:" ",hasFeedback:!0,colon:!1},e("apiDesc",{rules:[{required:!0,message:"请输入API接口的描述"},{max:20,message:"API接口的描述不能超过20个字符"}]})(u.a.createElement(d.a,{placeholder:"请输入API接口的描述"}))),u.a.createElement(m.a.Item,{label:" ",colon:!1},e("requestType",{rules:[{required:!0}]})(u.a.createElement(k.a,{wrapperCol:{span:6}},u.a.createElement(k.a.Option,{value:"GET"},"GET"),u.a.createElement(k.a.Option,{value:"POST"},"POST")))),u.a.createElement(m.a.Item,{label:" ",hasFeedback:!0,colon:!1},e("releaseVersion",{rules:[{required:!0,message:"请输入API接口的版本"},{max:20,message:"API接口的版本不能超过20个字符"}]})(u.a.createElement(d.a,{placeholder:"请输入API接口的版本"}))))))}}])&&T(t.prototype,n),r&&T(t,r),c}(u.a.Component),M=m.a.create({name:"api",mapPropsToFields:function(e){var t=e.curApi.toJS();return{dataType:m.a.createFormField({value:t.dataType}),apiName:m.a.createFormField({value:t.apiName}),apiUrl:m.a.createFormField({value:t.apiUrl}),apiDesc:m.a.createFormField({value:t.apiDesc}),requestType:m.a.createFormField({value:t.requestType}),releaseVersion:m.a.createFormField({value:t.releaseVersion})}}})(A),L=n(9),F=n(251),B=(n(30),n(106));n(1471);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=i.a.TabPane,Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(f,e);var t,n,l,s=q(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e)).cancelApiRelease=function(e){Object(F.a)(e).then((function(e){var n=e.data.code,r=e.data.msg,o=0===n?"success":"error";n===L.a?(c.a[o]({message:"取消发布成功",description:"取消发布成功",duration:3,onClick:function(){console.log("Notification Clicked!")}}),t.props.getOpenApiList({pageIndex:1,pageRows:10})):c.a[o]({message:n,description:r,duration:3,onClick:function(){console.log("Notification Clicked!")}})}))},t.changeDimensionData=function(e){var n=Object.keys(e)[0],r=Object.values(e)[0],o=n.split("-")[0],a=n.split("-")[1];t.props.changeDimensionData(o,a,r.value)},t.onChange=function(e){t.props.getOpenApiList({pageIndex:e,pageRows:10})},t.saveDimensionIndex=function(e,n,r){Object(F.e)(e,n,r).then((function(e){var n=e.data.code,r=e.data.msg,o=0===n?"success":"error";n===L.a?(c.a[o]({message:"保存维度成功",description:"保存维度成功",duration:3,onClick:function(){console.log("Notification Clicked!")}}),t.props.toggleDialog("dimension")):c.a[o]({message:n,description:r,duration:3,onClick:function(){console.log("Notification Clicked!")}})}))},t.saveOpen=function(e){Object(F.f)(e).then((function(n){var r=n.data.code,o=n.data.msg,a=e.releaseId||0===e.releaseId?"更新API成功":"新增API成功",i=0===r?"success":"error";r===L.a?(c.a[i]({message:a,description:a,duration:3,onClick:function(){console.log("Notification Clicked!")}}),t.props.toggleDialog("api"),t.props.getOpenApiList({pageIndex:1,pageRows:10})):c.a[i]({message:r,description:o,duration:3,onClick:function(){console.log("Notification Clicked!")}})}))},t.state={dimensionData:[{key:1,dataType:"设备数据",dataClassify:"汇总类"},{key:2,dataType:"设备数据",dataClassify:"分析类"},{key:3,dataType:"设备数据",dataClassify:"基础类"},{key:4,dataType:"用户数据",dataClassify:"汇总类"},{key:5,dataType:"用户数据",dataClassify:"分析类"},{key:6,dataType:"用户数据",dataClassify:"基础类"}],dimensionColumn:[{title:"数据类别",dataIndex:"dataType",key:"dataType"},{title:"数据分类",dataIndex:"dataClassify",key:"dataClassify"},{title:"操作",dataIndex:"opt",render:function(e,n){return u.a.createElement("span",null,u.a.createElement("a",{href:"javascript:",onClick:function(){return t.props.getDimensionDetail(n.key)}},"编辑"))}}]},t}return t=f,(n=[{key:"componentDidMount",value:function(){this.props.getOpenApiList({pageIndex:1,pageRows:10})}},{key:"_getAntDApiListData",value:function(e){var t=this,n=this.props.editApi,r=e.toJS();return r.forEach((function(e){e.key=e.releaseId})),{dataSource:r,columns:[{title:"ID",dataIndex:"key",key:"key"},{title:"API名称",dataIndex:"apiName",key:"apiName"},{title:"数据类别",dataIndex:"dataType",key:"dataType",render:function(e){return 1===e?"设备数据":"用户数据"}},{title:"发布时间",dataIndex:"releaseTime",key:"releaseTime"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return 1===e?"未发布":"已发布"}},{title:"操作",key:"opt",render:function(e,r){return u.a.createElement("span",null,1!==r.status&&u.a.createElement("a",{href:"javascript:",onClick:function(){return t.cancelApiRelease(r.key)}},"取消发布"),1!==r.status&&u.a.createElement(a.a,{type:"vertical"}),u.a.createElement("a",{href:"javascript:",onClick:function(){return n(r.key)}},"编辑"))}}]}}},{key:"render",value:function(){var e=this.props,t=e.apiList,n=e.addDimensionItem,a=e.pager,c=e.loading,l=e.dimensionType,s=e.delDimensionItem,f=e.showApiDialog,p=e.curApi,y=e.editApi,m=(e.saveOpenApi,e.dataDimension),d=e.dataIndex,b=e.toggleDialog,h=e.showDimensionDialog,v=(e.dataDimensions,this.state),g=v.dimensionColumn,O=v.dimensionData,E=this._getAntDApiListData(t),w=E.dataSource,j=E.columns;return u.a.createElement("div",{className:"api-page-wrapper"},u.a.createElement(r.a,{title:"API发布",className:"api-title",extra:[u.a.createElement(o.a,{key:"1",type:"primary",onClick:function(){y()}},"+ 新增API")]}),u.a.createElement("div",{className:"api-content-wrapper"},u.a.createElement(i.a,{defaultActiveKey:"1"},u.a.createElement(K,{tab:"API列表",key:"1"},u.a.createElement(B.a,{rowKey:"releaseId",columns:j,pager:a,loading:c,onPageChange:this.onChange,dataSource:w})),u.a.createElement(K,{tab:"维度指标",key:"2"},u.a.createElement(B.a,{rowKey:"key",columns:g,pager:{currPageRows:10,defaultPageRows:20,hasNextPage:!1,hasPrevPage:!1,pageEndRow:9,pageIndex:1,pageRows:10,pageStartRow:0,paged:!1,totalPages:1,totalRows:6},dataSource:O})))),u.a.createElement(M,{showApiDialog:f,toggleDialog:b,curApi:p,saveOpen:this.saveOpen}),u.a.createElement(S,{changeDimensionData:this.changeDimensionData,addDimensionItem:n,delDimensionItem:s,dataDimension:m,dataIndex:d,showDimensionDialog:h,toggleDialog:b,saveDimensionIndex:this.saveDimensionIndex,dimensionType:l}))}}])&&J(t.prototype,n),l&&J(t,l),f}(l.Component);t.default=Object(s.b)((function(e){return{apiList:e.getIn(["apiPublish","apiList"]),loading:e.getIn(["apiPublish","loading"]),pager:e.getIn(["apiPublish","pager"]).toJS(),showApiDialog:e.getIn(["apiPublish","showApiDialog"]),curApi:e.getIn(["apiPublish","curApi"]),showDimensionDialog:e.getIn(["apiPublish","showDimensionDialog"]),dataDimension:e.getIn(["apiPublish","dataDimension"]),dataIndex:e.getIn(["apiPublish","dataIndex"]),dimensionType:e.getIn(["apiPublish","dimensionType"])}}),(function(e){return{getOpenApiList:function(t){var n=f.a.getOpenApiList(t);e(n)},editApi:function(t){var n=f.a.editApi(t);e(n)},toggleDialog:function(t){var n=null;n="api"===t?f.a.toggleApiDialog():f.a.toggleDimensionDialog(),e(n)},getDimensionDetail:function(t){var n=f.a.getDimensionDetail(t);e(n)},addDimensionItem:function(t){var n=f.a.addDimensionItem(t);e(n)},delDimensionItem:function(t,n){var r=f.a.delDimensionItem(t,n);e(r)},changeDimensionData:function(t,n,r){var o=f.a.changeDimensionData(t,n,r);e(o)}}}))(Y)}}]);