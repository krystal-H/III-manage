(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1339:function(e,t,n){"use strict";n(20),n(35),n(36),n(28),n(45),n(46),n(22),n(31),n(32);var r=n(0),o=n.n(r);n(1342);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,l(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title;return o.a.createElement("div",{className:"title-tab"},o.a.createElement("div",{className:"title-tab-option"},o.a.createElement("span",{className:"title-tab-title"},n)),o.a.createElement("div",{className:"title-tab-option"},t))}}])&&i(n.prototype,r),a&&i(n,a),t}();s.Option=function(e){var t=e.children,n=e.label,r=e.align,a=void 0===r?"left":r;return o.a.createElement("div",{className:"".concat("left"===a?"title-tab-item":"title-tab-item-right")},o.a.createElement("span",{className:n?"title-table-label":"title-table-label-non"},n?n+":":""),t)},t.a=s},1340:function(e,t,n){"use strict";n(20),n(35),n(36),n(117),n(29),n(335),n(28),n(334),n(65),n(280),n(164),n(40),n(41),n(45),n(37),n(46),n(22),n(336),n(31),n(166),n(439),n(243),n(30),n(32);var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=function(e){return function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=s(this,(e=p(n)).call.apply(e,[this].concat(o)))).state={pageIndex:1},t.onChange=function(e){var n=t.state.pageIndex;t.setState({pageIndex:e||n||1},function(){var e=t.state,n=[];for(var r in e)e[r]&&n.push("".concat(r,"=").concat(e[r]));t.props.history.replace("?"+n.join("&")),t.props.getList(c({},e))})},t.onFilter=function(e){var n=t.props.form;n&&(e=n.getFieldsValue()),t.setState(c({},e),function(){t.onChange(1)})},t.onReset=function(){var e=t.props.form;e&&e.resetFields()},t}var o,i,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,r["Component"]),o=n,(i=[{key:"componentDidMount",value:function(){var e=this,t={pageIndex:1},n=this.props.history.location.search;n&&n.length&&n.slice(1).split("&").map(function(e){if(/^(.+)=(.+)$/.test(e)){var n=e.split("=");t[n[0]]=decodeURI(n[1])}}),this.setState(c({},t),function(){e.props.getList(t)});var r=this.props.form;if(r){var o=r.getFieldsValue(),a=Object.keys(o);for(var i in t)a.includes(i)&&r.setFieldsValue(l({},i,+t[i]||t[i]))}}},{key:"render",value:function(){return r.createElement(e,a({},this.props,{onChange:this.onChange,onFilter:this.onFilter,onReset:this.onReset,query:this.state}))}}])&&u(o.prototype,i),m&&u(o,m),n}()}},1341:function(e,t,n){"use strict";n(20),n(35),n(36),n(28),n(45),n(46),n(22),n(31),n(32);var r=n(0),o=n(13),a=n.n(o);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),l(this,u(n).apply(this,arguments))}var o,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,r["Component"]),o=n,(i=[{key:"componentDidMount",value:function(){var e=a.a.findDOMNode(this);e&&e.parentElement&&e.parentElement.parentElement&&(e.parentElement.parentElement.scrollTop=0)}},{key:"render",value:function(){return r.createElement(e,this.props)}}])&&c(o.prototype,i),p&&c(o,p),n}()}},1342:function(e,t,n){},1345:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c});var r=n(4),o=function(e){return r.b.Post("manage-open/audit/getList",e).then(function(e){return{list:e.data.data.list,pager:e.data.data.pager,code:e.data.code,data:e}})},a=function(e){return r.b.Post("manage-open/audit/app/get",e,{},{isModalError:!0})},i=function(e){return r.b.Post("manage-open/audit/updateToRead",e)},c=function(e){return r.b.Post("manage-open/audit/update",e,{},{isModalError:!0})}},1382:function(e,t,n){},1383:function(e,t,n){},1384:function(e,t,n){},1385:function(e,t,n){},1386:function(e,t,n){},1387:function(e,t,n){},1388:function(e,t,n){},1395:function(e,t,n){"use strict";n.r(t);n(20),n(35),n(36),n(28),n(45),n(46),n(22),n(31),n(30),n(32),n(241);var r=n(118),o=(n(1311),n(1312)),a=(n(71),n(21)),i=(n(139),n(44)),c=n(0),l=n.n(c),u=n(39),s=n(739),p=n(424),f=n(12),m=n(96);n(1382);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b(this,h(t).call(this,e))).componentDidMount=function(){n.props.getMethodList({pageIndex:1,pageRows:10})},n.showModal=function(){n.setState({visible:!0})},n.handleOk=function(e){var t=n.props.curApi;n.setState({loading:!0});var r=1===e?"统计方法审核通过":"统计方法审核已拒绝",o=1===e?"success":"error";Object(p.a)({apiId:t.apiId,status:e}).then(function(e){e.data.code===f.a&&(i.a[o]({message:r,description:r,duration:3,onClick:function(){console.log("Notification Clicked!")}}),n.setState({loading:!1,visible:!1},function(){n.props.getMethodList({pageIndex:1,pageRows:10})}))})},n.handleCancel=function(){n.setState({visible:!1})},n.onChange=function(e){n.props.getMethodList({pageIndex:e,pageRows:10})},n.getMethodDetail=function(e){n.props.getMethodDetail(e),n.showModal()},n._ruleType=function(e){return 1===e?l.a.createElement("span",null,"取平均值：y=（a",l.a.createElement("sub",null,"1"),"+a",l.a.createElement("sub",null,"2"),"+...+a",l.a.createElement("sub",null,"n"),"）/n"):2===e?l.a.createElement("span",null,"取和：y= a",l.a.createElement("sub",null,"n"),"+a",l.a.createElement("sub",null,"（n-1）")):3===e?l.a.createElement("span",null,"取最大值：y=a",l.a.createElement("sub",null,"max")):4===e?l.a.createElement("span",null,"取最小值：y=a",l.a.createElement("sub",null,"min")):l.a.createElement("span",null,"加载中...")},n.state={loading:!1,visible:!1},n}var n,u,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,c["Component"]),n=t,(u=[{key:"_getAntDMethodListData",value:function(){var e=this,t=this.props,n=t.methodList,r=t.pager;return n.forEach(function(e,t){e.key=e.apiId,e.id=10*(r.pageIndex-1)+t+1}),{methodList:n,columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"统计方法名称",dataIndex:"apiName",key:"apiName",render:function(e){return l.a.createElement("span",{title:e},e)}},{title:"申请时间",dataIndex:"createDate",key:"createDate"},{title:"申请账号",dataIndex:"developerName",key:"developerName",render:function(e){return l.a.createElement("span",{title:e},e)}},{title:"状态",dataIndex:"status",key:"status",width:"120px",render:function(e){return 0===e?"未审核":1===e?"已通过":"已拒绝"}},{title:"操作",key:"opt",width:"120px",render:function(t,n){return l.a.createElement("span",null,l.a.createElement("a",{href:"javascript:",onClick:function(){return e.getMethodDetail(n.apiId)}},"审核入口"))}}]}}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,i=t.loading,c=this.props,u=c.pager,s=c.curApi,p=c.methodListLoading,f=this._getAntDMethodListData(),y=f.methodList,d=f.columns,b="",h="";switch(s.reportFormsType){case 1:b="1年";break;case 2:b="1月";break;case 3:b="1天";break;case 4:b="1小时"}switch(s.status){case 0:h="未审核";break;case 1:h="已通过";break;case 2:h="已拒绝"}var g=[l.a.createElement(a.a,{key:"back",type:"danger",loading:i,onClick:function(){return e.handleOk(2)}},"拒绝"),l.a.createElement(a.a,{key:"submit",type:"primary",loading:i,onClick:function(){return e.handleOk(1)}},"通过")];return 0!==s.status&&(g=[l.a.createElement(a.a,{key:"submit",type:"primary",onClick:this.handleCancel},"确认")]),l.a.createElement("div",{className:"method-page-wrapper"},l.a.createElement(o.a,{title:"自定义统计方法审核",className:"method-title"}),l.a.createElement("div",{className:"method-content-wrapper"},l.a.createElement("h3",null,"统计方法列表："),l.a.createElement(m.a,{dataSource:y,columns:d,rowKey:"id",pager:u,loading:p,onPageChange:this.onChange}),l.a.createElement(r.a,{width:"600px",visible:n,title:"API详情",onCancel:this.handleCancel,footer:g},l.a.createElement("ul",{className:"name-wrapper"},l.a.createElement("li",{className:"item"},"统计方法名称："),l.a.createElement("li",{className:"item"},s.apiName)),l.a.createElement("ul",{className:"detail-wrapper"},l.a.createElement("li",{className:"item"},"详情："),l.a.createElement("li",{className:"item"},"状态：",h),l.a.createElement("li",{className:"item"},"产品名称：",s.productName),l.a.createElement("li",{className:"item"},"统计协议：",s.property),l.a.createElement("li",{className:"item"},"统计精度：",b),l.a.createElement("li",{className:"item"},"返回值计算规则：",this._ruleType(s.ruleType))))))}}])&&d(n.prototype,u),s&&d(n,s),t}();t.default=Object(u.b)(function(e){return{methodList:e.getIn(["customMethod","methodList"]).toJS(),pager:e.getIn(["customMethod","pager"]).toJS(),curApi:e.getIn(["customMethod","curApi"]).toJS(),methodListLoading:e.getIn(["customMethod","methodListLoading"])}},function(e){return{getMethodList:function(t){var n=s.a.getMethodList(t);e(n)},getMethodDetail:function(t){var n=s.a.getMethodDetail(t);e(n)}}})(v)},1398:function(e,t,n){"use strict";n.r(t);n(20),n(35),n(36),n(28),n(45),n(46),n(22),n(31),n(32);var r=n(0),o=n.n(r),a=n(39),i=(n(92),n(33)),c=(n(29),n(334),n(65),n(280),n(40),n(41),n(37),n(30),n(279),n(152)),l=n(161),u=n(4),s=n(1345),p=n(448),f=n(663);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={},h=function(){return f.b.slice(1).map(function(e){return e.id}).join(",")},g=function(){return{type:l.b}},v=function(){return{type:l.c}},O=function(){return function(e){var t;e({type:l.e}),(t=y({},b),u.b.Post("manage-open/auditScene/getSceneList",t).then(function(e){return{list:e.data.data.list,pager:e.data.data.pager,code:e.data.code,data:e}})).then(function(t){var n=t.code,r=t.list,o=t.pager;e(0===n?function(e){var t=e.list,n=e.pager;return{type:l.d,list:t,pager:n}}({list:r,pager:o}):g())}).catch(function(t){e(g())})}},E=function(e){var t,n,r=e.types;r||(r=h()),t=b,n=y({},e,{types:r}),Object.keys(n).forEach(function(e){var r,o=n[e],a=!(null==(r=o)||""===r);!a&&e in t?delete t[e]:a&&(t[e]=o)})},w=function(e){var t=e.id,n=e.productId;return function(r){var o,a=c.a.loading("正在读取详情数据...",0);(o={id:t,productId:n},u.b.Post("manage-open/auditScene/getSceneDetailById",o,{},{isModalError:!0})).then(function(n){var o,i=n.data,c=i.code,u=i.data;i.msg;(a(),0===c)&&(r((o=y({},u,{prevDetailData:e}),{type:l.f,detailData:o})),1!==u.readStatus&&Object(s.b)({id:t}).then(function(e){0===e.data.code&&r(Object(p.getMsgCount)())}))}).catch(function(e){a()})}},j=function(e){return function(t){var n;t({type:l.h}),(n=e,u.b.Post("manage-open/auditScene/update",n,{},{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},isModalError:!0})).then(function(e){0===e.data.code?(c.a.success("提交审核成功"),t({type:l.g}),t(O())):t(v())}).catch(function(e){t(v())})}},P=(n(117),n(71),n(21)),S=(n(186),n(72)),k=(n(163),n(50)),D=(n(138),n(79));function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=x(this,(e=N(t)).call.apply(e,[this].concat(o)))).sty={width:"193px"},n.checkProductId=function(e,t,n){void 0===t||/^\d*?$/.test(t)?n():n("产品ID仅为数字!")},n.onSearch=function(e){e.preventDefault();var t=n.props,r=t.form,o=t.changeSearchData,a=t.getList;r.validateFields().then(function(e){o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{pageIndex:1})),a()}).catch(function(e){c.a.warn("请根据提示完成选项")})},n.clear=function(){n.props.form.setFieldsValue({productId:"",statu:void 0})},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=(e.serverTypeList,e.checkerList),n=e.isLoading,r=e.form.getFieldDecorator,a=!!n;return o.a.createElement(k.a,{layout:"inline",onSubmit:this.onSearch},o.a.createElement(k.a.Item,{label:"产品ID"},r("productId",{rules:[{validator:this.checkProductId}]})(o.a.createElement(D.a,{placeholder:"请输入产品ID",maxLength:30,allowClear:!0}))),o.a.createElement(k.a.Item,{label:"审核状态"},r("statu",{initialValue:void 0})(o.a.createElement(S.a,{placeholder:"请选择审核状态",style:this.sty},t.map(function(e){var t=e.id,n=e.value;return o.a.createElement(S.a.Option,{value:t,key:t},n)})))),o.a.createElement(k.a.Item,null,o.a.createElement(P.a,{icon:"search",type:"primary",htmlType:"submit",loading:a},"搜索")),o.a.createElement(k.a.Item,null,o.a.createElement(P.a,{onClick:this.clear},"重置")))}}])&&T(n.prototype,a),i&&T(n,i),t}(),L=k.a.create({name:"SearchServerAudit"})(M),F=Object(a.b)(function(e,t){var n=e.get("sceneChecker");return{serverTypeList:n.serverTypeList,checkerList:n.checkerList,isLoading:n.isLoading}},function(e,t){return{changeSearchData:E,getList:function(){return e(O())}}})(L);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,J(t).apply(this,arguments))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(i.a,null,o.a.createElement("h2",{className:"page-title"},"场景服务审核"),o.a.createElement(F,null)),o.a.createElement("div",{className:"page-interval"}))}}])&&z(n.prototype,a),c&&z(n,c),t}(),H=(n(283),n(167)),U=(n(206),n(80)),Y=n(96),K=n(6),W=n.n(K);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){if(!e)return null;var t=W()(e);return t.add(t.utcOffset()/60,"h").format("YYYY-MM-DD HH:mm:ss")},te=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=X(this,(e=Q(t)).call.apply(e,[this].concat(i)))).columns=[{title:"产品ID",dataIndex:"productId",key:"productId"},{title:"产品名称",dataIndex:"productName",key:"productName"},{title:"提交用户",dataIndex:"email",key:"email"},{title:"状态",dataIndex:"statu",key:"statu",render:function(e){var t=0===e?"待审核":"已审核",n={color:0===e?"blue":"green"};return o.a.createElement("span",{style:n},t)}},{title:"申请日期",dataIndex:"createTime",key:"createTime",render:function(e){return ee(e)}},{title:"操作",dataIndex:"id",key:"done",width:"120px",render:function(e,t){var a=t.statu,i=0===a?"form":"search",c=0===a?"审核":"查看",l=0===a?"primary":void 0;return o.a.createElement(r.Fragment,null,o.a.createElement(U.a,{title:c,placement:"top"},o.a.createElement(P.a,{shape:"circle",type:l,icon:i,size:"small",onClick:function(){return n.openModal(t)}})))}}],n.openModal=function(e){n.props.getDetailAndOpenModal(e)},n.setPage=function(e){var t=n.props,r=t.pager.totalPages,o=t.changeSearchData,a=t.getList;e>r?c.a.warning("输入页码超过总页数！"):(o({pageIndex:e}),a())},n.tryAgain=function(){n.props.getList()},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.pager,r=e.isLoading,a=void 0!==r&&r,i=e.isError;return void 0!==i&&i?o.a.createElement(H.a,{status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:o.a.createElement(P.a,{type:"primary",onClick:this.tryAgain},"重 试")}):o.a.createElement(Y.a,{className:"page-table",bordered:!0,columns:this.columns,dataSource:t,rowKey:"id",onPageChange:this.setPage,pager:n,loading:a})}}])&&$(n.prototype,a),i&&$(n,i),t}(),ne=Object(a.b)(function(e,t){var n=e.get("sceneChecker");return{serverTypeMap:n.serverTypeMap,checkerMap:n.checkerMap,list:n.list,pager:n.pager,isLoading:n.isLoading,isError:n.isError}},function(e,t){return{changeSearchData:E,getList:function(){return e(O())},getDetailAndOpenModal:function(t){return e(w(t))}}})(te);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ae(this,ie(t).apply(this,arguments))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(i.a,null,o.a.createElement(ne,null))}}])&&oe(n.prototype,a),c&&oe(n,c),t}(),ue=(n(164),n(241),n(118)),se=(n(281),n(337),n(187)),pe=(n(285),n(61)),fe=(n(436),n(168));function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=de(this,(e=be(t)).call.apply(e,[this].concat(a)))).redSty={color:"red"},n.greenSty={color:"green"},n.tableScroll={y:240},n.columns=[{title:"序号",dataIndex:"deviceCmdId",key:"deviceCmdId",width:60,render:function(e,t,n){return n+1}},{title:"功能名称",dataIndex:"name",width:200,key:"name",render:function(e){return o.a.createElement("div",{className:"page-ellipsis",style:{width:"183px"},title:e},e)}},{title:"类型",dataIndex:"cmdType",key:"cmdType",width:80,render:function(e){return n.props.sceneType[e]}},{title:"触发协议",dataIndex:"protocolName",key:"protocolName",width:200,render:function(e){return o.a.createElement("div",{className:"page-ellipsis",style:{width:"183px"},title:e},e)}},{title:"触发参数",dataIndex:"triggerParam",width:200,key:"triggerParam",render:function(e){var t=e||"-";return o.a.createElement("div",{className:"page-ellipsis",style:{width:"183px"},title:t},t)}},{title:"审核操作",dataIndex:"deviceCmdId",key:"done",render:function(e,t){var r=t.status,a=n.props.form,i=a.getFieldDecorator,c="statu-"+e,l=(0,a.getFieldValue)(c);return 0===r?o.a.createElement(k.a.Item,null,i(c,{rules:[{required:!0,message:"请选择审核意见"}]})(o.a.createElement(fe.a.Group,null,o.a.createElement(fe.a,{value:1},o.a.createElement("span",{style:1===l?n.greenSty:null},"通过")),o.a.createElement(fe.a,{value:2},o.a.createElement("span",{style:2===l?n.redSty:null},"不通过"))))):1===r?o.a.createElement("span",{style:n.greenSty},"通过"):o.a.createElement("span",{style:n.redSty},"不通过")}}],n.getPopupContainer=function(e){return e.parentNode},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.detailData,n=e.form,a=n.getFieldDecorator,i=n.getFieldValue,c=t||{},l=c.status,u=c.remark,s=c.sceneFunctionList,p=c.typeName,f=c.productName,m=c.prevDetailData,y=(m=void 0===m?{}:m).email,d=m.createTime,b=m.updateTime,h=0===l&&void 0!==l,g=2===l,v=s||[],O=v.map(function(e){var t=e.deviceCmdId;return i("statu-"+t)}),E=v.length>4,w=O.indexOf(2)>-1;return o.a.createElement(r.Fragment,null,o.a.createElement(pe.a,{title:"基础信息",column:2,size:"small"},o.a.createElement(pe.a.Item,{label:"产品名称"},f),o.a.createElement(pe.a.Item,{label:"所属分类"},p),o.a.createElement(pe.a.Item,{label:"服务类型"},"场景联动服务"),o.a.createElement(pe.a.Item,{label:"申请账号"},y),o.a.createElement(pe.a.Item,{label:"申请时间"},ee(d)),!h&&b?o.a.createElement(pe.a.Item,{label:"处理时间"},ee(b)):null),o.a.createElement(pe.a,{title:"审核内容",size:"small"}),o.a.createElement(se.a,{bordered:!0,className:"page-server-table",size:"small",columns:this.columns,dataSource:v,rowKey:"deviceCmdId",pagination:!1,scroll:E?this.tableScroll:void 0}),o.a.createElement("div",{className:"page-interval"}),h&&w?o.a.createElement(r.Fragment,null,o.a.createElement(pe.a,{title:"驳回说明",size:"small"}),o.a.createElement(k.a.Item,null,a("remark",{})(o.a.createElement(D.a.TextArea,{rows:3,maxLength:500,placeholder:"请输入驳回说明"})))):null,g?o.a.createElement(pe.a,{title:"驳回说明",size:"small"},o.a.createElement(pe.a.Item,{span:3},u)):null)}}])&&ye(n.prototype,a),i&&ye(n,i),t}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=we(this,(e=je(t)).call.apply(e,[this].concat(o)))).closeModal=function(){n.props.closeModal()},n.submit=function(){var e=n.props,t=e.detailData,r=e.form,o=e.checkForAPP;r.validateFields().then(function(e){var n=t.id,r=t.sceneFunctionList;o({id:n,list:r.map(function(t){var n=t.deviceCmdId;return{deviceCmdId:n,cmdType:t.cmdType,status:e["statu-"+n]}}),remark:e.remark||""})}).catch(function(e){c.a.warn("请根据提示完成选项")})},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.showDetailModal,n=(e.serverTypeMap,e.sceneType),r=e.detailData,a=e.isSaving,i=e.form,c={};return 0===(r||{}).status||(c.footer=null),o.a.createElement(ue.a,Oe({width:1120,title:"场景服务审核",visible:t,okButtonProps:{loading:a},onOk:this.submit,onCancel:this.closeModal,destroyOnClose:!0},c),o.a.createElement(ge,{detailData:r,sceneType:n,form:i}))}}])&&Ee(n.prototype,a),i&&Ee(n,i),t}(),ke=k.a.create({name:"sceneAuditChecker"})(Se),De=Object(a.b)(function(e,t){var n=e.get("sceneChecker");return{showDetailModal:n.showDetailModal,serverTypeMap:n.serverTypeMap,sceneType:n.sceneType,detailData:n.detailData,isSaving:n.isSaving}},function(e,t){return{closeModal:function(){return e({type:l.a})},checkForAPP:function(t){return e(j(t))}}})(ke);n(1386);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Ce(this,Te(t).call(this,e)),e.init(),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(B,null),o.a.createElement(le,null),o.a.createElement(De,null))}}])&&Ie(n.prototype,a),i&&Ie(n,i),t}(),Ae=Object(a.b)(void 0,function(e,t){return{init:function(){return e(function(e){b={pageRows:10,pageIndex:1,types:h()},O()(e)})},getDetailAndOpenModal:function(t){return e(w(t))}}})(Ne);n.d(t,"default",function(){return Ae})},1399:function(e,t,n){"use strict";n.r(t);n(20),n(35),n(36),n(28),n(45),n(46),n(22),n(31),n(439),n(32);var r=n(0),o=n.n(r),a=n(39),i=(n(92),n(33)),c=(n(29),n(334),n(65),n(280),n(40),n(41),n(37),n(30),n(279),n(152)),l=n(160),u=n(1345),s=n(448),p=n(662);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={},b=function(){return p.b.slice(1).map(function(e){return e.id}).join(",")},h=function(e){var t=e.list,n=e.pager;return{type:l.d,list:t,pager:n}},g=function(){return{type:l.b}},v=function(){return{type:l.c}},O=function(){return function(e){e({type:l.e}),Object(u.d)(m({},d)).then(function(t){var n=t.code,r=t.list,o=t.pager;e(0===n?h({list:r,pager:o}):g()),e(h({list:r,pager:o}))}).catch(function(t){e(g())})}},E=function(e){var t,n,r=e.types;r||(r=b()),t=d,n=m({},e,{types:r}),Object.keys(n).forEach(function(e){var r,o=n[e],a=!(null==(r=o)||""===r);!a&&e in t?delete t[e]:a&&(t[e]=o)})},w=function(e){var t=e.productId,n=e.typeId,r=e.id;return function(o){var a=c.a.loading("正在读取详情数据...",0);Object(u.c)({productId:t,typeId:n,id:r}).then(function(t){var n,r=t.data,i=r.code,c=r.data;r.msg;if(a(),0===i){o((n=m({},c,{prevDetailData:e}),{type:l.f,detailData:n}));var p=c.flowCheck,f=p.id;1!==p.readStatus&&Object(u.b)({id:f}).then(function(e){0===e.data.code&&o(Object(s.getMsgCount)())})}}).catch(function(e){a()})}},j=function(e){var t=e.id,n=e.statu,r=e.remark,o={id:t,statu:n};return r&&(o.remark=r),function(e){e({type:l.h}),Object(u.a)(o).then(function(t){var n=t.data,r=n.code;n.data,n.msg;0===r?(c.a.success("提交审核成功"),e({type:l.g}),e(O())):e(v())}).catch(function(t){e(v())})}},P=(n(117),n(71),n(21)),S=(n(186),n(72)),k=(n(163),n(50)),D=(n(138),n(79));function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=x(this,(e=N(t)).call.apply(e,[this].concat(o)))).sty={width:"193px"},n.checkProductId=function(e,t,n){void 0===t||/^\d*?$/.test(t)?n():n("产品ID仅为数字!")},n.onSearch=function(e){e.preventDefault();var t=n.props,r=t.form,o=t.changeSearchData,a=t.getList;r.validateFields().then(function(e){o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{pageIndex:1})),a()}).catch(function(e){c.a.warn("请根据提示完成选项")})},n.clear=function(){n.props.form.setFieldsValue({productId:"",statu:void 0})},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.checkerList,n=e.isLoading,r=e.form.getFieldDecorator,a=!!n;return o.a.createElement(k.a,{layout:"inline",onSubmit:this.onSearch},o.a.createElement(k.a.Item,{label:"产品ID"},r("productId",{rules:[{validator:this.checkProductId}]})(o.a.createElement(D.a,{placeholder:"请输入产品ID",maxLength:30,allowClear:!0}))),o.a.createElement(k.a.Item,{label:"审核状态"},r("statu",{initialValue:void 0})(o.a.createElement(S.a,{placeholder:"请选择审核状态",style:this.sty},t.map(function(e){var t=e.id,n=e.value;return o.a.createElement(S.a.Option,{value:t,key:t},n)})))),o.a.createElement(k.a.Item,null,o.a.createElement(P.a,{icon:"search",type:"primary",htmlType:"submit",loading:a},"搜索")),o.a.createElement(k.a.Item,null,o.a.createElement(P.a,{onClick:this.clear},"重置")))}}])&&T(n.prototype,a),i&&T(n,i),t}(),L=k.a.create({name:"SearchServerAudit"})(M),F=Object(a.b)(function(e,t){var n=e.get("serverChecker");return{serverTypeList:n.serverTypeList,checkerList:n.checkerList,isLoading:n.isLoading}},function(e,t){return{changeSearchData:E,getList:function(){return e(O())}}})(L);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,J(t).apply(this,arguments))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(i.a,null,o.a.createElement("h2",{className:"page-title"},"APP控制服务审核"),o.a.createElement(F,null)),o.a.createElement("div",{className:"page-interval"}))}}])&&z(n.prototype,a),c&&z(n,c),t}(),H=(n(283),n(167)),U=(n(206),n(80)),Y=n(96),K=n(6),W=n.n(K);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){if(!e)return null;var t=W()(e);return t.add(t.utcOffset()/60,"h").format("YYYY-MM-DD HH:mm:ss")},te=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=X(this,(e=Q(t)).call.apply(e,[this].concat(i)))).columns=[{title:"产品ID",dataIndex:"productId",key:"productId"},{title:"产品名称",dataIndex:"productName",key:"productName"},{title:"提交用户",dataIndex:"email",key:"email"},{title:"状态",dataIndex:"statu",key:"statu",render:function(e){var t=n.props.checkerMap[e],r={color:2===e?"red":1===e?"green":"blue"};return o.a.createElement("span",{style:r},t)}},{title:"申请日期",dataIndex:"createTime",key:"createTime",render:function(e){return ee(e)}},{title:"操作",dataIndex:"id",key:"done",width:"120px",render:function(e,t){var a=t.statu,i=0===a?"form":"search",c=0===a?"审核":"查看",l=0===a?"primary":void 0;return o.a.createElement(r.Fragment,null,o.a.createElement(U.a,{title:c,placement:"top"},o.a.createElement(P.a,{shape:"circle",type:l,icon:i,size:"small",onClick:function(){return n.openModal(t)}})))}}],n.openModal=function(e){n.props.getDetailAndOpenModal(e)},n.setPage=function(e){var t=n.props,r=t.pager.totalPages,o=t.changeSearchData,a=t.getList;e>r?c.a.warning("输入页码超过总页数！"):(o({pageIndex:e}),a())},n.tryAgain=function(){n.props.getList()},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.pager,r=e.isLoading,a=void 0!==r&&r,i=e.isError;return void 0!==i&&i?o.a.createElement(H.a,{status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:o.a.createElement(P.a,{type:"primary",onClick:this.tryAgain},"重 试")}):o.a.createElement(Y.a,{className:"page-table",bordered:!0,columns:this.columns,dataSource:t,rowKey:"id",onPageChange:this.setPage,pager:n,loading:a})}}])&&$(n.prototype,a),i&&$(n,i),t}(),ne=Object(a.b)(function(e,t){var n=e.get("serverChecker");return{serverTypeMap:n.serverTypeMap,checkerMap:n.checkerMap,list:n.list,pager:n.pager,isLoading:n.isLoading,isError:n.isError}},function(e,t){return{changeSearchData:E,getList:function(){return e(O())},getDetailAndOpenModal:function(t){return e(w(t))}}})(te);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ae(this,ie(t).apply(this,arguments))}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(i.a,null,o.a.createElement(ne,null))}}])&&oe(n.prototype,a),c&&oe(n,c),t}(),ue=(n(164),n(241),n(118)),se=(n(436),n(168)),pe=(n(796),n(463)),fe=(n(285),n(61));function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=de(this,(e=be(t)).call.apply(e,[this].concat(o)))).mlSty={marginLeft:"20px",wordBreak:"break-all"},n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.detailData,n=e.form,a=n.getFieldDecorator,c=n.getFieldValue,l=t||{},u=l.appProject,s=void 0===u?{}:u,p=l.flowCheck,f=void 0===p?{}:p,m=l.product,y=void 0===m?{}:m,d=y.productId,b=y.productName,h=y.allCategoryName,g=s.projectName,v=s.appName,O=s.qrcode,E=s.status,w=f.statu,j=f.remark,P=0===w,S=2===w,_=c("statu");return o.a.createElement(r.Fragment,null,o.a.createElement(fe.a,{title:"基础信息",column:2,size:"small"},o.a.createElement(fe.a.Item,{label:"产品名称"},b),o.a.createElement(fe.a.Item,{label:"页面名称"},g),o.a.createElement(fe.a.Item,{label:"产品ID"},d),o.a.createElement(fe.a.Item,{label:"发布APP"},v),o.a.createElement(fe.a.Item,{label:"所属分类"},h),o.a.createElement(fe.a.Item,{label:"升级方式"},1===E?"普通升级":"强制升级")),o.a.createElement(fe.a,{className:"page-nomb",title:P?"审核内容":"页面二维码",size:"small"}),o.a.createElement(i.a,{className:"page-ewm",hoverable:!0,cover:o.a.createElement("img",{alt:O?"预览二维码":"二维码未获取到",src:O})},o.a.createElement(i.a.Meta,{title:"扫描预览页面"})),o.a.createElement("div",{className:"page-interval"}),o.a.createElement(fe.a,{className:"page-nomb",size:"small",title:P?"审核结果":o.a.createElement(r.Fragment,null,o.a.createElement("span",null,"审核状态"),o.a.createElement(pe.a,{style:this.mlSty,status:1===w?"success":"error",text:1===w?"通过":"不通过"}))},P?o.a.createElement(fe.a.Item,{span:3},o.a.createElement(k.a.Item,null,a("statu",{rules:[{required:!0,message:"请选择审核意见"}]})(o.a.createElement(se.a.Group,null,o.a.createElement(se.a,{value:1},"审核通过"),o.a.createElement(se.a,{value:2},"审核不通过"))))):null),P&&2===_?o.a.createElement(r.Fragment,null,o.a.createElement(fe.a,{title:"驳回说明",size:"small"}),o.a.createElement(k.a.Item,{className:"page-nomb"},a("remark",{})(o.a.createElement(D.a.TextArea,{rows:3,maxLength:500,placeholder:"请输入驳回说明"})))):null,S?o.a.createElement(fe.a,{title:o.a.createElement(r.Fragment,null,o.a.createElement("span",null,"驳回说明"),o.a.createElement(pe.a,{style:this.mlSty,status:"error",text:j||"无"})),size:"small"}):null)}}])&&ye(n.prototype,a),c&&ye(n,c),t}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Pe(this,(e=Se(t)).call.apply(e,[this].concat(o)))).closeModal=function(){n.props.closeModal()},n.submit=function(){var e=n.props,t=e.detailData,r=e.form,o=e.checkForAPP;r.validateFields().then(function(e){var n=t.prevDetailData.type,r=void 0===n?11:n,a=t.flowCheck.id;11===r&&o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach(function(t){we(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:a},e))}).catch(function(e){c.a.warn("请根据提示完成选项")})},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.showDetailModal,n=e.serverTypeMap,r=(e.sceneType,e.detailData),a=e.isSaving,i=e.form,c=r||{},l=c.prevDetailData,u=c.flowCheck,s=(u=void 0===u?{}:u).statu,p=(l||{}).type,f=void 0===p?11:p,m=n[f],y=11===f?800:1080,d={};return 0===s||(d.footer=null),o.a.createElement(ue.a,Oe({width:y,title:m,visible:t,okButtonProps:{loading:a},onOk:this.submit,onCancel:this.closeModal,destroyOnClose:!0},d),o.a.createElement(ge,{detailData:r,form:i}))}}])&&je(n.prototype,a),i&&je(n,i),t}(),_e=k.a.create({name:"serverAuditChecker"})(De),Ie=Object(a.b)(function(e,t){var n=e.get("serverChecker");return{showDetailModal:n.showDetailModal,serverTypeMap:n.serverTypeMap,sceneType:n.sceneType,detailData:n.detailData,isSaving:n.isSaving}},function(e,t){return{closeModal:function(){return e({type:l.a})},checkForAPP:function(t){return e(j(t))}}})(_e),Ce=n(27);n(1385);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Ne(this,Ae(t).call(this,e)),e.init(),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=Ce.d.getHrefParams(this.props.location.search)||{},t=e.id,n=e.productId,r=e.typeId;t&&n&&r&&this.props.getDetailAndOpenModal({id:t,productId:n,typeId:r})}},{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(B,null),o.a.createElement(le,null),o.a.createElement(Ie,null))}}])&&xe(n.prototype,a),i&&xe(n,i),t}(),Fe=Object(a.b)(void 0,function(e,t){return{init:function(){return e(function(e){d={pageRows:10,pageIndex:1,types:b()},O()(e)})},getDetailAndOpenModal:function(t){return e(w(t))}}})(Le);n.d(t,"default",function(){return Fe})},1401:function(e,t,n){"use strict";n.r(t);n(20),n(35),n(36),n(28),n(45),n(46),n(22),n(31),n(439),n(32),n(92);var r=n(33),o=n(0),a=n.n(o),i=n(39),c=(n(29),n(40),n(41),n(37),n(30),n(279),n(152)),l=n(162),u=n(4),s=n(1345),p=n(448);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={},d=function(){return{type:l.b}},b=function(){return{type:l.c}},h=function(){return function(e){var t;e({type:l.e}),(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},y),u.b.Post("manage-open/userAudit/getList",t).then(function(e){return{list:e.data.data.list,pager:e.data.data.pager,data:e,code:e.data.code}})).then(function(t){var n=t.list,r=t.pager,o=t.code;e(0===o?function(e){var t=e.list,n=e.pager;return{type:l.d,list:t,pager:n}}({list:n,pager:r}):d())}).catch(function(){e(d())})}},g=function(e){var t,n;t=y,n=e,Object.keys(n).forEach(function(e){var r,o=n[e],a=!(null==(r=o)||""===r);!a&&e in t?delete t[e]:a&&(t[e]=o)})},v=function(e){var t=e.id;return function(n){var r,o=c.a.loading("正在读取详情数据...",0);(r={id:t},u.b.Post("manage-open/userAudit/get",r,{},{isModalError:!0})).then(function(r){var a,i=r.data,c=i.code,u=i.data;(o(),0===c)&&(n((a={data:u,prevDetailData:e},{type:l.f,detailData:a})),1!==u.readStatus&&Object(s.b)({id:t}).then(function(e){0===e.data.code&&n(Object(p.getMsgCount)())}))}).catch(function(e){o()})}},O=function(e){var t=e.id,n=e.statu,r=e.remark,o={id:t,statu:n};return r&&(o.remark=r),function(e){e({type:l.h}),Object(s.a)(o).then(function(t){0===t.data.code?(c.a.success("提交审核成功"),e({type:l.g}),e(h())):e(b())}).catch(function(){e(b())})}},E=(n(117),n(65),n(71),n(21)),w=(n(186),n(72)),j=(n(163),n(50)),P=(n(138),n(79));function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=I(this,(e=C(t)).call.apply(e,[this].concat(o)))).sty={width:"193px"},n.onSearch=function(e){e.preventDefault();var t=n.props,r=t.form,o=t.changeSearchData,a=t.getList;r.validateFields().then(function(e){o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{pageIndex:1})),a()}).catch(function(){c.a.warn("请根据提示完成选项")})},n.clear=function(){n.props.form.setFieldsValue({productName:"",statu:void 0})},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.checkerList,n=e.isLoading,r=e.form.getFieldDecorator,o=!!n;return a.a.createElement(j.a,{layout:"inline",onSubmit:this.onSearch},a.a.createElement(j.a.Item,{label:"提交用户"},r("productName",{})(a.a.createElement(P.a,{placeholder:"请输入用户",maxLength:30,allowClear:!0}))),a.a.createElement(j.a.Item,{label:"审核状态"},r("statu",{initialValue:void 0})(a.a.createElement(w.a,{placeholder:"请选择审核状态",style:this.sty},t.map(function(e){var t=e.id,n=e.value;return a.a.createElement(w.a.Option,{value:t,key:t},n)})))),a.a.createElement(j.a.Item,null,a.a.createElement(E.a,{type:"primary",icon:"search",htmlType:"submit",loading:o},"搜索")),a.a.createElement(j.a.Item,null,a.a.createElement(E.a,{onClick:this.clear},"重置")))}}])&&_(n.prototype,r),i&&_(n,i),t}(),N=j.a.create({name:"SearchUserAudit"})(x),A=Object(i.b)(function(e){var t=e.get("userChecker");return{checkerList:t.checkerList,isLoading:t.isLoading}},function(e){return{changeSearchData:g,getList:function(){return e(h())}}})(N);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),F(this,R(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,o["Component"]),n=t,(i=[{key:"render",value:function(){return a.a.createElement(o.Fragment,null,a.a.createElement(r.a,null,a.a.createElement("h2",{className:"page-title"},"用户审核"),a.a.createElement(A,null)),a.a.createElement("div",{className:"page-interval"}))}}])&&L(n.prototype,i),c&&L(n,c),t}(),J=(n(283),n(167)),q=(n(206),n(80)),B=n(96),H=n(6),U=n.n(H);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=function(e){if(!e)return null;var t=U()(e);return t.add(t.utcOffset()/60,"h").format("YYYY-MM-DD HH:mm:ss")},Q=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=W(this,(e=G(t)).call.apply(e,[this].concat(i)))).columns=[{title:"提交用户",dataIndex:"name",key:"name"},{title:"审核类型",dataIndex:"type",key:"type",render:function(e){return 12===e?"用户注销":"未知审核"}},{title:"状态",dataIndex:"status",key:"status",render:function(e){var t=n.props.checkerMap[e],r={color:2===e?"red":1===e?"green":"blue"};return a.a.createElement("span",{style:r},t)}},{title:"申请日期",dataIndex:"createTime",key:"createTime",render:function(e){return X(e)}},{title:"操作",dataIndex:"id",key:"done",width:"120px",render:function(e,t){var r=t.statu,i=0===r?"form":"search",c=0===r?"审核":"查看",l=0===r?"primary":void 0;return a.a.createElement(o.Fragment,null,a.a.createElement(q.a,{title:c,placement:"top"},a.a.createElement(E.a,{shape:"circle",type:l,icon:i,size:"small",onClick:function(){return n.openModal(t)}})))}}],n.openModal=function(e){n.props.getDetailAndOpenModal(e)},n.setPage=function(e){var t=n.props,r=t.pager.totalPages,o=t.changeSearchData,a=t.getList;e>r?c.a.warning("输入页码超过总页数！"):(o({pageIndex:e}),a())},n.tryAgain=function(){n.props.getList()},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.pager,r=e.isLoading,o=void 0!==r&&r,i=e.isError;return void 0!==i&&i?a.a.createElement(J.a,{status:"error",title:"查询失败",subTitle:"请确认网络连接是否正常.",extra:a.a.createElement(E.a,{type:"primary",onClick:this.tryAgain},"重 试")}):a.a.createElement(B.a,{bordered:!0,columns:this.columns,dataSource:t,rowKey:"id",onPageChange:this.setPage,pager:n,loading:o})}}])&&K(n.prototype,r),i&&K(n,i),t}(),Z=Object(i.b)(function(e){var t=e.get("userChecker");return{checkerMap:t.checkerMap,list:t.list,pager:t.pager,isLoading:t.isLoading,isError:t.isError}},function(e){return{changeSearchData:g,getList:function(){return e(h())},getDetailAndOpenModal:function(t){return e(v(t))}}})(Q),ee=(n(164),n(241),n(118)),te=(n(796),n(463)),ne=(n(285),n(61));function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=ie(this,(e=ce(t)).call.apply(e,[this].concat(o)))).mlSty={marginLeft:"20px"},n.redStyle={color:"red"},n.greenStyle={color:"green"},n.closeModal=function(){n.props.closeModal()},n.submit=function(){var e=n.props,t=e.detailData.prevDetailData.id;(0,e.checkForUser)({id:t,statu:1})},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.showDetailModal,n=e.detailData,r=e.isSaving,i=n&&n.data||{},c=i.developerId,l=i.mobilePhone,u=i.createTime,s=i.email,p=i.contactPerson,f=i.contactAddr,m=i.reason,y=i.appApply,d=i.hardware,b=i.status,h=void 0===b?0:b,g=0===h,v={};return g||(v.footer=null),a.a.createElement(ee.a,oe({width:800,title:"用户注销审核",visible:t,okButtonProps:{loading:r},okText:"审核通过",onOk:this.submit,onCancel:this.closeModal,destroyOnClose:!0},v),a.a.createElement(ne.a,{title:"账号信息",column:2,size:"small"},a.a.createElement(ne.a.Item,{label:"账号ID"},c),a.a.createElement(ne.a.Item,{label:"注册时间"},function(e){if(!e)return null;var t=U()(e);return t.add(t.utcOffset()/60,"h").format("YYYY-MM-DD HH:mm:ss")}(u)),a.a.createElement(ne.a.Item,{label:"手机号码"},l),a.a.createElement(ne.a.Item,{label:"电子邮箱"},s),a.a.createElement(ne.a.Item,{label:"联系人"},p),a.a.createElement(ne.a.Item,{label:"联系地址"},f)),a.a.createElement(ne.a,{size:"small",title:"注销说明",column:2},a.a.createElement(ne.a.Item,{label:"注销原因",span:2},m),a.a.createElement(ne.a.Item,{label:"保持应用可用"},1===y?a.a.createElement("span",{style:this.greenStyle},"保持应用&APP可用"):2===y?a.a.createElement("span",{style:this.redStyle},"应用&APP不可用"):null),a.a.createElement(ne.a.Item,{label:"保持硬件可用"},1===d?a.a.createElement("span",{style:this.greenStyle},"保持硬件可用"):2===d?a.a.createElement("span",{style:this.redStyle},"硬件产品不可用"):null)),g?null:a.a.createElement(ne.a,{className:"page-nomb",size:"small",title:a.a.createElement(o.Fragment,null,a.a.createElement("span",null,"审核结果"),a.a.createElement(te.a,{style:this.mlSty,status:1===h?"success":"error",text:1===h?"通过":"不通过"}))}),a.a.createElement("div",{className:"page-interval"}),a.a.createElement("div",{className:"page-interval"}),a.a.createElement("div",{className:"page-interval"}))}}])&&ae(n.prototype,r),i&&ae(n,i),t}(),se=Object(i.b)(function(e){var t=e.get("userChecker");return{showDetailModal:t.showDetailModal,detailData:t.detailData,isSaving:t.isSaving}},function(e){return{closeModal:function(){return e({type:l.a})},checkForUser:function(t){return e(O(t))}}})(ue),pe=n(27);n(1387);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=ye(this,de(t).call(this,e)),e.init(),n}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,o["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=(pe.d.getHrefParams(this.props.location.search)||{}).id,t=void 0===e?null:e;t&&this.props.getDetailAndOpenModal({id:t})}},{key:"render",value:function(){return a.a.createElement(o.Fragment,null,a.a.createElement(V,null),a.a.createElement(r.a,null,a.a.createElement(Z,null)),a.a.createElement(se,null))}}])&&me(n.prototype,i),c&&me(n,c),t}(),ge=Object(i.b)(void 0,function(e){return{init:function(){return e(function(e){y={pageRows:10,pageIndex:1},h()(e)})},getDetailAndOpenModal:function(t){return e(v(t))}}})(he);n.d(t,"default",function(){return ge})},1413:function(e,t,n){"use strict";n.r(t);n(242);var r=n(0),o=n.n(r),a=n(104),i=(n(20),n(35),n(36),n(117),n(29),n(28),n(65),n(40),n(41),n(45),n(37),n(46),n(22),n(31),n(166),n(30),n(32),n(92),n(33)),c=(n(186),n(72)),l=(n(138),n(79)),u=(n(206),n(80)),s=(n(71),n(21)),p=(n(241),n(118)),f=(n(163),n(50)),m=n(27),y=n(39),d=(n(436),n(168));function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=g(this,(e=v(t)).call.apply(e,[this].concat(o)))).state={statu:1,remark:""},n.onChange=function(e){var t=e.target.value;n.setState({statu:t})},n.changeText=function(e){n.setState({remark:e.target.value||""})},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.state.statu;return o.a.createElement("div",{className:"audit-modal"},o.a.createElement("span",{className:"label"},"审核结果："),o.a.createElement(d.a.Group,{value:e,buttonStyle:"solid",onChange:this.onChange},o.a.createElement(d.a.Button,{value:1},"通过"),o.a.createElement(d.a.Button,{value:2},"不通过")),e&&2==e?o.a.createElement("div",{style:{marginTop:10}},o.a.createElement("span",{className:"label"},"说明："),o.a.createElement(l.a.TextArea,{style:{height:100,marginTop:10},onChange:this.changeText})):null)}}])&&h(n.prototype,a),i&&h(n,i),t}(),w=n(459),j=n(96),P=n(1339),S=n(1340);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=f.a.Item,A={0:"待审核",1:"通过",2:"未通过"},M=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=C(t).call(this,e),(n=!a||"object"!==k(a)&&"function"!=typeof a?T(r):a).handleAudit=function(e){var t=T(n);p.a.confirm({width:520,title:e.typeName+"审核",centered:!0,okText:"确定",cancelText:"取消",maskClosable:!0,content:o.a.createElement(E,{ref:function(e){return t.refDadio=e}}),onOk:function(){t.props.updateAuditStatus(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:e.id},t.refDadio.state))},onCancel:function(){}})},n.handleClick=function(e){n.props.history.push(e)},n.state={serviceList:[],loading:!1,totalRows:"",pageIndex:"",oldParams:{},query:{}},n}var n,a,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=[{title:"产品名称",dataIndex:"productName",key:"productName",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"发布用户",dataIndex:"email",key:"email",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"审核类型",dataIndex:"typeName",key:"typeName",render:function(e){return o.a.createElement("span",{title:e},e)}},{title:"状态",key:"statuName",width:"120px",render:function(e){return o.a.createElement("span",{style:{color:"".concat(["#0000FF","#333333","#D9001B"][e.statu])}},e.statuName)}},{title:"申请时间",dataIndex:"createTime",key:"createTime",render:function(e){var t=m.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return o.a.createElement("span",{title:t},t)}},{title:"操作",key:"operation",width:"140px",render:function(t){return o.a.createElement("div",null,o.a.createElement(u.a,{placement:"top",title:"审核"},o.a.createElement(s.a,{icon:"file-done",shape:"circle",size:"small",type:0===t.statu?"primary":void 0,onClick:0===t.statu?e.handleAudit.bind(e,t):null})),"  ",o.a.createElement(u.a,{placement:"top",title:"查看"},o.a.createElement(s.a,{icon:"info",shape:"circle",size:"small",onClick:e.handleClick.bind(e,"./".concat(t.productId,"/").concat(t.id))})))}}],n=this.props.form.getFieldDecorator,r=this.props,a=r.productAuditList,p=r.pager,y=r.loading;return o.a.createElement("div",{className:"ProductAuditContent"},o.a.createElement(P.a,{title:"产品审核"},o.a.createElement(f.a,{layout:"inline"},o.a.createElement(N,{label:"产品ID"},n("productId",{getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(o.a.createElement(l.a,{placeholder:"请输入产品ID",maxLength:9,style:{width:240},onPressEnter:this.props.onFilter}))),o.a.createElement(N,{label:"状态"},n("statu")(o.a.createElement(c.a,{style:{width:160},placeholder:"请选择状态"},Object.keys(A).map(function(e,t){return o.a.createElement(c.a.Option,{key:t,value:+e},A[e])})))),o.a.createElement(N,null,o.a.createElement(s.a,{type:"primary",onClick:this.props.onFilter},"查询")),o.a.createElement(N,{style:{marginBottom:"0"}},o.a.createElement(s.a,{onClick:this.props.onReset},"重置")))),o.a.createElement(i.a,{className:"ProductAuditContent_Table",style:{marginTop:10}},o.a.createElement(j.a,{rowKey:"id",bordered:!0,columns:t,dataSource:a,pager:p,onPageChange:this.props.onChange,loading:y})))}}])&&I(n.prototype,a),y&&I(n,y),t}(),L=Object(y.b)(function(e){return{productAuditList:e.getIn(["productAudit","productAuditList"]).toJS(),pager:e.getIn(["productAudit","pager"]).toJS(),loading:e.getIn(["productAudit","loading"])}},function(e){return{getList:function(t){return e(w.a.getAuditList(t))},updateAuditStatus:function(t){return e(w.a.updateAuditStatus(t))}}})(f.a.create()(Object(S.a)(M))),F=n(741);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,a=(e=q(t)).call.apply(e,[this].concat(c)),(n=!a||"object"!==R(a)&&"function"!=typeof a?B(r):a).handleAudit=function(){var e=n.props.match.params.id,t=B(n);p.a.confirm({width:520,title:"提交审核",centered:!0,okText:"确定",cancelText:"取消",maskClosable:!0,content:o.a.createElement(E,{ref:function(e){return t.refDadio=e}}),onOk:function(){t.props.updateAuditStatus(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){V(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:e},t.refDadio.state))},onCancel:function(){}})},n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.productId,n=e.id;this.props.getAuditData({productId:t,id:n})}},{key:"render",value:function(){var e=this,t=this.props.match.params.productId,n=this.props.auditDetail,r=n.statu,a=n.statuName,c=n.remark;return o.a.createElement("div",{className:"product-audit"},o.a.createElement(i.a,null,o.a.createElement("h2",{className:"title"},"发布产品"),o.a.createElement(s.a,{type:"primary",className:"btn-back",onClick:function(){return e.props.history.go(-1)}},"返回")),o.a.createElement(i.a,null,o.a.createElement(F.a,{productId:t,audit:r,clearProductInfo:this.props.clearProductInfo})),0===r?o.a.createElement(s.a,{type:"primary",style:{float:"right",margin:"20px 20px 20px 0"},onClick:this.handleAudit},"审核"):o.a.createElement(i.a,null,o.a.createElement("h3",null,"审核状态"),o.a.createElement("div",{className:"info-item"},o.a.createElement("span",{className:"label"},"审核结果："),o.a.createElement("span",null,a)),2===r?o.a.createElement("div",{className:"info-item"},o.a.createElement("span",{className:"label"},"驳回说明："),o.a.createElement("span",null,c||"--")):null))}}])&&J(n.prototype,a),c&&J(n,c),t}(),Y=Object(y.b)(function(e){return{auditDetail:e.getIn(["productAudit","auditDetail"]).toJS()}},function(e){return{getAuditData:function(t){return e(w.a.getAuditInfo(t))},updateAuditStatus:function(t){return e(w.a.updateAuditStatus(t))},clearProductInfo:function(){return e(w.a.clearProductInfo())}}})(U),K=n(1341);n(1384),t.default=function(e){var t=e.match;return o.a.createElement(a.d,null,o.a.createElement(a.b,{path:"".concat(t.url,"/list"),component:L}),o.a.createElement(a.b,{path:"".concat(t.url,"/:productId/:id"),component:Object(K.a)(Y)}),o.a.createElement(a.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1414:function(e,t,n){"use strict";n.r(t);n(242);var r=n(0),o=n.n(r),a=n(104),i=(n(20),n(35),n(36),n(117),n(28),n(65),n(45),n(37),n(46),n(22),n(31),n(32),n(138),n(79)),c=(n(206),n(80)),l=(n(71),n(21)),u=(n(241),n(118)),s=(n(186),n(72)),p=(n(163),n(50)),f=n(1339),m=n(96),y=n(27),d=n(140),b=n(39),h=n(455),g=n(1340);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P,S=p.a.Item,k=s.a.Option,D={1:"系统公告",2:"流程消息",3:"服务消息"},_={1:"草稿",2:"已发布",3:"已删除"};!function(e){e[e.All=9]="All",e[e.Direaction=10]="Direaction"}(P||(P={}));var I={2:"#00CC00",3:"#CC0000"},C=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=E(t)).call.apply(e,[this].concat(i)),(n=!o||"object"!==v(o)&&"function"!=typeof o?w(r):o).handleEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n.props.history.push("./".concat(e))},n.handleView=function(e){n.props.setNotice(e),n.props.history.push("./view/".concat(e.noticeId))},n.handlePublish=function(e){var t=w(n);u.a.confirm({title:"提示",content:"是否确认发布？",onOk:function(){t.props.publishNotice(e).then(function(e){e&&t.props.onChange(1)})}})},n.handleCancel=function(e){var t=w(n);u.a.confirm({title:"提示",content:"是否确认撤销？",onOk:function(){t.props.cancelNotice(e).then(function(e){e&&t.props.onChange(1)})}})},n.handleDel=function(e){var t=w(n);u.a.confirm({title:"提示",content:"是否确认删除？",onOk:function(){t.props.delNotice(e).then(function(e){e&&t.props.onChange(1)})}})},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this,t=this.props,n=t.form,o=t.list,a=t.pager,u=t.loading,d=n.getFieldDecorator,b=[{title:"消息标题",dataIndex:"noticeTitle",width:"30%",render:function(e){return r.createElement("span",{title:e},e)}},{title:"消息类型",dataIndex:"noticeTypeName",width:"200px",render:function(e){return r.createElement("span",{title:e},e||"--")}},{title:"发布对象",width:"20%",render:function(e){return e.sendTo===P.All?r.createElement("span",null,"所有用户"):r.createElement("span",{title:e.sendToUserNames||"--"},e.sendToUserNames||"--")}},{title:"更新时间",dataIndex:"updateTime",width:"20%",render:function(e){var t=y.b.utc2beijing(e,"yyyy-MM-dd hh:mm:ss");return r.createElement("span",{title:t},t)}},{title:"消息状态",dataIndex:"noticeStatus",width:"120px",render:function(e){return r.createElement("span",{style:I[e]?{color:I[e]}:void 0},_[e]||"--")}},{title:"操作",width:"190px",render:function(t){return r.createElement("div",{className:"action"},1===t.noticeStatus?r.createElement("span",null,r.createElement(c.a,{placement:"top",title:"编辑"},r.createElement(l.a,{icon:"edit",shape:"circle",size:"small",onClick:e.handleEdit.bind(e,t.noticeId)})),"  |  "):null,r.createElement(c.a,{placement:"top",title:"查看"},r.createElement(l.a,{icon:"info",shape:"circle",size:"small",onClick:e.handleView.bind(e,t)})),"  |  ",1===t.noticeStatus?r.createElement("span",null,r.createElement(c.a,{placement:"top",title:"发布"},r.createElement(l.a,{icon:"upload",shape:"circle",size:"small",onClick:e.handlePublish.bind(e,t.noticeId)})),"  |  "):2===t.noticeStatus?r.createElement("span",null,r.createElement(c.a,{placement:"top",title:"撤销"},r.createElement(l.a,{icon:"download",shape:"circle",size:"small",onClick:e.handleCancel.bind(e,t.noticeId)})),"  |  "):null,r.createElement(c.a,{placement:"top",title:"删除"},r.createElement(l.a,{icon:"delete",shape:"circle",size:"small",onClick:e.handleDel.bind(e,t.noticeId)})))}}];return r.createElement("div",{className:"message-manage"},r.createElement(f.a,{title:"消息管理"},r.createElement(p.a,{layout:"inline"},r.createElement("div",{className:"message-filter-item"},r.createElement(S,{label:"消息标题"},d("noticeTitle")(r.createElement(i.a,{placeholder:"请输入消息标题",maxLength:20,style:{width:160},onPressEnter:this.props.onFilter}))),r.createElement(S,{label:"消息类型"},d("noticeType")(r.createElement(s.a,{style:{width:160},placeholder:"请选择消息类型"},r.createElement(k,{key:"0",value:""},"全部"),Object.keys(D).map(function(e){return r.createElement(k,{key:e,value:+e},D[e])})))),r.createElement(S,{label:"消息状态"},d("noticeStatus")(r.createElement(s.a,{style:{width:160},placeholder:"请选择消息状态"},r.createElement(k,{key:"0",value:""},"全部"),Object.keys(_).map(function(e){return r.createElement(k,{key:e,value:+e},_[e])})))),r.createElement(S,{label:"发布类型"},d("sendTo")(r.createElement(s.a,{style:{width:160},placeholder:"请选择发布类型"},r.createElement(k,{key:"0",value:""},"全部"),r.createElement(k,{key:"1",value:P.All},"广播推送"),r.createElement(k,{key:"2",value:P.Direaction},"定向推送")))),r.createElement(S,null,r.createElement(l.a,{type:"primary",onClick:this.props.onFilter},"查询")),r.createElement(S,null,r.createElement(l.a,{type:"primary",onClick:this.props.onReset},"重置"))),r.createElement("div",{className:"message-filter-item"},r.createElement(S,{style:{float:"right"}},r.createElement(l.a,{type:"primary",onClick:this.handleEdit.bind(this,0)},"新建"))))),r.createElement("div",{className:"message-manage-content"},r.createElement(m.a,{rowKey:"noticeId",columns:b,dataSource:o,pager:a,loading:u,onPageChange:this.props.onChange})))}}])&&O(n.prototype,o),a&&O(n,a),t}(),T=Object(b.b)(function(e){return{list:e.getIn(["noticeManage","list"]).toJS(),pager:e.getIn(["noticeManage","pager"]).toJS(),loading:e.getIn(["noticeManage","loading"])}},function(e){return Object(d.b)({getList:h.a.getList,delNotice:h.a.delNotice,publishNotice:h.a.publishNotice,cancelNotice:h.a.cancelNotice,setNotice:h.a.setNotice},e)})(p.a.create()(Object(g.a)(C))),x=(n(29),n(333),n(334),n(164),n(40),n(41),n(207),n(243),n(30),n(797),n(742)),N=(n(792),n(446)),A=(n(139),n(44)),M=n(1326),L=n.n(M);n(1327);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y,K=p.a.Item,W=s.a.Option,G=[{value:"1",label:"系统公告"},{value:"3",label:"服务消息",children:[{value:"1",label:"APP控制服务"},{value:"2",label:"云端定时服务"},{value:"3",label:"场景联动服务"}]}];!function(e){e[e.All=9]="All",e[e.Direaction=10]="Direaction"}(Y||(Y={}));var $,X=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=B(this,(e=H(t)).call.apply(e,[this].concat(o)))).refInput=void 0,n.state={receive_users:[]},n.handleBack=function(){n.props.history.go(-1)},n.handleSave=function(){var e=n.props,t=e.form,r=e.notice,o=n.state.receive_users;t.validateFields(function(e,t){if(!(e||t.sendTo===Y.Direaction&&0===o.length)){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach(function(t){J(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{noticeContent:t.noticeContent.toHTML()});a.sendToUserId=t.sendTo===Y.Direaction?o.map(function(e){return e.id}).join(","):void 0,a.noticeType=+a.noticeType.join(""),r.noticeId&&(a.noticeId=r.noticeId),n.props.saveNotice(a).then(function(e){e&&n.props.history.go(-1)})}})},n.handleAdd=function(){n.props.form.validateFields(["receive_users"],function(e,t){if(!e){var r=n.state.receive_users;r.length>19?A.a.warning({duration:3,message:"最多添加20个用户"}):n.setState({receive_users:[].concat(z(r),[{id:Math.floor(100*Math.random()),value:""}])},function(){n.refInput.focus()})}})},n.handleClose=function(e){var t=n.state.receive_users;n.setState({receive_users:t.filter(function(t){return t.id!==e})})},n.handleValidate=function(e,t,r){var o=n.state.receive_users;if(!t){var a=z(o);return a.pop(),void n.setState({receive_users:a})}o.some(function(e){return e.value===t})?r("账号已添加"):n.props.validateAccout(t).then(function(e){if(e){var a=z(o),i=a.pop();i.value=t,i.id=e.developerId,n.setState({receive_users:[].concat(z(a),[i])})}else r("账号不存在");r()})},n.handleBlur=function(){n.refInput.blur()},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.noticeId;+t&&this.props.getNotice(t).then(function(t){if(t){var n=t.noticeTitle,r=t.noticeContent,o=t.noticeType,a=t.sendTo,i=t.sendToUserNames,c=t.sendToUserId;if(e.props.form.setFieldsValue({noticeTitle:n,sendTo:a,noticeType:o.toString().split(""),noticeContent:L.a.createEditorState(r)}),a===Y.Direaction&&c&&i){var l=c.split(",").filter(Boolean),u=i.split(",").filter(Boolean);e.setState({receive_users:l.map(function(e,t){return{id:+e,value:u[t]}})})}}})}},{key:"componentWillUnmount",value:function(){this.props.clearNotice()}},{key:"render",value:function(){var e=this,t=this.props.match.params.noticeId,n=this.state.receive_users,o=this.props.form,a=o.getFieldDecorator,c={labelCol:{span:3},wrapperCol:{span:10}},u={labelCol:{span:3},wrapperCol:{span:21}},m=(0,o.getFieldValue)("sendTo"),y=m===Y.Direaction&&0===n.length?{help:"至少添加一个用户",validateStatus:"error"}:{};return r.createElement("div",{className:"message-manage"},r.createElement(f.a,{title:+t?"编辑消息":"新增消息"},r.createElement(l.a,{type:"primary",className:"btn-back",onClick:this.handleBack},"返回")),r.createElement("div",{className:"message-manage-content"},r.createElement(p.a,{style:{width:1e3}},r.createElement(K,R({label:"消息标题"},c),a("noticeTitle",{rules:[{required:!0,message:"请输入标题"}]})(r.createElement(i.a,{maxLength:20,placeholder:"请输入标题"}))),r.createElement(K,R({label:"消息类型"},c),a("noticeType",{rules:[{required:!0,message:"请选择消息类型"}]})(r.createElement(N.a,{placeholder:"请选择消息类型",style:{width:240},options:G}))),r.createElement(K,R({label:"消息内容"},u),a("noticeContent",{validateTrigger:"onBlur",rules:[{required:!0,validator:function(e,t,n){var r=t&&t.toHTML();r&&"<p></p>"!==r?n():n("请输入正文内容")}}]})(r.createElement(L.a,{className:"notice-editor",placeholder:"请输入正文内容"}))),r.createElement(K,R({label:"推送方式"},u),a("sendTo",{initialValue:9,rules:[{required:!0,validator:function(e,t,n){t?n():n("请选择推送方式")}}]})(r.createElement(s.a,{placeholder:"请选择消息类型",style:{width:240},allowClear:!0},r.createElement(W,{value:Y.All,key:"1"},"广播消息"),r.createElement(W,{value:Y.Direaction,key:"2"},"定向发布")))),m===Y.Direaction?r.createElement(K,R({wrapperCol:{span:21,offset:3}},y),r.createElement("div",{className:"receive_users"},n.map(function(t){return t.value?r.createElement(x.a,{key:t.id,closable:!0,onClose:e.handleClose.bind(e,t.id)},t.value):a("receive_users",{validateTrigger:"onBlur",rules:[{validator:e.handleValidate}]})(r.createElement(i.a,{key:t.id,placeholder:"请输入账号",maxLength:30,style:{width:240},ref:function(t){return e.refInput=t},onPressEnter:e.handleBlur}))}),r.createElement(l.a,{className:"btn-add-user",onClick:this.handleAdd},"添加账号"))):null,r.createElement(K,null,r.createElement(l.a,{type:"primary",className:"btn-save",onClick:this.handleSave},"保存")))))}}])&&q(n.prototype,o),a&&q(n,a),t}(),Q=Object(b.b)(function(e){return{notice:e.getIn(["noticeManage","notice"]).toJS()}},function(e){return Object(d.b)({saveNotice:h.a.saveNotice,validateAccout:h.a.validateAccout,getNotice:h.a.getNotice,clearNotice:h.a.clearNotice},e)})(p.a.create()(X));function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e[e.All=9]="All",e[e.Direaction=10]="Direaction"}($||($={}));var oe=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=te(this,(e=ne(t)).call.apply(e,[this].concat(o)))).handleBack=function(){n.props.history.go(-1)},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.props.match.params.noticeId;+e&&this.props.getNotice(e)}},{key:"componentWillUnmount",value:function(){this.props.clearNotice()}},{key:"render",value:function(){var e=this.props.notice,t=e.noticeTitle,n=e.noticeTypeName,o=e.sendTo,a=e.sendToUserNames,i=e.sendTime;return r.createElement("div",{className:"message-manage"},r.createElement(f.a,{title:"消息管理"},r.createElement(l.a,{type:"primary",className:"btn-back",onClick:this.handleBack},"返回")),r.createElement("div",{className:"message-manage-content notice-view"},r.createElement("h2",{className:"notice-title"},t),r.createElement("p",{className:"notice-descript"},r.createElement("span",null,"推送时间：",i?y.b.utc2beijing(i,"yyyy-MM-dd hh:mm:ss"):"--"),r.createElement("span",null,"消息类型：",n||"--"),r.createElement("br",null),r.createElement("span",{style:{maxWidth:"100%",wordBreak:"break-all"}},"推送对象：",o===$.All?"所有用户":a||"--")),r.createElement("hr",null),r.createElement("div",{className:"notice-content",dangerouslySetInnerHTML:{__html:e.noticeContent}})))}}])&&ee(n.prototype,o),a&&ee(n,a),t}(),ae=Object(b.b)(function(e){return{notice:e.getIn(["noticeManage","notice"]).toJS()}},function(e){return Object(d.b)({getNotice:h.a.getNotice,clearNotice:h.a.clearNotice},e)})(oe),ie=n(1341);n(1388),t.default=function(e){var t=e.match;return o.a.createElement(a.d,null,o.a.createElement(a.b,{exact:!0,path:"".concat(t.url,"/list"),component:T}),o.a.createElement(a.b,{exact:!0,path:"".concat(t.url,"/view/:noticeId"),component:ae}),o.a.createElement(a.b,{exact:!0,path:"".concat(t.url,"/:noticeId"),component:Object(ie.a)(Q)}),o.a.createElement(a.a,{from:"".concat(t.url,"/"),to:"".concat(t.url,"/list")}))}},1416:function(e,t,n){"use strict";n.r(t);n(20),n(35),n(36),n(28),n(45),n(37),n(46),n(22),n(1309),n(31),n(243),n(30),n(32),n(1311);var r=n(1312),o=(n(71),n(21)),a=(n(791),n(441)),i=(n(139),n(44)),c=(n(282),n(105)),l=n(0),u=n.n(l),s=n(39),p=n(738),f=(n(5),n(334),n(65),n(1319),n(164),n(773),n(450),n(774),n(775),n(776),n(777),n(778),n(779),n(780),n(781),n(782),n(783),n(784),n(785),n(786),n(787),n(788),n(789),n(241),n(118)),m=(n(165),n(10)),y=(n(163),n(50)),d=(n(138),n(79));function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=O(this,E(t).call(this,e))).handleCancel=function(e){(0,n.props.toggleDialog)(e)},n.compareToDimensionKeys=function(e,t,r){var o=n.props,a=o.form,i=o.dataDimension,c=[];i.toJS().forEach(function(e,t){console.log("getFieldValue",a.getFieldValue("dimensionName-"+t)),c.push(a.getFieldValue("dimensionName-"+t))});var l=!1;c.length!==new Set(c).size&&(l=!0),t&&l?r("数据维度Key值重复输入"):r()},n.serializableDimensionJson=function(e,t){for(var n=[],r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];"dimension"===e&&a.startsWith("d")&&n.push(g({},a,t[a])),"index"===e&&a.startsWith("i")&&n.push(g({},a,t[a]))}n.sort(function(e,t){var n=Object.keys(e)[0],r=Object.keys(t)[0];return n.split("").reverse().join("")-r.split("").reverse().join("")});for(var i="{",c=0;c<n.length;c++){var l=n[c],u=n[++c];i=i+'"'+Object.values(l)[0]+'":"'+Object.values(u)[0]+'",'}return i=i.substr(0,i.length-1),i+="}"},n.handleSubmit=function(e){e.preventDefault(),(0,n.props.form.validateFieldsAndScroll)(function(e,t){if(!e){console.log("Received values of form: ",t);var r=n.serializableDimensionJson("dimension",t),o=n.serializableDimensionJson("index",t),a=n.props;(0,a.saveDimensionIndex)(r,o,a.dimensionType)}})},n.state={loading:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,l["Component"]),n=t,(r=[{key:"getDimensionListHTML",value:function(e){var t=this,n=this.props,r=n.form,o=n.dataDimension,a=n.dataIndex,i=n.delDimensionItem,c=o.toJS(),l=a.toJS(),s=r.getFieldDecorator,p=null,f="",b="",h="";return"dimension"===e?(p=c,f="dimensionName-",b="dimensionDesc-",h="请输入维度"):(p=l,f="indexName-",b="indexDesc-",h="请输入指标"),p&&p.length>0?p.map(function(n,r){return u.a.createElement("div",{key:r},u.a.createElement(y.a.Item,{hasFeedback:!0,style:{display:"inline-block",width:"calc(50% - 24px)"}},s(f+r,{rules:[{required:!0,message:h},{validator:t.compareToDimensionKeys}]})(u.a.createElement(d.a,{placeholder:h}))),u.a.createElement("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}}),u.a.createElement(y.a.Item,{hasFeedback:!0,style:{display:"inline-block",width:"calc(50% - 24px)"}},s(b+r,{rules:[{required:!0,message:"请输入备注，不超50个字符"},{max:50,message:"请输入备注，不超50个字符"}]})(u.a.createElement(d.a,{placeholder:"请输入备注，不超50个字符"}))),0!==r&&u.a.createElement("a",{href:"javascript:",onClick:function(){return i(e,r)},style:{display:"inline-block",width:"24px",textAlign:"center"}},u.a.createElement(m.a,{type:"minus-circle"})))}):null}},{key:"render",value:function(){var e=this.props,t=e.showDimensionDialog,n=e.addDimensionItem,r=this.state.loading;return u.a.createElement(f.a,{width:"1000px",visible:t,title:"维度指标发布/编辑",onCancel:this.handleCancel.bind(this,"dimension"),footer:[u.a.createElement(o.a,{key:"submit",type:"primary",loading:r,onClick:this.handleSubmit},"发布")]},u.a.createElement("div",{className:"dimension-wrapper"},u.a.createElement(y.a,h({},{labelCol:{span:6},wrapperCol:{span:12}},{className:"dimension-form"}),u.a.createElement(y.a.Item,{label:"数据维度"},this.getDimensionListHTML("dimension"),u.a.createElement("div",null,u.a.createElement("a",{href:"javascript:",onClick:function(){return n("dimension")}},"+ 新增维度"))),u.a.createElement(y.a.Item,{label:"数据指标"},this.getDimensionListHTML("index"),u.a.createElement("div",null,u.a.createElement("a",{href:"javascript:",onClick:function(){return n("index")}},"+ 新增指标"))))))}}])&&v(n.prototype,r),a&&v(n,a),t}(),P=y.a.create({name:"dimension",onFieldsChange:function(e,t){console.log("changedFields",t),"{}"!==JSON.stringify(t)&&e.changeDimensionData(t)},mapPropsToFields:function(e){var t=e.dataDimension.toJS(),n=e.dataIndex.toJS(),r={};return t.forEach(function(e,t){var n=e.dimensionName,o=e.dimensionDesc;r["dimensionName-"+t]=y.a.createFormField({value:n}),r["dimensionDesc-"+t]=y.a.createFormField({value:o})}),n.forEach(function(e,t){var n=e.indexName,o=e.indexDesc;r["indexName-"+t]=y.a.createFormField({value:n}),r["indexDesc-"+t]=y.a.createFormField({value:o})}),r}})(j),S=(n(117),n(1325),n(186),n(72));function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=I(this,(e=C(t)).call.apply(e,[this].concat(o)))).handleSubmit=function(e){e.preventDefault();var t=n.props.form.validateFieldsAndScroll,r=n.props.saveOpen,o=n.props.curApi.toJS();t(function(e,t){e||(console.log("Received values of form: ",t),(o.releaseId||0===o.releaseId)&&(t.releaseId=o.releaseId),t.dataType=Number(t.dataType),r(t))})},n.handleCancel=function(e){(0,n.props.toggleDialog)(e)},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,u.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.showApiDialog;return u.a.createElement(f.a,{width:"1000px",visible:t,title:"新增API/编辑",onCancel:this.handleCancel.bind(this,"api"),footer:[u.a.createElement(o.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"发布")]},u.a.createElement("div",{className:"api-wrapper"},u.a.createElement(y.a,D({},{labelCol:{span:6},wrapperCol:{span:8}},{className:"api-form"}),u.a.createElement(y.a.Item,{label:"数据类别",wrapperCol:{span:6}},e("dataType",{rules:[{required:!0}]})(u.a.createElement(S.a,null,u.a.createElement(S.a.Option,{value:1},"设备数据"),u.a.createElement(S.a.Option,{value:2},"用户数据")))),u.a.createElement(y.a.Item,{label:"API名称/接口URL",hasFeedback:!0},e("apiName",{rules:[{required:!0,message:"请输入api名称"},{max:20,message:"API接口名称不能超过20个字符"}]})(u.a.createElement(d.a,{placeholder:"请输入API接口的名称"}))),u.a.createElement(y.a.Item,{label:" ",hasFeedback:!0,colon:!1,wrapperCol:{span:12}},e("apiUrl",{rules:[{required:!0,message:"请输入API接口的url"}]})(u.a.createElement(d.a,{placeholder:"接口的URL"}))),u.a.createElement(y.a.Item,{label:" ",hasFeedback:!0,colon:!1},e("apiDesc",{rules:[{required:!0,message:"请输入API接口的描述"},{max:20,message:"API接口的描述不能超过20个字符"}]})(u.a.createElement(d.a,{placeholder:"请输入API接口的描述"}))),u.a.createElement(y.a.Item,{label:" ",colon:!1},e("requestType",{rules:[{required:!0}]})(u.a.createElement(S.a,{wrapperCol:{span:6}},u.a.createElement(S.a.Option,{value:"GET"},"GET"),u.a.createElement(S.a.Option,{value:"POST"},"POST")))),u.a.createElement(y.a.Item,{label:" ",hasFeedback:!0,colon:!1},e("releaseVersion",{rules:[{required:!0,message:"请输入API接口的版本"},{max:20,message:"API接口的版本不能超过20个字符"}]})(u.a.createElement(d.a,{placeholder:"请输入API接口的版本"}))))))}}])&&_(n.prototype,r),a&&_(n,a),t}(),N=y.a.create({name:"api",mapPropsToFields:function(e){var t=e.curApi.toJS();return{dataType:y.a.createFormField({value:t.dataType}),apiName:y.a.createFormField({value:t.apiName}),apiUrl:y.a.createFormField({value:t.apiUrl}),apiDesc:y.a.createFormField({value:t.apiDesc}),requestType:y.a.createFormField({value:t.requestType}),releaseVersion:y.a.createFormField({value:t.releaseVersion})}}})(x),A=n(12),M=n(238),L=(n(27),n(96));n(1383);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=c.a.TabPane,B=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=z(this,V(t).call(this,e))).cancelApiRelease=function(e){Object(M.a)(e).then(function(e){var t=e.data.code,r=e.data.msg,o=0===t?"success":"error";t===A.a?(i.a[o]({message:"取消发布成功",description:"取消发布成功",duration:3,onClick:function(){console.log("Notification Clicked!")}}),n.props.getOpenApiList({pageIndex:1,pageRows:10})):i.a[o]({message:t,description:r,duration:3,onClick:function(){console.log("Notification Clicked!")}})})},n.changeDimensionData=function(e){var t=Object.keys(e)[0],r=Object.values(e)[0],o=t.split("-")[0],a=t.split("-")[1];n.props.changeDimensionData(o,a,r.value)},n.onChange=function(e){n.props.getOpenApiList({pageIndex:e,pageRows:10})},n.saveDimensionIndex=function(e,t,r){Object(M.e)(e,t,r).then(function(e){var t=e.data.code,r=e.data.msg,o=0===t?"success":"error";t===A.a?(i.a[o]({message:"保存维度成功",description:"保存维度成功",duration:3,onClick:function(){console.log("Notification Clicked!")}}),n.props.toggleDialog("dimension")):i.a[o]({message:t,description:r,duration:3,onClick:function(){console.log("Notification Clicked!")}})})},n.saveOpen=function(e){Object(M.f)(e).then(function(t){var r=t.data.code,o=t.data.msg,a=e.releaseId||0===e.releaseId?"更新API成功":"新增API成功",c=0===r?"success":"error";r===A.a?(i.a[c]({message:a,description:a,duration:3,onClick:function(){console.log("Notification Clicked!")}}),n.props.toggleDialog("api"),n.props.getOpenApiList({pageIndex:1,pageRows:10})):i.a[c]({message:r,description:o,duration:3,onClick:function(){console.log("Notification Clicked!")}})})},n.state={dimensionData:[{key:1,dataType:"设备数据",dataClassify:"汇总类"},{key:2,dataType:"设备数据",dataClassify:"分析类"},{key:3,dataType:"设备数据",dataClassify:"基础类"},{key:4,dataType:"用户数据",dataClassify:"汇总类"},{key:5,dataType:"用户数据",dataClassify:"分析类"},{key:6,dataType:"用户数据",dataClassify:"基础类"}],dimensionColumn:[{title:"数据类别",dataIndex:"dataType",key:"dataType"},{title:"数据分类",dataIndex:"dataClassify",key:"dataClassify"},{title:"操作",dataIndex:"opt",render:function(e,t){return u.a.createElement("span",null,u.a.createElement("a",{href:"javascript:",onClick:function(){return n.props.getDimensionDetail(t.key)}},"编辑"))}}]},n}var n,s,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,l["Component"]),n=t,(s=[{key:"componentDidMount",value:function(){this.props.getOpenApiList({pageIndex:1,pageRows:10})}},{key:"_getAntDApiListData",value:function(e){var t=this,n=this.props.editApi,r=e.toJS();return r.forEach(function(e){e.key=e.releaseId}),{dataSource:r,columns:[{title:"ID",dataIndex:"key",key:"key"},{title:"API名称",dataIndex:"apiName",key:"apiName"},{title:"数据类别",dataIndex:"dataType",key:"dataType",render:function(e){return 1===e?"设备数据":"用户数据"}},{title:"发布时间",dataIndex:"releaseTime",key:"releaseTime"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return 1===e?"未发布":"已发布"}},{title:"操作",key:"opt",render:function(e,r){return u.a.createElement("span",null,1!==r.status&&u.a.createElement("a",{href:"javascript:",onClick:function(){return t.cancelApiRelease(r.key)}},"取消发布"),1!==r.status&&u.a.createElement(a.a,{type:"vertical"}),u.a.createElement("a",{href:"javascript:",onClick:function(){return n(r.key)}},"编辑"))}}]}}},{key:"render",value:function(){var e=this.props,t=e.apiList,n=e.addDimensionItem,a=e.pager,i=e.loading,l=e.dimensionType,s=e.delDimensionItem,p=e.showApiDialog,f=e.curApi,m=e.editApi,y=(e.saveOpenApi,e.dataDimension),d=e.dataIndex,b=e.toggleDialog,h=e.showDimensionDialog,g=(e.dataDimensions,this.state),v=g.dimensionColumn,O=g.dimensionData,E=this._getAntDApiListData(t),w=E.dataSource,j=E.columns;return u.a.createElement("div",{className:"api-page-wrapper"},u.a.createElement(r.a,{title:"API发布",className:"api-title",extra:[u.a.createElement(o.a,{key:"1",type:"primary",onClick:function(){m()}},"+ 新增API")]}),u.a.createElement("div",{className:"api-content-wrapper"},u.a.createElement(c.a,{defaultActiveKey:"1"},u.a.createElement(q,{tab:"API列表",key:"1"},u.a.createElement(L.a,{rowKey:"releaseId",columns:j,pager:a,loading:i,onPageChange:this.onChange,dataSource:w})),u.a.createElement(q,{tab:"维度指标",key:"2"},u.a.createElement(L.a,{rowKey:"key",columns:v,pager:{currPageRows:10,defaultPageRows:20,hasNextPage:!1,hasPrevPage:!1,pageEndRow:9,pageIndex:1,pageRows:10,pageStartRow:0,paged:!1,totalPages:1,totalRows:6},dataSource:O})))),u.a.createElement(N,{showApiDialog:p,toggleDialog:b,curApi:f,saveOpen:this.saveOpen}),u.a.createElement(P,{changeDimensionData:this.changeDimensionData,addDimensionItem:n,delDimensionItem:s,dataDimension:y,dataIndex:d,showDimensionDialog:h,toggleDialog:b,saveDimensionIndex:this.saveDimensionIndex,dimensionType:l}))}}])&&R(n.prototype,s),p&&R(n,p),t}();t.default=Object(s.b)(function(e){return{apiList:e.getIn(["apiPublish","apiList"]),loading:e.getIn(["apiPublish","loading"]),pager:e.getIn(["apiPublish","pager"]).toJS(),showApiDialog:e.getIn(["apiPublish","showApiDialog"]),curApi:e.getIn(["apiPublish","curApi"]),showDimensionDialog:e.getIn(["apiPublish","showDimensionDialog"]),dataDimension:e.getIn(["apiPublish","dataDimension"]),dataIndex:e.getIn(["apiPublish","dataIndex"]),dimensionType:e.getIn(["apiPublish","dimensionType"])}},function(e){return{getOpenApiList:function(t){var n=p.a.getOpenApiList(t);e(n)},editApi:function(t){var n=p.a.editApi(t);e(n)},toggleDialog:function(t){var n=null;n="api"===t?p.a.toggleApiDialog():p.a.toggleDimensionDialog(),e(n)},getDimensionDetail:function(t){var n=p.a.getDimensionDetail(t);e(n)},addDimensionItem:function(t){var n=p.a.addDimensionItem(t);e(n)},delDimensionItem:function(t,n){var r=p.a.delDimensionItem(t,n);e(r)},changeDimensionData:function(t,n,r){var o=p.a.changeDimensionData(t,n,r);e(o)}}})(B)}}]);