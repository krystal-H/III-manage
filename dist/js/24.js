(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1534:function(e,t,a){},1580:function(e,t,a){"use strict";a.r(t);a(18),a(35),a(36),a(26),a(27),a(28),a(113),a(134),a(39),a(43),a(44),a(200);var r=a(85),n=(a(104),a(46)),c=(a(306),a(161)),o=(a(103),a(48)),l=(a(133),a(23)),i=(a(488),a(22),a(65),a(387),a(32),a(388),a(143),a(58),a(78),a(159),a(122),a(41),a(0)),u=a.n(i),s=a(3),d=a(33),m=(a(224),a(123));function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g=l.a.Item,v=o.a.TextArea;var y=l.a.create()((function(e){var t=e.form,a=e.infoVis,n=e.handleCancel,c=(e.handleOk,e.actionData),d=t.getFieldDecorator,f=t.validateFields,b=(t.getFieldValue,t.setFieldsValue);return Object(i.useEffect)((function(){var e;(e=c.orderId,s.c.request({url:"/manage-open/manage/order/getExpressDetail/"+e,method:"get",headers:{}})).then((function(e){if(0===e.data.code){var t=e.data.data;b({expressName:t.expressName,expressNo:t.expressNo,remark:t.remark})}}))}),[]),u.a.createElement("div",null,u.a.createElement(r.a,{title:"快递信息",visible:a,onOk:function(){f().then((function(e){var t,a=p(p({},e),{},{orderId:c.orderId});(t=a,s.c.request({url:"/manage-open/manage/order/addExpress",method:"post",data:t,headers:{}})).then((function(e){0===e.data.code&&(m.a.success("提交成功"),n())}))}))},onCancel:n,width:"700px",wrapClassName:"mall-order-modal"},u.a.createElement("div",{className:"full-express-modal"},u.a.createElement(l.a,null,u.a.createElement("div",{className:"content-item"},u.a.createElement("div",{className:"item",style:{marginRight:"20px"}},u.a.createElement(g,{label:"快递公司"},d("expressName",{rules:[{required:!0,message:"请输入快递公司"}]})(u.a.createElement(o.a,{style:{width:"150px"}})))),u.a.createElement("div",{style:{flex:1}},u.a.createElement(g,{label:"快递单号"},d("expressNo",{rules:[{required:!0,message:"请输入快递单号"}]})(u.a.createElement(o.a,{style:{width:"220px"}}))))),u.a.createElement("div",null,u.a.createElement(g,{label:"订单处理备注"},d("remark",{})(u.a.createElement(v,{style:{width:"100%"},autosize:{minRows:3}}))))))))}));a(1534);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,n,c=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(c.push(r.value),!t||c.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw n}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}l.a.Item;var w=o.a.Search;t.default=l.a.create()((function(e){var t=e.form,a=E(Object(i.useState)({pageIndex:1,pageRows:10}),2),o=a[0],l=a[1],m=(t.getFieldDecorator,t.validateFields,t.getFieldsValue,E(Object(i.useState)(0),2)),f=m[0],p=m[1],b=E(Object(i.useState)(""),2),g=b[0],v=b[1],j=E(Object(i.useState)([]),2),S=j[0],k=j[1],I=E(Object(i.useState)(!1),2),P=(I[0],I[1],E(Object(i.useState)(!1),2)),D=P[0],C=P[1],R=E(Object(i.useState)(!1),2),q=R[0],A=R[1],F=E(Object(i.useState)(!1),2),J=F[0],T=F[1],V=E(Object(i.useState)("add"),2),M=(V[0],V[1],E(Object(i.useState)({}),2)),z=M[0],B=M[1],K=E(Object(i.useState)(!1),2),L=K[0],Q=K[1];Object(i.useEffect)((function(){U()}),[o.pageRows,o.pageIndex]);var U=function(){Q(!0);var e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o);g&&g.trim()&&(e.condition=g.trim()),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.c.request({url:"/manage-open/manage/order/getOrderList",data:e,method:"post",headers:{}})}(e).then((function(e){0==e.data.code&&(e.data.data.records.forEach((function(e,t){e.key=t+1})),k(e.data.data.records),p(e.data.data.total))})).finally((function(){Q(!1)}))},$=[{title:"编号",dataIndex:"key",key:"key",width:70},{title:"订单号",dataIndex:"orderNo",key:"orderNo",render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"用户",dataIndex:"a",key:"a",width:"200px",render:function(e,t){var a=t.phone;return u.a.createElement("span",null,u.a.createElement("span",{title:t.receiverName},t.receiverName),u.a.createElement("br",null),u.a.createElement("span",{title:t.phone}," ",a))}},{title:"订单金额",dataIndex:"totalPrice",key:"totalPrice",render:function(e){return u.a.createElement("span",{title:e/100},e/100)}},{title:"实付金额",dataIndex:"finalPrice",key:"finalPrice",render:function(e){return u.a.createElement("span",{title:e/100},e/100)}},{title:"支付方式",dataIndex:"payMode",key:"payMode",render:function(e){var t=["线下支付","微信","支付宝"];return u.a.createElement("span",{title:t[e]},t[e])}},{title:"订单状态",dataIndex:"status",key:"status",render:function(e){var t=["支付中","支付完成","发货中","退款退货中","订单支付失败","订单超时","订单关闭","订单完成","异常","已删除"];return u.a.createElement("span",{title:t[e]},t[e])}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e){return u.a.createElement("span",{title:e&&d.b.utcToDev(e)},e&&d.b.utcToDev(e))}},{title:"操作",key:"action",width:150,render:function(e,t){return u.a.createElement("div",{className:"mall-order-table-action"},u.a.createElement("div",{style:{marginRight:"10px"},onClick:function(){H(t)}},"查看订单信息"),u.a.createElement("div",{style:{marginRight:"10px"},onClick:function(){G(t)}},"查看收件人信息"),[1,2].includes(t.status)?u.a.createElement("div",{onClick:function(){W(t)}},"填写快递信息"):"")}}],G=function(e){B(e),C(!0)},H=function(e){B(e),T(!0)},W=function(e){B(e),A(!0)};return u.a.createElement("div",{className:"mall-order-page"},u.a.createElement(n.a,null,u.a.createElement("div",{className:"order-top"},u.a.createElement(w,{enterButton:"搜索",value:g,placeholder:"请输入用户名/手机号/订单号进行搜索",onChange:function(e){v(e.target.value)},onSearch:U})),u.a.createElement(c.a,{rowKey:"orderId",columns:$,dataSource:S,loading:L,bordered:!0,pagination:{defaultCurrent:1,current:o.pageIndex,onChange:function(e,t){t===o.pageRows?l((function(a){var r=JSON.parse(JSON.stringify(a));return Object.assign(r,{pageIndex:e,pageRows:t})})):l((function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})}))},pageSize:o.pageRows,total:f,showQuickJumper:!0,showTotal:function(){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,f)," 条")}}})),q&&u.a.createElement(y,{actionData:z,infoVis:q,handleCancel:function(){A(!1)},handleOk:function(){A(!1),U()}}),J&&u.a.createElement(r.a,{wrapClassName:"mall-order-modal",visible:J,title:"订单信息",footer:null,onCancel:function(){T(!1)}},u.a.createElement(x,{actionData:z})),D&&u.a.createElement(r.a,{wrapClassName:"mall-order-modal",visible:D,title:"收件人信息",footer:null,onCancel:function(){C(!1)}},u.a.createElement(N,{actionData:z})))}));function x(e){var t=e.actionData,a=E(Object(i.useState)([]),2),r=a[0],n=a[1];return Object(i.useEffect)((function(){var e;(e=t.orderId,s.c.request({url:"/manage-open/manage/order/getOrderDetail/"+e,method:"get",headers:{}})).then((function(e){0===e.data.code&&n(e.data.data)}))}),[]),u.a.createElement("div",{className:"mall-order-moadl"},r.map((function(e,t){return u.a.createElement("div",{key:t,className:"content"},u.a.createElement("img",{src:e.commodityPicture.split(",")[0]}),u.a.createElement("div",{className:"name"},e.name),u.a.createElement("div",{className:"code"},e.commodityModel),u.a.createElement("div",{className:"price"},"￥",e.unitPrice/100,"*",e.quantity))})))}function N(e){var t=e.actionData,a=E(Object(i.useState)({}),2),r=a[0],n=a[1];return Object(i.useEffect)((function(){var e;(e=t.orderId,s.c.request({url:"/manage-open/manage/order/getReceiverDetail/"+e,method:"get",headers:{}})).then((function(e){0===e.data.code&&(e.data.data.phone,n(e.data.data))}))}),[]),u.a.createElement("div",{className:"mall-user-moadl"},Object.keys(r).length?u.a.createElement("div",null,r.address,"，",r.receiverName,"，",r.phone&&r.phone):"")}}}]);