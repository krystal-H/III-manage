(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1415:function(e,t,a){},1518:function(e,t,a){"use strict";a.r(t);a(100);var n=a(43),r=(a(67),a(20)),l=(a(159),a(36)),c=(a(220),a(117)),o=(a(196),a(85)),u=(a(129),a(24)),i=(a(141),a(22),a(62),a(367),a(55),a(35),a(26),a(27),a(28),a(19),a(34),a(39),a(38),a(40),a(32),a(41),a(0)),d=a.n(i),p=a(463),s=a(4),f=function(e){return s.c.request({url:"/manage-open/gatewayManage/getGatewayListByPage",data:e,method:"post",headers:{}})},m=function(e){return s.c.request({url:"/manage-open/gatewayManage/deleteGatewayInfo",method:"post",data:e,headers:{}})},y=function(e){return s.c.request({url:"/manage-open/gatewayManage/modifyGatewayInfo",method:"post",data:e,headers:{}})},g=function(e){return s.c.request({url:"/manage-open/gatewayManage/addGatewayInfo",method:"post",data:e,headers:{}})},b=function(e){return s.c.request({url:"/manage-open/gatewayManage/getProductListByPage",data:e,method:"post",headers:{}})},w=a(97),E=(a(33),a(1415),a(483),a(323)),h=(a(99),a(45)),v=(a(197),a(294),a(186)),O=a.n(v);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var k=u.a.Item,j=l.a.Option;h.a.Search;var S=u.a.create()(function(e){var t=e.form,a=e.addVis,n=e.handleCancel,r=e.handleOk,p=e.modelType,s=e.actionData,f=e.optionList,m=t.getFieldDecorator,w=t.validateFields,v=t.setFieldsValue,S=t.getFieldValue,T=I(Object(i.useState)({}),2),N=T[0],C=T[1],x=I(Object(i.useState)([]),2),M=x[0],D=x[1],P=I(Object(i.useState)(!1),2),F=P[0],R=P[1];Object(i.useEffect)(function(){"edit"===p&&q()},[]);var q=function(){D([s]),C(s),v({gatewayType:s.gatewayType,productMark:s.productMark,productId:s.productId.toString()})};function J(e){if(e){var t={productName:e,pageRows:999};R(!0),D([]),b(t).then(function(e){0===e.data.code&&(e.data.data.list.forEach(function(e){e.productid=e.productId}),R(!1),D(e.data.data.list||[]))})}}return J=O()(J,800),d.a.createElement("div",null,d.a.createElement(o.a,{title:"edit"===p?"编辑":"新增",visible:a,onOk:function(){w().then(function(e){var t={};t.gatewayType=e.gatewayType;var a=f.find(function(t){return t.value===e.gatewayType});t.gatewayName=a.label,t.productName=N.productName,t.productCode=N.productCode,t.brandName=N.brandName,t.productId=N.productId,t.productMark=e.productMark,"edit"===p?(t={id:s.id,productMark:e.productMark},y(t).then(function(e){0===e.data.code&&(c.a.success("更新成功"),r())})):g(t).then(function(e){0===e.data.code&&(c.a.success("新增成功"),r())})})},onCancel:n,width:"700px",maskClosable:!1},d.a.createElement("div",{className:"gateWay-modal"},d.a.createElement(u.a,{labelCol:{span:6},wrapperCol:{span:14}},d.a.createElement(k,{label:"网关名称"},m("gatewayType",{rules:[{required:!0,message:"请选择网关"}]})(d.a.createElement(l.a,{disabled:"edit"===p},f.map(function(e,t){return d.a.createElement(l.a.Option,{key:e.value,value:e.value,label:e.label},e.label)})))),d.a.createElement(k,{label:"网关ID"},d.a.createElement("span",null,S("gatewayType"))),d.a.createElement(k,{label:"产品名称"},m("productId",{rules:[{required:!0,message:"请输入产品名称"}]})(d.a.createElement(l.a,{disabled:"edit"===p,showSearch:!0,placeholder:"输入产品名称",notFoundContent:F?d.a.createElement(E.a,{size:"small"}):null,filterOption:!1,onSearch:J,onChange:function(e){var t=M.find(function(t){return t.productId==e});C(t),R(!1)},style:{width:"100%"}},M.map(function(e){return d.a.createElement(j,{key:e.productId},e.productName)})))),d.a.createElement(k,{label:"产品型号"},d.a.createElement("span",null,N.productCode)),d.a.createElement(k,{label:"品牌"},d.a.createElement("span",null,N.brandName)),d.a.createElement(k,{label:"产品ID"},d.a.createElement("span",null,N.productId)),d.a.createElement(k,{label:"产品标识"},m("productMark",{})(d.a.createElement(h.a,{style:{width:"100%"}})))))))});function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach(function(t){C(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var M=u.a.Item,D=[{value:11133,label:"IOT路由器"},{value:7710,label:"ZigBee3.0网关"},{value:12338,label:"IoT边缘路由器"}];t.default=u.a.create()(function(e){var t=e.form,a=t.getFieldDecorator,s=(t.validateFields,t.getFieldsValue),y=x(Object(i.useState)({pageIndex:1,pageRows:10}),2),g=y[0],b=y[1],E=x(Object(i.useState)(0),2),h=E[0],v=E[1],O=x(Object(i.useState)([]),2),I=O[0],k=O[1],j=x(Object(i.useState)(D),2),T=j[0],C=(j[1],x(Object(i.useState)(!1),2)),P=C[0],F=C[1],R=x(Object(i.useState)({}),2),q=R[0],J=(R[1],x(Object(i.useState)(""),2)),V=J[0],A=J[1],G=x(Object(i.useState)(!1),2),L=G[0],B=G[1],z=[{title:"网关名称",dataIndex:"gatewayName",key:"gatewayName",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"网关ID",dataIndex:"gatewayType",key:"gatewayType",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"产品名称",dataIndex:"productName",key:"productName",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"产品型号",dataIndex:"productCode",key:"productCode",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"品牌",dataIndex:"brandName",key:"brandName",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"产品ID",dataIndex:"productId",key:"productId",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"产品标识",dataIndex:"productMark",key:"productMark",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"操作",key:"action",width:180,render:function(e,t){return d.a.createElement("span",null,d.a.createElement("a",{onClick:function(){K(t)}},"删除"))}}],K=function(e){o.a.confirm({title:"删除",okText:"确定",cancelText:"取消",content:"点击确定将删除此数据。",onOk:function(){m({id:e.id}).then(function(e){c.a.success("删除成功"),Q()})}})};Object(i.useEffect)(function(){Q()},[g.pageRows,g.pageIndex]);var Q=function(){var e={};s().gatewayType&&(e.gatewayType=s().gatewayType),e=N(N({},e),g),B(!0),f(e).then(function(e){0==e.data.code&&(k(e.data.data.list),v(e.data.data.pager.totalRows))}).finally(function(){B(!1)})},W=function(){1===g.pageIndex?Q():b({pageIndex:1,pageRows:10})};return d.a.createElement("div",{className:"gatelMn-page"},d.a.createElement(p.a,{title:"网关子设备"},d.a.createElement("div",{className:"title-space"},d.a.createElement(u.a,{layout:"inline"},d.a.createElement(M,{label:"网关名称"},a("gatewayType")(d.a.createElement(l.a,{style:{width:200},allowClear:!0},T.map(function(e,t){return d.a.createElement(l.a.Option,{key:e.value,value:e.value,label:e.label},e.label)})))),d.a.createElement(M,null,d.a.createElement(r.a,{type:"primary",onClick:function(){return W()}},"查询")),d.a.createElement(M,null,d.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),d.a.createElement(r.a,{type:"primary",onClick:function(){A("add"),F(!0)}},"新增子设备"))),d.a.createElement(n.a,null,d.a.createElement(w.a,{rowKey:"id",columns:z,dataSource:I,loading:L,pagination:{defaultCurrent:1,current:g.pageIndex,onChange:function(e,t){t===g.pageRows?b(function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})}):b(function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})})},pageSize:g.pageRows,total:h,showQuickJumper:!0,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,h)," 条")}}})),P&&d.a.createElement(S,{addVis:P,handleCancel:function(){F(!1)},handleOk:function(){W(),F(!1)},optionList:T,modelType:V,actionData:q}))})}}]);