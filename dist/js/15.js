(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1447:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(3),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.c.request({url:"/manage-open/manage/commodity/getCommodityList",method:"post",data:e,headers:{}})},o=function(e){return a.c.request({url:"/manage-open/manage/commodity/publicCommodity",method:"post",data:e,headers:{}})},c=function(e){return a.c.request({url:"/manage-open/manage/commodity/onOrOffCommodity",method:"post",data:e,headers:{}})},i=function(e){return a.c.request({url:"/manage-open/manage/commodity/getPublicProductByProductId/"+e,method:"get",headers:{}})},u=function(e){return a.c.request({url:"/manage-open/manage/commodity/getCommodityByCommodityId/"+e,method:"get",headers:{}})},l=function(e){return a.c.request({url:"/manage-open/manage/commodity/updateCommodityStock",data:e,method:"post",headers:{}})}},1453:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return u}));var a=n(3),r=function(e){return a.c.request({url:"/manage-open/manage/commodity/getModuleListByPage",data:e,method:"post",headers:{}})},o=function(e){return a.c.request({url:"/manage-open/module/getModulelistByHetModuleTypeName",data:e,method:"post",headers:{}})},c=function(e){return a.c.request({url:"/manage-open/manage/classify/getCommodityClassifyByGrade",data:e,method:"post",headers:{}})},i=function(e){return a.c.request({url:"/manage-open/manage/classify/getClassifyList",data:e,method:"post",headers:{}})},u=function(e){return a.c.request({url:"/manage-open/manage/commodity/publicCommodity",data:e,method:"post",headers:{}})}},1467:function(e,t,n){},1594:function(e,t,n){"use strict";n.r(t);n(18),n(35),n(36),n(26),n(27),n(28),n(113),n(122),n(134),n(41),n(39),n(43),n(32),n(44),n(104);var a=n(46),r=(n(306),n(161)),o=(n(69),n(19)),c=(n(103),n(48)),i=(n(224),n(123)),u=(n(200),n(85)),l=(n(133),n(23)),s=(n(78),n(225),n(22),n(65),n(387),n(112),n(143),n(0)),d=n.n(s),m=(n(1413),n(160),n(1447)),p=l.a.Item,f={labelCol:{span:6},wrapperCol:{span:14}};var y=l.a.create()((function(e){var t=e.form,n=e.supplyVis,a=e.confirmSupply,r=e.cancelSupply,o=e.actionData,s=t.getFieldDecorator,y=t.validateFields;return t.getFieldsValue,d.a.createElement(u.a,{title:"库存信息",visible:n,onOk:function(){y().then((function(e){var t={id:o.id,currentStock:Number(o.currentStock)+Number(e.classifyValue),maxStock:Number(o.currentStock)+Number(e.classifyValue)+Number(o.selledStock)};Object(m.a)(t).then((function(e){0==e.data.code&&(i.a.success("补给成功"),a())}))}))},onCancel:r},d.a.createElement(l.a,f,d.a.createElement(p,{label:"模组型号"},d.a.createElement("div",null,d.a.createElement("span",{style:{marginRight:"30px"}},o.hetModuleTypeName),d.a.createElement("span",{style:{marginRight:"10px"}},"现有库存"),d.a.createElement("span",null,o.currentStock))),d.a.createElement(p,{label:"本次补充"},s("classifyValue",{getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(d.a.createElement(c.a,null)))))})),g=(n(1467),n(1453));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var k=l.a.Item;t.default=l.a.create()((function(e){var t=e.form,n=(e.match,e.history),p=O(Object(s.useState)({pageIndex:1,pageRows:10}),2),f=p[0],h=p[1],E=t.getFieldDecorator,v=(t.validateFields,t.getFieldsValue),S=t.resetFields,w=O(Object(s.useState)(0),2),j=w[0],x=w[1],C=O(Object(s.useState)([]),2),I=C[0],N=C[1],T=O(Object(s.useState)(!1),2),P=T[0],R=T[1],q=O(Object(s.useState)({}),2),F=q[0],M=q[1],z=O(Object(s.useState)(!1),2),D=z[0],V=z[1],J=function(){var e=b(b({},v()),f);V(!0),Object(g.a)(e).then((function(e){0===e.data.code&&(N(e.data.data.list),x(e.data.data.pager.totalRows))})).finally((function(){V(!1)}))};Object(s.useEffect)((function(){J()}),[f.pageRows,f.pageIndex]);var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=["下架","在售","售罄","未上架"];return t[e]},B=function(e,t){var n=1==t?"是否上架模组":"是否下架模组";u.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:n,onOk:function(){Object(m.e)({commodityId:e,status:t}).then((function(e){var n=1==t?"上架成功":"下架成功";0==e.data.code&&(i.a.success(n),J())}))}})},L=[{title:"模组型号",key:"hetModuleTypeName",dataIndex:"hetModuleTypeName",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"模组IC型号",key:"originalModuleTypeName",dataIndex:"originalModuleTypeName",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"尺寸",key:"sizeThickness",dataIndex:"sizeThickness",render:function(e,t){return d.a.createElement("span",{title:"".concat(t.sizeThickness," * ").concat(t.sizeWidth," * ").concat(t.sizeHeight,"mm")},"".concat(t.sizeThickness," * ").concat(t.sizeWidth," * ").concat(t.sizeHeight,"mm"))}},{title:"生产厂商",key:"brandName",dataIndex:"brandName",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"使用范围",key:"applyScope",dataIndex:"applyScope",render:function(e){return d.a.createElement("span",{title:e},e)}},{title:"状态",dataIndex:"status",key:"status",render:function(e){return d.a.createElement("span",{title:A(e)},A(e))}},{title:"操作",key:"action",width:300,render:function(e,t){return d.a.createElement("span",null,-1==[0,3].indexOf(t.status)&&d.a.createElement(d.a.Fragment,null,d.a.createElement("a",{onClick:function(){H(t,!1)},style:{marginRight:"10px"}},"查看"),d.a.createElement("a",{onClick:function(){B(t.id,0)},style:{marginRight:"10px"}},"下架模组"),d.a.createElement("a",{onClick:function(){W(t)}},"补充库存")),-1!=[0,3].indexOf(t.status)&&d.a.createElement(d.a.Fragment,null,d.a.createElement("a",{onClick:function(){H(t,!0)},style:{marginRight:"10px"}},"编辑"),d.a.createElement("a",{onClick:function(){B(t.id,1)}},"上架模组")))}}],H=function(e,t){n.push("/mall/moduleOnlineInfo?id=".concat(e.id,"&&isEdit=").concat(t))},W=function(e){M(e),R(!0)},G=function(){1===f.pageIndex?J():h({pageIndex:1,pageRows:10})};return d.a.createElement("div",{className:"mall-product-page"},d.a.createElement(a.a,null,d.a.createElement("div",{className:"mall-product-top"},d.a.createElement(l.a,{layout:"inline"},d.a.createElement(l.a.Item,{label:"关键字"},E("hetModuleTypeName",{})(d.a.createElement(c.a,{placeholder:"请输入生产厂商或模组型号",style:{width:260},maxLength:20}))),d.a.createElement(k,null,d.a.createElement(o.a,{type:"primary",onClick:function(){return G()}},"查询")),d.a.createElement(k,null,d.a.createElement(o.a,{onClick:function(){return S(),void G()}},"重置"))),d.a.createElement(o.a,{type:"primary",onClick:function(){n.push("/mall/moduleOnlineInfo")}},"新增模组")),d.a.createElement(r.a,{rowKey:"id",columns:L,dataSource:I,loading:D,bordered:!0,pagination:{defaultCurrent:1,current:f.pageIndex,onChange:function(e,t){t===f.pageRows?h((function(n){var a=JSON.parse(JSON.stringify(n));return Object.assign(a,{pageIndex:e,pageRows:t})})):h((function(e){var n=JSON.parse(JSON.stringify(e));return Object.assign(n,{pageIndex:1,pageRows:t})}))},pageSize:f.pageRows,total:j,showQuickJumper:!0,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,j)," 条")}}})),P&&d.a.createElement(y,{cancelSupply:function(){R(!1)},confirmSupply:function(){R(!1),J()},supplyVis:P,actionData:F}))}))}}]);