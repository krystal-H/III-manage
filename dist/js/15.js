(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1453:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(3),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.c.request({url:"/manage-open/manage/commodity/getCommodityList",method:"post",data:e,headers:{}})},o=function(e){return a.c.request({url:"/manage-open/manage/commodity/publicCommodity",method:"post",data:e,headers:{}})},c=function(e){return a.c.request({url:"/manage-open/manage/commodity/onOrOffCommodity",method:"post",data:e,headers:{}})},i=function(e){return a.c.request({url:"/manage-open/manage/commodity/getPublicProductByProductId/"+e,method:"get",headers:{}})},u=function(e){return a.c.request({url:"/manage-open/manage/commodity/getCommodityByCommodityId/"+e,method:"get",headers:{}})},l=function(e){return a.c.request({url:"/manage-open/manage/commodity/updateCommodityStock",data:e,method:"post",headers:{}})}},1454:function(e,t,n){},1542:function(e,t,n){"use strict";n.r(t);n(18),n(36),n(37),n(27),n(28),n(29),n(198),n(221),n(258),n(128);var a=n(61),r=(n(101),n(40)),o=(n(302),n(157)),c=(n(74),n(21)),i=(n(259),n(137)),u=(n(222),n(93)),l=(n(145),n(34)),d=(n(100),n(261),n(22),n(65),n(472),n(260),n(119),n(1405),n(169),n(171),n(0)),m=n.n(d),s=n(1453);n(1454);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var y=l.a.Item;t.default=l.a.create()((function(e){var t=e.form,n=(e.match,e.history),p=f(Object(d.useState)({pageIndex:1,pageRows:10}),2),g=p[0],h=p[1],b=t.getFieldDecorator,E=t.validateFields,k=(t.getFieldsValue,f(Object(d.useState)(0),2)),S=k[0],v=k[1],x=f(Object(d.useState)([]),2),I=x[0],O=x[1],w=f(Object(d.useState)(!1),2),C=w[0],j=w[1],N=f(Object(d.useState)(!1),2),R=(N[0],N[1],f(Object(d.useState)({}),2)),J=R[0],P=R[1],q=f(Object(d.useState)(!1),2),A=q[0],F=q[1],V=f(Object(d.useState)(!1),2),B=(V[0],V[1],{labelCol:{span:6},wrapperCol:{span:14}});Object(d.useEffect)((function(){T()}),[g.pageRows,g.pageIndex]);var T=function(){F(!0),Object(s.d)(g).then((function(e){0==e.data.code&&(O(e.data.data.records),v(e.data.data.total))})).finally((function(){F(!1)}))},M=function(e,t){var n=1==t?"是否上架商品":"是否下架商品";u.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:n,onOk:function(){Object(s.e)({commodityId:e,status:t}).then((function(e){var n=1==t?"上架成功":"下架成功";0==e.data.code&&(i.a.success(n),T())}))}})},D=[{title:"商品名称",dataIndex:"commodityName",key:"commodityName",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"品牌",dataIndex:"commodityBrand",key:"commodityBrand",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"商品型号",dataIndex:"commodityModel",key:"commodityModel",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"缩略图",dataIndex:"commodityPicture",key:"commodityPicture",render:function(e){if(e){var t=e.split(",")[0];return m.a.createElement("img",{src:t,style:{width:"30px"}})}return""}},{title:"所属类别",dataIndex:"commodityClassifyName",key:"commodityClassifyName",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"平台产品ID",dataIndex:"productId",key:"productId",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"产品价格",dataIndex:"commodityPrice",key:"commodityPrice",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"库存",dataIndex:"currentStock",key:"currentStock",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"已售出",dataIndex:"selledStock",key:"selledStock"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return m.a.createElement("span",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=["下架","在售","售罄","未上架"];return t[e]}(e))}},{title:"操作",key:"action",width:300,render:function(e,t){return m.a.createElement("span",null,-1==[0,3].indexOf(t.status)&&m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{onClick:function(){z(t,!1)},style:{marginRight:"10px"}},"查看"),m.a.createElement("a",{onClick:function(){M(t.id,0)},style:{marginRight:"10px"}},"下架商品"),m.a.createElement("a",{onClick:function(){K(t)}},"补充库存")),-1!=[0,3].indexOf(t.status)&&m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{onClick:function(){z(t,!0)},style:{marginRight:"10px"}},"编辑"),m.a.createElement("a",{onClick:function(){M(t.id,1)}},"上架商品")))}}],z=function(e,t){n.push("/mall/productInfo?id=".concat(e.id,"&&isEdit=").concat(t))},K=function(e){P(e),j(!0)};return m.a.createElement("div",{className:"mall-product-page"},m.a.createElement(r.a,null,m.a.createElement("div",{className:"mall-product-top"},m.a.createElement(c.a,{type:"primary",onClick:function(){n.push("/mall/productInfo")}},"新增商品")),m.a.createElement(o.a,{rowKey:"id",columns:D,dataSource:I,loading:A,pagination:{defaultCurrent:1,current:g.pageIndex,onChange:function(e,t){t===g.pageRows?h((function(n){var a=JSON.parse(JSON.stringify(n));return Object.assign(a,{pageIndex:e,pageRows:t})})):h((function(e){var n=JSON.parse(JSON.stringify(e));return Object.assign(n,{pageIndex:1,pageRows:t})}))},pageSize:g.pageRows,total:S,showQuickJumper:!0,showTotal:function(){return m.a.createElement("span",null,"共 ",m.a.createElement("a",null,S)," 条")}}})),C&&m.a.createElement(u.a,{title:"库存信息",visible:C,onOk:function(){E().then((function(e){var t={id:J.id,currentStock:Number(J.currentStock)+Number(e.classifyValue),maxStock:Number(J.currentStock)+Number(e.classifyValue)+Number(J.selledStock)};Object(s.a)(t).then((function(e){0==e.data.code&&(i.a.success("补给成功"),j(!1),T())}))}))},onCancel:function(){j(!1)}},m.a.createElement(l.a,B,m.a.createElement(y,{label:"产品名称"},m.a.createElement("div",null,m.a.createElement("span",{style:{marginRight:"30px"}},J.commodityName),m.a.createElement("span",{style:{marginRight:"10px"}},"现有库存"),m.a.createElement("span",null,J.currentStock))),m.a.createElement(y,{label:"本次补充"},b("classifyValue",{getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(m.a.createElement(a.a,null))))))}))}}]);