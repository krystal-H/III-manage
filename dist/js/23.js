(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1469:function(e,t,a){},1516:function(e,t,a){"use strict";a.r(t);a(212);var n=a(91),r=(a(94),a(38)),c=(a(282),a(155)),o=(a(122),a(58)),l=(a(143),a(33)),i=(a(793),a(23),a(63),a(441),a(32),a(342),a(166),a(66),a(99),a(245),a(440),a(37),a(36),a(26),a(28),a(29),a(19),a(35),a(34),a(39),a(40),a(0)),u=a.n(i),s=a(4),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.c.request({url:"/manage-open/manage/order/getOrderList",data:e,method:"post",headers:{}})},m=function(e){return s.c.request({url:"/manage-open/manage/order/getReceiverDetail/"+e,method:"get",headers:{}})},f=function(e){return s.c.request({url:"/manage-open/manage/order/getOrderDetail/"+e,method:"get",headers:{}})},p=function(e){return s.c.request({url:"/manage-open/manage/order/getExpressDetail/"+e,method:"get",headers:{}})},g=function(e){return s.c.request({url:"/manage-open/manage/order/addExpress",method:"post",data:e,headers:{}})},b=a(31),v=(a(244),a(134));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach(function(t){E(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=l.a.Item,w=o.a.TextArea;var j=l.a.create()(function(e){var t=e.form,a=e.infoVis,r=e.handleCancel,c=(e.handleOk,e.actionData),s=t.getFieldDecorator,d=t.validateFields,m=(t.getFieldValue,t.setFieldsValue);return Object(i.useEffect)(function(){p(c.orderId).then(function(e){if(0===e.data.code){var t=e.data.data;m({expressName:t.expressName,expressNo:t.expressNo,remark:t.remark})}})},[]),u.a.createElement("div",null,u.a.createElement(n.a,{title:"快递信息",visible:a,onOk:function(){d().then(function(e){var t=O(O({},e),{},{orderId:c.orderId});g(t).then(function(e){0===e.data.code&&(v.a.success("提交成功"),r())})})},onCancel:r,width:"700px",wrapClassName:"mall-order-modal"},u.a.createElement("div",{className:"full-express-modal"},u.a.createElement(l.a,null,u.a.createElement("div",{className:"content-item"},u.a.createElement("div",{className:"item",style:{marginRight:"20px"}},u.a.createElement(h,{label:"快递公司"},s("expressName",{rules:[{required:!0,message:"请输入快递公司"}]})(u.a.createElement(o.a,{style:{width:"150px"}})))),u.a.createElement("div",{style:{flex:1}},u.a.createElement(h,{label:"快递单号"},s("expressNo",{rules:[{required:!0,message:"请输入快递单号"}]})(u.a.createElement(o.a,{style:{width:"220px"}}))))),u.a.createElement("div",null,u.a.createElement(h,{label:"订单处理备注"},s("remark",{})(u.a.createElement(w,{style:{width:"100%"},autosize:{minRows:3}}))))))))});a(1469);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}l.a.Item;var S=o.a.Search;t.default=l.a.create()(function(e){var t=e.form,a=k(Object(i.useState)({pageIndex:1,pageRows:10}),2),o=a[0],l=a[1],s=(t.getFieldDecorator,t.validateFields,t.getFieldsValue,k(Object(i.useState)(0),2)),m=s[0],f=s[1],p=k(Object(i.useState)(""),2),g=p[0],v=p[1],y=k(Object(i.useState)([]),2),O=y[0],E=y[1],h=k(Object(i.useState)(!1),2),w=(h[0],h[1],k(Object(i.useState)(!1),2)),D=w[0],C=w[1],R=k(Object(i.useState)(!1),2),q=R[0],F=R[1],J=k(Object(i.useState)(!1),2),T=J[0],V=J[1],A=k(Object(i.useState)("add"),2),M=(A[0],A[1],k(Object(i.useState)({}),2)),z=M[0],B=M[1],K=k(Object(i.useState)(!1),2),L=K[0],Q=K[1];Object(i.useEffect)(function(){G()},[o.pageRows,o.pageIndex]);var G=function(){Q(!0);var e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach(function(t){N(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},o);g&&g.trim()&&(e.condition=g.trim()),d(e).then(function(e){0==e.data.code&&(e.data.data.records.forEach(function(e,t){e.key=t+1}),E(e.data.data.records),f(e.data.data.total))}).finally(function(){Q(!1)})},H=[{title:"编号",dataIndex:"key",key:"key",width:70},{title:"订单号",dataIndex:"orderNo",key:"orderNo",render:function(e){return u.a.createElement("span",{title:e},e)}},{title:"用户",dataIndex:"a",key:"a",width:"200px",render:function(e,t){var a=t.phone;return u.a.createElement("span",null,u.a.createElement("span",{title:t.receiverName},t.receiverName),u.a.createElement("br",null),u.a.createElement("span",{title:t.phone}," ",a))}},{title:"订单金额",dataIndex:"totalPrice",key:"totalPrice",render:function(e){return u.a.createElement("span",{title:e/100},e/100)}},{title:"实付金额",dataIndex:"finalPrice",key:"finalPrice",render:function(e){return u.a.createElement("span",{title:e/100},e/100)}},{title:"支付方式",dataIndex:"payMode",key:"payMode",render:function(e){var t=["线下支付","微信","支付宝"];return u.a.createElement("span",{title:t[e]},t[e])}},{title:"订单状态",dataIndex:"status",key:"status",render:function(e){var t=["支付中","支付完成","发货中","退款退货中","订单支付失败","订单超时","订单关闭","订单完成","异常","已删除"];return u.a.createElement("span",{title:t[e]},t[e])}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e){return u.a.createElement("span",{title:e&&b.b.utcToDev(e)},e&&b.b.utcToDev(e))}},{title:"操作",key:"action",width:150,render:function(e,t){return u.a.createElement("div",{className:"mall-order-table-action"},u.a.createElement("div",{style:{marginRight:"10px"},onClick:function(){W(t)}},"查看订单信息"),u.a.createElement("div",{style:{marginRight:"10px"},onClick:function(){U(t)}},"查看收件人信息"),[1,2].includes(t.status)?u.a.createElement("div",{onClick:function(){X(t)}},"填写快递信息"):"")}}],U=function(e){B(e),C(!0)},W=function(e){B(e),V(!0)},X=function(e){B(e),F(!0)};return u.a.createElement("div",{className:"mall-order-page"},u.a.createElement(r.a,null,u.a.createElement("div",{className:"order-top"},u.a.createElement(S,{enterButton:"搜索",value:g,placeholder:"请输入用户名/手机号/订单号进行搜索",onChange:function(e){v(e.target.value)},onSearch:G,allowClear:!0})),u.a.createElement(c.a,{rowKey:"orderId",columns:H,dataSource:O,loading:L,bordered:!0,pagination:{defaultCurrent:1,current:o.pageIndex,onChange:function(e,t){t===o.pageRows?l(function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})}):l(function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})})},pageSize:o.pageRows,total:m,showQuickJumper:!0,showTotal:function(){return u.a.createElement("span",null,"共 ",u.a.createElement("a",null,m)," 条")}}})),q&&u.a.createElement(j,{actionData:z,infoVis:q,handleCancel:function(){F(!1)},handleOk:function(){F(!1),G()}}),T&&u.a.createElement(n.a,{wrapClassName:"mall-order-modal",visible:T,title:"订单信息",footer:null,onCancel:function(){V(!1)}},u.a.createElement(P,{actionData:z})),D&&u.a.createElement(n.a,{wrapClassName:"mall-order-modal",visible:D,title:"收件人信息",footer:null,onCancel:function(){C(!1)}},u.a.createElement(I,{actionData:z})))});function P(e){var t=e.actionData,a=k(Object(i.useState)([]),2),n=a[0],r=a[1];return Object(i.useEffect)(function(){f(t.orderId).then(function(e){0===e.data.code&&r(e.data.data)})},[]),u.a.createElement("div",{className:"mall-order-moadl"},n.map(function(e,t){return u.a.createElement("div",{key:t,className:"content"},u.a.createElement("img",{src:e.commodityPicture.split(",")[0]}),u.a.createElement("div",{className:"name"},e.name),u.a.createElement("div",{className:"code"},e.commodityModel),u.a.createElement("div",{className:"price"},"￥",e.quantity,"*",e.unitPrice/100))}))}function I(e){var t=e.actionData,a=k(Object(i.useState)({}),2),n=a[0],r=a[1];return Object(i.useEffect)(function(){m(t.orderId).then(function(e){0===e.data.code&&(e.data.data.phone,r(e.data.data))})},[]),u.a.createElement("div",{className:"mall-user-moadl"},Object.keys(n).length?u.a.createElement("div",null,n.address,"，",n.receiverName,"，",n.phone&&n.phone):"")}}}]);