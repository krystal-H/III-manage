(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1424:function(e,_,t){"use strict";t(48),t(49),t(19),t(37),t(22),t(38),t(28),t(30),t(31);var a=t(0),r=t.n(a);t(1425);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}function i(e,_){for(var t=0;t<_.length;t++){var a=_[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,_){return(o=Object.setPrototypeOf||function(e,_){return e.__proto__=_,e})(e,_)}function u(e){var _=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=s(e);if(_){var r=s(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return c(this,t)}}function c(e,_){if(_&&("object"===n(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(_&&_.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),_&&o(e,_)}(c,e);var _,t,a,n=u(c);function c(){return l(this,c),n.apply(this,arguments)}return _=c,(t=[{key:"render",value:function(){var e=this.props,_=e.children,t=e.title;return r.a.createElement("div",{className:"title-tab"},r.a.createElement("div",{className:"title-tab-option"},r.a.createElement("span",{className:"title-tab-title"},t)),r.a.createElement("div",{className:"title-tab-option"},_))}}])&&i(_.prototype,t),a&&i(_,a),c}(r.a.Component);d.Option=function(e){var _=e.children,t=e.label,a=e.align,n=void 0===a?"left":a;return r.a.createElement("div",{className:"".concat("left"===n?"title-tab-item":"title-tab-item-right")},r.a.createElement("span",{className:t?"title-table-label":"title-table-label-non"},t?t+":":""),_)},_.a=d},1425:function(e,_,t){},1436:function(e,_,t){"use strict";t.d(_,"b",(function(){return n})),t.d(_,"e",(function(){return l})),t.d(_,"i",(function(){return i})),t.d(_,"g",(function(){return o})),t.d(_,"d",(function(){return u})),t.d(_,"h",(function(){return c})),t.d(_,"k",(function(){return s})),t.d(_,"l",(function(){return d})),t.d(_,"c",(function(){return E})),t.d(_,"a",(function(){return m})),t.d(_,"f",(function(){return p})),t.d(_,"j",(function(){return f}));var a=t(3),r="/manage-open",n=function(e){return a.c.request({url:r+"/module/search",method:"post",data:e,headers:{"Content-Type":"application/json"}})},l=function(e){return a.c.request({url:r+"/module/type/getAllModuleBrandList",method:"get"})},i=function(){return a.c.request({url:r+"/module/type/getList",method:"post",data:[],headers:{"Content-Type":"application/json"}})},o=function(){return a.c.request({url:r+"/module/type/getMenu",method:"get"})},u=function(e){return a.c.request({url:r+"/module/type/bindSceneType/list",params:{moduleId:e},method:"get"})},c=function(){return a.c.request({url:r+"/module/type/getMenu",method:"get"})},s=function(e){return a.c.request({url:r+"/module/create",method:"post",data:e,headers:{"Content-Type":"application/json"}})},d=function(e){return a.c.request({url:r+"/module/update",method:"post",data:e,headers:{"Content-Type":"application/json"}})},E=function(e,_){return a.c.request({url:r+"/module/type/release",params:{moduleId:e,releaseStatus:_},method:"get"})},m=function(e){return a.c.request({url:"".concat(r,"/module/delete/").concat(e),method:"get"})},p=function(e){return a.c.request({url:"".concat(r,"/module/detail/").concat(e)})},f=function(e){return a.c.request({url:"".concat(r,"/module/update/firmware"),method:"post",data:e,headers:{"Content-Type":"application/json"}})}},1490:function(e,_,t){},1491:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19),core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(37),core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(38),core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(28),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(31),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(198),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(256),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(43),core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(44),core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(168),core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_10__),antd_es_modal_style_css__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(255),antd_es_modal__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(127),antd_es_upload_style_css__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1388),antd_es_upload__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1389),antd_es_radio_style_css__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(469),antd_es_radio__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(171),antd_es_button_style_css__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(75),antd_es_button__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(20),antd_es_select_style_css__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(197),antd_es_select__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(76),antd_es_icon_style_css__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(169),antd_es_icon__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(7),antd_es_form_style_css__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(154),antd_es_form__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(40),antd_es_input_style_css__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(136),antd_es_input__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(69),antd_es_message_style_css__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(298),antd_es_message__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(155),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(1390),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(35),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(33),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(65),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(34),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_33__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(220),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_34__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(22),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_35__),core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(66),core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(core_js_modules_es_promise_js__WEBPACK_IMPORTED_MODULE_36__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(97),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_37__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(170),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_38___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_38__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(825),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_39__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(117),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_40__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(301),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_41___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_41__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(258),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_42___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_42__),react__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_43___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_43__),_util_utils__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(32),_stepThird_less__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(1492),_stepThird_less__WEBPACK_IMPORTED_MODULE_45___default=__webpack_require__.n(_stepThird_less__WEBPACK_IMPORTED_MODULE_45__);function _extends(){return(_extends=Object.assign||function(e){for(var _=1;_<arguments.length;_++){var t=arguments[_];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function ownKeys(e,_){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);_&&(a=a.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),t.push.apply(t,a)}return t}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var t=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(t),!0).forEach((function(_){_defineProperty(e,_,t[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(t,_))}))}return e}function _defineProperty(e,_,t){return _ in e?Object.defineProperty(e,_,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[_]=t,e}function _slicedToArray(e,_){return _arrayWithHoles(e)||_iterableToArrayLimit(e,_)||_unsupportedIterableToArray(e,_)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,_){if(e){if("string"==typeof e)return _arrayLikeToArray(e,_);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,_):void 0}}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var t=0,a=new Array(_);t<_;t++)a[t]=e[t];return a}function _iterableToArrayLimit(e,_){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,n=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(a=t.next()).done)&&(n.push(a.value),!_||n.length!==_);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var uniquekey=0,uploadConfigs={action:_util_utils__WEBPACK_IMPORTED_MODULE_44__.j,className:"upload-list-inline",data:function(e){return{appId:31438,domainType:4}}},formItemLayout={labelCol:{span:6},wrapperCol:{span:16}},StyleItem={width:"60%"};function StepThird(_ref,ref){var form=_ref.form,commitAll=_ref.commitAll,opeType=_ref.opeType,_ref$editData=_ref.editData,editData=void 0===_ref$editData?{}:_ref$editData,_useState=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)(),_useState2=_slicedToArray(_useState,2),schemeType=_useState2[0],setSchemeType=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)([]),_useState4=_slicedToArray(_useState3,2),valueType=_useState4[0],setValueType=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)(!1),_useState6=_slicedToArray(_useState5,2),previewVisible=_useState6[0],setPreviewVisible=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)(""),_useState8=_slicedToArray(_useState7,2),showSrc=_useState8[0],setshowSrc=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)([]),_useState10=_slicedToArray(_useState9,2),pinDiagram=_useState10[0],setPindiagram=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)([]),_useState12=_slicedToArray(_useState11,2),sourceCode=_useState12[0],setSourcecode=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)([]),_useState14=_slicedToArray(_useState13,2),libraryFile=_useState14[0],setLibraryfile=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)([]),_useState16=_slicedToArray(_useState15,2),burnFile=_useState16[0],setBurnfile=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)([]),_useState18=_slicedToArray(_useState17,2),modulePicture=_useState18[0],setModulepicture=_useState18[1],_useState19=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)([]),_useState20=_slicedToArray(_useState19,2),referenceCircuitDiagram=_useState20[0],setReferencecircuitdiagram=_useState20[1],_useState21=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)([]),_useState22=_slicedToArray(_useState21,2),readmePdf=_useState22[0],setReadmepdf=_useState22[1],getFieldDecorator=form.getFieldDecorator,getFieldValue=form.getFieldValue,_useState23=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)("edit"===opeType&&editData.firmwareDefList[0]?editData.firmwareDefList[0]:{}),_useState24=_slicedToArray(_useState23,2),editInfo=_useState24[0],setEditInfo=_useState24[1],_useState25=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)(!1),_useState26=_slicedToArray(_useState25,2),radiosDisabled=_useState26[0],setRadiosDisabled=_useState26[1],_useState27=Object(react__WEBPACK_IMPORTED_MODULE_43__.useState)(),_useState28=_slicedToArray(_useState27,2),newData=_useState28[0],setNewData=_useState28[1];Object(react__WEBPACK_IMPORTED_MODULE_43__.useEffect)((function(){if("edit"===opeType){if(setSchemeType(editInfo.schemeType),Object.keys(editInfo).length&&setRadiosDisabled(!0),editData.modulePicture&&setModulepicture([{url:editData.modulePicture,name:editData.modulePictureName||"模组图片",uid:2}]),1===editInfo.schemeType){editInfo.pinDiagram&&setPindiagram([{url:editInfo.pinDiagram,name:"可配置固件引脚示意图",uid:1}]);var e=[],_=JSON.parse(editData.firmwareDefList[0].customConfigJson);_.forEach((function(e){"enum"===e.dataType.type&&(e.dataType.specs.def=e.dataType.specs.def.map((function(e){return{uniquekey:++uniquekey,k:e.k,v:e.v}})))})),setNewData(_),_.forEach((function(_){e.push(_.dataType.type)})),setValueType(e)}editInfo.burnFile&&setBurnfile([{url:editInfo.burnFile,name:editInfo.burnFileName||"模组固件",uid:1}]),editInfo.referenceCircuitDiagram&&setReferencecircuitdiagram([{url:editInfo.referenceCircuitDiagram,name:editInfo.referenceCircuitDiagramName||"参考电路图",uid:3}]),editInfo.readmePdf&&setReadmepdf([{url:editData.readmePdf,name:editData.readmePdfName||"说明文档",uid:4}]),editInfo.sourceCode&&setSourcecode([{url:editInfo.sourceCode,name:editInfo.sourceCodeName||"原厂SDK",uid:4}]),editInfo.libraryFile&&setLibraryfile([{url:editInfo.libraryFile,name:editInfo.libraryFileName||"clifeSDK",uid:5}])}}),[editData]),Object(react__WEBPACK_IMPORTED_MODULE_43__.useEffect)((function(){console.log(burnFile,"burnFileburnFileburnFile")}),[burnFile]);var validData=function(){form.validateFields((function(e,_){if(e)console.log("err",e);else{_.funcDefList&&_.funcDefList.length>0&&(_.funcDefList=_.funcDefList.map((function(e){return"enum"===e.dataType.type&&(e.dataType.specs.def=e.dataType.specs.def.filter((function(e){return e})),e.dataType.specs.defaultValue=e.dataType.specs.defaultValue.filter((function(e){return e}))),e})));var t=[],a={price:_.price,schemeType:_.schemeType,modulePicture:modulePicture&&modulePicture.length?modulePicture[0].url:"",modulePictureName:modulePicture&&modulePicture.length?modulePicture[0].name:"",referenceCircuitDiagram:referenceCircuitDiagram&&referenceCircuitDiagram.length?referenceCircuitDiagram[0].url:"",referenceCircuitDiagramName:referenceCircuitDiagram&&referenceCircuitDiagram.length?referenceCircuitDiagram[0].name:"",readmePdf:readmePdf&&readmePdf.length?readmePdf[0].url:"",readmePdfName:readmePdf&&readmePdf.length?readmePdf[0].name:""},r=_objectSpread(_objectSpread({},a),{},{customConfigJson:JSON.stringify(_.funcDefList)||JSON.stringify([]),pinDiagram:pinDiagram&&pinDiagram.length?pinDiagram[0].url:""}),n=_objectSpread(_objectSpread({},a),{},{burnFile:burnFile&&burnFile.length?burnFile[0].url:"",burnFileVersion:_.burnFileVersion,burnFileName:_.burnFileName}),l=_objectSpread(_objectSpread({},a),{},{sourceCode:sourceCode&&sourceCode.length?sourceCode[0].url:"",sourceCodeVersion:_.sourceCodeVersion,sourceCodeName:sourceCode&&sourceCode.length?sourceCode[0].name:"",libraryFile:libraryFile&&libraryFile.length?libraryFile[0].url:"",libraryFileVersion:_.libraryFileVersion,libraryFileName:libraryFile&&libraryFile.length?libraryFile[0].name:""});switch(schemeType){case 1:t.push(r);break;case 2:t.push(n);break;case 3:t.push(l)}commitAll(t)}}))};Object(react__WEBPACK_IMPORTED_MODULE_43__.useImperativeHandle)(ref,(function(){return{onFinish:validData}}),[pinDiagram,sourceCode,libraryFile,burnFile,modulePicture,referenceCircuitDiagram,readmePdf,form]);var modulePictureBeforeUpload=function(e){return new Promise((function(_,t){return"image/png"===e.type?e.size/1024/1024<=.5?e.name.length<=50?_(!0):(antd_es_message__WEBPACK_IMPORTED_MODULE_28__.a.error("文件名称长度不超过50个字符"),t(!1)):(antd_es_message__WEBPACK_IMPORTED_MODULE_28__.a.error("图片必须小于500KB!"),t(!1)):(antd_es_message__WEBPACK_IMPORTED_MODULE_28__.a.error("只能上传PNG格式"),t(!1))}))},removePic=function removePic(file,type){var upperType=type.trim().toLowerCase().replace(type[0],type[0].toUpperCase());eval("set".concat(upperType))([]),form.setFieldsValue(_defineProperty({},type,"")),console.log(form.getFieldValue(type))},handleChange=function handleChange(info,type){var upperType=type.trim().toLowerCase().replace(type[0],type[0].toUpperCase()),file=info.file,fileList=info.fileList;if("done"===file.status){var arr=[],uploadObj={status:"done",name:file.name,url:file.response.data.url,uid:file.uid};arr.push(uploadObj),setTimeout((function(){eval("set".concat(upperType))(arr)}),0),form.setFieldsValue({type:file.response.data.url})}else"error"===file.status?(antd_es_message__WEBPACK_IMPORTED_MODULE_28__.a.error("".concat(info.file.name," 上传失败")),eval("set".concat(upperType))([]),form.setFieldsValue({type:""})):(eval("set".concat(upperType))([]),form.setFieldsValue({type:""}))},judgeFormat=function(e,_){switch(_){case"原厂SDK":case"PDF文件":case"clifeSDK":case"模组固件":return"application/zip"===e.type||"application/x-zip-compressed"===e.type}},uploadDocumentLimit=function(e,_,t){return new Promise((function(a,r){return judgeFormat(e,_)?e.size/1024/1024<=t?e.name.length<=50?a(!0):(antd_es_message__WEBPACK_IMPORTED_MODULE_28__.a.error("文件名称长度不超过50个字符"),r(!1)):(antd_es_message__WEBPACK_IMPORTED_MODULE_28__.a.error("文件必须小于".concat(t,"M")),r(!1)):(antd_es_message__WEBPACK_IMPORTED_MODULE_28__.a.error("只能上传".concat(_,"!")),r(!1))}))},handlePreview=function(e,_){setPreviewVisible(e),setshowSrc(_[0].url)},chooseValueType=function(e,_){var t=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_29___default()(valueType);t[_]=e,setValueType(t)},addEnum=function(e){var _=form.getFieldValue("innerList".concat(e));uniquekey++;var t=_.concat({uniquekey:uniquekey});form.setFieldsValue(_defineProperty({},"innerList".concat(e),t))},deleteEnum=function(e,_){var t,a=form.getFieldValue("innerList".concat(e)),r=form.getFieldValue("funcDefList");form.setFieldsValue((_defineProperty(t={},"innerList".concat(e),a.filter((function(e,t){return e.uniquekey!==_}))),_defineProperty(t,"funcDefList",r[e].dataType.specs.def.filter((function(e,t){return e.uniquekey!==_}))),t))},createInnerHtml=function(e,_,t){var a=react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",{className:"inline-form-item",key:_},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,_extends({label:"默认值"},formItemLayout),getFieldDecorator("".concat(e,".defaultValue[").concat(_,"].k"),{initialValue:t.dataType&&t.dataType.specs&&t.dataType.specs.defaultValue[0]&&t.dataType.specs.defaultValue[0].k?t.dataType.specs.defaultValue[0].k:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入key值"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:95,marginRight:8}}))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{className:"right-item"},"-    ",getFieldDecorator("".concat(e,".defaultValue[").concat(_,"].v"),{initialValue:t.dataType&&t.dataType.specs&&t.dataType.specs.defaultValue[0]&&t.dataType.specs.defaultValue[0].v?t.dataType.specs.defaultValue[0].v:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入value值"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:95,marginRight:8}})))),r=t.dataType&&t.dataType.specs&&t.dataType.specs.def;return getFieldDecorator("innerList".concat(_),{initialValue:"edit"===opeType&&1===schemeType&&r?t.dataType.specs.def:[{uniquekey:0}]}),[a,getFieldValue("innerList".concat(_)).map((function(t,a){return react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",{className:"inline-form-item",key:a},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,_extends({label:"key-value"},formItemLayout),getFieldDecorator("".concat(e,".def[").concat(t.uniquekey,"].k"),{initialValue:t.k,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入key值"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:95,marginRight:8}}))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"",className:"right-item"},"-    ",getFieldDecorator("".concat(e,".def[").concat(t.uniquekey,"].v"),{initialValue:t.v,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入value值"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:95,marginRight:8}})),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_22__.a,{key:a,className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return deleteEnum(_,t.uniquekey)}})))}))]},addConfig=function(){var e=form.getFieldValue("configList");console.log(e,"-------------");var _=e.concat({});form.setFieldsValue({configList:_})},removeConfig=function(e){var _=form.getFieldValue("configList"),t=form.getFieldValue("funcDefList");form.setFieldsValue({configList:_.filter((function(_,t){return t!==e})),funcDefList:t.filter((function(_,t){return t!==e}))})},list=[];1===schemeType&&(getFieldDecorator("configList",{initialValue:"edit"===opeType&&1===schemeType&&newData?newData:[{}]}),list=getFieldValue("configList"));var firmwareFormHtml=list&&list.map((function(e,_){return react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",{className:"free-scheme-block",key:_},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,_extends({label:"可配置模块"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].funcModule"),{initialValue:e.funcModule,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入可配置模块"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{placeholder:"请输入可配置模块",style:StyleItem}))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,_extends({label:"可配置功能名称"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].funcName"),{initialValue:e.funcName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入可配置功能名称"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{placeholder:"请输入可配置功能名称",style:StyleItem}))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,_extends({label:"可配置功能标识"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].identifier"),{initialValue:e.identifier,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入可配置功能标识"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{placeholder:"请输入可配置功能标识",style:StyleItem}))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,_extends({label:"可配置功能数值"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].dataType.type"),{initialValue:e.dataType?e.dataType.type:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请选择可配置功能数值"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_select__WEBPACK_IMPORTED_MODULE_20__.a,{placeholder:"请选择可配置功能数值",style:StyleItem,onChange:function(e){return chooseValueType(e,_)}},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_select__WEBPACK_IMPORTED_MODULE_20__.a.Option,{value:"int"},"数值"),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_select__WEBPACK_IMPORTED_MODULE_20__.a.Option,{value:"enum"},"枚举")))),"int"===valueType[_]&&react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_43___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",{className:"inline-form-item"},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,_extends({label:"数值范围"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].dataType.specs.min"),{initialValue:"edit"===opeType&&e.dataType&&e.dataType.specs&&e.dataType.specs.min?e.dataType.specs.min.toString():"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值范围"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:90,marginRight:8}}))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"",className:"right-item"},"至    ",getFieldDecorator("funcDefList[".concat(_,"].dataType.specs.max"),{initialValue:"edit"===opeType&&e.dataType&&e.dataType.specs&&e.dataType.specs.max?e.dataType.specs.max.toString():"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值范围"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:90,marginRight:8}})))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,_extends({label:"默认值"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].dataType.specs.defaultValue"),{initialValue:"edit"===opeType&&e.dataType&&e.dataType.specs&&!Array.isArray(e.dataType.specs.defaultValue)?e.dataType.specs.defaultValue.toString():"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入默认值"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:"60%",marginRight:8}})))),"enum"===valueType[_]&&react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_43___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,createInnerHtml("funcDefList[".concat(_,"].dataType.specs"),_,e)),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",{className:"add-enmu-btn"},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_18__.a,{type:"primary",icon:"plus",onClick:function(){return addEnum(_)}},"新增"))),_>0&&react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",{className:"del-btn",key:_,onClick:function(){return removeConfig(_)}},"删除  ",react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_22__.a,{type:"delete"})))})),uploadButton=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"上传文档";return react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_18__.a,null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_22__.a,{type:"upload"}),e)};return react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a,formItemLayout,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"支持方案"},getFieldDecorator("schemeType",{initialValue:editInfo.schemeType,rules:[{required:!0,message:"请选择支持方案"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_16__.a.Group,{onChange:function(e){return setSchemeType(e.target.value)},disabled:radiosDisabled},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_16__.a,{value:1},"免开发"),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_16__.a,{value:2},"MCU方案"),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_16__.a,{value:3},"Soc方案")))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"价格"},getFieldDecorator("price",{initialValue:editData.price?editData.price.toString():"",rules:[{required:!0,message:"请输入价格",whitespace:!0},{pattern:/^[0-9]+([.]{1}[0-9]{1,2})?$/,message:"最多为两位小数的正数（包含0）"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{placeholder:"请输入价格",style:{width:405}})),"  人民币/个"),1===schemeType&&react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"可配置固件引脚示意图",extra:"请上传尺寸为227*404px，格式为png的引脚示意图",wrapperCol:{span:13}},getFieldDecorator("pinDiagram",{initialValue:editInfo.pinDiagram,rules:[{required:!1,message:"请上传可配置固件引脚示意图"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_14__.a,_extends({},uploadConfigs,{listType:"picture",defaultFileList:pinDiagram||[],onPreview:function(){return handlePreview(!0,pinDiagram)},beforeUpload:modulePictureBeforeUpload,onRemove:function(e){return removePic(e,"pinDiagram")},accept:"image/png",onChange:function(e){return handleChange(e,"pinDiagram")}}),pinDiagram&&pinDiagram.length>=1?null:uploadButton("上传图片"))))),2===schemeType&&react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_43___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"模组固件",extra:"请上传格式为.zip压缩包，大小40M的文件"},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{style:{display:"inline-block",marginBottom:0,width:215}},getFieldDecorator("burnFile",{initialValue:editInfo.burnFile,rules:[{required:!1,message:"请上传模组固件"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_14__.a,_extends({},uploadConfigs,{beforeUpload:function(e){return uploadDocumentLimit(e,"模组固件",40)},onChange:function(e){return handleChange(e,"burnFile")},defaultFileList:burnFile||[],onRemove:function(e){return removePic(e,"burnFile")},accept:".zip"}),burnFile&&burnFile.length>=1?null:uploadButton())))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("span",null,"      "),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{style:{display:"inline-block",marginBottom:0}},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,"版本号：",getFieldDecorator("burnFileVersion",{initialValue:editInfo.burnFileVersion,rules:[{required:!0,message:"请输入模组固件版本号"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:162},type:"text",maxLength:10,placeholder:"v1.1.1"}))))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"模组固件名称"},getFieldDecorator("burnFileName",{initialValue:editInfo.burnFileName?editInfo.burnFileName.split(".")[0]:"",rules:[{required:!1,message:"模组固件名称",whitespace:!0}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{placeholder:"模组固件名称",style:{width:460}})))),3===schemeType&&react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_43___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"原厂SDK",extra:"请上传格式为.zip压缩包，大小40M的文件"},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{style:{display:"inline-block",marginBottom:0,width:215}},getFieldDecorator("sourceCode",{initialValue:editInfo.sourceCode,rules:[{required:!1,message:"请上传原厂SDK"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_14__.a,_extends({},uploadConfigs,{beforeUpload:function(e){return uploadDocumentLimit(e,"原厂SDK",512)},onChange:function(e){return handleChange(e,"sourceCode")},defaultFileList:sourceCode||[],onRemove:function(e){return removePic(e,"sourceCode")},accept:".zip "}),sourceCode&&sourceCode.length>=1?null:uploadButton())))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("span",null,"      "),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{style:{display:"inline-block",marginBottom:0}},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,"版本号：",getFieldDecorator("sourceCodeVersion",{initialValue:editInfo.sourceCodeVersion,rules:[{required:!1,message:"请输入原厂SDK版本号"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:162},type:"text",maxLength:10,placeholder:"v1.1.1"}))))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"clifeSDK",extra:"请上传格式为.zip压缩包，大小40M的文件"},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{style:{display:"inline-block",marginBottom:0,width:215}},getFieldDecorator("libraryFile",{initialValue:editInfo.libraryFile,rules:[{required:!1,message:"请上传clifeSDK"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_14__.a,_extends({},uploadConfigs,{beforeUpload:function(e){return uploadDocumentLimit(e,"clifeSDK",40)},onChange:function(e){return handleChange(e,"libraryFile")},onRemove:function(e){return removePic(e,"libraryFile")},defaultFileList:libraryFile||[],accept:".zip"}),libraryFile&&libraryFile.length>=1?null:uploadButton())))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("span",null,"      "),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{style:{display:"inline-block",marginBottom:0}},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,"版本号：",getFieldDecorator("libraryFileVersion",{initialValue:editInfo.libraryFileVersion,rules:[{required:!1,message:"请输入clifeSDK版本号"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_26__.a,{style:{width:162},type:"text",maxLength:10,placeholder:"v1.1.1"})))))),(1===schemeType||2===schemeType||3===schemeType)&&react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_43___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"模组图片",extra:"请上传格式为.png、尺寸为119*119px、小于500k的图片",wrapperCol:{span:13}},getFieldDecorator("modulePicture",{initialValue:editData.modulePicture||"",rules:[{required:!1,message:"请上传一张图片"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_14__.a,_extends({},uploadConfigs,{listType:"picture",defaultFileList:modulePicture||[],onPreview:function(){return handlePreview(!0,modulePicture)},beforeUpload:modulePictureBeforeUpload,onRemove:function(e){return removePic(e,"modulePicture")},accept:"image/png",onChange:function(e){return handleChange(e,"modulePicture")}}),modulePicture&&modulePicture.length>=1?null:uploadButton("上传图片"))))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"参考电路图",extra:"请上传格式为.png，小于500k图片",wrapperCol:{span:13}},getFieldDecorator("referenceCircuitDiagram",{initialValue:editData.referenceCircuitDiagram||"",rules:[{required:!1,message:"请上传一张图片"}]})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_14__.a,_extends({},uploadConfigs,{listType:"picture",defaultFileList:referenceCircuitDiagram||[],onPreview:function(){return handlePreview(!0,referenceCircuitDiagram)},beforeUpload:modulePictureBeforeUpload,onRemove:function(e){return removePic(e,"referenceCircuitDiagram")},accept:"image/png",onChange:function(e){return handleChange(e,"referenceCircuitDiagram")}}),referenceCircuitDiagram&&referenceCircuitDiagram.length>=1?null:uploadButton("上传图片"))))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"说明文档",extra:"请上传格式为.zip压缩包，大小40M的文件",wrapperCol:{span:13}},getFieldDecorator("readmePdf",{initialValue:editData.readmePdf||""})(react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_14__.a,_extends({},uploadConfigs,{defaultFileList:readmePdf||[],beforeUpload:function(e){return uploadDocumentLimit(e,"PDF文件",40)},onRemove:function(e){return removePic(e,"readmePdf")},accept:".zip",onChange:function(e){return handleChange(e,"readmePdf")}}),readmePdf&&readmePdf.length>=1?null:uploadButton()))))),1===schemeType&&react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,{label:"可配置固件功能部分"},firmwareFormHtml,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.Item,null,react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_18__.a,{type:"primary",icon:"plus",onClick:function(){return addConfig()}},"新增"))),react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement(antd_es_modal__WEBPACK_IMPORTED_MODULE_12__.a,{visible:previewVisible,footer:null,onCancel:function(){return setPreviewVisible(!1)}},react__WEBPACK_IMPORTED_MODULE_43___default.a.createElement("img",{alt:"example",style:{width:"100%"},src:showSrc})))}__webpack_exports__.a=antd_es_form__WEBPACK_IMPORTED_MODULE_24__.a.create()(Object(react__WEBPACK_IMPORTED_MODULE_43__.forwardRef)(StepThird))},1492:function(e,_,t){},1493:function(e,_,t){},1494:function(e,_,t){},1523:function(e,_,t){"use strict";t.r(_);t(97),t(257);var a=t(0),r=t.n(a),n=t(58),l=(t(19),t(37),t(38),t(28),t(30),t(31),t(198),t(220),t(256),t(35),t(34),t(43),t(33),t(44),t(98),t(39)),i=(t(154),t(40)),o=(t(136),t(69)),u=(t(298),t(155)),c=(t(221),t(83)),s=(t(75),t(20)),d=(t(255),t(127)),E=(t(197),t(76)),m=t(1390),p=t.n(m),f=(t(65),t(825),t(22),t(66),t(468),t(168),t(106)),D=t(1424),O=(t(32),t(827),t(369)),P=(t(299),t(107)),M=(t(1393),t(1396));var y=E.a.Option;function T(e,_){var t=e.form,n=e.setStepCur,l=e.brandList,u=e.editData,c=void 0===u?{}:u,s=function(e,_,t){_<0?t("仅允许输入正整数"):t()},d=function(){t.validateFields((function(e,_){e||(console.log("Received values of form: ",_),n(1,_))}))};Object(a.useImperativeHandle)(_,(function(){return{onFinish:d}}));var m,p,f,D=t.getFieldDecorator;return r.a.createElement(i.a,{labelCol:{span:4},wrapperCol:{span:18}},r.a.createElement(i.a.Item,{label:"模组名称"},D("moduleName",{initialValue:c.moduleName,rules:[{required:!0,message:"请输入模组名称",whitespace:!0}]})(r.a.createElement(o.a,{placeholder:"请输入模组名称"}))),r.a.createElement(i.a.Item,{label:"模组生产厂家"},D("moduleBrandId",{initialValue:c.moduleBrandId,rules:[{required:!0,message:"请选择模组生产厂家"}]})(r.a.createElement(E.a,{placeholder:"请选择模组生产厂家",showSearch:!0,optionFilterProp:"children"},l.map((function(e){return r.a.createElement(y,{value:e.moduleBrandId,key:e.moduleBrandId},e.brandName)}))))),r.a.createElement(i.a.Item,{label:"模组型号"},D("hetModuleTypeName",{initialValue:c.hetModuleTypeName,rules:[{required:!0,message:"请输入模组型号",whitespace:!0}]})(r.a.createElement(o.a,{placeholder:"请输入模组型号"}))),r.a.createElement(i.a.Item,{label:"模组IC型号"},D("originalModuleTypeName",{initialValue:c.originalModuleTypeName,rules:[{required:!0,message:"请输入模组IC型号",whitespace:!0}]})(r.a.createElement(o.a,{placeholder:"请输入模组IC型号"}))),r.a.createElement(i.a.Item,{label:"适用范围"},D("applyScope",{initialValue:c.applyScope,rules:[{required:!0,message:"请输入模组适用范围"},{type:"string",max:50,message:"上限50个字符长度"}]})(r.a.createElement(o.a,{type:"text",placeholder:"请输入模组适用范围，如：家电产品",maxLength:50}))),r.a.createElement(i.a.Item,(f="required-icon",(p="className")in(m={className:"moduleSize",label:"模组尺寸"})?Object.defineProperty(m,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):m[p]=f,m),r.a.createElement(i.a.Item,{style:{display:"inline-block",width:"100px",marginBottom:0}},D("sizeThickness",{initialValue:c.sizeThickness,rules:[{required:!0,message:"请输入长"},{validator:s}]})(r.a.createElement(M.a,{maxLength:3,max:999}))),r.a.createElement("span",null," -   "),r.a.createElement(i.a.Item,{label:"",style:{display:"inline-block",width:"100px",marginBottom:0}},D("sizeWidth",{initialValue:c.sizeWidth,rules:[{required:!0,message:"请输入宽"},{validator:s}]})(r.a.createElement(M.a,{maxLength:3,max:999}))),r.a.createElement("span",null," -   "),r.a.createElement(i.a.Item,{style:{display:"inline-block",width:"100px",marginBottom:0}},D("sizeHeight",{initialValue:c.sizeHeight,rules:[{required:!0,message:"请输入高"},{validator:s}]})(r.a.createElement(M.a,{maxLength:3,max:999}))),r.a.createElement("br",null),r.a.createElement("span",null,"（长*宽*高 mm）")))}var b=i.a.create()(Object(a.forwardRef)(T)),g=(t(469),t(171)),I=(t(367),t(143)),C=(t(479),t(301),t(1490),o.a.TextArea);function L(e,_){var t=e.form,n=e.setStepCur,l=e.netList,o=e.protocolList,u=e.bindSceneList,c=e.moduleCommonObj,s=e.editData,d=void 0===s?{}:s,m=function(){t.validateFields((function(e,_){e||(console.log("Received values of form: ",_),n(2,_))}))};Object(a.useImperativeHandle)(_,(function(){return{onFinish:m}}));var p=t.getFieldDecorator;return r.a.createElement(i.a,{labelCol:{span:4},wrapperCol:{span:18}},r.a.createElement(i.a.Item,{label:"通信方式"},p("moduleTypeList",{initialValue:d.moduleTypeList,rules:[{required:!0,message:"请选择通信方式"}]})(r.a.createElement(I.a.Group,null,c.moduleTypeList&&c.moduleTypeList.length?c.moduleTypeList.map((function(e){return r.a.createElement(I.a,{value:e.moduleType,key:e.moduleType},e.moduleTypeName)})):null))),r.a.createElement(i.a.Item,{label:"配网库"},p("appModuleId",{initialValue:d.appModuleId,rules:[{required:!0,message:"请您选择配网库"}]})(r.a.createElement(E.a,{placeholder:"请选择配网库",showSearch:!0,optionFilterProp:"children"},l.map((function(e,_){return r.a.createElement(E.a.Option,{value:e.moduleId,key:e.moduleId},e.moduleId+" "+e.hetModuleTypeName)}))))),r.a.createElement(i.a.Item,{label:"配网方式"},p("networkTypeList",{initialValue:d.networkTypeList,rules:[{required:!0,message:"请选择配网方式"}]})(r.a.createElement(I.a.Group,null,c.networkTypeList&&c.networkTypeList.length?c.networkTypeList.map((function(e){return r.a.createElement(I.a,{value:e.networkType,key:e.networkType},e.networkTypeName)})):null))),r.a.createElement(i.a.Item,{label:"默认通信速率"},p("communicateSpeed",{initialValue:d.communicateSpeed,rules:[{required:!0,pattern:new RegExp(/^\+?[1-9][0-9]*$/,"g"),message:"请输入通信速率"}]})(r.a.createElement(M.a,{placeholder:"请输入通信速率",style:{width:"100%"},maxLength:6}))),r.a.createElement(i.a.Item,{label:"数据长度上限"},p("dataLengthLimit",{initialValue:d.dataLengthLimit,rules:[{required:!0,message:"请输入通信速率"}]})(r.a.createElement(E.a,{placeholder:"请选择数据长度上限",showSearch:!0,optionFilterProp:"children"},o.dataLengthLimitList&&o.dataLengthLimitList.map((function(e,_){return r.a.createElement(E.a.Option,{value:e.dataLengthLimit,key:e.dataLengthLimit},e.dataLengthLimitName)}))))),r.a.createElement(i.a.Item,{label:"认证通道"},p("bindSceneType",{initialValue:d.bindSceneType,rules:[{required:!0,message:"请选择认证通道"}]})(r.a.createElement(E.a,{placeholder:"请选择认证通道",showSearch:!0,optionFilterProp:"children"},u.map((function(e,_){return r.a.createElement(E.a.Option,{value:e.sceneTypeId,key:e.sceneTypeId},e.sceneTypeName)}))))),r.a.createElement(i.a.Item,{label:"支持文件传输"},p("supportFileTransfer",{initialValue:d.supportFileTransfer,rules:[{required:!0,message:"请选择是否支持文件传输"}]})(r.a.createElement(g.a.Group,null,r.a.createElement(g.a,{value:1},"是"),r.a.createElement(g.a,{value:0},"否")))),r.a.createElement(i.a.Item,{label:"模组备注"},p("moduleRemark",{initialValue:d.moduleRemark})(r.a.createElement(C,{placeholder:"请输入模组备注（最大长度100）",autoSize:{minRows:3,maxRows:3},maxLength:"100"})),r.a.createElement("br",null),r.a.createElement("span",null,"限制2M大小")))}var h=i.a.create()(Object(a.forwardRef)(L)),R=t(1491),A=t(1436);t(1493);function B(e,_){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);_&&(a=a.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),t.push.apply(t,a)}return t}function U(e){for(var _=1;_<arguments.length;_++){var t=null!=arguments[_]?arguments[_]:{};_%2?B(Object(t),!0).forEach((function(_){K(e,_,t[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(t,_))}))}return e}function K(e,_,t){return _ in e?Object.defineProperty(e,_,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[_]=t,e}function j(e,_){return function(e){if(Array.isArray(e))return e}(e)||function(e,_){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var a,r,n=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(a=t.next()).done)&&(n.push(a.value),!_||n.length!==_);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw r}}return n}(e,_)||function(e,_){if(!e)return;if("string"==typeof e)return W(e,_);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W(e,_)}(e,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,_){(null==_||_>e.length)&&(_=e.length);for(var t=0,a=new Array(_);t<_;t++)a[t]=e[t];return a}var w=P.a.TabPane,v=O.a.Step,S=["基本参数","功能参数","文件上传"];var k=i.a.create()((function(e){var _=e.visible,t=e.handleOk,n=e.handleCancel,l=e.moduleCommonObj,i=e.getTableData,o=e.editData,c=e.opeType,E=e.isUpgrade,m=j(Object(a.useState)(E?2:0),2),f=m[0],D=m[1],M=Object(a.useRef)(),y=Object(a.useRef)(),T=Object(a.useRef)(),g=j(Object(a.useState)({one:{},two:{},three:{}}),2),I=g[0],C=g[1],L=j(Object(a.useState)([]),2),B=L[0],K=L[1],W=j(Object(a.useState)([]),2),k=W[0],q=W[1],F=j(Object(a.useState)([]),2),V=F[0],x=F[1],N=j(Object(a.useState)([]),2),z=N[0],H=N[1];Object(a.useEffect)((function(){Object(A.e)().then((function(e){K(e.data.data)})),Object(A.i)().then((function(e){q(e.data.data)})),Object(A.g)().then((function(e){x(e.data.data)})),Object(A.d)().then((function(e){H(e.data.data)}))}),[]);var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1?arguments[1]:void 0;0===f?C((function(e){var t=p()(e);return t.one=p()(_),t})):1===f&&C((function(e){var t=p()(e);return t.two=p()(_),t})),D(e)};return r.a.createElement(d.a,{title:E?"更新":"add"===c?"新增":"编辑",width:900,style:{top:20},visible:_,onOk:t,onCancel:n,maskClosable:!1,wrapClassName:"module-add-scheme",footer:[0!==f&&r.a.createElement(s.a,{key:"previous",onClick:function(){D(f-1)}},"上一步"),r.a.createElement(s.a,{type:"primary",key:"next",onClick:function(){0===f?M.current.onFinish():1===f?y.current.onFinish():2===f&&T.current.onFinish()}},2===f?"提交":"下一步")]},r.a.createElement("div",{className:"add-scheme-modal"},r.a.createElement("div",{className:"step-box ".concat(E?"noShow":"")},r.a.createElement(O.a,{current:f},S.map((function(e,_){return r.a.createElement(v,{key:e,title:e})})))),r.a.createElement("div",{className:"formbox"},r.a.createElement(P.a,{activeKey:f+"",animated:!1},r.a.createElement(w,{tab:"基本参数",key:"0"},r.a.createElement(b,{brandList:B,netList:k,wrappedComponentRef:M,setStepCur:J,editData:o})),r.a.createElement(w,{tab:"功能参数",key:"1"},r.a.createElement(h,{netList:k,protocolList:V,bindSceneList:z,moduleCommonObj:l,wrappedComponentRef:y,setStepCur:J,editData:o})),r.a.createElement(w,{tab:"功能参数",key:"2"},r.a.createElement(R.a,{wrappedComponentRef:T,commitAll:function(e){if(E){var _={firmwareDefReqList:e,moduleId:o.moduleId};_.firmwareDefReqList[0].id=o.firmwareDefList&&o.firmwareDefList.length?o.firmwareDefList[0].id:"",console.log(_,"params"),Object(A.j)(_).then((function(e){0===e.data.code&&(u.a.success("提交成功"),n(),i())}))}else{var t=U(U(U({},I.one),I.two),{},{firmwareDefReqList:e});console.log(t,"params"),"edit"===c?(t.moduleId=o.moduleId,t.firmwareDefReqList[0].id=o.firmwareDefList&&o.firmwareDefList.length?o.firmwareDefList[0].id:"",Object(A.l)(t).then((function(e){0===e.data.code&&(u.a.success("提交成功"),n(),i())}))):Object(A.k)(t).then((function(e){0===e.data.code&&(u.a.success("提交成功"),n(),i())}))}},editData:o,opeType:c}))))))}));t(1494);function q(e,_){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);_&&(a=a.filter((function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable}))),t.push.apply(t,a)}return t}function F(e,_,t){return _ in e?Object.defineProperty(e,_,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[_]=t,e}function V(e,_){return function(e){if(Array.isArray(e))return e}(e)||function(e,_){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var a,r,n=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(a=t.next()).done)&&(n.push(a.value),!_||n.length!==_);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw r}}return n}(e,_)||function(e,_){if(!e)return;if("string"==typeof e)return x(e,_);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,_)}(e,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,_){(null==_||_>e.length)&&(_=e.length);for(var t=0,a=new Array(_);t<_;t++)a[t]=e[t];return a}var N=E.a.Option,z=d.a.confirm,H={1:"已发布",0:"草稿"};var J=i.a.create()((function(e){var _=e.form,t=V(Object(a.useState)({pageIndex:1,pageRows:10}),2),n=t[0],d=t[1],m=V(Object(a.useState)(0),2),O=m[0],P=m[1],M=V(Object(a.useState)([]),2),y=M[0],T=M[1],b=V(Object(a.useState)(!1),2),g=b[0],I=b[1],C=V(Object(a.useState)(!1),2),L=C[0],h=C[1],R=_.getFieldDecorator,B=_.getFieldsValue,U=V(Object(a.useState)({}),2),K=U[0],j=U[1],W=V(Object(a.useState)(!1),2),w=W[0],v=W[1],S=V(Object(a.useState)({}),2),x=S[0],J=S[1],$=V(Object(a.useState)(!1),2),G=$[0],Q=$[1],X=[{title:"模组型号",key:"hetModuleTypeName",dataIndex:"hetModuleTypeName",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"模组名称",key:"moduleName",dataIndex:"moduleName",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"支持通信",width:"15%",key:"moduleTypeStr",dataIndex:"moduleTypeStr",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"生产厂商",key:"brandName",dataIndex:"brandName"},{title:"状态",key:"releaseStatus",dataIndex:"releaseStatus",render:function(e){return r.a.createElement("span",{style:{color:"".concat(["green","gray"][e])}},H[e])}},{title:"更新时间",key:"modifyTime",dataIndex:"modifyTime",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"操作",width:"180px",key:"operation",dataIndex:"operation",render:function(e,_){return r.a.createElement("div",null,Y(_))}}];Object(a.useEffect)((function(){Object(A.h)().then((function(e){j(e.data.data)}))}),[]);var Y=function(e){return(1===e.releaseStatus?Z():ee()).map((function(_){return function(e,_){return r.a.createElement(c.a,{key:e.key,placement:"top",title:e.title},r.a.createElement(s.a,{style:{marginLeft:"10px"},shape:"circle",size:"small",icon:e.icon,key:e.key,onClick:function(){return _e(e,_)}}))}(_,e)}))},Z=function(){return[{title:"下线",icon:"cloud-download",key:"offline"},{title:"更新",icon:"redo",key:"upgrade"}]},ee=function(){return[{title:"发布",icon:"cloud-upload",key:"release"},{title:"编辑",icon:"edit",key:"edit"},{title:"删除",icon:"delete",key:"delete"}]},_e=function(e,_){switch(e.key){case"view":break;case"offline":z({title:"下线模组?",content:"确认下线后，模组将同步从开放平台下线，确定要这样做吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){re(_.moduleId,0)},onCancel:function(){}});break;case"release":console.log(_.completeStatus);var t=0===_.completeStatus?"当前模组信息不完整，请完善后提交发布":"确认发布后，模组信息将会同步到开放平台,确定要这样做吗？";z({title:"发布模组",content:t,okText:"确定",cancelText:"取消",onOk:function(){1===_.completeStatus&&re(_.moduleId,1)},onCancel:function(){}});break;case"edit":Q(!1),te(_.moduleId);break;case"delete":z({title:"删除模组",content:"删除后，模组信息将同步删除，无法撤销，确定要这样做吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){ae(_.moduleId)},onCancel:function(){}});break;case"upgrade":te(_.moduleId),Q(!0)}},te=function(e){Object(A.f)(e).then((function(e){e.data.data?(J(e.data.data),v(!0)):u.a.warning("返回数据不存在")}))},ae=function(e){Object(A.a)(e).then((function(e){0===e.data.code&&(u.a.success("删除成功"),ne())}))},re=function(e,_){Object(A.c)(e,_).then((function(e){0===e.data.code&&(u.a.success(1===_?"发布成功":"下线成功"),ne())}))},ne=function(){I(!0);var e=B(),_=e.moduleName,t=e.moduleType,a=function(e){for(var _=1;_<arguments.length;_++){var t=null!=arguments[_]?arguments[_]:{};_%2?q(Object(t),!0).forEach((function(_){F(e,_,t[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(t,_))}))}return e}({moduleName:_?_.trim():"",moduleType:t||""},n);Object(A.b)(a).then((function(e){0===e.data.code&&(T(e.data.data.list),P(e.data.data.pager.totalRows))})).finally((function(){I(!1)}))};Object(a.useEffect)((function(){ne()}),[n.pageRows,n.pageIndex]);var le=function(){1===n.pageIndex?ne():d({pageIndex:1,pageRows:10})};return r.a.createElement("div",{className:"module-firmware-page"},r.a.createElement(D.a,{title:"模组&固件管理"},r.a.createElement(i.a,{layout:"inline"},r.a.createElement(i.a.Item,{label:"关键字"},R("moduleName",{})(r.a.createElement(o.a,{placeholder:"请输入生产厂商或模组型号",style:{width:260},maxLength:20}))),r.a.createElement(i.a.Item,{label:"通信方式"},R("moduleType",{initialValue:void 0})(r.a.createElement(E.a,{style:{width:200,marginBottom:0},placeholder:"请选择通信方式",showSearch:!0,optionFilterProp:"children"},function(e){if(e)return e.map((function(e,_){return r.a.createElement(N,{value:e.moduleType,key:e.moduleType},e.moduleTypeName)}))}(K.moduleTypeList)))),r.a.createElement(i.a.Item,null,r.a.createElement(s.a,{type:"primary",onClick:function(){return le()}},"查询")),r.a.createElement(i.a.Item,null,r.a.createElement(s.a,{type:"default",onClick:function(){return _.resetFields(),void le()}},"重置")),r.a.createElement(i.a.Item,null,r.a.createElement(s.a,{type:"primary",onClick:function(){return h(!0)}},"添加模组")))),r.a.createElement(l.a,{className:"ModuleManagerListTable",style:{marginTop:10}},r.a.createElement(f.a,{rowKey:"moduleId",bordered:!0,columns:X,dataSource:y,loading:g,pagination:{defaultCurrent:1,current:n.pageIndex,onChange:function(e,_){d((function(t){var a=p()(t);return Object.assign(a,{pageIndex:_===n.pageRows?e:1,pageRows:_})}))},pageSize:n.pageRows,total:O,showQuickJumper:!0,pageSizeOptions:["10"],showTotal:function(){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,O)," 条")}}})),L&&r.a.createElement(k,{visible:L,moduleCommonObj:K,opeType:"add",getTableData:ne,handleCancel:function(){return h(!1)}}),w&&r.a.createElement(k,{visible:w,moduleCommonObj:K,opeType:"edit",editData:x,getTableData:ne,handleCancel:function(){return v(!1)},isUpgrade:G}))}));_.default=function(e){var _=e.match;return r.a.createElement(n.d,null,r.a.createElement(n.b,{path:"".concat(_.url,"/list"),component:J}),r.a.createElement(n.a,{from:"".concat(_.url,"/"),to:"".concat(_.url,"/list")}))}}}]);