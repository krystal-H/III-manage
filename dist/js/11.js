(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1448:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return o}));var n=a(3),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.c.request({url:"/manage-open/manage/commodity/getCommodityListByPage",method:"post",data:e,headers:{}})},l=function(e){return n.c.request({url:"/manage-open/manage/commodity/publicCommodity",method:"post",data:e,headers:{}})},i=function(e){return n.c.request({url:"/manage-open/manage/commodity/onOrOffCommodity",method:"post",data:e,headers:{}})},c=function(e){return n.c.request({url:"/manage-open/manage/commodity/getPublicProductByProductId/"+e,method:"get",headers:{}})},m=function(e){return n.c.request({url:"/manage-open/manage/commodity/getCommodityByCommodityId/"+e,method:"get",headers:{}})},o=function(e){return n.c.request({url:"/manage-open/manage/commodity/updateCommodityStock",data:e,method:"post",headers:{}})}},1451:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return m}));var n=a(3),r=function(e){return n.c.request({url:"/manage-open/manage/commodity/getModuleListByPage",data:e,method:"post",headers:{}})},l=function(e){return n.c.request({url:"/manage-open/module/getModulelistByHetModuleTypeName",data:e,method:"post",headers:{}})},i=function(e){return n.c.request({url:"/manage-open/manage/classify/getCommodityClassifyByGrade",data:e,method:"post",headers:{}})},c=function(e){return n.c.request({url:"/manage-open/manage/classify/getClassifyList",data:e,method:"post",headers:{}})},m=function(e){return n.c.request({url:"/manage-open/manage/commodity/publicCommodity",data:e,method:"post",headers:{}})}},1454:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return i}));var n=a(3),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.c.request({url:"/manage-open/manage/classify/getClassifyList",data:e,method:"post",headers:{}})},l=function(e){return n.c.request({url:"/manage-open/manage/classify/removeClassify/"+e,method:"get",headers:{}})},i=function(e){return n.c.request({url:"/manage-open/manage/classify/addClassify",method:"post",data:e,headers:{}})}},1466:function(e,t,a){"use strict";a(22),a(65),a(18),a(35),a(36),a(26),a(27),a(28),a(113),a(122),a(133);var n=a(0),r=a.n(n),l=a(1431),i=a.n(l),c=a(33);a(1467);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}c.j;function s(e,t){var a=e.divId,l=m(Object(n.useState)(""),2),o=(l[0],l[1],null);return Object(n.useEffect)((function(){return(o=new i.a("#".concat(a))).config.uploadImgMaxSize=2097152,o.config.uploadImgServer=c.j,o.config.uploadImgMaxLength=1,o.config.customUploadImg=function(e,t){if(console.log(e),e[0]){var a=new window.FormData;a.append("file",e[0],"cover.jpg"),a.append("appId",31438),a.append("domainType",4),fetch(c.j,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){0==e.code&&t(e.data.url)}))}else message.info("请选择要上传的图片")},o.config.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],o.config.lang={"设置标题":"Title","字号":"Size","文字颜色":"Color","设置列表":"List","有序列表":"","无序列表":"","对齐方式":"Align","靠左":"","居中":"","靠右":"","正文":"p","链接文字":"link text","链接":"link","上传图片":"Upload","网络图片":"Web","图片link":"image url","插入视频":"Video","格式如":"format","上传":"Upload","创建":"init"},o.create(),function(){o.destroy()}}),[]),Object(n.useImperativeHandle)(t,(function(){return{getText:function(){return o.txt.html()},renderText:function(e){return o.txt.html(e)}}}),[]),r.a.createElement("div",{className:"wang-edit-img"},r.a.createElement("div",{id:a}))}t.a=s=Object(n.memo)(Object(n.forwardRef)(s))},1467:function(e,t,a){},1468:function(e,t,a){},1544:function(e,t,a){"use strict";a.r(t);a(18),a(35),a(36),a(122),a(133),a(69);var n=a(19),r=(a(851),a(264)),l=(a(103),a(48)),i=(a(507),a(344)),c=(a(223),a(123)),m=(a(157),a(37)),o=(a(132),a(23)),s=(a(78),a(494),a(32),a(158),a(113),a(39),a(58),a(41),a(492),a(201),a(159),a(22),a(309),a(1427),a(65),a(26),a(27),a(28),a(1430),a(874),a(112),a(0)),d=a.n(s),u=a(1466),f=a(1448),y=a(1451),p=(a(1454),a(514)),h=a(188),g=a.n(h);a(1468);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var b=o.a.Item,N=m.a.Option;function w(e){var t=e.id,a=v(Object(s.useState)({}),2),n=a[0],r=a[1];Object(s.useEffect)((function(){Object(f.b)(t).then((function(e){0==e.data.code&&r(e.data.data)}))}),[]);var l;function i(e){var t={__html:e};return d.a.createElement("div",{className:"noreset",dangerouslySetInnerHTML:t})}return d.a.createElement("div",{className:"productInfo-content-page"},d.a.createElement("div",{className:"item-wrap"},d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"模组型号："),d.a.createElement("div",{className:"item-text"},n.hetModuleTypeName))),d.a.createElement("div",{className:"item-wrap"},d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"模组IC型号："),d.a.createElement("div",{className:"item-text"},n.originalModuleTypeName)),d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"模组尺寸："),d.a.createElement("div",{className:"item-text"},"".concat(n.sizeThickness," * ").concat(n.sizeWidth," * ").concat(n.sizeHeight,"mm"))),d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"生产厂商："),d.a.createElement("div",{className:"item-text"},n.brandName))),d.a.createElement("div",{className:"item-wrap"},d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"模组分类："),d.a.createElement("div",{className:"item-text"},n.commodityClassifyName)),d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"模组价格："),d.a.createElement("div",{className:"item-text"},n.commodityPrice/100)),d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"实时价格："),d.a.createElement("div",{className:"item-text"},n.commodityRealPrice/100))),d.a.createElement("div",{className:"item-wrap"},d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"排序值："),d.a.createElement("div",{className:"item-text"},n.commodityOrderValue)),d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"负责人："),d.a.createElement("div",{className:"item-text"},n.directorName))),d.a.createElement("div",{className:"item-wrap"},d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"模组描述：："),d.a.createElement("div",{className:"item-text"},n.commodityDescription))),d.a.createElement("div",{className:"item-wrap"},d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"模组照片："),d.a.createElement("div",{className:"item-text item-img"},(l=n.commodityPicture)?l.split(",").map((function(e,t){return d.a.createElement("img",{src:e,key:t})})):""))),d.a.createElement("div",{className:"item-wrap"},d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"模组规格书："),d.a.createElement("div",{className:"item-text item-wang-text noreset"},i(n.commodityStandard)))),d.a.createElement("div",{className:"item-wrap"},d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"技术文档："),d.a.createElement("div",null,function(e){return e?e.split(",").map((function(e,t){return d.a.createElement(d.a.Fragment,null,d.a.createElement("a",{src:e,onClick:function(){!function(e){var t=document.createElement("a"),a=e.replace("http","https");fetch(a).then((function(e){return e.blob()})).then((function(e){t.href=URL.createObjectURL(e),console.log(t.href),t.download="文件",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(t.href),document.body.removeChild(t)}))}(e)},key:t},e),d.a.createElement("br",null))})):""}(n.technicalDoc)))),d.a.createElement("div",{className:"item-wrap"},d.a.createElement("div",{className:"item"},d.a.createElement("div",{className:"item-label"},"售后政策："),d.a.createElement("div",{className:"item-text item-wang-text noreset"},i(n.salesPolicy)))))}t.default=o.a.create()((function(e){var t=e.form,a=e.history,h=e.editData,E=void 0===h?{}:h,x=Object(s.useMemo)((function(){var e={},t=a.location.search;return t&&t.slice(1).split("&&").forEach((function(t){var a=t.split("=");e[a[0]]=a[1]})),e}),[]);if(x.id&&"false"===x.isEdit)return d.a.createElement(w,{id:x.id});var O=t.getFieldDecorator,j=t.validateFields,S=t.getFieldValue,C=t.setFieldsValue,T=t.getFieldsValue,I=v(Object(s.useState)({}),2),P=I[0],k=I[1],q=Object(s.useRef)(null),M=Object(s.useRef)(null),z=(Object(s.useRef)(null),Object(s.useRef)(null)),L=(Object(s.useRef)(null),Object(s.useRef)(null)),F=v(Object(s.useState)([]),2),R=F[0],V=F[1],A=v(Object(s.useState)(!1),2),D=A[0],$=A[1],U=v(Object(s.useState)([]),2),H=U[0],B=U[1];Object(s.useEffect)((function(){Object(y.c)({classifyLevel:1}).then((function(e){var t=e.data.data.filter((function(e){return"通信模组"==e.classifyName}));Object(y.b)({parentId:t&&t.length>0?t[0].id:""}).then((function(e){B(e.data.data.list||[])}))})),x.id&&W()}),[]);var W=function(){Object(f.b)(x.id).then((function(e){if(0==e.data.code){k(e.data.data);var t={},a=["salesPolicy","commodityStandard"],n=["technicalDoc","commodityPicture"];Object.keys(T()).map((function(r){a.indexOf(r)>-1||(n.indexOf(r)>-1?e.data.data[r]&&(t[r]=e.data.data[r].split(",").map((function(e,t){return{url:e,uid:t+1,name:e}}))):t[r]=e.data.data[r])})),t.commodityPrice=t.commodityPrice/100,t.commodityRealPrice=t.commodityRealPrice/100,t.hetModuleTypeName={key:e.data.data.moduleId,label:t.hetModuleTypeName},C(t),t.commodityPicture&&q.current.setFileList(t.commodityPicture),t.technicalDoc&&M.current.setFileList(t.technicalDoc),z.current.renderText(e.data.data.commodityStandard||""),L.current.renderText(e.data.data.salesPolicy||"")}}))},J=function(e){(e=(e=(e=(e=e.replace(/[^\d.]/g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=e&&(e=parseFloat(e));var t=e.toString();return t.indexOf(".")>-1&&"0.00"===t&&(e=parseFloat(e).toFixed(1)),e},_=function(e,t,a){t<0?a("仅允许输入正整数"):a()},G=function(e){$(!0),V([]),e&&Object(y.e)({hetModuleTypeName:e}).then((function(e){console.log("dededede",e),$(!1),V(e.data.data||[])})).catch((function(){$(!1),V([])}))};return G=g()(G,800),d.a.createElement("div",null,d.a.createElement("div",{className:"mall-detail-page"},d.a.createElement(o.a,{autoComplete:"off"},d.a.createElement(b,{label:"模组型号",className:"need-warn-wrap"},O("hetModuleTypeName")(d.a.createElement(m.a,{style:{width:200,marginBottom:0},showSearch:!0,labelInValue:!0,optionFilterProp:"children",placeholder:"请选择模组型号",notFoundContent:D?d.a.createElement(i.a,{size:"small"}):null,onSearch:function(e){return G(e)},onChange:function(e){var t=R.filter((function(t){return t.moduleId==e.key})),a=t&&t.length>0?t[0]:{};C({originalModuleTypeName:a.originalModuleTypeName,sizeThickness:a.sizeThickness,sizeWidth:a.sizeWidth,sizeHeight:a.sizeHeight,brandName:a.brandName,applyScope:a.applyScope})}},R.length>0&&R.map((function(e){return d.a.createElement(N,{key:e.moduleId},"".concat(e.hetModuleTypeName))}))))),d.a.createElement("div",{className:"form-wrap"},d.a.createElement(b,{label:"模组IC型号"},O("originalModuleTypeName",{rules:[{required:!0,message:"请输入"}]})(d.a.createElement(l.a,{style:{width:"200px"},maxLength:100}))),d.a.createElement(b,{className:"moduleSize need-warn-wrap",label:"模组尺寸"},d.a.createElement(b,{className:"size-style"},O("sizeThickness",{rules:[{required:!0,message:"请输入长"},{validator:_}]})(d.a.createElement(r.a,{maxLength:3,max:999,style:{width:"70px"}}))),d.a.createElement("span",null," - "),d.a.createElement(b,{className:"size-style"},O("sizeWidth",{initialValue:E.sizeWidth,rules:[{required:!0,message:"请输入宽"},{validator:_}]})(d.a.createElement(r.a,{maxLength:3,max:999,style:{width:"70px"}}))),d.a.createElement("span",null," - "),d.a.createElement(b,{className:"size-style"},O("sizeHeight",{initialValue:E.sizeHeight,rules:[{required:!0,message:"请输入高"},{validator:_}]})(d.a.createElement(r.a,{maxLength:3,max:999,style:{width:"70px"}}))),d.a.createElement("br",null),d.a.createElement("span",null,"（长*宽*高 mm）")),d.a.createElement(b,{label:"生产厂商"},O("brandName",{rules:[{required:!0,message:"请输入"}]})(d.a.createElement(l.a,{style:{width:"200px"},maxLength:100})))),d.a.createElement("div",null,d.a.createElement(b,{label:"适用范围"},O("applyScope",{rules:[{required:!0,message:"请输入"},{type:"string",max:50,message:"上限50个字符长度"}]})(d.a.createElement(l.a,{style:{width:"530px"}})))),d.a.createElement("div",{className:"form-wrap"},d.a.createElement(b,{label:"模组分类"},O("commodityClassifyId",{rules:[{required:!0,message:"请输入"}]})(d.a.createElement(m.a,{style:{width:"200px"}},H.map((function(e,t){return d.a.createElement(m.a.Option,{key:e.id,value:e.id,label:e.classifyName},e.classifyName)}))))),d.a.createElement(b,{label:"模组价格"},O("commodityPrice",{rules:[{required:!0,message:"请输入"}],getValueFromEvent:function(e){var t=e.target.value;return J(t)}})(d.a.createElement(l.a,{style:{width:"200px"}}))),d.a.createElement(b,{label:"实时价格",style:{marginLeft:37}},O("commodityRealPrice",{rules:[{required:!0,message:"请输入"}],getValueFromEvent:function(e){var t=e.target.value;return J(t)}})(d.a.createElement(l.a,{style:{width:"200px"}})))),d.a.createElement("div",{className:"form-wrap"},d.a.createElement(b,{label:"排序值"},O("commodityOrderValue",{rules:[{required:!0,message:"请输入"}],getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")}})(d.a.createElement(l.a,{style:{width:"200px"}}))),d.a.createElement(b,{label:"负责人"},O("directorName",{rules:[{required:!0,message:"请输入"}]})(d.a.createElement(l.a,{style:{width:"200px"},maxLength:20})))),d.a.createElement(b,{label:"模组描述"},O("commodityDescription",{})(d.a.createElement(l.a,{style:{width:"600px"}}))),d.a.createElement(b,{label:"模组照片"},O("commodityPicture",{rules:[{required:!0,message:"请上传模组图片"}]})(d.a.createElement(p.a,{ref:q,listType:"picture-card",isNotImg:!1,maxCount:6,maxSize:10}))),d.a.createElement(b,{label:"模组规格书",className:"need-warn-wrap"},d.a.createElement(u.a,{divId:"wangedit-product-detail",ref:z})),d.a.createElement(b,{label:"技术文档"},O("technicalDoc",{rules:[{required:!0,message:"请上传文件"}]})(d.a.createElement(p.a,{ref:M,maxCount:3,format:".pdf",isNotImg:!0,maxSize:20}))),d.a.createElement(b,{label:"售后政策",className:"need-warn-wrap"},d.a.createElement(u.a,{divId:"wangedit-product-rule",ref:L}))),d.a.createElement("div",{className:"mall-info-footer"},d.a.createElement(n.a,{type:"primary",onClick:function(){S("hetModuleTypeName")?j().then((function(e){if(["technicalDoc","commodityPicture"].forEach((function(t){e[t]&&e[t].length?(e[t]=e[t].reduce((function(e,t){return e+(t.url+",")}),""),e[t]=e[t].slice(0,-1)):e[t]=""})),e.commodityStandard=z.current.getText(),e.salesPolicy=L.current.getText(),e.salesPolicy&&e.commodityStandard){e.hetModuleTypeName&&e.hetModuleTypeName.key&&(e.moduleId=Number(e.hetModuleTypeName.key),e.hetModuleTypeName=e.hetModuleTypeName.label),e.commodityOrderValue&&(e.commodityOrderValue=Number(e.commodityOrderValue)),e.commodityPrice=100*e.commodityPrice,e.commodityRealPrice=100*e.commodityRealPrice,e.status=3,Object.keys(P).length&&(e.status=P.status,e.id=P.id);var t=H.find((function(t){return t.id==e.commodityClassifyId}));if(!t)return C({commodityClassifyId:""}),void c.a.info("模组分类未选择");e.commodityClassifyName=t.classifyName,console.log("submitdata---",e),Object(y.d)(e).then((function(e){0==e.data.code&&(c.a.success("保存成功"),a.push("/mall/moduleOnline"))}))}else c.a.info("模组规格书或售后政策未输入内容")})):c.a.warn("请选择模组型号")}},"保存"),d.a.createElement(n.a,{onClick:function(){a.push("/mall/moduleOnline")}},"取消"))))}))}}]);