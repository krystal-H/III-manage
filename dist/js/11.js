(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1351:function(e,_,t){"use strict";t(46),t(47),t(22),t(20),t(36),t(37),t(29),t(30),t(31);var a=t(0),r=t.n(a);t(1352);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,_){for(var t=0;t<_.length;t++){var a=_[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,_){return(i=Object.setPrototypeOf||function(e,_){return e.__proto__=_,e})(e,_)}function o(e,_){return!_||"object"!==n(_)&&"function"!=typeof _?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):_}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(_&&_.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),_&&i(e,_)}(c,r.a.Component);var _,t,a,n=function(e){function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var t,a=u(e);if(_()){var r=u(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return o(this,t)}}(c);function c(){return function(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}(this,c),n.apply(this,arguments)}return _=c,(t=[{key:"render",value:function(){var e=this.props,_=e.children,t=e.title;return r.a.createElement("div",{className:"title-tab"},r.a.createElement("div",{className:"title-tab-option"},r.a.createElement("span",{className:"title-tab-title"},t)),r.a.createElement("div",{className:"title-tab-option"},_))}}])&&l(_.prototype,t),a&&l(_,a),c}();c.Option=function(e){var _=e.children,t=e.label,a=e.align,n=void 0===a?"left":a;return r.a.createElement("div",{className:"".concat("left"===n?"title-tab-item":"title-tab-item-right")},r.a.createElement("span",{className:t?"title-table-label":"title-table-label-non"},t?t+":":""),_)},_.a=c},1352:function(e,_,t){},1363:function(e,_,t){"use strict";t.d(_,"b",function(){return n}),t.d(_,"e",function(){return l}),t.d(_,"i",function(){return i}),t.d(_,"g",function(){return o}),t.d(_,"d",function(){return u}),t.d(_,"h",function(){return c}),t.d(_,"j",function(){return s}),t.d(_,"k",function(){return d}),t.d(_,"c",function(){return E}),t.d(_,"a",function(){return m}),t.d(_,"f",function(){return p});var a=t(4),r="/manage-open",n=function(e){return a.b.request({url:r+"/module/search",method:"post",data:e,headers:{"Content-Type":"application/json"}})},l=function(e){return a.b.request({url:r+"/module/type/getAllModuleBrandList",method:"get"})},i=function(){return a.b.request({url:r+"/module/type/getList",method:"post",data:[],headers:{"Content-Type":"application/json"}})},o=function(){return a.b.request({url:r+"/module/type/getMenu",method:"get"})},u=function(e){return a.b.request({url:r+"/module/type/bindSceneType/list",params:{moduleId:e},method:"get"})},c=function(){return a.b.request({url:r+"/module/type/getMenu",method:"get"})},s=function(e){return a.b.request({url:r+"/module/create",method:"post",data:e,headers:{"Content-Type":"application/json"}})},d=function(e){return a.b.request({url:r+"/module/update",method:"post",data:e,headers:{"Content-Type":"application/json"}})},E=function(e,_){return a.b.request({url:r+"/module/type/release",params:{moduleId:e,releaseStatus:_},method:"get"})},m=function(e){return a.b.request({url:"".concat(r,"/module/delete/").concat(e),method:"get"})},p=function(e){return a.b.request({url:"".concat(r,"/module/detail/").concat(e)})}},1414:function(e,_,t){},1415:function(module,__webpack_exports__,__webpack_require__){"use strict";var antd_es_modal_style_css__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(242),antd_es_modal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(120),antd_es_upload_style_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1318),antd_es_upload__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1317),antd_es_radio_style_css__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(434),antd_es_radio__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(167),antd_es_button_style_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(73),antd_es_button__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(21),antd_es_select_style_css__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(186),antd_es_select__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(74),antd_es_icon_style_css__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(165),antd_es_icon__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(10),antd_es_form_style_css__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(153),antd_es_form__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(38),antd_es_input_style_css__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(133),antd_es_input__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(65),antd_es_message_style_css__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(278),antd_es_message__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(154),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1321),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(32),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(64),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(33),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(433),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(96),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(166),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(778),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(119),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(22),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(283),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_28__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(244),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(37),core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(29),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(30),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(31),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_33__),core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(20),core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_34__),core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(36),core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_35__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(34),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_36__),core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(41),core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_37__),core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(42),core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_38___default=__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_38__),core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(187),core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_39__),react__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_40__),_util_utils__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(28),_stepThird_less__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(1416),_stepThird_less__WEBPACK_IMPORTED_MODULE_42___default=__webpack_require__.n(_stepThird_less__WEBPACK_IMPORTED_MODULE_42__);function _extends(){return(_extends=Object.assign||function(e){for(var _=1;_<arguments.length;_++){var t=arguments[_];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function ownKeys(e,_){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);_&&(a=a.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),t.push.apply(t,a)}return t}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var t=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(t,!0).forEach(function(_){_defineProperty(e,_,t[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(t).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(t,_))})}return e}function _defineProperty(e,_,t){return _ in e?Object.defineProperty(e,_,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[_]=t,e}function _slicedToArray(e,_){return _arrayWithHoles(e)||_iterableToArrayLimit(e,_)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,_){var t=[],a=!0,r=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(t.push(l.value),!_||t.length!==_);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return t}function _arrayWithHoles(e){if(Array.isArray(e))return e}var picId=0,uniquekey=0,uploadConfigs={action:_util_utils__WEBPACK_IMPORTED_MODULE_41__.j,className:"upload-list-inline",data:function(e){return{appId:31438,domainType:4}}},formItemLayout={labelCol:{span:6},wrapperCol:{span:16}},StyleItem={width:"60%"};function StepThird(_ref,ref){var form=_ref.form,commitAll=_ref.commitAll,opeType=_ref.opeType,_ref$editData=_ref.editData,editData=void 0===_ref$editData?{}:_ref$editData,_useState=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)(),_useState2=_slicedToArray(_useState,2),schemeType=_useState2[0],setSchemeType=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)([]),_useState4=_slicedToArray(_useState3,2),valueType=_useState4[0],setValueType=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)(!1),_useState6=_slicedToArray(_useState5,2),previewVisible=_useState6[0],setPreviewVisible=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)(""),_useState8=_slicedToArray(_useState7,2),showSrc=_useState8[0],setshowSrc=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)([]),_useState10=_slicedToArray(_useState9,2),pinDiagram=_useState10[0],setPindiagram=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)([]),_useState12=_slicedToArray(_useState11,2),sourceCode=_useState12[0],setSourcecode=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)([]),_useState14=_slicedToArray(_useState13,2),libraryFile=_useState14[0],setLibraryfile=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)([]),_useState16=_slicedToArray(_useState15,2),burnFile=_useState16[0],setBurnfile=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)([]),_useState18=_slicedToArray(_useState17,2),modulePicture=_useState18[0],setModulepicture=_useState18[1],_useState19=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)([]),_useState20=_slicedToArray(_useState19,2),referenceCircuitDiagram=_useState20[0],setReferencecircuitdiagram=_useState20[1],_useState21=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)([]),_useState22=_slicedToArray(_useState21,2),readmePdf=_useState22[0],setReadmepdf=_useState22[1],getFieldDecorator=form.getFieldDecorator,getFieldValue=form.getFieldValue,_useState23=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)("edit"===opeType?editData.firmwareDefList[0]:{}),_useState24=_slicedToArray(_useState23,2),editInfo=_useState24[0],setEditInfo=_useState24[1],_useState25=Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)(!1),_useState26=_slicedToArray(_useState25,2),radiosDisabled=_useState26[0],setRadiosDisabled=_useState26[1];Object(react__WEBPACK_IMPORTED_MODULE_40__.useEffect)(function(){if("edit"===opeType)if(setSchemeType(editInfo.schemeType),setRadiosDisabled(!0),editData.modulePicture&&setModulepicture([{url:editData.modulePicture,name:editData.modulePictureName||"模组图片",uid:2}]),1===editInfo.schemeType){editInfo.pinDiagram&&setPindiagram([{url:editInfo.pinDiagram,name:"可配置固件引脚示意图",uid:1}]);var e=[];JSON.parse(editData.firmwareDefList[0].customConfigJson).forEach(function(_){e.push(_.dataType.type)}),setValueType(e)}else 2!==editInfo.schemeType&&3!==editInfo.schemeType||(editInfo.burnFile&&setBurnfile([{url:editInfo.burnFile,name:editInfo.burnFileName||"烧录文件",uid:1}]),editInfo.referenceCircuitDiagram&&setReferencecircuitdiagram([{url:editInfo.referenceCircuitDiagram,name:editInfo.referenceCircuitDiagramName||"参考电路图",uid:3}]),editInfo.readmePdf&&setReadmepdf([{url:editData.readmePdf,name:editData.readmePdfName||"说明文档",uid:4}]),editInfo.sourceCode&&setSourcecode([{url:editInfo.sourceCode,name:editInfo.sourceCodeName||"源码",uid:4}]),editInfo.libraryFile&&setLibraryfile([{url:editInfo.libraryFile,name:editInfo.libraryFileName||"库文件",uid:5}]))},[editData]),Object(react__WEBPACK_IMPORTED_MODULE_40__.useEffect)(function(){console.log(burnFile,"burnFileburnFileburnFile")},[burnFile]);var validData=function(){form.validateFields(function(e,_){if(e)console.log("err",e);else{_.funcDefList&&_.funcDefList.length>0&&(_.funcDefList=_.funcDefList.map(function(e){return"enum"===e.dataType.type&&(e.dataType.specs.def=e.dataType.specs.def.filter(function(e){return e})),e}));var t=[],a={price:_.price,schemeType:_.schemeType,modulePicture:modulePicture&&modulePicture.length?modulePicture[0].url:"",modulePictureName:modulePicture&&modulePicture.length?modulePicture[0].name:""},r=_objectSpread(_objectSpread({},a),{},{customConfigJson:JSON.stringify(_.funcDefList)||JSON.stringify([]),pinDiagram:pinDiagram&&pinDiagram.length?pinDiagram[0].url:""}),n=_objectSpread(_objectSpread({},a),{},{burnFile:burnFile&&burnFile.length?burnFile[0].url:"",burnFileVersion:_.burnFileVersion,burnFileName:_.burnFileName,referenceCircuitDiagram:referenceCircuitDiagram&&referenceCircuitDiagram.length?referenceCircuitDiagram[0].url:"",referenceCircuitDiagramName:referenceCircuitDiagram&&referenceCircuitDiagram.length?referenceCircuitDiagram[0].name:"",readmePdf:readmePdf&&readmePdf.length?readmePdf[0].url:"",readmePdfName:readmePdf&&readmePdf.length?readmePdf[0].name:""}),l=_objectSpread(_objectSpread(_objectSpread({},a),n),{},{sourceCode:sourceCode&&sourceCode.length?sourceCode[0].url:"",sourceCodeVersion:_.sourceCodeVersion,sourceCodeName:sourceCode&&sourceCode.length?sourceCode[0].name:"",libraryFile:libraryFile&&libraryFile.length?libraryFile[0].url:"",libraryFileVersion:_.libraryFileVersion,libraryFileName:libraryFile&&libraryFile.length?libraryFile[0].name:""});switch(schemeType){case 1:t.push(r);break;case 2:t.push(n);break;case 3:t.push(l)}commitAll(t)}})};Object(react__WEBPACK_IMPORTED_MODULE_40__.useImperativeHandle)(ref,function(){return{onFinish:validData}},[pinDiagram,sourceCode,libraryFile,burnFile,modulePicture,referenceCircuitDiagram,readmePdf,form]);var modulePictureBeforeUpload=function(e){var _="image/png"===e.type;_||antd_es_message__WEBPACK_IMPORTED_MODULE_17__.a.error("只能上传PNG格式");var t=e.name.length<=50;return t||antd_es_message__WEBPACK_IMPORTED_MODULE_17__.a.error("文件名称长度不超过50个字符"),_&&t},handleChange=function handleChange(info,type){var upperType=type.trim().toLowerCase().replace(type[0],type[0].toUpperCase()),file=info.file,fileList=info.fileList;if("done"===file.status){var arr=[],uploadObj={status:"done",name:file.name,url:file.response.data.url};arr.push(uploadObj),setTimeout(function(){eval("set".concat(upperType))(arr)},0),form.setFieldsValue({type:file.response.data.url})}else"error"===file.status?(antd_es_message__WEBPACK_IMPORTED_MODULE_17__.a.error("".concat(info.file.name," 上传失败")),eval("set".concat(upperType))([])):eval("set".concat(upperType))([])},judgeFormat=function(e,_){switch(_){case"源码":return"application/zip"===e.type||"application/x-zip-compressed"===e.type;case"烧录文件":return"application/macbinary"===e.type||"application/octet-stream"===e.type;case"库文件":return".a"===e.name.substr(e.name.lastIndexOf(".")).toLowerCase();case"PDF文件":return"application/pdf"===e.type}},uploadDocumentLimit=function(e,_,t){var a=judgeFormat(e,_);a||antd_es_message__WEBPACK_IMPORTED_MODULE_17__.a.error("只能上传".concat(_,"!"));var r=e.size/1024/1024<=t;r||antd_es_message__WEBPACK_IMPORTED_MODULE_17__.a.error("文件必须小于".concat(t,"M"));var n=e.name.length<=50;return n||antd_es_message__WEBPACK_IMPORTED_MODULE_17__.a.error("文件名称长度不超过50个字符"),a&&r&&n},handlePreview=function(e,_){setPreviewVisible(e),setshowSrc(_[0].url)},chooseValueType=function(e,_){var t=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_18___default()(valueType);t[_]=e,setValueType(t)},addEnum=function(e){var _=form.getFieldValue("innerList".concat(e));uniquekey++;var t=_.concat({uniquekey:uniquekey});form.setFieldsValue(_defineProperty({},"innerList".concat(e),t))},deleteEnum=function(e,_){var t,a=form.getFieldValue("innerList".concat(e)),r=form.getFieldValue("funcDefList");form.setFieldsValue((_defineProperty(t={},"innerList".concat(e),a.filter(function(e,t){return e.uniquekey!==_})),_defineProperty(t,"funcDefList",r[e].dataType.specs.def.filter(function(e,t){return e.uniquekey!==_})),t))},createInnerHtml=function(e,_,t){var a=react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{className:"inline-form-item",key:_},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,_extends({label:"默认值"},formItemLayout),getFieldDecorator("".concat(e,".defaultValue[").concat(_,"].k"),{initialValue:t.dataType.specs&&t.dataType.specs.defaultValue[0].k?t.dataType.specs.defaultValue[0].k:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入key值"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:95,marginRight:8}}))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{className:"right-item"},"-    ",getFieldDecorator("".concat(e,".defaultValue[").concat(_,"].v"),{initialValue:t.dataType.specs&&t.dataType.specs.defaultValue[0].v?t.dataType.specs.defaultValue[0].v:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入value值"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:95,marginRight:8}})))),r=t.dataType.specs.def.map(function(e){return{uniquekey:uniquekey++,k:e.k,v:e.v}});return getFieldDecorator("innerList".concat(_),{initialValue:"edit"===opeType&&1===schemeType?r:[{uniquekey:0}]}),[a,getFieldValue("innerList".concat(_)).map(function(t,a){return react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{className:"inline-form-item",key:a},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,_extends({label:"key-value"},formItemLayout),getFieldDecorator("".concat(e,".def[").concat(t.uniquekey,"].k"),{initialValue:t.k,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入key值"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:95,marginRight:8}}))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"",className:"right-item"},"-    ",getFieldDecorator("".concat(e,".def[").concat(t.uniquekey,"].v"),{initialValue:t.v,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入value值"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:95,marginRight:8}})),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_11__.a,{key:a,className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return deleteEnum(_,t.uniquekey)}})))})]},addConfig=function(){var e=form.getFieldValue("configList").concat({});form.setFieldsValue({configList:e})},removeConfig=function(e){var _=form.getFieldValue("configList"),t=form.getFieldValue("funcDefList");form.setFieldsValue({configList:_.filter(function(_,t){return t!==e}),funcDefList:t.filter(function(_,t){return t!==e})})},list=[];1===schemeType&&(getFieldDecorator("configList",{initialValue:"edit"===opeType&&1===schemeType?JSON.parse(editData.firmwareDefList[0].customConfigJson):[{}]}),list=getFieldValue("configList"));var firmwareFormHtml=list&&list.map(function(e,_){return react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{className:"free-scheme-block",key:_},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,_extends({label:"可配置模块"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].funcModule"),{initialValue:e.funcModule,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入可配置模块"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{placeholder:"请输入可配置模块",style:StyleItem}))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,_extends({label:"可配置功能名称"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].funcName"),{initialValue:e.funcName,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入可配置功能名称"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{placeholder:"请输入可配置功能名称",style:StyleItem}))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,_extends({label:"可配置功能标识"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].identifier"),{initialValue:e.identifier,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入可配置功能标识"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{placeholder:"请输入可配置功能标识",style:StyleItem}))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,_extends({label:"可配置功能数值"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].dataType.type"),{initialValue:e.dataType?e.dataType.type:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请选择可配置功能数值"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_select__WEBPACK_IMPORTED_MODULE_9__.a,{placeholder:"请选择可配置功能数值",style:StyleItem,onChange:function(e){return chooseValueType(e,_)}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_select__WEBPACK_IMPORTED_MODULE_9__.a.Option,{value:"int"},"数值"),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_select__WEBPACK_IMPORTED_MODULE_9__.a.Option,{value:"enum"},"枚举")))),"int"===valueType[_]&&react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_40___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{className:"inline-form-item"},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,_extends({label:"数值范围"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].dataType.specs.min"),{initialValue:"edit"===opeType&&e.dataType&&e.dataType.specs?e.dataType.specs.min.toString():"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值范围"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:90,marginRight:8}}))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"",className:"right-item"},"至    ",getFieldDecorator("funcDefList[".concat(_,"].dataType.specs.max"),{initialValue:"edit"===opeType&&e.dataType&&e.dataType.specs?e.dataType.specs.max.toString():"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入数值范围"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:90,marginRight:8}})))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,_extends({label:"默认值"},formItemLayout),getFieldDecorator("funcDefList[".concat(_,"].dataType.specs.defaultValue"),{initialValue:"edit"===opeType&&e.dataType&&e.dataType.specs?e.dataType.specs.defaultValue.toString():"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"请输入默认值"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:"60%",marginRight:8}})))),"enum"===valueType[_]&&react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_40___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,createInnerHtml("funcDefList[".concat(_,"].dataType.specs"),_,e)),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{className:"add-enmu-btn"},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_7__.a,{type:"primary",icon:"plus",onClick:function(){return addEnum(_)}},"新增"))),_>0&&react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{className:"del-btn",key:_,onClick:function(){return removeConfig(_)}},"删除  ",react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_11__.a,{type:"delete"})))}),uploadButton=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"上传文档";return react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_7__.a,null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_11__.a,{type:"upload"}),e)};return react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a,formItemLayout,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"价格"},getFieldDecorator("price",{initialValue:editData.price?editData.price.toString():"",rules:[{required:!0,message:"请输入价格",whitespace:!0}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{placeholder:"请输入价格",style:{width:405}})),"  人民币/个"),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"支持方案"},getFieldDecorator("schemeType",{initialValue:editInfo.schemeType,rules:[{required:!0,message:"请选择支持方案"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_5__.a.Group,{onChange:function(e){return setSchemeType(e.target.value)},disabled:radiosDisabled},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_5__.a,{value:1},"免开发"),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_5__.a,{value:2},"MCU方案"),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_radio__WEBPACK_IMPORTED_MODULE_5__.a,{value:3},"Soc方案")))),1===schemeType&&react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"可配置固件引脚示意图",extra:"请上传尺寸为227*404px，格式为png的引脚示意图",wrapperCol:{span:10}},getFieldDecorator("pinDiagram",{initialValue:editInfo.pinDiagram,rules:[{required:!0,message:"请上传可配置固件引脚示意图"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_3__.a,_extends({},uploadConfigs,{listType:"picture",defaultFileList:pinDiagram||[],onPreview:function(){return handlePreview(!0,pinDiagram)},beforeUpload:modulePictureBeforeUpload,accept:"image/png",onChange:function(e){return handleChange(e,"pinDiagram")}}),pinDiagram&&pinDiagram.length>=1?null:uploadButton("上传图片"))))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"模组图片",extra:"（请上传格式为.png，小于500k图片）",wrapperCol:{span:10}},getFieldDecorator("modulePicture",{initialValue:editData.modulePicture||"",rules:[{required:!0,message:"请上传一张图片"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_3__.a,_extends({},uploadConfigs,{listType:"picture",defaultFileList:modulePicture||[],onPreview:function(){return handlePreview(!0,modulePicture)},beforeUpload:function(){return modulePictureBeforeUpload},accept:"image/png",onChange:function(e){return handleChange(e,"modulePicture")}}),modulePicture&&modulePicture.length>=1?null:uploadButton("上传图片"))))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"可配置固件功能部分"},firmwareFormHtml,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_7__.a,{type:"primary",icon:"plus",onClick:function(){return addConfig()}},"新增")))),(2===schemeType||3===schemeType)&&react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"通信模组文件",colon:!1}),3===schemeType&&react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_40___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"源码",extra:"（请上传格式为.zip源文件压缩包）"},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{style:{display:"inline-block",marginBottom:0,width:215}},getFieldDecorator("sourceCode",{initialValue:editInfo.sourceCode,rules:[{required:!0,message:"请上传源码"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_3__.a,_extends({},uploadConfigs,{beforeUpload:function(e){return uploadDocumentLimit(e,"源码",512)},onChange:function(e){return handleChange(e,"sourceCode")},defaultFileList:sourceCode||[],accept:".zip "}),sourceCode&&sourceCode.length>=1?null:uploadButton())))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("span",null,"      "),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{style:{display:"inline-block",marginBottom:0}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,"版本号：",getFieldDecorator("sourceCodeVersion",{initialValue:editInfo.sourceCodeVersion,rules:[{required:!0,message:"请输入源码版本号"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:162},type:"text",maxLength:10,placeholder:"v1.1.1"}))))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"库文件",extra:"（请上传格式为.a的库文件）"},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{style:{display:"inline-block",marginBottom:0,width:215}},getFieldDecorator("libraryFile",{initialValue:editInfo.libraryFile,rules:[{required:!0,message:"请上传库文件"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_3__.a,_extends({},uploadConfigs,{beforeUpload:function(e){return uploadDocumentLimit(e,"库文件",512)},onChange:function(e){return handleChange(e,"libraryFile")},defaultFileList:libraryFile||[],accept:".a"}),libraryFile&&libraryFile.length>=1?null:uploadButton())))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("span",null,"      "),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{style:{display:"inline-block",marginBottom:0}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,"版本号：",getFieldDecorator("libraryFileVersion",{initialValue:editInfo.libraryFileVersion,rules:[{required:!0,message:"请输入库文件版本号"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:162},type:"text",maxLength:10,placeholder:"v1.1.1"})))))),(2===schemeType||3===schemeType)&&react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_40___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"烧录文件",extra:"（请上传格式为.bin的烧录件）"},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{style:{display:"inline-block",marginBottom:0,width:215}},getFieldDecorator("burnFile",{initialValue:editInfo.burnFile,rules:[{required:!0,message:"请上传烧录文件"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_3__.a,_extends({},uploadConfigs,{beforeUpload:function(e){return uploadDocumentLimit(e,"烧录文件",32)},onChange:function(e){return handleChange(e,"burnFile")},defaultFileList:burnFile||[],accept:".bin"}),burnFile&&burnFile.length>=1?null:uploadButton())))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("span",null,"      "),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{style:{display:"inline-block",marginBottom:0}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,"版本号：",getFieldDecorator("burnFileVersion",{initialValue:editInfo.burnFileVersion,rules:[{required:!0,message:"请输入烧录文件版本号"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{style:{width:162},type:"text",maxLength:10,placeholder:"v1.1.1"}))))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"烧录文件名称"},getFieldDecorator("burnFileName",{initialValue:editInfo.burnFileName?editInfo.burnFileName.split(".")[0]:"",rules:[{required:!0,message:"烧录文件名称",whitespace:!0}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_15__.a,{placeholder:"烧录文件名称",style:{width:460}}))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"模组图片",extra:"（请上传格式为.png，小于500k图片）",wrapperCol:{span:13}},getFieldDecorator("modulePicture",{initialValue:editData.modulePicture||"",rules:[{required:!0,message:"请上传一张图片"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_3__.a,_extends({},uploadConfigs,{listType:"picture",defaultFileList:modulePicture||[],onPreview:function(){return handlePreview(!0,modulePicture)},beforeUpload:function(){return modulePictureBeforeUpload},accept:"image/png",onChange:function(e){return handleChange(e,"modulePicture")}}),modulePicture&&modulePicture.length>=1?null:uploadButton("上传图片"))))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"参考电路",extra:"（请上传格式为.png，小于500k图片）",wrapperCol:{span:13}},getFieldDecorator("referenceCircuitDiagram",{initialValue:editData.referenceCircuitDiagram||"",rules:[{required:!0,message:"请上传一张图片"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_3__.a,_extends({},uploadConfigs,{listType:"picture",defaultFileList:referenceCircuitDiagram||[],onPreview:function(){return handlePreview(!0,referenceCircuitDiagram)},beforeUpload:modulePictureBeforeUpload,accept:"image/png",onChange:function(e){return handleChange(e,"referenceCircuitDiagram")}}),referenceCircuitDiagram&&referenceCircuitDiagram.length>=1?null:uploadButton("上传图片"))))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.Item,{label:"说明文档",extra:"（请上传格式为.pdf，大小2M说明文件)",wrapperCol:{span:13}},getFieldDecorator("readmePdf",{initialValue:editData.readmePdf||"",rules:[{required:!0,message:"请上传文档"}]})(react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_upload__WEBPACK_IMPORTED_MODULE_3__.a,_extends({},uploadConfigs,{defaultFileList:readmePdf||[],beforeUpload:function(e){return uploadDocumentLimit(e,"PDF文件",2)},accept:".pdf",onChange:function(e){return handleChange(e,"readmePdf")}}),readmePdf&&readmePdf.length>=1?null:uploadButton()))))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(antd_es_modal__WEBPACK_IMPORTED_MODULE_1__.a,{visible:previewVisible,footer:null,onCancel:function(){return setPreviewVisible(!1)}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("img",{alt:"example",style:{width:"100%"},src:showSrc})))}__webpack_exports__.a=antd_es_form__WEBPACK_IMPORTED_MODULE_13__.a.create()(Object(react__WEBPACK_IMPORTED_MODULE_40__.forwardRef)(StepThird))},1416:function(e,_,t){},1417:function(e,_,t){},1418:function(e,_,t){},1441:function(e,_,t){"use strict";t.r(_);t(96),t(243);var a=t(0),r=t.n(a),n=t(106),l=(t(92),t(35)),i=(t(153),t(38)),o=(t(133),t(65)),u=(t(278),t(154)),c=(t(210),t(81)),s=(t(73),t(21)),d=(t(242),t(120)),E=(t(186),t(74)),m=t(1321),p=t.n(m),f=(t(64),t(778),t(22),t(71),t(777),t(187),t(37),t(29),t(30),t(31),t(20),t(36),t(34),t(33),t(41),t(32),t(42),t(97)),D=t(1351),O=(t(28),t(780),t(341)),P=(t(279),t(107)),M=(t(1322),t(1329)),y=E.a.Option;var T=i.a.create()(Object(a.forwardRef)(function(e,_){var t=e.form,n=e.setStepCur,l=e.brandList,u=e.editData,c=void 0===u?{}:u,s=function(e,_,t){_<0?t("仅允许输入正整数"):t()},d=function(){t.validateFields(function(e,_){e||(console.log("Received values of form: ",_),n(1,_))})};Object(a.useImperativeHandle)(_,function(){return{onFinish:d}});var m=t.getFieldDecorator;return r.a.createElement(i.a,{labelCol:{span:4},wrapperCol:{span:18}},r.a.createElement(i.a.Item,{label:"模组名称"},m("moduleName",{initialValue:c.moduleName,rules:[{required:!0,message:"请输入方案名称",whitespace:!0}]})(r.a.createElement(o.a,{placeholder:"请输入方案名称"}))),r.a.createElement(i.a.Item,{label:"模组生产厂家"},m("moduleBrandId",{initialValue:c.moduleBrandId,rules:[{required:!0,message:"请选择模组生产厂家"}]})(r.a.createElement(E.a,{placeholder:"请选择模组生产厂家",showSearch:!0,optionFilterProp:"children"},l.map(function(e){return r.a.createElement(y,{value:e.moduleBrandId,key:e.moduleBrandId},e.brandName)})))),r.a.createElement(i.a.Item,{label:"模组型号"},m("hetModuleTypeName",{initialValue:c.hetModuleTypeName,rules:[{required:!0,message:"请输入方案名称",whitespace:!0}]})(r.a.createElement(o.a,{placeholder:"请输入方案名称"}))),r.a.createElement(i.a.Item,{label:"模组IC型号"},m("originalModuleTypeName",{initialValue:c.originalModuleTypeName,rules:[{required:!0,message:"请输入方案名称",whitespace:!0}]})(r.a.createElement(o.a,{placeholder:"请输入方案名称"}))),r.a.createElement(i.a.Item,{label:"适用范围"},m("applyScope",{initialValue:c.applyScope,rules:[{required:!0,message:"请输入模组适用范围"},{type:"string",max:50,message:"上限50个字符长度"}]})(r.a.createElement(o.a,{type:"text",placeholder:"请输入模组适用范围，如：家电产品",maxLength:50}))),r.a.createElement(i.a.Item,{className:"moduleSize",label:"模组尺寸"},r.a.createElement(i.a.Item,{style:{display:"inline-block",width:"100px",marginBottom:0}},m("sizeThickness",{initialValue:c.sizeThickness,rules:[{required:!0,message:"请输入长"},{validator:s}]})(r.a.createElement(M.a,{maxLength:3,max:999}))),r.a.createElement("span",null," -   "),r.a.createElement(i.a.Item,{label:"",style:{display:"inline-block",width:"100px",marginBottom:0}},m("sizeWidth",{initialValue:c.sizeWidth,rules:[{required:!0,message:"请输入宽"},{validator:s}]})(r.a.createElement(M.a,{maxLength:3,max:999}))),r.a.createElement("span",null," -   "),r.a.createElement(i.a.Item,{style:{display:"inline-block",width:"100px",marginBottom:0}},m("sizeHeight",{initialValue:c.sizeHeight,rules:[{required:!0,message:"请输入高"},{validator:s}]})(r.a.createElement(M.a,{maxLength:3,max:999}))),r.a.createElement("br",null),r.a.createElement("span",null,"（长*宽*高 mm）")))})),b=(t(434),t(167)),C=(t(340),t(142));t(1414);var I=i.a.create()(Object(a.forwardRef)(function(e,_){var t=e.form,n=e.setStepCur,l=e.netList,o=e.protocolList,u=e.bindSceneList,c=e.moduleCommonObj,s=e.editData,d=void 0===s?{}:s,m=function(){t.validateFields(function(e,_){e||(console.log("Received values of form: ",_),n(2,_))})};Object(a.useImperativeHandle)(_,function(){return{onFinish:m}});var p=t.getFieldDecorator;return r.a.createElement(i.a,{labelCol:{span:4},wrapperCol:{span:18}},r.a.createElement(i.a.Item,{label:"通信方式"},p("moduleTypeList",{initialValue:d.moduleTypeList,rules:[{required:!0,message:"请选择通信方式"}]})(r.a.createElement(C.a.Group,null,c.moduleTypeList&&c.moduleTypeList.length?c.moduleTypeList.map(function(e){return r.a.createElement(C.a,{value:e.moduleType,key:e.moduleType},e.moduleTypeName)}):null))),r.a.createElement(i.a.Item,{label:"配网库"},p("appModuleId",{initialValue:d.appModuleId,rules:[{required:!0,message:"请您选择配网库"}]})(r.a.createElement(E.a,{placeholder:"请选择配网库",showSearch:!0,optionFilterProp:"children"},l.map(function(e,_){return r.a.createElement(E.a.Option,{value:e.moduleId,key:e.moduleId},e.moduleId+" "+e.hetModuleTypeName)})))),r.a.createElement(i.a.Item,{label:"配网方式"},p("networkTypeList",{initialValue:d.networkTypeList,rules:[{required:!0,message:"请选择配网方式"}]})(r.a.createElement(C.a.Group,null,c.networkTypeList&&c.networkTypeList.length?c.networkTypeList.map(function(e){return r.a.createElement(C.a,{value:e.networkType,key:e.networkType},e.networkTypeName)}):null))),r.a.createElement(i.a.Item,{label:"支持协议"},p("supportProtocolType",{initialValue:d.supportProtocolType,rules:[{required:!0,message:"请选择支持协议"}]})(r.a.createElement(E.a,{placeholder:"请选择支持协议",showSearch:!0,optionFilterProp:"children"},o.supportProtocolList.map(function(e,_){return r.a.createElement(E.a.Option,{value:e.supportProtocol,key:e.supportProtocol},e.supportProtocolName)})))),r.a.createElement(i.a.Item,{label:"默认通信速率"},p("communicateSpeed",{initialValue:d.communicateSpeed,rules:[{required:!0,message:"请输入通信速率"}]})(r.a.createElement(M.a,{placeholder:"请输入通信速率",style:{width:"100%"},maxLength:6}))),r.a.createElement(i.a.Item,{label:"数据长度上限"},p("dataLengthLimit",{initialValue:d.dataLengthLimit,rules:[{required:!0,message:"请输入通信速率"}]})(r.a.createElement(E.a,{placeholder:"请选择数据长度上限",showSearch:!0,optionFilterProp:"children"},o.dataLengthLimitList.map(function(e,_){return r.a.createElement(E.a.Option,{value:e.dataLengthLimit,key:e.dataLengthLimit},e.dataLengthLimitName)})))),r.a.createElement(i.a.Item,{label:"认证通道"},p("bindSceneType",{initialValue:d.bindSceneType,rules:[{required:!0,message:"请选择认证通道"}]})(r.a.createElement(E.a,{placeholder:"请选择认证通道",showSearch:!0,optionFilterProp:"children"},u.map(function(e,_){return r.a.createElement(E.a.Option,{value:e.sceneTypeId,key:e.sceneTypeId},e.sceneTypeName)})))),r.a.createElement(i.a.Item,{label:"支持文件传输"},p("supportFileTransfer",{initialValue:d.supportFileTransfer,rules:[{required:!0,message:"请选择是否支持文件传输"}]})(r.a.createElement(b.a.Group,null,r.a.createElement(b.a,{value:1},"是"),r.a.createElement(b.a,{value:0},"否"))),r.a.createElement("br",null),r.a.createElement("span",null,"限制2M大小")))})),g=t(1415),L=t(1363);t(1417);function h(e,_){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);_&&(a=a.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),t.push.apply(t,a)}return t}function B(e){for(var _=1;_<arguments.length;_++){var t=null!=arguments[_]?arguments[_]:{};_%2?h(t,!0).forEach(function(_){R(e,_,t[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(t).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(t,_))})}return e}function R(e,_,t){return _ in e?Object.defineProperty(e,_,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[_]=t,e}function A(e,_){return function(e){if(Array.isArray(e))return e}(e)||function(e,_){var t=[],a=!0,r=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(t.push(l.value),!_||t.length!==_);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return t}(e,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var U=P.a.TabPane,K=O.a.Step,W=["基本参数","功能参数","文件上传"];var j=i.a.create()(function(e){var _=e.visible,t=e.handleOk,n=e.handleCancel,l=e.moduleCommonObj,i=e.getTableData,o=e.editData,c=e.opeType,E=A(Object(a.useState)(0),2),m=E[0],f=E[1],D=Object(a.useRef)(),M=Object(a.useRef)(),y=Object(a.useRef)(),b=A(Object(a.useState)({one:{},two:{},three:{}}),2),C=b[0],h=b[1],R=A(Object(a.useState)([]),2),j=R[0],w=R[1],v=A(Object(a.useState)([]),2),k=v[0],S=v[1],F=A(Object(a.useState)([]),2),q=F[0],x=F[1],V=A(Object(a.useState)([]),2),N=V[0],z=V[1];Object(a.useEffect)(function(){Object(L.e)().then(function(e){w(e.data.data)}),Object(L.i)().then(function(e){S(e.data.data)}),Object(L.g)().then(function(e){x(e.data.data)}),Object(L.d)().then(function(e){z(e.data.data)})},[]);var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1?arguments[1]:void 0;0===m?h(function(e){var t=p()(e);return t.one=p()(_),t}):1===m&&h(function(e){var t=p()(e);return t.two=p()(_),t}),f(e)};return r.a.createElement(d.a,{title:"新增",width:900,style:{top:20},visible:_,onOk:t,onCancel:n,maskClosable:!1,wrapClassName:"module-add-scheme",footer:[0!==m&&r.a.createElement(s.a,{key:"previous",onClick:function(){f(m-1)}},"上一步"),r.a.createElement(s.a,{type:"primary",key:"next",onClick:function(){0===m?D.current.onFinish():1===m?M.current.onFinish():2===m&&y.current.onFinish()}},2===m?"提交":"下一步")]},r.a.createElement("div",{className:"add-scheme-modal"},r.a.createElement("div",{className:"step-box"},r.a.createElement(O.a,{current:m},W.map(function(e,_){return r.a.createElement(K,{key:e,title:e})}))),r.a.createElement("div",{className:"formbox"},r.a.createElement(P.a,{activeKey:m+"",animated:!1},r.a.createElement(U,{tab:"基本参数",key:"0"},r.a.createElement(T,{brandList:j,netList:k,wrappedComponentRef:D,setStepCur:H,editData:o})),r.a.createElement(U,{tab:"功能参数",key:"1"},r.a.createElement(I,{netList:k,protocolList:q,bindSceneList:N,moduleCommonObj:l,wrappedComponentRef:M,setStepCur:H,editData:o})),r.a.createElement(U,{tab:"功能参数",key:"2"},r.a.createElement(g.a,{wrappedComponentRef:y,commitAll:function(e){var _=B(B(B({},C.one),C.two),{},{firmwareDefReqList:e});console.log(_,"params"),"edit"===c?(_.moduleId=o.firmwareDefList[0].moduleId,Object(L.k)(_).then(function(e){0===e.data.code&&(u.a.success("提交成功"),n(),i())})):Object(L.j)(_).then(function(e){0===e.data.code&&(u.a.success("提交成功"),n(),i())})},editData:o,opeType:c}))))))});t(1418);function w(e,_){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);_&&(a=a.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),t.push.apply(t,a)}return t}function v(e,_,t){return _ in e?Object.defineProperty(e,_,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[_]=t,e}function k(e,_){return function(e){if(Array.isArray(e))return e}(e)||function(e,_){var t=[],a=!0,r=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(t.push(l.value),!_||t.length!==_);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return t}(e,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var S=E.a.Option,F=d.a.confirm,q={1:"已发布",0:"草稿"};var x=i.a.create()(function(e){var _=e.form,t=k(Object(a.useState)({pageIndex:1,pageRows:10}),2),n=t[0],d=t[1],m=k(Object(a.useState)(0),2),O=m[0],P=m[1],M=k(Object(a.useState)([]),2),y=M[0],T=M[1],b=k(Object(a.useState)(!1),2),C=b[0],I=b[1],g=k(Object(a.useState)(!1),2),h=g[0],B=g[1],R=_.getFieldDecorator,A=_.getFieldsValue,U=k(Object(a.useState)({}),2),K=U[0],W=U[1],x=k(Object(a.useState)(!1),2),V=x[0],N=x[1],z=k(Object(a.useState)({}),2),H=z[0],J=z[1],G=[{title:"模组型号",key:"hetModuleTypeName",dataIndex:"hetModuleTypeName",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"模组名称",key:"moduleName",dataIndex:"moduleName",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"支持通信",width:"15%",key:"moduleTypeStr",dataIndex:"moduleTypeStr",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"生产厂商",key:"brandName",dataIndex:"brandName"},{title:"状态",key:"releaseStatus",dataIndex:"releaseStatus",render:function(e){return r.a.createElement("span",{style:{color:"".concat(["green","gray"][e])}},q[e])}},{title:"更新时间",key:"modifyTime",dataIndex:"modifyTime",render:function(e){return r.a.createElement("span",{title:e},e)}},{title:"操作",width:"180px",key:"operation",dataIndex:"operation",render:function(e,_){return r.a.createElement("div",null,$(_))}}];Object(a.useEffect)(function(){Object(L.h)().then(function(e){W(e.data.data)})},[]);var $=function(e){return(1===e.releaseStatus?Q():X()).map(function(_){return function(e,_){return r.a.createElement(c.a,{key:e.key,placement:"top",title:e.title},r.a.createElement(s.a,{style:{marginLeft:"10px"},shape:"circle",size:"small",icon:e.icon,key:e.key,onClick:function(){return Y(e,_)}}))}(_,e)})},Q=function(){return[{title:"下线",icon:"cloud-download",key:"offline"}]},X=function(){return[{title:"发布",icon:"cloud-upload",key:"release"},{title:"编辑",icon:"edit",key:"edit"},{title:"删除",icon:"delete",key:"delete"}]},Y=function(e,_){switch(e.key){case"view":break;case"offline":F({title:"下线模组?",content:"确认下线后，模组将同步从开放平台下线，确定要这样做吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){_e(_.moduleId,0)},onCancel:function(){}});break;case"release":console.log(_.completeStatus);var t=0===_.completeStatus?"当前模组信息不完整，请完善后提交发布":"确认发布后，模组信息将会同步到开放平台,确定要这样做吗？";F({title:"发布模组",content:t,okText:"确定",cancelText:"取消",onOk:function(){1===_.completeStatus&&_e(_.moduleId,1)},onCancel:function(){}});break;case"edit":Z(_.moduleId);break;case"delete":F({title:"删除模组",content:"删除后，模组信息将同步删除，无法撤销，确定要这样做吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){ee(_.moduleId)},onCancel:function(){}})}},Z=function(e){Object(L.f)(e).then(function(e){e.data.data?(J(e.data.data),N(!0)):u.a.warning("返回数据不存在")})},ee=function(e){Object(L.a)(e).then(function(e){0===e.data.code&&(u.a.success("删除成功"),te())})},_e=function(e,_){Object(L.c)(e,_).then(function(e){0===e.data.code&&(u.a.success(1===_?"发布成功":"下线成功"),te())})},te=function(){I(!0);var e=A(),_=e.moduleName,t=e.moduleType,a=function(e){for(var _=1;_<arguments.length;_++){var t=null!=arguments[_]?arguments[_]:{};_%2?w(t,!0).forEach(function(_){v(e,_,t[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(t).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(t,_))})}return e}({moduleName:_?_.trim():"",moduleType:t||""},n);Object(L.b)(a).then(function(e){0===e.data.code&&(T(e.data.data.list),P(e.data.data.pager.totalRows))}).finally(function(){I(!1)})};Object(a.useEffect)(function(){te()},[n.pageRows,n.pageIndex]);var ae=function(){1===n.pageIndex?te():d({pageIndex:1,pageRows:10})};return r.a.createElement("div",{className:"module-firmware-page"},r.a.createElement(D.a,{title:"模组&固件管理"},r.a.createElement(i.a,{layout:"inline"},r.a.createElement(i.a.Item,{label:"关键字"},R("moduleName",{})(r.a.createElement(o.a,{placeholder:"请输入生产厂商或模组型号",style:{width:260},maxLength:20}))),r.a.createElement(i.a.Item,{label:"通信方式"},R("moduleType",{initialValue:void 0})(r.a.createElement(E.a,{style:{width:200,marginBottom:0},placeholder:"请选择通信方式",showSearch:!0,optionFilterProp:"children"},function(e){if(e)return e.map(function(e,_){return r.a.createElement(S,{value:e.moduleType,key:e.moduleType},e.moduleTypeName)})}(K.moduleTypeList)))),r.a.createElement(i.a.Item,null,r.a.createElement(s.a,{type:"primary",onClick:function(){return ae()}},"查询")),r.a.createElement(i.a.Item,null,r.a.createElement(s.a,{type:"default",onClick:function(){return _.resetFields(),void ae()}},"重置")),r.a.createElement(i.a.Item,null,r.a.createElement(s.a,{type:"primary",onClick:function(){return B(!0)}},"添加模组")))),r.a.createElement(l.a,{className:"ModuleManagerListTable",style:{marginTop:10}},r.a.createElement(f.a,{rowKey:"moduleId",bordered:!0,columns:G,dataSource:y,loading:C,pagination:{defaultCurrent:1,current:n.pageIndex,onChange:function(e,_){d(function(t){var a=p()(t);return Object.assign(a,{pageIndex:_===n.pageRows?e:1,pageRows:_})})},pageSize:n.pageRows,total:O,showQuickJumper:!1,showTotal:function(){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,O)," 条")}}})),h&&r.a.createElement(j,{visible:h,moduleCommonObj:K,opeType:"add",getTableData:te,handleCancel:function(){return B(!1)}}),V&&r.a.createElement(j,{visible:V,moduleCommonObj:K,opeType:"edit",editData:H,getTableData:te,handleCancel:function(){return N(!1)}}))});_.default=function(e){var _=e.match;return r.a.createElement(n.d,null,r.a.createElement(n.b,{path:"".concat(_.url,"/list"),component:x}),r.a.createElement(n.a,{from:"".concat(_.url,"/"),to:"".concat(_.url,"/list")}))}}}]);