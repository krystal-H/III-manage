(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1452:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var a=n(3),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.c.request({url:"/manage-open/manage/classify/getClassifyList",data:e,method:"post",headers:{}})},c=function(e){return a.c.request({url:"/manage-open/manage/classify/removeClassify/"+e,method:"get",headers:{}})},i=function(e){return a.c.request({url:"/manage-open/manage/classify/addClassify",method:"post",data:e,headers:{}})}},1453:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return u}));var a=n(3),r=function(e){return a.c.request({url:"/manage-open/manage/commodity/getModuleListByPage",data:e,method:"post",headers:{}})},c=function(e){return a.c.request({url:"/manage-open/module/getModulelistByHetModuleTypeName",data:e,method:"post",headers:{}})},i=function(e){return a.c.request({url:"/manage-open/manage/classify/getCommodityClassifyByGrade",data:e,method:"post",headers:{}})},o=function(e){return a.c.request({url:"/manage-open/manage/classify/getClassifyList",data:e,method:"post",headers:{}})},u=function(e){return a.c.request({url:"/manage-open/manage/commodity/publicCommodity",data:e,method:"post",headers:{}})}},1532:function(e,t,n){},1541:function(e,t,n){"use strict";n.r(t);n(18),n(35),n(36),n(26),n(27),n(28),n(113),n(122),n(134),n(41),n(43),n(44),n(103);var a=n(48),r=(n(104),n(46)),c=(n(306),n(161)),i=(n(69),n(19)),o=(n(224),n(123)),u=(n(200),n(85)),l=(n(174),n(72)),s=(n(158),n(37)),f=(n(133),n(23)),d=(n(39),n(22),n(65),n(387),n(32),n(143),n(58),n(78),n(160),n(0)),m=n.n(d),p=n(1452),y=n(1453),g=n(33);n(1532);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,c=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(c.push(a.value),!t||c.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var E=f.a.Item,S=s.a.Option,k=l.a.TabPane;t.default=f.a.create()((function(e){var t=e.form,n=j(Object(d.useState)({pageIndex:1,pageRows:10}),2),h=n[0],v=n[1],w=t.getFieldDecorator,C=t.validateFields,I=j(Object(d.useState)(0),2),N=I[0],x=I[1],P=j(Object(d.useState)([]),2),q=P[0],R=P[1],T=j(Object(d.useState)(!1),2),V=T[0],J=T[1],A=j(Object(d.useState)("add"),2),D=A[0],L=A[1],M=j(Object(d.useState)({}),2),B=M[0],F=M[1],K=j(Object(d.useState)(!1),2),z=K[0],G=K[1],H=j(Object(d.useState)("0"),2),Q=H[0],U=H[1],$=j(Object(d.useState)([]),2),W=$[0],X=$[1];Object(d.useEffect)((function(){Object(y.c)({classifyLevel:1}).then((function(e){X(e.data.data)}))}),[]),Object(d.useEffect)((function(){Y()}),[h.pageRows,h.pageIndex,Q,W]);var Y=function(){G(!0);var e=[];if("0"==Q?e=W.filter((function(e){return"硬件产品"==e.classifyName})):"1"==Q&&(e=W.filter((function(e){return"通信模组"==e.classifyName}))),0!==e.length){var t=O({parentId:e[0].id},h);Object(p.c)(t).then((function(e){0==e.data.code&&(e.data.data.list.forEach((function(e,t){e.key=t+1})),R(e.data.data.list),x(e.data.data.pager.totalRows))})).finally((function(){G(!1)}))}},Z=[{title:"编号",dataIndex:"key",key:"key"},{title:"分类名称",dataIndex:"classifyName",key:"classifyName",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"排序值",dataIndex:"classifyValue",key:"classifyValue",render:function(e){return m.a.createElement("span",{title:e},e)}},{title:"编辑时间",dataIndex:"updateTime",key:"updateTime",render:function(e){return e&&g.b.utcToDev(e)}},{title:"操作",key:"action",width:200,render:function(e,t){return m.a.createElement("span",null,m.a.createElement("a",{style:{marginRight:"10px"},onClick:function(){_(t)}},"编辑"),m.a.createElement("a",{onClick:function(){!function(e){u.a.confirm({title:"确认",okText:"确定",cancelText:"取消",content:"是否删除此数据",onOk:function(){Object(p.b)(e.id).then((function(e){0==e.data.code&&(o.a.success("删除成功"),Y())}))}})}(t)}},"删除"))}}],_=function(e){L("edit"),F(e),J(!0)};return m.a.createElement("div",{className:"classify-page"},m.a.createElement(r.a,null,m.a.createElement("div",{className:"top-flex"},m.a.createElement(l.a,{activeKey:Q,onChange:function(e){return function(e){console.log(e),U(e),v({pageIndex:1,pageRows:10})}(e)}},W.length>0&&W.map((function(e,t){return m.a.createElement(k,{tab:"".concat(e.classifyName),key:t+""})}))),m.a.createElement("div",{className:"classify-top"},m.a.createElement(i.a,{type:"primary",onClick:function(){L("add"),J(!0)}},"新增分类"))),m.a.createElement(c.a,{rowKey:"id",columns:Z,dataSource:q,loading:z,bordered:!0,pagination:{defaultCurrent:1,current:h.pageIndex,onChange:function(e,t){t===h.pageRows?v((function(n){var a=JSON.parse(JSON.stringify(n));return Object.assign(a,{pageIndex:e,pageRows:t})})):v((function(e){var n=JSON.parse(JSON.stringify(e));return Object.assign(n,{pageIndex:1,pageRows:t})}))},pageSize:h.pageRows,total:N,showQuickJumper:!0,showTotal:function(){return m.a.createElement("span",null,"共 ",m.a.createElement("a",null,N)," 条")}}})),V&&m.a.createElement(u.a,{title:"add"===D?"新增分类":"编辑分类",visible:V,onOk:function(){C().then((function(e){var t=O({},e);t.classifyLevel=2,"edit"===D&&(t.id=B.id),Object(p.a)(t).then((function(e){0==e.data.code&&(o.a.success("新增成功"),Y(),J(!1))}))}))},onCancel:function(){return J(!1)}},m.a.createElement(f.a,b({},{labelCol:{span:6},wrapperCol:{span:14}},{autoComplete:"off"}),m.a.createElement(E,{label:"分类类别"},w("parentId",{initialValue:"add"===D?"":B.parentId+"",rules:[{required:!0,message:"请选择分类类别"}]})(m.a.createElement(s.a,{style:{width:275}},W.length>0&&W.map((function(e){return m.a.createElement(S,{key:e.id},"".concat(e.classifyName))}))))),m.a.createElement(E,{label:"分类名称"},w("classifyName",{initialValue:"add"===D?"":B.classifyName,rules:[{required:!0,message:"请输入分类名称"}]})(m.a.createElement(a.a,null))),m.a.createElement(E,{label:"排序值"},w("classifyValue",{initialValue:"add"===D?"":B.classifyValue,getValueFromEvent:function(e){return e.target.value.replace(/[^\d]/g,"")},rules:[{required:!0,message:"请输入排序值"}]})(m.a.createElement(a.a,null))))))}))}}]);