(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1422:function(e,t,a){"use strict";a(48),a(49),a(19),a(37),a(22),a(38),a(28),a(31),a(30);var n=a(0),r=a.n(n);a(1423);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p(e);if(t){var r=p(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d(this,a)}}function d(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(d,e);var t,a,n,o=u(d);function d(){return l(this,d),o.apply(this,arguments)}return t=d,(a=[{key:"render",value:function(){var e=this.props,t=e.children,a=e.title;return r.a.createElement("div",{className:"title-tab"},r.a.createElement("div",{className:"title-tab-option"},r.a.createElement("span",{className:"title-tab-title"},a)),r.a.createElement("div",{className:"title-tab-option"},t))}}])&&c(t.prototype,a),n&&c(t,n),d}(r.a.Component);f.Option=function(e){var t=e.children,a=e.label,n=e.align,o=void 0===n?"left":n;return r.a.createElement("div",{className:"".concat("left"===o?"title-tab-item":"title-tab-item-right")},r.a.createElement("span",{className:a?"title-table-label":"title-table-label-non"},a?a+":":""),t)},t.a=f},1423:function(e,t,a){},1445:function(e,t,a){},1536:function(e,t,a){"use strict";a.r(t);a(19),a(37),a(38),a(28),a(31),a(30),a(198),a(220),a(256),a(35),a(34),a(43),a(33),a(44),a(98);var n=a(39),r=(a(75),a(20)),o=(a(136),a(69)),l=(a(197),a(76)),c=(a(298),a(155)),i=(a(255),a(127)),u=(a(154),a(40)),d=(a(168),a(824),a(22),a(66),a(468),a(65),a(0)),p=a.n(d),f=a(1422),s=a(3),m=a(106);a(32),a(1445);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var g=u.a.Item,h=o.a.Search;var v=u.a.create()((function(e){var t=e.form,a=e.addVis,n=e.handleCancel,r=(e.handleOk,e.modelType),c=(e.actionData,e.optionList),f=t.getFieldDecorator,m=t.validateFields,b=(t.setFieldsValue,t.getFieldValue,y(Object(d.useState)({}),2)),v=b[0],w=b[1];Object(d.useEffect)((function(){"edit"===r&&O()}),[]);var O=function(){},E={labelCol:{span:6},wrapperCol:{span:14}};return p.a.createElement("div",null,p.a.createElement(i.a,{title:"edit"===r?"编辑":"新增",visible:a,onOk:function(){m().then((function(e){var t,a={};a.gatewayType=e.gatewayType,a.gatewayName=1===e.gatewayType?"IOT路由器":"ZigBee3.0网关",a.productId=v.productId,a.productName=v.productName,a.productCode=v.productCode,a.brand_code=v.brand_code,a.productId=v.productId,a.productMark=e.productMark,"edit"===r?(t=a,s.c.request({url:"/manage-open/addGatewayInfo/modifyGatewayInfo",method:"post",data:t,headers:{}})).then((function(e){e.data.code})):function(e){return s.c.request({url:"/manage-open/gatewayManage/addGatewayInfo",method:"post",data:e,headers:{}})}(a).then((function(e){e.data.code}))}))},onCancel:n,width:"700px",maskClosable:!1},p.a.createElement("div",{className:"gateWay-modal"},p.a.createElement(u.a,E,p.a.createElement(g,{label:"网关名称"},f("gatewayType")(p.a.createElement(l.a,null,c.map((function(e,t){return p.a.createElement(l.a.Option,{key:e.value,value:e.value,label:e.label},e.label)}))))),p.a.createElement(g,{label:"网关ID"},f("templateName",{rules:[{required:!0,message:"请输入产品ID/名称/型号"}]})(p.a.createElement(h,{enterButton:"搜索",placeholder:"请输入产品ID/名称/型号",onSearch:function(e){var t,a={pageIndex:1,pageRows:10,productId:e,mode:1};w({}),(t=a,s.c.request({url:"/manage-open/product/getList",params:t,method:"get"})).then((function(e){0===e.data.code&&e.data.data.list&&e.data.data.list.length&&w(e.data.data.list[0])}))}}))),p.a.createElement(g,{label:"产品名称"},p.a.createElement("span",null,v.productName)),p.a.createElement(g,{label:"产品型号"},p.a.createElement("span",null,v.productName)),p.a.createElement(g,{label:"品牌"},p.a.createElement("span",null,v.productName)),p.a.createElement(g,{label:"产品ID"},p.a.createElement("span",null,v.productId)),p.a.createElement(g,{label:"产品标识"},f("productMark",{})(p.a.createElement(o.a,{style:{width:"100%"}})))))))}));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){E(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var S=u.a.Item,k=[{value:1,label:"IOT路由器"},{value:2,label:"ZigBee3.0网关"}];t.default=u.a.create()((function(e){var t=e.form,a=t.getFieldDecorator,y=(t.validateFields,t.getFieldsValue),b=I(Object(d.useState)({pageIndex:1,pageRows:10}),2),g=b[0],h=b[1],w=I(Object(d.useState)(0),2),E=w[0],j=w[1],N=I(Object(d.useState)([]),2),x=N[0],C=N[1],T=I(Object(d.useState)(k),2),D=T[0],P=(T[1],I(Object(d.useState)(!1),2)),R=P[0],A=P[1],M=I(Object(d.useState)({}),2),_=M[0],F=M[1],J=I(Object(d.useState)(""),2),q=J[0],B=J[1],G=I(Object(d.useState)(!1),2),V=G[0],L=G[1],U=[{title:"网关名称",dataIndex:"gatewayName",key:"gatewayName"},{title:"网关ID",dataIndex:"id",key:"id"},{title:"产品名称",dataIndex:"productName",key:"productName"},{title:"产品型号",dataIndex:"productCode",key:"productCode"},{title:"产品ID",dataIndex:"productId",key:"productId"},{title:"产品标识",dataIndex:"productMark",key:"productMark"},{title:"操作",key:"action",width:180,render:function(e,t){return p.a.createElement("span",null,p.a.createElement("a",{onClick:function(){K(t)},style:{marginRight:"10px"}},"编辑"),p.a.createElement("a",{onClick:function(){Z(t)}},"删除"))}}],Z=function(e){i.a.confirm({title:"删除",okText:"确定",cancelText:"取消",content:"点击确定将删除此数据。",onOk:function(){(function(e){return s.c.request({url:"/manage-open/addGatewayInfo/deleteGatewayInfo",method:"post",data:e,headers:{}})})({id:e.id}).then((function(e){c.a.success("删除成功"),$()}))}})};Object(d.useEffect)((function(){$()}),[g.pageRows,g.pageIndex]);var $=function(){var e={};y().templateName&&y().templateName.trim()&&(e.templateName=y().templateName.trim()),y().gatewayType&&(e.gatewayType=y().gatewayType),e=O(O({},e),g),L(!0),function(e){return s.c.request({url:"/manage-open/gatewayManage/getGatewayListByPage",data:e,method:"post",headers:{}})}(e).then((function(e){0==e.data.code&&(C(e.data.data.list),j(e.data.data.pager.totalRows))})).finally((function(){L(!1)}))},z=function(){1===g.pageIndex?$():h({pageIndex:1,pageRows:10})},K=function(e){B("edit"),F(e),A(!0)};return p.a.createElement("div",{className:"gatelMn-page"},p.a.createElement(f.a,{title:"网关子设备"},p.a.createElement("div",{className:"title-space"},p.a.createElement(u.a,{layout:"inline"},p.a.createElement(S,{label:"网关名称"},a("gatewayType")(p.a.createElement(l.a,{style:{width:160},placeholder:"请选择所属分类"},D.map((function(e,t){return p.a.createElement(l.a.Option,{key:e.value,value:e.value,label:e.label},e.label)}))))),p.a.createElement(S,{label:"网关ID"},a("templateName",{})(p.a.createElement(o.a,{placeholder:"请输入面板名称",style:{width:240}}))),p.a.createElement(S,null,p.a.createElement(r.a,{type:"primary",onClick:function(){return z()}},"查询")),p.a.createElement(S,null,p.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),p.a.createElement(r.a,{type:"primary",onClick:function(){B("add"),A(!0)}},"新增子设备"))),p.a.createElement(n.a,null,p.a.createElement(m.a,{rowKey:"templateId",columns:U,dataSource:x,loading:V,pagination:{defaultCurrent:1,current:g.pageIndex,onChange:function(e,t){t===g.pageRows?h((function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})})):h((function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})}))},pageSize:g.pageRows,total:E,showQuickJumper:!0,showTotal:function(){return p.a.createElement("span",null,"共 ",p.a.createElement("a",null,E)," 条")}}})),R&&p.a.createElement(v,{addVis:R,handleCancel:function(){A(!1)},handleOk:function(){z(),A(!1)},optionList:D,modelType:q,actionData:_}))}))}}]);