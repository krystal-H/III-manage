(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1423:function(e,t,a){"use strict";a(48),a(49),a(19),a(37),a(22),a(38),a(28),a(30),a(31);var n=a(0),r=a.n(n);a(1424);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=s(e);if(t){var r=s(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d(this,a)}}function d(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(d,e);var t,a,n,o=u(d);function d(){return l(this,d),o.apply(this,arguments)}return t=d,(a=[{key:"render",value:function(){var e=this.props,t=e.children,a=e.title;return r.a.createElement("div",{className:"title-tab"},r.a.createElement("div",{className:"title-tab-option"},r.a.createElement("span",{className:"title-tab-title"},a)),r.a.createElement("div",{className:"title-tab-option"},t))}}])&&c(t.prototype,a),n&&c(t,n),d}(r.a.Component);p.Option=function(e){var t=e.children,a=e.label,n=e.align,o=void 0===n?"left":n;return r.a.createElement("div",{className:"".concat("left"===o?"title-tab-item":"title-tab-item-right")},r.a.createElement("span",{className:a?"title-table-label":"title-table-label-non"},a?a+":":""),t)},t.a=p},1424:function(e,t,a){},1446:function(e,t,a){},1538:function(e,t,a){"use strict";a.r(t);a(19),a(37),a(38),a(28),a(30),a(31),a(199),a(221),a(256),a(35),a(34),a(43),a(33),a(44),a(98);var n=a(39),r=(a(75),a(20)),o=(a(198),a(76)),l=(a(297),a(156)),c=(a(255),a(128)),i=(a(155),a(40)),u=(a(168),a(22),a(66),a(467),a(65),a(0)),d=a.n(u),s=a(1423),p=a(3),f=a(106),y=(a(32),a(1446),a(847),a(711)),m=(a(137),a(69)),b=(a(300),a(304),a(187)),g=a.n(b);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var v=i.a.Item,O=o.a.Option;m.a.Search;var E=i.a.create()((function(e){var t=e.form,a=e.addVis,n=e.handleCancel,r=e.handleOk,s=e.modelType,f=e.actionData,b=e.optionList,w=t.getFieldDecorator,E=t.validateFields,j=t.setFieldsValue,I=t.getFieldValue,S=h(Object(u.useState)({}),2),k=S[0],C=S[1],N=h(Object(u.useState)([]),2),T=N[0],x=N[1],P=h(Object(u.useState)(!1),2),M=P[0],R=P[1];Object(u.useEffect)((function(){"edit"===s&&D()}),[]);var D=function(){x([f]),C(f),j({gatewayType:f.gatewayType,productMark:f.productMark,productId:f.productId.toString()})},A={labelCol:{span:6},wrapperCol:{span:14}};function F(e){if(e){var t,a={productName:e};R(!0),x([]),(t=a,p.c.request({url:"/manage-open/gatewayManage/getProductListByPage",data:t,method:"post",headers:{}})).then((function(e){0===e.data.code&&(e.data.data.list.forEach((function(e){e.productid=e.productId})),R(!1),x(e.data.data.list||[]))}))}}return F=g()(F,800),d.a.createElement("div",null,d.a.createElement(c.a,{title:"edit"===s?"编辑":"新增",visible:a,onOk:function(){E().then((function(e){var t,a={};a.gatewayType=e.gatewayType,a.gatewayName=1===e.gatewayType?"IOT路由器":"ZigBee3.0网关",a.productName=k.productName,a.productCode=k.productCode,a.brandName=k.brandName,a.productId=k.productId,a.productMark=e.productMark,"edit"===s?(a={id:f.id,productMark:e.productMark},(t=a,p.c.request({url:"/manage-open/gatewayManage/modifyGatewayInfo",method:"post",data:t,headers:{}})).then((function(e){0===e.data.code&&(l.a.success("更新成功"),r())}))):function(e){return p.c.request({url:"/manage-open/gatewayManage/addGatewayInfo",method:"post",data:e,headers:{}})}(a).then((function(e){0===e.data.code&&(l.a.success("新增成功"),r())}))}))},onCancel:n,width:"700px",maskClosable:!1},d.a.createElement("div",{className:"gateWay-modal"},d.a.createElement(i.a,A,d.a.createElement(v,{label:"网关名称"},w("gatewayType",{rules:[{required:!0}]})(d.a.createElement(o.a,{disabled:"edit"===s},b.map((function(e,t){return d.a.createElement(o.a.Option,{key:e.value,value:e.value,label:e.label},e.label)}))))),d.a.createElement(v,{label:"网关ID"},d.a.createElement("span",null,I("gatewayType"))),d.a.createElement(v,{label:"产品名称"},w("productId",{rules:[{required:!0}]})(d.a.createElement(o.a,{disabled:"edit"===s,showSearch:!0,placeholder:"输入产品名称",notFoundContent:M?d.a.createElement(y.a,{size:"small"}):null,filterOption:!1,onSearch:F,onChange:function(e){var t=T.find((function(t){return t.productId==e}));C(t),R(!1)},style:{width:"100%"}},T.map((function(e){return d.a.createElement(O,{key:e.productId},e.productName)}))))),d.a.createElement(v,{label:"产品型号"},d.a.createElement("span",null,k.productCode)),d.a.createElement(v,{label:"品牌"},d.a.createElement("span",null,k.brandName)),d.a.createElement(v,{label:"产品ID"},d.a.createElement("span",null,k.productId)),d.a.createElement(v,{label:"产品标识"},w("productMark",{})(d.a.createElement(m.a,{style:{width:"100%"}})))))))}));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var N=i.a.Item,T=[{value:1,label:"IOT路由器"},{value:2,label:"ZigBee3.0网关"}];t.default=i.a.create()((function(e){var t=e.form,a=t.getFieldDecorator,y=(t.validateFields,t.getFieldsValue),m=k(Object(u.useState)({pageIndex:1,pageRows:10}),2),b=m[0],g=m[1],h=k(Object(u.useState)(0),2),w=h[0],v=h[1],O=k(Object(u.useState)([]),2),j=O[0],S=O[1],C=k(Object(u.useState)(T),2),x=C[0],P=(C[1],k(Object(u.useState)(!1),2)),M=P[0],R=P[1],D=k(Object(u.useState)({}),2),A=D[0],F=D[1],_=k(Object(u.useState)(""),2),q=_[0],J=_[1],B=k(Object(u.useState)(!1),2),V=B[0],G=B[1],L=[{title:"网关名称",dataIndex:"gatewayName",key:"gatewayName"},{title:"网关ID",dataIndex:"gatewayType",key:"gatewayType"},{title:"产品名称",dataIndex:"productName",key:"productName"},{title:"产品型号",dataIndex:"productCode",key:"productCode"},{title:"产品ID",dataIndex:"productId",key:"productId"},{title:"产品标识",dataIndex:"productMark",key:"productMark"},{title:"操作",key:"action",width:180,render:function(e,t){return d.a.createElement("span",null,d.a.createElement("a",{onClick:function(){$(t)},style:{marginRight:"10px"}},"编辑"),d.a.createElement("a",{onClick:function(){z(t)}},"删除"))}}],z=function(e){c.a.confirm({title:"删除",okText:"确定",cancelText:"取消",content:"点击确定将删除此数据。",onOk:function(){(function(e){return p.c.request({url:"/manage-open/gatewayManage/deleteGatewayInfo",method:"post",data:e,headers:{}})})({id:e.id}).then((function(e){l.a.success("删除成功"),U()}))}})};Object(u.useEffect)((function(){U()}),[b.pageRows,b.pageIndex]);var U=function(){var e={};y().gatewayType&&(e.gatewayType=y().gatewayType),e=I(I({},e),b),G(!0),function(e){return p.c.request({url:"/manage-open/gatewayManage/getGatewayListByPage",data:e,method:"post",headers:{}})}(e).then((function(e){0==e.data.code&&(S(e.data.data.list),v(e.data.data.pager.totalRows))})).finally((function(){G(!1)}))},Z=function(){1===b.pageIndex?U():g({pageIndex:1,pageRows:10})},$=function(e){J("edit"),F(e),R(!0)};return d.a.createElement("div",{className:"gatelMn-page"},d.a.createElement(s.a,{title:"网关子设备"},d.a.createElement("div",{className:"title-space"},d.a.createElement(i.a,{layout:"inline"},d.a.createElement(N,{label:"网关名称"},a("gatewayType")(d.a.createElement(o.a,{style:{width:200},allowClear:!0},x.map((function(e,t){return d.a.createElement(o.a.Option,{key:e.value,value:e.value,label:e.label},e.label)}))))),d.a.createElement(N,null,d.a.createElement(r.a,{type:"primary",onClick:function(){return Z()}},"查询")),d.a.createElement(N,null,d.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),d.a.createElement(r.a,{type:"primary",onClick:function(){J("add"),R(!0)}},"新增子设备"))),d.a.createElement(n.a,null,d.a.createElement(f.a,{rowKey:"id",columns:L,dataSource:j,loading:V,pagination:{defaultCurrent:1,current:b.pageIndex,onChange:function(e,t){t===b.pageRows?g((function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})})):g((function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})}))},pageSize:b.pageRows,total:w,showQuickJumper:!0,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,w)," 条")}}})),M&&d.a.createElement(E,{addVis:M,handleCancel:function(){R(!1)},handleOk:function(){Z(),R(!1)},optionList:x,modelType:q,actionData:A}))}))}}]);