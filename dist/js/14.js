(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1357:function(e,t,a){"use strict";a(46),a(47),a(22),a(20),a(35),a(36),a(27),a(29),a(30);var n=a(0),r=a.n(n);a(1358);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,r.a.Component);var t,a,n,o=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var a,n=u(e);if(t()){var r=u(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return i(this,a)}}(d);function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),o.apply(this,arguments)}return t=d,(a=[{key:"render",value:function(){var e=this.props,t=e.children,a=e.title;return r.a.createElement("div",{className:"title-tab"},r.a.createElement("div",{className:"title-tab-option"},r.a.createElement("span",{className:"title-tab-title"},a)),r.a.createElement("div",{className:"title-tab-option"},t))}}])&&c(t.prototype,a),n&&c(t,n),d}();d.Option=function(e){var t=e.children,a=e.label,n=e.align,o=void 0===n?"left":n;return r.a.createElement("div",{className:"".concat("left"===o?"title-tab-item":"title-tab-item-right")},r.a.createElement("span",{className:a?"title-table-label":"title-table-label-non"},a?a+":":""),t)},t.a=d},1358:function(e,t,a){},1380:function(e,t,a){},1473:function(e,t,a){"use strict";a.r(t);a(92);var n=a(37),r=(a(73),a(21)),o=(a(188),a(74)),c=(a(279),a(154)),l=(a(242),a(120)),i=(a(153),a(38)),u=(a(166),a(22),a(63),a(436),a(62),a(36),a(27),a(29),a(30),a(20),a(35),a(34),a(33),a(41),a(32),a(42),a(0)),d=a.n(u),p=a(1357),s=a(4),f=function(e){return s.c.request({url:"/manage-open/gatewayManage/getGatewayListByPage",data:e,method:"post",headers:{}})},y=function(e){return s.c.request({url:"/manage-open/gatewayManage/deleteGatewayInfo",method:"post",data:e,headers:{}})},m=function(e){return s.c.request({url:"/manage-open/gatewayManage/modifyGatewayInfo",method:"post",data:e,headers:{}})},b=function(e){return s.c.request({url:"/manage-open/gatewayManage/addGatewayInfo",method:"post",data:e,headers:{}})},g=function(e){return s.c.request({url:"/manage-open/gatewayManage/getProductListByPage",data:e,method:"post",headers:{}})},w=a(97),h=(a(31),a(1380),a(808),a(665)),v=(a(133),a(66)),E=(a(282),a(286),a(179)),O=a.n(E);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var k=i.a.Item,j=o.a.Option;v.a.Search;var S=i.a.create()(function(e){var t=e.form,a=e.addVis,n=e.handleCancel,r=e.handleOk,p=e.modelType,s=e.actionData,f=e.optionList,y=t.getFieldDecorator,w=t.validateFields,E=t.setFieldsValue,S=t.getFieldValue,N=I(Object(u.useState)({}),2),T=N[0],C=N[1],x=I(Object(u.useState)([]),2),P=x[0],M=x[1],R=I(Object(u.useState)(!1),2),D=R[0],F=R[1];Object(u.useEffect)(function(){"edit"===p&&_()},[]);var _=function(){M([s]),C(s),E({gatewayType:s.gatewayType,productMark:s.productMark,productId:s.productId.toString()})};function q(e){if(e){var t={productName:e};F(!0),M([]),g(t).then(function(e){0===e.data.code&&(e.data.data.list.forEach(function(e){e.productid=e.productId}),F(!1),M(e.data.data.list||[]))})}}return q=O()(q,800),d.a.createElement("div",null,d.a.createElement(l.a,{title:"edit"===p?"编辑":"新增",visible:a,onOk:function(){w().then(function(e){var t={};t.gatewayType=e.gatewayType,t.gatewayName=1===e.gatewayType?"IOT路由器":"ZigBee3.0网关",t.productName=T.productName,t.productCode=T.productCode,t.brandName=T.brandName,t.productId=T.productId,t.productMark=e.productMark,"edit"===p?(t={id:s.id,productMark:e.productMark},m(t).then(function(e){0===e.data.code&&(c.a.success("更新成功"),r())})):b(t).then(function(e){0===e.data.code&&(c.a.success("新增成功"),r())})})},onCancel:n,width:"700px",maskClosable:!1},d.a.createElement("div",{className:"gateWay-modal"},d.a.createElement(i.a,{labelCol:{span:6},wrapperCol:{span:14}},d.a.createElement(k,{label:"网关名称"},y("gatewayType",{rules:[{required:!0}]})(d.a.createElement(o.a,{disabled:"edit"===p},f.map(function(e,t){return d.a.createElement(o.a.Option,{key:e.value,value:e.value,label:e.label},e.label)})))),d.a.createElement(k,{label:"网关ID"},d.a.createElement("span",null,S("gatewayType"))),d.a.createElement(k,{label:"产品名称"},y("productId",{rules:[{required:!0}]})(d.a.createElement(o.a,{disabled:"edit"===p,showSearch:!0,placeholder:"输入产品名称",notFoundContent:D?d.a.createElement(h.a,{size:"small"}):null,filterOption:!1,onSearch:q,onChange:function(e){var t=P.find(function(t){return t.productId==e});C(t),F(!1)},style:{width:"100%"}},P.map(function(e){return d.a.createElement(j,{key:e.productId},e.productName)})))),d.a.createElement(k,{label:"产品型号"},d.a.createElement("span",null,T.productCode)),d.a.createElement(k,{label:"品牌"},d.a.createElement("span",null,T.brandName)),d.a.createElement(k,{label:"产品ID"},d.a.createElement("span",null,T.productId)),d.a.createElement(k,{label:"产品标识"},y("productMark",{})(d.a.createElement(v.a,{style:{width:"100%"}})))))))});function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){C(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P=i.a.Item,M=[{value:1,label:"IOT路由器"},{value:2,label:"ZigBee3.0网关"}];t.default=i.a.create()(function(e){var t=e.form,a=t.getFieldDecorator,s=(t.validateFields,t.getFieldsValue),m=x(Object(u.useState)({pageIndex:1,pageRows:10}),2),b=m[0],g=m[1],h=x(Object(u.useState)(0),2),v=h[0],E=h[1],O=x(Object(u.useState)([]),2),I=O[0],k=O[1],j=x(Object(u.useState)(M),2),N=j[0],C=(j[1],x(Object(u.useState)(!1),2)),R=C[0],D=C[1],F=x(Object(u.useState)({}),2),_=F[0],q=F[1],J=x(Object(u.useState)(""),2),V=J[0],A=J[1],B=x(Object(u.useState)(!1),2),G=B[0],L=B[1],z=[{title:"网关名称",dataIndex:"gatewayName",key:"gatewayName"},{title:"网关ID",dataIndex:"gatewayType",key:"gatewayType"},{title:"产品名称",dataIndex:"productName",key:"productName"},{title:"产品型号",dataIndex:"productCode",key:"productCode"},{title:"产品ID",dataIndex:"productId",key:"productId"},{title:"产品标识",dataIndex:"productMark",key:"productMark"},{title:"操作",key:"action",width:180,render:function(e,t){return d.a.createElement("span",null,d.a.createElement("a",{onClick:function(){W(t)},style:{marginRight:"10px"}},"编辑"),d.a.createElement("a",{onClick:function(){Z(t)}},"删除"))}}],Z=function(e){l.a.confirm({title:"删除",okText:"确定",cancelText:"取消",content:"点击确定将删除此数据。",onOk:function(){y({id:e.id}).then(function(e){c.a.success("删除成功"),K()})}})};Object(u.useEffect)(function(){K()},[b.pageRows,b.pageIndex]);var K=function(){var e={};s().gatewayType&&(e.gatewayType=s().gatewayType),e=T(T({},e),b),L(!0),f(e).then(function(e){0==e.data.code&&(k(e.data.data.list),E(e.data.data.pager.totalRows))}).finally(function(){L(!1)})},Q=function(){1===b.pageIndex?K():g({pageIndex:1,pageRows:10})},W=function(e){A("edit"),q(e),D(!0)};return d.a.createElement("div",{className:"gatelMn-page"},d.a.createElement(p.a,{title:"网关子设备"},d.a.createElement("div",{className:"title-space"},d.a.createElement(i.a,{layout:"inline"},d.a.createElement(P,{label:"网关名称"},a("gatewayType")(d.a.createElement(o.a,{style:{width:200},allowClear:!0},N.map(function(e,t){return d.a.createElement(o.a.Option,{key:e.value,value:e.value,label:e.label},e.label)})))),d.a.createElement(P,null,d.a.createElement(r.a,{type:"primary",onClick:function(){return Q()}},"查询")),d.a.createElement(P,null,d.a.createElement(r.a,{onClick:function(){t.resetFields()}},"重置"))),d.a.createElement(r.a,{type:"primary",onClick:function(){A("add"),D(!0)}},"新增子设备"))),d.a.createElement(n.a,null,d.a.createElement(w.a,{rowKey:"id",columns:z,dataSource:I,loading:G,pagination:{defaultCurrent:1,current:b.pageIndex,onChange:function(e,t){t===b.pageRows?g(function(a){var n=JSON.parse(JSON.stringify(a));return Object.assign(n,{pageIndex:e,pageRows:t})}):g(function(e){var a=JSON.parse(JSON.stringify(e));return Object.assign(a,{pageIndex:1,pageRows:t})})},pageSize:b.pageRows,total:v,showQuickJumper:!0,showTotal:function(){return d.a.createElement("span",null,"共 ",d.a.createElement("a",null,v)," 条")}}})),R&&d.a.createElement(S,{addVis:R,handleCancel:function(){D(!1)},handleOk:function(){Q(),D(!1)},optionList:N,modelType:V,actionData:_}))})}}]);